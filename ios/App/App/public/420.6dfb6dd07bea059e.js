"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[420],{7904:(Z,C,n)=>{n.d(C,{E:()=>p});var m=n(5861),s=n(89),r=n(2223);let p=(()=>{class l{constructor(e){this.firestore=e}addItem(e){const c=(0,s.hJ)(this.firestore,"relevamiento");return(0,s.ET)(c,e)}getAllItems(){var e=this;return(0,m.Z)(function*(){const c=(0,s.hJ)(e.firestore,"relevamiento"),u=yield(0,s.PL)((0,s.IO)(c,(0,s.Xo)("fecha","desc"))),g=[];return u.forEach(f=>{const y=f.data();g.push(y)}),g})()}getAllItemsType(e){var c=this;return(0,m.Z)(function*(){const u=(0,s.hJ)(c.firestore,"relevamiento"),g=yield(0,s.PL)((0,s.IO)(u,(0,s.ar)("tipo","==",e)));console.log(g);const f=[];return g.forEach(y=>{const T=y.data();f.push(T)}),f})()}updateItem(e){var c=this;return(0,m.Z)(function*(){const u=(0,s.JU)(c.firestore,"relevamiento",e.id);yield(0,s.pl)(u,e,{merge:!0})})()}}return l.\u0275fac=function(e){return new(e||l)(r.LFG(s.gg))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},420:(Z,C,n)=>{n.r(C),n.d(C,{Tab3PageModule:()=>I});var m=n(4755),s=n(5030),r=n(9972),p=n(5559),l=n(5861),b=n(3192),e=n(2223),c=n(7622),u=n(7904);function g(o,d){1&o&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Feas"),e.qZA()())}function f(o,d){1&o&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Lindas"),e.qZA()())}const T=[{path:"",component:(()=>{class o{constructor(t,a,i,h){this.router=t,this.loginService=a,this.loadingCtrl=i,this.firestoresService=h,this.chartType="bar",this.cosasLindas=[],this.cosasFeas=[],this.uploading=!1}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}getAllData(){var t=this;return(0,l.Z)(function*(){t.uploading=!0;const a=yield t.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield a.present();try{t.cosasLindas=yield t.firestoresService.getAllItemsType("Cosas Lindas"),t.cosasFeas=yield t.firestoresService.getAllItemsType("Cosas Feas"),t.createPieChart(),t.createBarra()}catch(i){console.log("Error al obtener datos:",i)}finally{t.uploading=!1,yield a.dismiss()}})()}createBarra(){const t=document.getElementById("myChart"),a=this.cosasFeas.map(v=>v.name),i=this.cosasFeas.map(v=>v.votos),P=this.generateBackgroundColors(a.length);this.chart=new b.kL(t,{type:"bar",data:{labels:a,datasets:[{label:"Cantidad",data:i,backgroundColor:P}]},options:{responsive:!0,scales:{xAxes:{ticks:{backdropColor:"red",backdropPadding:100,z:0}},yAxes:{grid:{display:!1}}},plugins:{legend:{display:!1}}}}),this.chart.update()}createPieChart(){const t=document.getElementById("pieChart"),a=this.cosasLindas.map(M=>M.name),i=this.cosasLindas.map(M=>M.votos),P=this.generateBackgroundColors(a.length);new b.kL(t,{type:"pie",data:{labels:a,datasets:[{data:i,backgroundColor:P,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}generateBackgroundColors(t){const a=[];for(let i=0;i<t;i++){const h=this.generateRandomColor();a.push(h)}return a}generateRandomColor(){let a="#";for(let i=0;i<6;i++)a+="0123456789ABCDEF"[Math.floor(16*Math.random())];return a}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(c.e),e.Y36(r.HT),e.Y36(u.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tab3"]],decls:16,vars:4,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],[4,"ngIf"],["id","myChart","width","400","height","400"],["id","pieChart","width","400","height","400"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return a.logout()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Gr\xe1ficos "),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-card"),e.YNc(9,g,3,0,"ion-card-header",5),e.TgZ(10,"ion-card-content"),e._UZ(11,"canvas",6),e.qZA()(),e.TgZ(12,"ion-card"),e.YNc(13,f,3,0,"ion-card-header",5),e.TgZ(14,"ion-card-content"),e._UZ(15,"canvas",7),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",!a.uploading),e.xp6(4),e.Q6J("ngIf",!a.uploading))},dependencies:[m.O5,r.YG,r.Sm,r.PM,r.FN,r.Zi,r.Dq,r.W2,r.Gu,r.gu,r.wd,r.sr],styles:["ion-card-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-title[_ngcontent-%COMP%]{color:#f0f8ff}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}ion-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-content[_ngcontent-%COMP%]{--background: url(floor.08978e6a924b6e32.jpg)}ion-card[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-header[_ngcontent-%COMP%]{background-color:#04395b}ion-card-content[_ngcontent-%COMP%]{background-image:url(floor.08978e6a924b6e32.jpg)}"]}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(T),p.Bz]}),o})();var E=n(581);let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,s.u5,r.Pc,E.e,A]}),o})()}}]);