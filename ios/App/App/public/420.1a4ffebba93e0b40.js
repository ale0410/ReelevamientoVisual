"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[420],{7904:(O,b,r)=>{r.d(b,{E:()=>f});var g=r(5861),i=r(89),s=r(2223);let f=(()=>{class d{constructor(l){this.firestore=l}addItem(l){const e=(0,i.hJ)(this.firestore,"relevamiento");return(0,i.ET)(e,l)}getAllItems(){var l=this;return(0,g.Z)(function*(){const e=(0,i.hJ)(l.firestore,"relevamiento"),u=yield(0,i.PL)((0,i.IO)(e,(0,i.Xo)("fecha","desc"))),p=[];return u.forEach(m=>{const C=m.data();p.push(C)}),p})()}getAllItemsType(l){var e=this;return(0,g.Z)(function*(){const u=(0,i.hJ)(e.firestore,"relevamiento"),p=yield(0,i.PL)((0,i.IO)(u,(0,i.ar)("tipo","==",l)));console.log(p);const m=[];return p.forEach(C=>{const M=C.data();m.push(M)}),m})()}updateItem(l){var e=this;return(0,g.Z)(function*(){const u=(0,i.JU)(e.firestore,"relevamiento",l.id);yield(0,i.pl)(u,l,{merge:!0})})()}}return d.\u0275fac=function(l){return new(l||d)(s.LFG(i.gg))},d.\u0275prov=s.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},420:(O,b,r)=>{r.r(b),r.d(b,{Tab3PageModule:()=>S});var g=r(4755),i=r(5030),s=r(9972),f=r(5559),d=r(5861),y=r(3192),l=r(4208),e=r(2223),u=r(7622),p=r(7904);function m(n,c){1&n&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Feas"),e.qZA()())}function C(n,c){1&n&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Lindas"),e.qZA()())}const _=[{path:"",component:(()=>{class n{constructor(t,a,o,h){this.router=t,this.loginService=a,this.loadingCtrl=o,this.firestoresService=h,this.chartType="bar",this.cosasLindas=[],this.cosasFeas=[],this.uploading=!1,this.pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}}},this.pieChartData={labels:[["Download","Sales"],["In","Store","Sales"],"Mail Sales"],datasets:[{data:[300,500,100]}]},this.pieChartType="pie",this.barChartOptions={responsive:!0,scales:{x:{},y:{min:10}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartData={labels:["2006","2007","2008","2009","2010","2011","2012"],datasets:[{data:[65,59,80,81,56,55,40],label:"Series A"},{data:[28,48,40,19,86,27,90],label:"Series B"}]}}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}chartClicked({event:t,active:a}){console.log(t,a)}chartHovered({event:t,active:a}){console.log(t,a)}randomize(){var t;this.barChartData.datasets[0].data=[Math.round(100*Math.random()),59,80,Math.round(100*Math.random()),56,Math.round(100*Math.random()),40],null===(t=this.chart)||void 0===t||t.update()}changeLabels(){var t;const a=["hen","variable","embryo","instal","pleasant","physical","bomber","army","add","film","conductor","comfortable","flourish","establish","circumstance","chimney","crack","hall","energy","treat","window","shareholder","division","disk","temptation","chord","left","hospital","beef","patrol","satisfied","academy","acceptance","ivory","aquarium","building","store","replace","language","redeem","honest","intention","silk","opera","sleep","innocent","ignore","suite","applaud","funny"];this.pieChartData.labels=new Array(3).map(h=>a[Math.trunc(Math.random()*a.length)]),null===(t=this.chart)||void 0===t||t.update()}addSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.push(["Line 1","Line 2","Line 3"]),this.pieChartData.datasets[0].data.push(400),null===(t=this.chart)||void 0===t||t.update()}removeSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.pop(),this.pieChartData.datasets[0].data.pop(),null===(t=this.chart)||void 0===t||t.update()}changeLegendPosition(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.position="left"===this.pieChartOptions.plugins.legend.position?"top":"left"),null===(o=this.chart)||void 0===o||o.render()}toggleLegend(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.display=!this.pieChartOptions.plugins.legend.display),null===(o=this.chart)||void 0===o||o.render()}getAllData(){var t=this;return(0,d.Z)(function*(){t.uploading=!0;const a=yield t.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield a.present();try{t.cosasLindas=yield t.firestoresService.getAllItemsType("Cosas Lindas"),t.cosasFeas=yield t.firestoresService.getAllItemsType("Cosas Feas"),t.createPieChart(),t.createBarra()}catch(o){console.log("Error al obtener datos:",o)}finally{t.uploading=!1,yield a.dismiss()}})()}createBarra(){const t=document.getElementById("myChart"),a=this.cosasFeas.map(v=>v.name),o=this.cosasFeas.map(v=>v.votos),T=this.generateBackgroundColors(a.length);this.chart=new y.kL(t,{type:"bar",data:{labels:a,datasets:[{label:"Cantidad",data:o,backgroundColor:T}]},options:{responsive:!0,scales:{xAxes:{ticks:{backdropColor:"red",backdropPadding:100,z:0}},yAxes:{grid:{display:!1}}},plugins:{legend:{display:!1}}}}),this.chart.update()}createPieChart(){const t=document.getElementById("pieChart"),a=this.cosasLindas.map(P=>P.name),o=this.cosasLindas.map(P=>P.votos),T=this.generateBackgroundColors(a.length);new y.kL(t,{type:"pie",data:{labels:a,datasets:[{data:o,backgroundColor:T,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}generateBackgroundColors(t){const a=[];for(let o=0;o<t;o++){const h=this.generateRandomColor();a.push(h)}return a}generateRandomColor(){let a="#";for(let o=0;o<6;o++)a+="0123456789ABCDEF"[Math.floor(16*Math.random())];return a}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F0),e.Y36(u.e),e.Y36(s.HT),e.Y36(p.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tab3"]],viewQuery:function(t,a){if(1&t&&e.Gf(l.jh,5),2&t){let o;e.iGM(o=e.CRH())&&(a.chartC=o.first)}},decls:16,vars:4,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],[4,"ngIf"],["baseChart","","id","myChart","width","400","data","barChartData","options","barChartOptions","type","barChartType",1,"chart"],["baseChart","","id","pieChart","width","400","data","pieChartData","type","pieChartType","options","pieChartOptions",1,"chart"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return a.logout()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Gr\xe1ficos "),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-card"),e.YNc(9,m,3,0,"ion-card-header",5),e.TgZ(10,"ion-card-content"),e._UZ(11,"canvas",6),e.qZA()(),e.TgZ(12,"ion-card"),e.YNc(13,C,3,0,"ion-card-header",5),e.TgZ(14,"ion-card-content"),e._UZ(15,"canvas",7),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",!a.uploading),e.xp6(4),e.Q6J("ngIf",!a.uploading))},dependencies:[g.O5,s.YG,s.Sm,s.PM,s.FN,s.Zi,s.Dq,s.W2,s.Gu,s.gu,s.wd,s.sr],styles:["ion-card-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-title[_ngcontent-%COMP%]{color:#f0f8ff}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}ion-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-content[_ngcontent-%COMP%]{--background: url(floor.08978e6a924b6e32.jpg)}ion-card[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-header[_ngcontent-%COMP%]{background-color:#04395b}ion-card-content[_ngcontent-%COMP%]{background-image:url(floor.08978e6a924b6e32.jpg)}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(_),f.Bz]}),n})();var D=r(581);let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,i.u5,s.Pc,D.e,A]}),n})()}}]);