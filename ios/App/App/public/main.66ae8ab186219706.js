(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2313:(pn,dt,L)=>{"use strict";L.d(dt,{nm:()=>Jr});var y=L(3324),De=(L(2223),L(3692),L(259),L(5861)),Re=L(6881),he=L(4859),_e=L(2090),Be=L(1877);const U=new Map,we={activated:!1,tokenObservers:[]},je={initialized:!1,enabled:!1};function ge(W){return U.get(W)||Object.assign({},we)}function qe(){return je}const It="https://content-firebaseappcheck.googleapis.com/v1",ct="exchangeDebugToken",at={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class et{constructor(ne,Ee,oe,G,ie){if(this.operation=ne,this.retryPolicy=Ee,this.getWaitDuration=oe,this.lowerBound=G,this.upperBound=ie,this.pending=null,this.nextErrorWaitInterval=G,G>ie)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ne){var Ee=this;return(0,De.Z)(function*(){Ee.stop();try{Ee.pending=new _e.BH,yield function ft(W){return new Promise(ne=>{setTimeout(ne,W)})}(Ee.getNextRun(ne)),Ee.pending.resolve(),yield Ee.pending.promise,Ee.pending=new _e.BH,yield Ee.operation(),Ee.pending.resolve(),yield Ee.pending.promise,Ee.process(!0).catch(()=>{})}catch(oe){Ee.retryPolicy(oe)?Ee.process(!1).catch(()=>{}):Ee.stop()}})()}getNextRun(ne){if(ne)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ee=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ee}}}const Ye=new _e.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ce(){return(ce=(0,De.Z)(function*({url:W,body:ne},Ee){const oe={"Content-Type":"application/json"},G=Ee.getImmediate({optional:!0});if(G){const gn=yield G.getHeartbeatsHeader();gn&&(oe["X-Firebase-Client"]=gn)}const ie={method:"POST",body:JSON.stringify(ne),headers:oe};let $e,Xe;try{$e=yield fetch(W,ie)}catch(gn){throw Ye.create("fetch-network-error",{originalErrorMessage:null==gn?void 0:gn.message})}if(200!==$e.status)throw Ye.create("fetch-status-error",{httpStatus:$e.status});try{Xe=yield $e.json()}catch(gn){throw Ye.create("fetch-parse-error",{originalErrorMessage:null==gn?void 0:gn.message})}const ut=Xe.ttl.match(/^([\d.]+)(s)$/);if(!ut||!ut[2]||isNaN(Number(ut[1])))throw Ye.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Xe.ttl}`});const Rt=1e3*Number(ut[1]),cn=Date.now();return{token:Xe.token,expireTimeMillis:cn+Rt,issuedAtTimeMillis:cn}})).apply(this,arguments)}const Ne="firebase-app-check-database",Fe=1,He="firebase-app-check-store";let lt=null;function Qt(){return(Qt=(0,De.Z)(function*(W,ne){const oe=(yield function Mt(){return lt||(lt=new Promise((W,ne)=>{try{const Ee=indexedDB.open(Ne,Fe);Ee.onsuccess=oe=>{W(oe.target.result)},Ee.onerror=oe=>{var G;ne(Ye.create("storage-open",{originalErrorMessage:null===(G=oe.target.error)||void 0===G?void 0:G.message}))},Ee.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(He,{keyPath:"compositeKey"})}}catch(Ee){ne(Ye.create("storage-open",{originalErrorMessage:null==Ee?void 0:Ee.message}))}}),lt)}()).transaction(He,"readwrite"),ie=oe.objectStore(He).put({compositeKey:W,value:ne});return new Promise(($e,Xe)=>{ie.onsuccess=ut=>{$e()},oe.onerror=ut=>{var Rt;Xe(Ye.create("storage-set",{originalErrorMessage:null===(Rt=ut.target.error)||void 0===Rt?void 0:Rt.message}))}})})).apply(this,arguments)}const Nt=new Be.Yd("@firebase/app-check");function or(W,ne){return(0,_e.hl)()?function un(W,ne){return function Ot(W,ne){return Qt.apply(this,arguments)}(function Dn(W){return`${W.options.appId}-${W.name}`}(W),ne)}(W,ne).catch(Ee=>{Nt.warn(`Failed to write token to IndexedDB. Error: ${Ee}`)}):Promise.resolve()}function dr(){return(dr=(0,De.Z)(function*(){const W=qe();if(W.enabled&&W.token)return W.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Or={error:"UNKNOWN_ERROR"};function Nr(W){return _e.US.encodeString(JSON.stringify(W),!1)}function Sn(W){return vn.apply(this,arguments)}function vn(){return(vn=(0,De.Z)(function*(W,ne=!1){const Ee=W.app;!function _t(W){if(!ge(W).activated)throw Ye.create("use-before-activation",{appName:W.name})}(Ee);const oe=ge(Ee);let ie,G=oe.token;if(G&&!Rn(G)&&(oe.token=void 0,G=void 0),!G){const ut=yield oe.cachedTokenPromise;ut&&(Rn(ut)?G=ut:yield or(Ee,void 0))}if(!ne&&G&&Rn(G))return{token:G.token};let Xe,$e=!1;if(function tn(){return qe().enabled}()){oe.exchangeTokenPromise||(oe.exchangeTokenPromise=function Et(W,ne){return ce.apply(this,arguments)}(function We(W,ne){const{projectId:Ee,appId:oe,apiKey:G}=W.options;return{url:`${It}/projects/${Ee}/apps/${oe}:${ct}?key=${G}`,body:{debug_token:ne}}}(Ee,yield function xr(){return dr.apply(this,arguments)}()),W.heartbeatServiceProvider).finally(()=>{oe.exchangeTokenPromise=void 0}),$e=!0);const ut=yield oe.exchangeTokenPromise;return yield or(Ee,ut),oe.token=ut,{token:ut.token}}try{oe.exchangeTokenPromise||(oe.exchangeTokenPromise=oe.provider.getToken().finally(()=>{oe.exchangeTokenPromise=void 0}),$e=!0),G=yield ge(Ee).exchangeTokenPromise}catch(ut){"appCheck/throttled"===ut.code?Nt.warn(ut.message):Nt.error(ut),ie=ut}return G?ie?Xe=Rn(G)?{token:G.token,internalError:ie}:ci(ie):(Xe={token:G.token},oe.token=G,yield or(Ee,G)):Xe=ci(ie),$e&&function Gn(W,ne){const Ee=ge(W).tokenObservers;for(const oe of Ee)try{"EXTERNAL"===oe.type&&null!=ne.error?oe.error(ne.error):oe.next(ne)}catch{}}(Ee,Xe),Xe})).apply(this,arguments)}function ar(W,ne){const Ee=ge(W),oe=Ee.tokenObservers.filter(G=>G.next!==ne);0===oe.length&&Ee.tokenRefresher&&Ee.tokenRefresher.isRunning()&&Ee.tokenRefresher.stop(),Ee.tokenObservers=oe}function Lr(W){const{app:ne}=W,Ee=ge(ne);let oe=Ee.tokenRefresher;oe||(oe=function Mr(W){const{app:ne}=W;return new et((0,De.Z)(function*(){let oe;if(oe=ge(ne).token?yield Sn(W,!0):yield Sn(W),oe.error)throw oe.error;if(oe.internalError)throw oe.internalError}),()=>!0,()=>{const Ee=ge(ne);if(Ee.token){let oe=Ee.token.issuedAtTimeMillis+.5*(Ee.token.expireTimeMillis-Ee.token.issuedAtTimeMillis)+3e5;return oe=Math.min(oe,Ee.token.expireTimeMillis-3e5),Math.max(0,oe-Date.now())}return 0},at.RETRIAL_MIN_WAIT,at.RETRIAL_MAX_WAIT)}(W),Ee.tokenRefresher=oe),!oe.isRunning()&&Ee.isTokenAutoRefreshEnabled&&oe.start()}function Rn(W){return W.expireTimeMillis-Date.now()>0}function ci(W){return{token:Nr(Or),error:W}}class Un{constructor(ne,Ee){this.app=ne,this.heartbeatServiceProvider=Ee}_delete(){const{tokenObservers:ne}=ge(this.app);for(const Ee of ne)ar(this.app,Ee.next);return Promise.resolve()}}const _n="app-check-internal";!function Nn(){(0,Re._registerComponent)(new he.wA("app-check",W=>function qt(W,ne){return new Un(W,ne)}(W.getProvider("app").getImmediate(),W.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((W,ne,Ee)=>{W.getProvider(_n).initialize()})),(0,Re._registerComponent)(new he.wA(_n,W=>function me(W){return{getToken:ne=>Sn(W,ne),addTokenListener:ne=>function vr(W,ne,Ee,oe){const{app:G}=W,ie=ge(G);if(ie.tokenObservers=[...ie.tokenObservers,{next:Ee,error:oe,type:ne}],ie.token&&Rn(ie.token)){const Xe=ie.token;Promise.resolve().then(()=>{Ee({token:Xe.token}),Lr(W)}).catch(()=>{})}ie.cachedTokenPromise.then(()=>Lr(W))}(W,"INTERNAL",ne),removeTokenListener:ne=>ar(W.app,ne)}}(W.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)("@firebase/app-check","0.7.0")}();class Jr{constructor(){return(0,y.vb)("app-check")}}typeof window<"u"&&window},3692:(pn,dt,L)=>{"use strict";L.d(dt,{Ot:()=>ve,ZF:()=>Ae,hX:()=>ge,z6:()=>De});var y=L(259),m=L(2223),le=L(3324);class ve{constructor(et){return et}}class De{constructor(){return(0,y.C6)()}}const _e=new m.OlP("angularfire2._apps"),Be={provide:ve,useFactory:function he(ze){return ze&&1===ze.length?ze[0]:new ve((0,y.Mq)())},deps:[[new m.FiY,_e]]},U={provide:De,deps:[[new m.FiY,_e]]};function we(ze){return(et,ft)=>{const vt=et.runOutsideAngular(()=>ze(ft));return new ve(vt)}}let je=(()=>{class ze{constructor(ft){(0,y.KN)("angularfire",le.q4.full,"core"),(0,y.KN)("angularfire",le.q4.full,"app"),(0,y.KN)("angular",m.q4F.full,ft.toString())}}return ze.\u0275fac=function(ft){return new(ft||ze)(m.LFG(m.Lbi))},ze.\u0275mod=m.oAB({type:ze}),ze.\u0275inj=m.cJS({providers:[Be,U]}),ze})();function ge(ze,...et){return{ngModule:je,providers:[{provide:_e,useFactory:we(ze),multi:!0,deps:[m.R0b,m.zs3,le.HU,...et]}]}}const Ae=(0,le.u3)(y.ZF,!0)},3385:(pn,dt,L)=>{"use strict";L.d(dt,{zQ:()=>pt,ww:()=>Et,rT:()=>Ye,f7:()=>_t,L6:()=>ft,_Q:()=>vt,lh:()=>Le,Qv:()=>et,nw:()=>nt});var y=L(2223),m=L(7579),le=L(9646),ve=L(9751),De=L(8996),Re=L(6451),he=L(5363),_e=L(3900),Be=L(4004),U=L(3151),we=L(590),je=L(576);function ge(ce,xe){return(0,je.m)(xe)?(0,_e.w)(()=>ce,xe):(0,_e.w)(()=>ce)}var Ue=L(9468),qe=L(9300),It=L(3324),Ae=L(2011),Ce=L(4755),ct=L(2313),at=L(9260);const et=new y.OlP("angularfire2.auth.use-emulator"),ft=new y.OlP("angularfire2.auth.settings"),vt=new y.OlP("angularfire2.auth.tenant-id"),Ye=new y.OlP("angularfire2.auth.langugage-code"),Le=new y.OlP("angularfire2.auth.use-device-language"),_t=new y.OlP("angularfire.auth.persistence"),nt=(ce,xe,Ve,We,Ne,Fe,He,mt)=>(0,Ae.cc)(`${ce.name}.auth`,"AngularFireAuth",ce.name,()=>{const lt=xe.runOutsideAngular(()=>ce.auth());if(Ve&&lt.useEmulator(...Ve),We&&(lt.tenantId=We),lt.languageCode=Ne,Fe&&lt.useDeviceLanguage(),He)for(const[Mt,Pt]of Object.entries(He))lt.settings[Mt]=Pt;return mt&&lt.setPersistence(mt),lt},[Ve,We,Ne,Fe,He,mt]);let pt=(()=>{class ce{constructor(Ve,We,Ne,Fe,He,mt,lt,Mt,Pt,un,Tt,Je){const Ot=new m.x,Qt=(0,le.of)(void 0).pipe((0,he.Q)(He.outsideAngular),(0,_e.w)(()=>Fe.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9568)))),(0,Be.U)(()=>(0,Ae.on)(Ve,Fe,We)),(0,Be.U)(yn=>nt(yn,Fe,mt,Mt,Pt,un,lt,Tt)),(0,U.d)({bufferSize:1,refCount:!1}));if((0,Ce.PM)(Ne))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,le.of)(null);else{Qt.pipe((0,we.P)()).subscribe();const Tn=Qt.pipe((0,_e.w)(In=>In.getRedirectResult().then(Ft=>Ft,()=>null)),It.iC,(0,U.d)({bufferSize:1,refCount:!1})),Dn=Qt.pipe((0,_e.w)(In=>new ve.y(Ft=>({unsubscribe:Fe.runOutsideAngular(()=>In.onAuthStateChanged(or=>Ft.next(or),or=>Ft.error(or),()=>Ft.complete()))})))),Nt=Qt.pipe((0,_e.w)(In=>new ve.y(Ft=>({unsubscribe:Fe.runOutsideAngular(()=>In.onIdTokenChanged(or=>Ft.next(or),or=>Ft.error(or),()=>Ft.complete()))}))));this.authState=Tn.pipe(ge(Dn),(0,Ue.R)(He.outsideAngular),(0,he.Q)(He.insideAngular)),this.user=Tn.pipe(ge(Nt),(0,Ue.R)(He.outsideAngular),(0,he.Q)(He.insideAngular)),this.idToken=this.user.pipe((0,_e.w)(In=>In?(0,De.D)(In.getIdToken()):(0,le.of)(null))),this.idTokenResult=this.user.pipe((0,_e.w)(In=>In?(0,De.D)(In.getIdTokenResult()):(0,le.of)(null))),this.credential=(0,Re.T)(Tn,Ot,this.authState.pipe((0,qe.h)(In=>!In))).pipe((0,Be.U)(In=>null!=In&&In.user?In:null),(0,Ue.R)(He.outsideAngular),(0,he.Q)(He.insideAngular))}return(0,Ae.pX)(this,Qt,Fe,{spy:{apply:(yn,Tn,Dn)=>{(yn.startsWith("signIn")||yn.startsWith("createUser"))&&Dn.then(Nt=>Ot.next(Nt))}}})}}return ce.\u0275fac=function(Ve){return new(Ve||ce)(y.LFG(Ae.Dh),y.LFG(Ae.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(It.HU),y.LFG(et,8),y.LFG(ft,8),y.LFG(vt,8),y.LFG(Ye,8),y.LFG(Le,8),y.LFG(_t,8),y.LFG(ct.nm,8))},ce.\u0275prov=y.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"any"}),ce})(),Et=(()=>{class ce{constructor(){at.Z.registerVersion("angularfire",It.q4.full,"auth-compat")}}return ce.\u0275fac=function(Ve){return new(Ve||ce)},ce.\u0275mod=y.oAB({type:ce}),ce.\u0275inj=y.cJS({providers:[pt]}),ce})()},1085:(pn,dt,L)=>{"use strict";L.d(dt,{ST:()=>ci,yb:()=>Un});var y=L(2223),m=L(4986),le=L(9751),ve=L(8996),De=L(9646),Re=L(3324),he=L(8675),_e=L(1520),Be=L(4004),U=L(5026),we=L(1884),je=L(9300),ge=L(2011),Ue=L(4755),It=(L(9568),L(3942)),Ae=L(2810),Ce=L(2090),ct=L(4859);function et(qt,me){if(void 0===me)return{merge:!1};if(void 0!==me.mergeFields&&void 0!==me.merge)throw new Ae.WA("invalid-argument",`Invalid options passed to function ${qt}(): You cannot specify both "merge" and "mergeFields".`);return me}function ft(){if(typeof Uint8Array>"u")throw new Ae.WA("unimplemented","Uint8Arrays are not available in this environment.")}function vt(){if(!(0,Ae.Me)())throw new Ae.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ye{constructor(me){this._delegate=me}static fromBase64String(me){return vt(),new Ye(Ae.Jj.fromBase64String(me))}static fromUint8Array(me){return ft(),new Ye(Ae.Jj.fromUint8Array(me))}toBase64(){return vt(),this._delegate.toBase64()}toUint8Array(){return ft(),this._delegate.toUint8Array()}isEqual(me){return this._delegate.isEqual(me._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Le(qt){return function _t(qt,me){if("object"!=typeof qt||null===qt)return!1;const Ge=qt;for(const At of me)if(At in Ge&&"function"==typeof Ge[At])return!0;return!1}(qt,["next","error","complete"])}class nt{enableIndexedDbPersistence(me,Ge){return(0,Ae.ST)(me._delegate,{forceOwnership:Ge})}enableMultiTabIndexedDbPersistence(me){return(0,Ae.fH)(me._delegate)}clearIndexedDbPersistence(me){return(0,Ae.Fc)(me._delegate)}}class pt{constructor(me,Ge,At){this._delegate=Ge,this._persistenceProvider=At,this.INTERNAL={delete:()=>this.terminate()},me instanceof Ae.l7||(this._appCompat=me)}get _databaseId(){return this._delegate._databaseId}settings(me){const Ge=this._delegate._getSettings();!me.merge&&Ge.host!==me.host&&(0,Ae.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),me.merge&&delete(me=Object.assign(Object.assign({},Ge),me)).merge,this._delegate._setSettings(me)}useEmulator(me,Ge,At={}){(0,Ae.at)(this._delegate,me,Ge,At)}enableNetwork(){return(0,Ae.Ix)(this._delegate)}disableNetwork(){return(0,Ae.TF)(this._delegate)}enablePersistence(me){let Ge=!1,At=!1;return me&&(Ge=!!me.synchronizeTabs,At=!!me.experimentalForceOwningTab,(0,Ae.Wi)("synchronizeTabs",Ge,"experimentalForceOwningTab",At)),Ge?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,At)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ae.Mx)(this._delegate)}onSnapshotsInSync(me){return(0,Ae.sc)(this._delegate,me)}get app(){if(!this._appCompat)throw new Ae.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(me){try{return new Je(this,(0,Ae.hJ)(this._delegate,me))}catch(Ge){throw Fe(Ge,"collection()","Firestore.collection()")}}doc(me){try{return new Ne(this,(0,Ae.JU)(this._delegate,me))}catch(Ge){throw Fe(Ge,"doc()","Firestore.doc()")}}collectionGroup(me){try{return new Pt(this,(0,Ae.B$)(this._delegate,me))}catch(Ge){throw Fe(Ge,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(me){return(0,Ae.i3)(this._delegate,Ge=>me(new xe(this,Ge)))}batch(){return(0,Ae.qY)(this._delegate),new Ve(new Ae.PU(this._delegate,me=>(0,Ae.GL)(this._delegate,me)))}loadBundle(me){return(0,Ae.Pb)(this._delegate,me)}namedQuery(me){return(0,Ae.L$)(this._delegate,me).then(Ge=>Ge?new Pt(this,Ge):null)}}class Et extends Ae.u7{constructor(me){super(),this.firestore=me}convertBytes(me){return new Ye(new Ae.Jj(me))}convertReference(me){const Ge=this.convertDocumentKey(me,this.firestore._databaseId);return Ne.forKey(Ge,this.firestore,null)}}class xe{constructor(me,Ge){this._firestore=me,this._delegate=Ge,this._userDataWriter=new Et(me)}get(me){const Ge=Ot(me);return this._delegate.get(Ge).then(At=>new lt(this._firestore,new Ae.xU(this._firestore._delegate,this._userDataWriter,At._key,At._document,At.metadata,Ge.converter)))}set(me,Ge,At){const Xt=Ot(me);return At?(et("Transaction.set",At),this._delegate.set(Xt,Ge,At)):this._delegate.set(Xt,Ge),this}update(me,Ge,At,...Xt){const sn=Ot(me);return 2===arguments.length?this._delegate.update(sn,Ge):this._delegate.update(sn,Ge,At,...Xt),this}delete(me){const Ge=Ot(me);return this._delegate.delete(Ge),this}}class Ve{constructor(me){this._delegate=me}set(me,Ge,At){const Xt=Ot(me);return At?(et("WriteBatch.set",At),this._delegate.set(Xt,Ge,At)):this._delegate.set(Xt,Ge),this}update(me,Ge,At,...Xt){const sn=Ot(me);return 2===arguments.length?this._delegate.update(sn,Ge):this._delegate.update(sn,Ge,At,...Xt),this}delete(me){const Ge=Ot(me);return this._delegate.delete(Ge),this}commit(){return this._delegate.commit()}}class We{constructor(me,Ge,At){this._firestore=me,this._userDataWriter=Ge,this._delegate=At}fromFirestore(me,Ge){const At=new Ae.$q(this._firestore._delegate,this._userDataWriter,me._key,me._document,me.metadata,null);return this._delegate.fromFirestore(new Mt(this._firestore,At),null!=Ge?Ge:{})}toFirestore(me,Ge){return Ge?this._delegate.toFirestore(me,Ge):this._delegate.toFirestore(me)}static getInstance(me,Ge){const At=We.INSTANCES;let Xt=At.get(me);Xt||(Xt=new WeakMap,At.set(me,Xt));let sn=Xt.get(Ge);return sn||(sn=new We(me,new Et(me),Ge),Xt.set(Ge,sn)),sn}}We.INSTANCES=new WeakMap;class Ne{constructor(me,Ge){this.firestore=me,this._delegate=Ge,this._userDataWriter=new Et(me)}static forPath(me,Ge,At){if(me.length%2!=0)throw new Ae.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${me.canonicalString()} has ${me.length}`);return new Ne(Ge,new Ae.my(Ge._delegate,At,new Ae.Ky(me)))}static forKey(me,Ge,At){return new Ne(Ge,new Ae.my(Ge._delegate,At,me))}get id(){return this._delegate.id}get parent(){return new Je(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(me){try{return new Je(this.firestore,(0,Ae.hJ)(this._delegate,me))}catch(Ge){throw Fe(Ge,"collection()","DocumentReference.collection()")}}isEqual(me){return(me=(0,Ce.m9)(me))instanceof Ae.my&&(0,Ae.Eo)(this._delegate,me)}set(me,Ge){Ge=et("DocumentReference.set",Ge);try{return Ge?(0,Ae.pl)(this._delegate,me,Ge):(0,Ae.pl)(this._delegate,me)}catch(At){throw Fe(At,"setDoc()","DocumentReference.set()")}}update(me,Ge,...At){try{return 1===arguments.length?(0,Ae.r7)(this._delegate,me):(0,Ae.r7)(this._delegate,me,Ge,...At)}catch(Xt){throw Fe(Xt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ae.oe)(this._delegate)}onSnapshot(...me){const Ge=He(me),At=mt(me,Xt=>new lt(this.firestore,new Ae.xU(this.firestore._delegate,this._userDataWriter,Xt._key,Xt._document,Xt.metadata,this._delegate.converter)));return(0,Ae.cf)(this._delegate,Ge,At)}get(me){let Ge;return Ge="cache"===(null==me?void 0:me.source)?(0,Ae.kl)(this._delegate):"server"===(null==me?void 0:me.source)?(0,Ae.Xk)(this._delegate):(0,Ae.QT)(this._delegate),Ge.then(At=>new lt(this.firestore,new Ae.xU(this.firestore._delegate,this._userDataWriter,At._key,At._document,At.metadata,this._delegate.converter)))}withConverter(me){return new Ne(this.firestore,this._delegate.withConverter(me?We.getInstance(this.firestore,me):null))}}function Fe(qt,me,Ge){return qt.message=qt.message.replace(me,Ge),qt}function He(qt){for(const me of qt)if("object"==typeof me&&!Le(me))return me;return{}}function mt(qt,me){var Ge,At;let Xt;return Xt=Le(qt[0])?qt[0]:Le(qt[1])?qt[1]:"function"==typeof qt[0]?{next:qt[0],error:qt[1],complete:qt[2]}:{next:qt[1],error:qt[2],complete:qt[3]},{next:sn=>{Xt.next&&Xt.next(me(sn))},error:null===(Ge=Xt.error)||void 0===Ge?void 0:Ge.bind(Xt),complete:null===(At=Xt.complete)||void 0===At?void 0:At.bind(Xt)}}class lt{constructor(me,Ge){this._firestore=me,this._delegate=Ge}get ref(){return new Ne(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(me){return this._delegate.data(me)}get(me,Ge){return this._delegate.get(me,Ge)}isEqual(me){return(0,Ae.qK)(this._delegate,me._delegate)}}class Mt extends lt{data(me){const Ge=this._delegate.data(me);return(0,Ae.K9)(void 0!==Ge,"Document in a QueryDocumentSnapshot should exist"),Ge}}class Pt{constructor(me,Ge){this.firestore=me,this._delegate=Ge,this._userDataWriter=new Et(me)}where(me,Ge,At){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.ar)(me,Ge,At)))}catch(Xt){throw Fe(Xt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(me,Ge){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Xo)(me,Ge)))}catch(At){throw Fe(At,/(orderBy|where)\(\)/,"Query.$1()")}}limit(me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.b9)(me)))}catch(Ge){throw Fe(Ge,"limit()","Query.limit()")}}limitToLast(me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.vh)(me)))}catch(Ge){throw Fe(Ge,"limitToLast()","Query.limitToLast()")}}startAt(...me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.e0)(...me)))}catch(Ge){throw Fe(Ge,"startAt()","Query.startAt()")}}startAfter(...me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.TQ)(...me)))}catch(Ge){throw Fe(Ge,"startAfter()","Query.startAfter()")}}endBefore(...me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Lx)(...me)))}catch(Ge){throw Fe(Ge,"endBefore()","Query.endBefore()")}}endAt(...me){try{return new Pt(this.firestore,(0,Ae.IO)(this._delegate,(0,Ae.Wu)(...me)))}catch(Ge){throw Fe(Ge,"endAt()","Query.endAt()")}}isEqual(me){return(0,Ae.iE)(this._delegate,me._delegate)}get(me){let Ge;return Ge="cache"===(null==me?void 0:me.source)?(0,Ae.UQ)(this._delegate):"server"===(null==me?void 0:me.source)?(0,Ae.zN)(this._delegate):(0,Ae.PL)(this._delegate),Ge.then(At=>new Tt(this.firestore,new Ae.W(this.firestore._delegate,this._userDataWriter,this._delegate,At._snapshot)))}onSnapshot(...me){const Ge=He(me),At=mt(me,Xt=>new Tt(this.firestore,new Ae.W(this.firestore._delegate,this._userDataWriter,this._delegate,Xt._snapshot)));return(0,Ae.cf)(this._delegate,Ge,At)}withConverter(me){return new Pt(this.firestore,this._delegate.withConverter(me?We.getInstance(this.firestore,me):null))}}class un{constructor(me,Ge){this._firestore=me,this._delegate=Ge}get type(){return this._delegate.type}get doc(){return new Mt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tt{constructor(me,Ge){this._firestore=me,this._delegate=Ge}get query(){return new Pt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(me=>new Mt(this._firestore,me))}docChanges(me){return this._delegate.docChanges(me).map(Ge=>new un(this._firestore,Ge))}forEach(me,Ge){this._delegate.forEach(At=>{me.call(Ge,new Mt(this._firestore,At))})}isEqual(me){return(0,Ae.qK)(this._delegate,me._delegate)}}class Je extends Pt{constructor(me,Ge){super(me,Ge),this.firestore=me,this._delegate=Ge}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const me=this._delegate.parent;return me?new Ne(this.firestore,me):null}doc(me){try{return new Ne(this.firestore,void 0===me?(0,Ae.JU)(this._delegate):(0,Ae.JU)(this._delegate,me))}catch(Ge){throw Fe(Ge,"doc()","CollectionReference.doc()")}}add(me){return(0,Ae.ET)(this._delegate,me).then(Ge=>new Ne(this.firestore,Ge))}isEqual(me){return(0,Ae.Eo)(this._delegate,me._delegate)}withConverter(me){return new Je(this.firestore,this._delegate.withConverter(me?We.getInstance(this.firestore,me):null))}}function Ot(qt){return(0,Ae.Cf)(qt,Ae.my)}class Qt{constructor(...me){this._delegate=new Ae.Lz(...me)}static documentId(){return new Qt(Ae.Xb.keyField().canonicalString())}isEqual(me){return(me=(0,Ce.m9)(me))instanceof Ae.Lz&&this._delegate._internalPath.isEqual(me._internalPath)}}class yn{constructor(me){this._delegate=me}static serverTimestamp(){const me=(0,Ae.Bt)();return me._methodName="FieldValue.serverTimestamp",new yn(me)}static delete(){const me=(0,Ae.AK)();return me._methodName="FieldValue.delete",new yn(me)}static arrayUnion(...me){const Ge=(0,Ae.vr)(...me);return Ge._methodName="FieldValue.arrayUnion",new yn(Ge)}static arrayRemove(...me){const Ge=(0,Ae.Ab)(...me);return Ge._methodName="FieldValue.arrayRemove",new yn(Ge)}static increment(me){const Ge=(0,Ae.nP)(me);return Ge._methodName="FieldValue.increment",new yn(Ge)}isEqual(me){return this._delegate.isEqual(me._delegate)}}const Tn={Firestore:pt,GeoPoint:Ae.F8,Timestamp:Ae.EK,Blob:Ye,Transaction:xe,WriteBatch:Ve,DocumentReference:Ne,DocumentSnapshot:lt,Query:Pt,QueryDocumentSnapshot:Mt,QuerySnapshot:Tt,CollectionReference:Je,FieldPath:Qt,FieldValue:yn,setLogLevel:function ce(qt){(0,Ae.Ub)(qt)},CACHE_SIZE_UNLIMITED:Ae.IX};!function Nt(qt){(function Dn(qt,me){qt.INTERNAL.registerComponent(new ct.wA("firestore-compat",Ge=>{const At=Ge.getProvider("app-compat").getImmediate(),Xt=Ge.getProvider("firestore").getImmediate();return me(At,Xt)},"PUBLIC").setServiceProps(Object.assign({},Tn)))})(qt,(me,Ge)=>new pt(me,Ge,new nt)),qt.registerVersion("@firebase/firestore-compat","0.3.9")}(It.Z);var In=L(3385),Ft=L(2313),or=L(9260);function yr(qt,me){return function sr(qt,me=m.z){return new le.y(Ge=>{let At;return null!=me?me.schedule(()=>{At=qt.onSnapshot({includeMetadataChanges:!0},Ge)}):At=qt.onSnapshot({includeMetadataChanges:!0},Ge),()=>{null!=At&&At()}})}(qt,me)}function xr(qt,me){return yr(qt,me).pipe((0,Be.U)(Ge=>({payload:Ge,type:"query"})))}function dr(qt,me){return xr(qt,me).pipe((0,he.O)(void 0),(0,_e.G)(),(0,Be.U)(([Ge,At])=>{const Xt=At.payload.docChanges(),sn=Xt.map(lr=>({type:lr.type,payload:lr}));return Ge&&JSON.stringify(Ge.payload.metadata)!==JSON.stringify(At.payload.metadata)&&At.payload.docs.forEach((lr,On)=>{const _r=Xt.find(de=>de.doc.ref.isEqual(lr.ref)),Qe=null==Ge?void 0:Ge.payload.docs.find(de=>de.ref.isEqual(lr.ref));_r&&JSON.stringify(_r.doc.metadata)===JSON.stringify(lr.metadata)||!_r&&Qe&&JSON.stringify(Qe.metadata)===JSON.stringify(lr.metadata)||sn.push({type:"modified",payload:{oldIndex:On,newIndex:On,type:"modified",doc:lr}})}),sn}))}function rr(qt,me,Ge){return dr(qt,Ge).pipe((0,U.R)((At,Xt)=>function Or(qt,me,Ge){return me.forEach(At=>{Ge.indexOf(At.type)>-1&&(qt=function Sn(qt,me){switch(me.type){case"added":if(!qt[me.newIndex]||!qt[me.newIndex].doc.ref.isEqual(me.doc.ref))return Nr(qt,me.newIndex,0,me);break;case"modified":if(null==qt[me.oldIndex]||qt[me.oldIndex].doc.ref.isEqual(me.doc.ref)){if(me.oldIndex!==me.newIndex){const Ge=qt.slice();return Ge.splice(me.oldIndex,1),Ge.splice(me.newIndex,0,me),Ge}return Nr(qt,me.newIndex,1,me)}break;case"removed":if(qt[me.oldIndex]&&qt[me.oldIndex].doc.ref.isEqual(me.doc.ref))return Nr(qt,me.oldIndex,1)}return qt}(qt,At))}),qt}(At,Xt.map(sn=>sn.payload),me),[]),(0,we.x)(),(0,Be.U)(At=>At.map(Xt=>({type:Xt.type,payload:Xt}))))}function Nr(qt,me,Ge,...At){const Xt=qt.slice();return Xt.splice(me,Ge,...At),Xt}function vn(qt){return(!qt||0===qt.length)&&(qt=["added","removed","modified"]),qt}class $n{constructor(me,Ge,At){this.ref=me,this.query=Ge,this.afs=At}stateChanges(me){let Ge=dr(this.query,this.afs.schedulers.outsideAngular);return me&&me.length>0&&(Ge=Ge.pipe((0,Be.U)(At=>At.filter(Xt=>me.indexOf(Xt.type)>-1)))),Ge.pipe((0,he.O)(void 0),(0,_e.G)(),(0,je.h)(([At,Xt])=>Xt.length>0||!At),(0,Be.U)(([At,Xt])=>Xt),Re.iC)}auditTrail(me){return this.stateChanges(me).pipe((0,U.R)((Ge,At)=>[...Ge,...At],[]))}snapshotChanges(me){const Ge=vn(me);return rr(this.query,Ge,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(me={}){return xr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(Ge=>Ge.payload.docs.map(At=>me.idField?Object.assign(Object.assign({},At.data()),{[me.idField]:At.id}):At.data())),Re.iC)}get(me){return(0,ve.D)(this.query.get(me)).pipe(Re.iC)}add(me){return this.ref.add(me)}doc(me){return new Ir(this.ref.doc(me),this.afs)}}class Ir{constructor(me,Ge){this.ref=me,this.afs=Ge}set(me,Ge){return this.ref.set(me,Ge)}update(me){return this.ref.update(me)}delete(){return this.ref.delete()}collection(me,Ge){const At=this.ref.collection(me),{ref:Xt,query:sn}=Rn(At,Ge);return new $n(Xt,sn,this.afs)}snapshotChanges(){return function tn(qt,me){return yr(qt,me).pipe((0,he.O)(void 0),(0,_e.G)(),(0,Be.U)(([Ge,At])=>At.exists?null!=Ge&&Ge.exists?{payload:At,type:"modified"}:{payload:At,type:"added"}:{payload:At,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(me={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:Ge})=>me.idField?Object.assign(Object.assign({},Ge.data()),{[me.idField]:Ge.id}):Ge.data()))}get(me){return(0,ve.D)(this.ref.get(me)).pipe(Re.iC)}}class vr{constructor(me,Ge){this.query=me,this.afs=Ge}stateChanges(me){return me&&0!==me.length?dr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(Ge=>Ge.filter(At=>me.indexOf(At.type)>-1)),(0,je.h)(Ge=>Ge.length>0),Re.iC):dr(this.query,this.afs.schedulers.outsideAngular).pipe(Re.iC)}auditTrail(me){return this.stateChanges(me).pipe((0,U.R)((Ge,At)=>[...Ge,...At],[]))}snapshotChanges(me){const Ge=vn(me);return rr(this.query,Ge,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(me={}){return xr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(At=>At.payload.docs.map(Xt=>me.idField?Object.assign({[me.idField]:Xt.id},Xt.data()):Xt.data())),Re.iC)}get(me){return(0,ve.D)(this.query.get(me)).pipe(Re.iC)}}const ar=new y.OlP("angularfire2.enableFirestorePersistence"),Lr=new y.OlP("angularfire2.firestore.persistenceSettings"),Mr=new y.OlP("angularfire2.firestore.settings"),Gn=new y.OlP("angularfire2.firestore.use-emulator");function Rn(qt,me=(Ge=>Ge)){return{query:me(qt),ref:qt}}let ci=(()=>{class qt{constructor(Ge,At,Xt,sn,lr,On,_r,Qe,de,K,z,q,Pe,it,ke,ht,Ct){this.schedulers=_r;const jt=(0,ge.on)(Ge,On,At),Ut=de;K&&(0,In.nw)(jt,On,z,Pe,it,ke,q,ht),[this.firestore,this.persistenceEnabled$]=(0,ge.cc)(`${jt.name}.firestore`,"AngularFirestore",jt.name,()=>{const on=On.runOutsideAngular(()=>jt.firestore());if(sn&&on.settings(sn),Ut&&on.useEmulator(...Ut),Xt&&!(0,Ue.PM)(lr)){const fn=()=>{try{return(0,ve.D)(on.enablePersistence(Qe||void 0).then(()=>!0,()=>!1))}catch(Wn){return typeof console<"u"&&console.warn(Wn),(0,De.of)(!1)}};return[on,On.runOutsideAngular(fn)]}return[on,(0,De.of)(!1)]},[sn,Ut,Xt])}collection(Ge,At){let Xt;Xt="string"==typeof Ge?this.firestore.collection(Ge):Ge;const{ref:sn,query:lr}=Rn(Xt,At),On=this.schedulers.ngZone.run(()=>sn);return new $n(On,lr,this)}collectionGroup(Ge,At){const Xt=At||(lr=>lr),sn=this.firestore.collectionGroup(Ge);return new vr(Xt(sn),this)}doc(Ge){let At;At="string"==typeof Ge?this.firestore.doc(Ge):Ge;const Xt=this.schedulers.ngZone.run(()=>At);return new Ir(Xt,this)}createId(){return this.firestore.collection("_").doc().id}}return qt.\u0275fac=function(Ge){return new(Ge||qt)(y.LFG(ge.Dh),y.LFG(ge.xv,8),y.LFG(ar,8),y.LFG(Mr,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Re.HU),y.LFG(Lr,8),y.LFG(Gn,8),y.LFG(In.zQ,8),y.LFG(In.Qv,8),y.LFG(In.L6,8),y.LFG(In._Q,8),y.LFG(In.rT,8),y.LFG(In.lh,8),y.LFG(In.f7,8),y.LFG(Ft.nm,8))},qt.\u0275prov=y.Yz7({token:qt,factory:qt.\u0275fac,providedIn:"any"}),qt})(),Un=(()=>{class qt{constructor(){or.Z.registerVersion("angularfire",Re.q4.full,"fst-compat")}static enablePersistence(Ge){return{ngModule:qt,providers:[{provide:ar,useValue:!0},{provide:Lr,useValue:Ge}]}}}return qt.\u0275fac=function(Ge){return new(Ge||qt)},qt.\u0275mod=y.oAB({type:qt}),qt.\u0275inj=y.cJS({providers:[ci]}),qt})()},2011:(pn,dt,L)=>{"use strict";L.d(dt,{Dh:()=>_e,GT:()=>Re,Ot:()=>he,cc:()=>Ue,hO:()=>ge,on:()=>U,pX:()=>De,xv:()=>Be});var y=L(2223),m=L(9260),le=L(3324);pn=L.hmd(pn);const ve=["ngOnDestroy"],De=(Ce,ct,at,ze={})=>new Proxy(Ce,{get:(et,ft)=>at.runOutsideAngular(()=>{var vt;if(Ce[ft])return!(null===(vt=null==ze?void 0:ze.spy)||void 0===vt)&&vt.get&&ze.spy.get(ft,Ce[ft]),Ce[ft];if(ve.indexOf(ft)>-1)return()=>{};const Ye=ct.toPromise().then(Le=>{const _t=Le&&Le[ft];return"function"==typeof _t?_t.bind(Le):_t&&_t.then?_t.then(nt=>at.run(()=>nt)):at.run(()=>_t)});return new Proxy(()=>{},{get:(Le,_t)=>Ye[_t],apply:(Le,_t,nt)=>Ye.then(pt=>{var Et;const ce=pt&&pt(...nt);return!(null===(Et=null==ze?void 0:ze.spy)||void 0===Et)&&Et.apply&&ze.spy.apply(ft,nt,ce),ce})})})}),Re=(Ce,ct)=>{ct.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(ze=>{Object.defineProperty(Ce.prototype,ze,Object.getOwnPropertyDescriptor(at.prototype||at,ze))})})};class he{constructor(ct){return ct}}const _e=new y.OlP("angularfire2.app.options"),Be=new y.OlP("angularfire2.app.name");function U(Ce,ct,at){const et="object"==typeof at&&at||{};et.name=et.name||"string"==typeof at&&at||"[DEFAULT]";const vt=m.Z.apps.filter(Ye=>Ye&&Ye.name===et.name)[0]||ct.runOutsideAngular(()=>m.Z.initializeApp(Ce,et));try{JSON.stringify(Ce)!==JSON.stringify(vt.options)&&we("error",`${vt.name} Firebase App already initialized with different options${pn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(vt)}const we=(Ce,...ct)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Ce](...ct)},je={provide:he,useFactory:U,deps:[_e,y.R0b,[new y.FiY,Be]]};let ge=(()=>{class Ce{constructor(at){m.Z.registerVersion("angularfire",le.q4.full,"core"),m.Z.registerVersion("angularfire",le.q4.full,"app-compat"),m.Z.registerVersion("angular",y.q4F.full,at.toString())}static initializeApp(at,ze){return{ngModule:Ce,providers:[{provide:_e,useValue:at},{provide:Be,useValue:ze}]}}}return Ce.\u0275fac=function(at){return new(at||Ce)(y.LFG(y.Lbi))},Ce.\u0275mod=y.oAB({type:Ce}),Ce.\u0275inj=y.cJS({providers:[je]}),Ce})();function Ue(Ce,ct,at,ze,et){const[,ft,vt]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Ce)||[];if(ft)return function qe(Ce,ct){try{return Ce.toString()===ct.toString()}catch{return Ce===ct}}(et,vt)||(Ae("error",`${ct} was already initialized on the ${at} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),Ae("warn",{is:et,was:vt})),ft;{const Ye=ze();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Ye,et]),Ye}}const It=!!pn.hot,Ae=(Ce,...ct)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Ce](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3324:(pn,dt,L)=>{"use strict";L.d(dt,{q4:()=>Cs,iC:()=>Mo,fc:()=>gs,HU:()=>kr,vb:()=>Me,JM:()=>Q,nk:()=>T,u3:()=>j});var y=L(2223),m=L(259),le=L(5861),ve=L(6881),De=L(2090),Re=L(4859),he=L(1877);L(4727);const Be="@firebase/remote-config",U="0.4.4",Ue=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class We{constructor(N,fe,rt,Lt){this.client=N,this.storage=fe,this.storageCache=rt,this.logger=Lt}isCachedDataFresh(N,fe){if(!fe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const rt=Date.now()-fe,Lt=rt<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${rt}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${Lt}.`),Lt}fetch(N){var fe=this;return(0,le.Z)(function*(){const[rt,Lt]=yield Promise.all([fe.storage.getLastSuccessfulFetchTimestampMillis(),fe.storage.getLastSuccessfulFetchResponse()]);if(Lt&&fe.isCachedDataFresh(N.cacheMaxAgeMillis,rt))return Lt;N.eTag=Lt&&Lt.eTag;const nn=yield fe.client.fetch(N),an=[fe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===nn.status&&an.push(fe.storage.setLastSuccessfulFetchResponse(nn)),yield Promise.all(an),nn})()}}function Ne(C=navigator){return C.languages&&C.languages[0]||C.language}class Fe{constructor(N,fe,rt,Lt,nn,an){this.firebaseInstallations=N,this.sdkVersion=fe,this.namespace=rt,this.projectId=Lt,this.apiKey=nn,this.appId=an}fetch(N){var fe=this;return(0,le.Z)(function*(){const[rt,Lt]=yield Promise.all([fe.firebaseInstallations.getId(),fe.firebaseInstallations.getToken()]),an=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${fe.projectId}/namespaces/${fe.namespace}:fetch?key=${fe.apiKey}`,jr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},qr={sdk_version:fe.sdkVersion,app_instance_id:rt,app_instance_id_token:Lt,app_id:fe.appId,language_code:Ne()},Vr={method:"POST",headers:jr,body:JSON.stringify(qr)},wr=fetch(an,Vr),Fr=new Promise((as,Ys)=>{N.signal.addEventListener(()=>{const ma=new Error("The operation was aborted.");ma.name="AbortError",Ys(ma)})});let go;try{yield Promise.race([wr,Fr]),go=yield wr}catch(as){let Ys="fetch-client-network";throw"AbortError"===(null==as?void 0:as.name)&&(Ys="fetch-timeout"),Ue.create(Ys,{originalErrorMessage:null==as?void 0:as.message})}let $o=go.status;const Xi=go.headers.get("ETag")||void 0;let Us,ro;if(200===go.status){let as;try{as=yield go.json()}catch(Ys){throw Ue.create("fetch-client-parse",{originalErrorMessage:null==Ys?void 0:Ys.message})}Us=as.entries,ro=as.state}if("INSTANCE_STATE_UNSPECIFIED"===ro?$o=500:"NO_CHANGE"===ro?$o=304:("NO_TEMPLATE"===ro||"EMPTY_CONFIG"===ro)&&(Us={}),304!==$o&&200!==$o)throw Ue.create("fetch-status",{httpStatus:$o});return{status:$o,eTag:Xi,config:Us}})()}}class lt{constructor(N,fe){this.client=N,this.storage=fe}fetch(N){var fe=this;return(0,le.Z)(function*(){const rt=(yield fe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return fe.attemptFetch(N,rt)})()}attemptFetch(N,{throttleEndTimeMillis:fe,backoffCount:rt}){var Lt=this;return(0,le.Z)(function*(){yield function He(C,N){return new Promise((fe,rt)=>{const Lt=Math.max(N-Date.now(),0),nn=setTimeout(fe,Lt);C.addEventListener(()=>{clearTimeout(nn),rt(Ue.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,fe);try{const nn=yield Lt.client.fetch(N);return yield Lt.storage.deleteThrottleMetadata(),nn}catch(nn){if(!function mt(C){if(!(C instanceof De.ZR&&C.customData))return!1;const N=Number(C.customData.httpStatus);return 429===N||500===N||503===N||504===N}(nn))throw nn;const an={throttleEndTimeMillis:Date.now()+(0,De.$s)(rt),backoffCount:rt+1};return yield Lt.storage.setThrottleMetadata(an),Lt.attemptFetch(N,an)}})()}}class un{constructor(N,fe,rt,Lt,nn){this.app=N,this._client=fe,this._storageCache=rt,this._storage=Lt,this._logger=nn,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Tt(C,N){const fe=C.target.error||void 0;return Ue.create(N,{originalErrorMessage:fe&&(null==fe?void 0:fe.message)})}const Je="app_namespace_store";class Tn{constructor(N,fe,rt,Lt=function yn(){return new Promise((C,N)=>{try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=rt=>{N(Tt(rt,"storage-open"))},fe.onsuccess=rt=>{C(rt.target.result)},fe.onupgradeneeded=rt=>{0===rt.oldVersion&&rt.target.result.createObjectStore(Je,{keyPath:"compositeKey"})}}catch(fe){N(Ue.create("storage-open",{originalErrorMessage:null==fe?void 0:fe.message}))}})}()){this.appId=N,this.appName=fe,this.namespace=rt,this.openDbPromise=Lt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var fe=this;return(0,le.Z)(function*(){const rt=yield fe.openDbPromise;return new Promise((Lt,nn)=>{const jr=rt.transaction([Je],"readonly").objectStore(Je),qr=fe.createCompositeKey(N);try{const Vr=jr.get(qr);Vr.onerror=wr=>{nn(Tt(wr,"storage-get"))},Vr.onsuccess=wr=>{const Fr=wr.target.result;Lt(Fr?Fr.value:void 0)}}catch(Vr){nn(Ue.create("storage-get",{originalErrorMessage:null==Vr?void 0:Vr.message}))}})})()}set(N,fe){var rt=this;return(0,le.Z)(function*(){const Lt=yield rt.openDbPromise;return new Promise((nn,an)=>{const qr=Lt.transaction([Je],"readwrite").objectStore(Je),Vr=rt.createCompositeKey(N);try{const wr=qr.put({compositeKey:Vr,value:fe});wr.onerror=Fr=>{an(Tt(Fr,"storage-set"))},wr.onsuccess=()=>{nn()}}catch(wr){an(Ue.create("storage-set",{originalErrorMessage:null==wr?void 0:wr.message}))}})})()}delete(N){var fe=this;return(0,le.Z)(function*(){const rt=yield fe.openDbPromise;return new Promise((Lt,nn)=>{const jr=rt.transaction([Je],"readwrite").objectStore(Je),qr=fe.createCompositeKey(N);try{const Vr=jr.delete(qr);Vr.onerror=wr=>{nn(Tt(wr,"storage-delete"))},Vr.onsuccess=()=>{Lt()}}catch(Vr){nn(Ue.create("storage-delete",{originalErrorMessage:null==Vr?void 0:Vr.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class Dn{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,le.Z)(function*(){const fe=N.storage.getLastFetchStatus(),rt=N.storage.getLastSuccessfulFetchTimestampMillis(),Lt=N.storage.getActiveConfig(),nn=yield fe;nn&&(N.lastFetchStatus=nn);const an=yield rt;an&&(N.lastSuccessfulFetchTimestampMillis=an);const jr=yield Lt;jr&&(N.activeConfig=jr)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function or(){return sr.apply(this,arguments)}function sr(){return(sr=(0,le.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}!function Nt(){(0,ve._registerComponent)(new Re.wA("remote-config",function C(N,{instanceIdentifier:fe}){const rt=N.getProvider("app").getImmediate(),Lt=N.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ue.create("registration-window");if(!(0,De.hl)())throw Ue.create("indexed-db-unavailable");const{projectId:nn,apiKey:an,appId:jr}=rt.options;if(!nn)throw Ue.create("registration-project-id");if(!an)throw Ue.create("registration-api-key");if(!jr)throw Ue.create("registration-app-id");const qr=new Tn(jr,rt.name,fe=fe||"firebase"),Vr=new Dn(qr),wr=new he.Yd(Be);wr.logLevel=he.in.ERROR;const Fr=new Fe(Lt,ve.SDK_VERSION,fe,nn,an,jr),go=new lt(Fr,qr),$o=new We(go,qr,Vr,wr),Xi=new un(rt,$o,Vr,qr,wr);return function vt(C){const N=(0,De.m9)(C);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(Xi),Xi},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Be,U),(0,ve.registerVersion)(Be,U,"esm2017")}();const yr=(C,N)=>N.some(fe=>C instanceof fe);let tn,xr;const Or=new WeakMap,Nr=new WeakMap,Sn=new WeakMap,vn=new WeakMap,$n=new WeakMap;let ar={get(C,N,fe){if(C instanceof IDBTransaction){if("done"===N)return Nr.get(C);if("objectStoreNames"===N)return C.objectStoreNames||Sn.get(C);if("store"===N)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return Rn(C[N])},set:(C,N,fe)=>(C[N]=fe,!0),has:(C,N)=>C instanceof IDBTransaction&&("done"===N||"store"===N)||N in C};function Gn(C){return"function"==typeof C?function Mr(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rr(){return xr||(xr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...N){return C.apply(ci(this),N),Rn(Or.get(this))}:function(...N){return Rn(C.apply(ci(this),N))}:function(N,...fe){const rt=C.call(ci(this),N,...fe);return Sn.set(rt,N.sort?N.sort():[N]),Rn(rt)}}(C):(C instanceof IDBTransaction&&function vr(C){if(Nr.has(C))return;const N=new Promise((fe,rt)=>{const Lt=()=>{C.removeEventListener("complete",nn),C.removeEventListener("error",an),C.removeEventListener("abort",an)},nn=()=>{fe(),Lt()},an=()=>{rt(C.error||new DOMException("AbortError","AbortError")),Lt()};C.addEventListener("complete",nn),C.addEventListener("error",an),C.addEventListener("abort",an)});Nr.set(C,N)}(C),yr(C,function dr(){return tn||(tn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ar):C)}function Rn(C){if(C instanceof IDBRequest)return function Ir(C){const N=new Promise((fe,rt)=>{const Lt=()=>{C.removeEventListener("success",nn),C.removeEventListener("error",an)},nn=()=>{fe(Rn(C.result)),Lt()},an=()=>{rt(C.error),Lt()};C.addEventListener("success",nn),C.addEventListener("error",an)});return N.then(fe=>{fe instanceof IDBCursor&&Or.set(fe,C)}).catch(()=>{}),$n.set(N,C),N}(C);if(vn.has(C))return vn.get(C);const N=Gn(C);return N!==C&&(vn.set(C,N),$n.set(N,C)),N}const ci=C=>$n.get(C);function Un(C,N,{blocked:fe,upgrade:rt,blocking:Lt,terminated:nn}={}){const an=indexedDB.open(C,N),jr=Rn(an);return rt&&an.addEventListener("upgradeneeded",qr=>{rt(Rn(an.result),qr.oldVersion,qr.newVersion,Rn(an.transaction))}),fe&&an.addEventListener("blocked",()=>fe()),jr.then(qr=>{nn&&qr.addEventListener("close",()=>nn()),Lt&&qr.addEventListener("versionchange",()=>Lt())}).catch(()=>{}),jr}function qt(C,{blocked:N}={}){const fe=indexedDB.deleteDatabase(C);return N&&fe.addEventListener("blocked",()=>N()),Rn(fe).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],At=new Map;function Xt(C,N){if(!(C instanceof IDBDatabase)||N in C||"string"!=typeof N)return;if(At.get(N))return At.get(N);const fe=N.replace(/FromIndex$/,""),rt=N!==fe,Lt=Ge.includes(fe);if(!(fe in(rt?IDBIndex:IDBObjectStore).prototype)||!Lt&&!me.includes(fe))return;const nn=function(){var an=(0,le.Z)(function*(jr,...qr){const Vr=this.transaction(jr,Lt?"readwrite":"readonly");let wr=Vr.store;return rt&&(wr=wr.index(qr.shift())),(yield Promise.all([wr[fe](...qr),Lt&&Vr.done]))[0]});return function(qr){return an.apply(this,arguments)}}();return At.set(N,nn),nn}!function Lr(C){ar=C(ar)}(C=>({...C,get:(N,fe,rt)=>Xt(N,fe)||C.get(N,fe,rt),has:(N,fe)=>!!Xt(N,fe)||C.has(N,fe)}));const sn="/firebase-messaging-sw.js",lr="/firebase-cloud-messaging-push-scope",On="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_r="https://fcmregistrations.googleapis.com/v1",Qe="google.c.a.c_id",de="google.c.a.c_l",K="google.c.a.ts";var Pe=(()=>((Pe=Pe||{}).PUSH_RECEIVED="push-received",Pe.NOTIFICATION_CLICKED="notification-clicked",Pe))();function it(C){const N=new Uint8Array(C);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ke(C){const fe=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),rt=atob(fe),Lt=new Uint8Array(rt.length);for(let nn=0;nn<rt.length;++nn)Lt[nn]=rt.charCodeAt(nn);return Lt}const ht="fcm_token_details_db",Ct=5,jt="fcm_token_object_Store";function on(){return on=(0,le.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(nn=>nn.name).includes(ht))return null;let N=null;return(yield Un(ht,Ct,{upgrade:(rt=(0,le.Z)(function*(Lt,nn,an,jr){var qr;if(nn<2||!Lt.objectStoreNames.contains(jt))return;const Vr=jr.objectStore(jt),wr=yield Vr.index("fcmSenderId").get(C);if(yield Vr.clear(),wr)if(2===nn){const Fr=wr;if(!Fr.auth||!Fr.p256dh||!Fr.endpoint)return;N={token:Fr.fcmToken,createTime:null!==(qr=Fr.createTime)&&void 0!==qr?qr:Date.now(),subscriptionOptions:{auth:Fr.auth,p256dh:Fr.p256dh,endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:"string"==typeof Fr.vapidKey?Fr.vapidKey:it(Fr.vapidKey)}}}else if(3===nn){const Fr=wr;N={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:it(Fr.auth),p256dh:it(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:it(Fr.vapidKey)}}}else if(4===nn){const Fr=wr;N={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:it(Fr.auth),p256dh:it(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:it(Fr.vapidKey)}}}}),function(nn,an,jr,qr){return rt.apply(this,arguments)})})).close(),yield qt(ht),yield qt("fcm_vapid_details_db"),yield qt("undefined"),function fn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:N}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}(N)?N:null;var rt}),on.apply(this,arguments)}const Wn="firebase-messaging-database",kn=1,Dt="firebase-messaging-store";let wt=null;function zt(){return wt||(wt=Un(Wn,kn,{upgrade:(C,N)=>{0===N&&C.createObjectStore(Dt)}})),wt}function _n(C){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,le.Z)(function*(C){const N=Qn(C),rt=yield(yield zt()).transaction(Dt).objectStore(Dt).get(N);if(rt)return rt;{const Lt=yield function Ut(C){return on.apply(this,arguments)}(C.appConfig.senderId);if(Lt)return yield Xn(C,Lt),Lt}}),Nn.apply(this,arguments)}function Xn(C,N){return nr.apply(this,arguments)}function nr(){return(nr=(0,le.Z)(function*(C,N){const fe=Qn(C),Lt=(yield zt()).transaction(Dt,"readwrite");return yield Lt.objectStore(Dt).put(N,fe),yield Lt.done,N})).apply(this,arguments)}function Tr(){return(Tr=(0,le.Z)(function*(C){const N=Qn(C),rt=(yield zt()).transaction(Dt,"readwrite");yield rt.objectStore(Dt).delete(N),yield rt.done})).apply(this,arguments)}function Qn({appConfig:C}){return C.appId}const fi=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ls(C,N){return rs.apply(this,arguments)}function rs(){return(rs=(0,le.Z)(function*(C,N){const fe=yield vs(C),rt=_s(N),Lt={method:"POST",headers:fe,body:JSON.stringify(rt)};let nn;try{nn=yield(yield fetch(ei(C.appConfig),Lt)).json()}catch(an){throw fi.create("token-subscribe-failed",{errorInfo:null==an?void 0:an.toString()})}if(nn.error)throw fi.create("token-subscribe-failed",{errorInfo:nn.error.message});if(!nn.token)throw fi.create("token-subscribe-no-token");return nn.token})).apply(this,arguments)}function pi(){return(pi=(0,le.Z)(function*(C,N){const fe=yield vs(C),rt=_s(N.subscriptionOptions),Lt={method:"PATCH",headers:fe,body:JSON.stringify(rt)};let nn;try{nn=yield(yield fetch(`${ei(C.appConfig)}/${N.token}`,Lt)).json()}catch(an){throw fi.create("token-update-failed",{errorInfo:null==an?void 0:an.toString()})}if(nn.error)throw fi.create("token-update-failed",{errorInfo:nn.error.message});if(!nn.token)throw fi.create("token-update-no-token");return nn.token})).apply(this,arguments)}function Bs(C,N){return Si.apply(this,arguments)}function Si(){return(Si=(0,le.Z)(function*(C,N){const rt={method:"DELETE",headers:yield vs(C)};try{const nn=yield(yield fetch(`${ei(C.appConfig)}/${N}`,rt)).json();if(nn.error)throw fi.create("token-unsubscribe-failed",{errorInfo:nn.error.message})}catch(Lt){throw fi.create("token-unsubscribe-failed",{errorInfo:null==Lt?void 0:Lt.toString()})}})).apply(this,arguments)}function ei({projectId:C}){return`${_r}/projects/${C}/registrations`}function vs(C){return ps.apply(this,arguments)}function ps(){return(ps=(0,le.Z)(function*({appConfig:C,installations:N}){const fe=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${fe}`})})).apply(this,arguments)}function _s({p256dh:C,auth:N,endpoint:fe,vapidKey:rt}){const Lt={web:{endpoint:fe,auth:N,p256dh:C}};return rt!==On&&(Lt.web.applicationPubKey=rt),Lt}const Qs=6048e5;function ne(){return ne=(0,le.Z)(function*(C){const N=yield function ut(C,N){return Rt.apply(this,arguments)}(C.swRegistration,C.vapidKey),fe={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:N.endpoint,auth:it(N.getKey("auth")),p256dh:it(N.getKey("p256dh"))},rt=yield _n(C.firebaseDependencies);if(rt){if(function cn(C,N){return N.vapidKey===C.vapidKey&&N.endpoint===C.endpoint&&N.auth===C.auth&&N.p256dh===C.p256dh}(rt.subscriptionOptions,fe))return Date.now()>=rt.createTime+Qs?function G(C,N){return ie.apply(this,arguments)}(C,{token:rt.token,createTime:Date.now(),subscriptionOptions:fe}):rt.token;try{yield Bs(C.firebaseDependencies,rt.token)}catch(Lt){console.warn(Lt)}return $e(C.firebaseDependencies,fe)}return $e(C.firebaseDependencies,fe)}),ne.apply(this,arguments)}function oe(){return oe=(0,le.Z)(function*(C){const N=yield _n(C.firebaseDependencies);N&&(yield Bs(C.firebaseDependencies,N.token),yield function Jr(C){return Tr.apply(this,arguments)}(C.firebaseDependencies));const fe=yield C.swRegistration.pushManager.getSubscription();return!fe||fe.unsubscribe()}),oe.apply(this,arguments)}function ie(){return ie=(0,le.Z)(function*(C,N){try{const fe=yield function ki(C,N){return pi.apply(this,arguments)}(C.firebaseDependencies,N),rt=Object.assign(Object.assign({},N),{token:fe,createTime:Date.now()});return yield Xn(C.firebaseDependencies,rt),fe}catch(fe){throw yield function Ee(C){return oe.apply(this,arguments)}(C),fe}}),ie.apply(this,arguments)}function $e(C,N){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,le.Z)(function*(C,N){const rt={token:yield Ls(C,N),createTime:Date.now(),subscriptionOptions:N};return yield Xn(C,rt),rt.token})).apply(this,arguments)}function Rt(){return(Rt=(0,le.Z)(function*(C,N){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ke(N)})})).apply(this,arguments)}function gn(C){const N={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function zn(C,N){if(!N.notification)return;C.notification={};const fe=N.notification.title;fe&&(C.notification.title=fe);const rt=N.notification.body;rt&&(C.notification.body=rt);const Lt=N.notification.image;Lt&&(C.notification.image=Lt);const nn=N.notification.icon;nn&&(C.notification.icon=nn)}(N,C),function ur(C,N){N.data&&(C.data=N.data)}(N,C),function Ri(C,N){var fe,rt,Lt,nn,an;if(!(N.fcmOptions||null!==(fe=N.notification)&&void 0!==fe&&fe.click_action))return;C.fcmOptions={};const jr=null!==(Lt=null===(rt=N.fcmOptions)||void 0===rt?void 0:rt.link)&&void 0!==Lt?Lt:null===(nn=N.notification)||void 0===nn?void 0:nn.click_action;jr&&(C.fcmOptions.link=jr);const qr=null===(an=N.fcmOptions)||void 0===an?void 0:an.analytics_label;qr&&(C.fcmOptions.analyticsLabel=qr)}(N,C),N}function is(C,N){const fe=[];for(let rt=0;rt<C.length;rt++)fe.push(C.charAt(rt)),rt<N.length&&fe.push(N.charAt(rt));return fe.join("")}function En(C){return fi.create("missing-app-config-values",{valueName:C})}is("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),is("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(N,fe,rt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Lt=function Gr(C){if(!C||!C.options)throw En("App Configuration Object");if(!C.name)throw En("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:fe}=C;for(const rt of N)if(!fe[rt])throw En(rt);return{appName:C.name,projectId:fe.projectId,apiKey:fe.apiKey,appId:fe.appId,senderId:fe.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:Lt,installations:fe,analyticsProvider:rt}}_delete(){return Promise.resolve()}}function Hi(){return(Hi=(0,le.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(sn,{scope:lr}),C.swRegistration.update().catch(()=>{})}catch(N){throw fi.create("failed-service-worker-registration",{browserErrorMessage:null==N?void 0:N.message})}})).apply(this,arguments)}function zi(){return(zi=(0,le.Z)(function*(C,N){if(!N&&!C.swRegistration&&(yield function Kr(C){return Hi.apply(this,arguments)}(C)),N||!C.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw fi.create("invalid-sw-registration");C.swRegistration=N}})).apply(this,arguments)}function Qr(){return(Qr=(0,le.Z)(function*(C,N){N?C.vapidKey=N:C.vapidKey||(C.vapidKey=On)})).apply(this,arguments)}function Li(){return Li=(0,le.Z)(function*(C,N){if(!navigator)throw fi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fi.create("permission-blocked");return yield function Xs(C,N){return Qr.apply(this,arguments)}(C,null==N?void 0:N.vapidKey),yield function bo(C,N){return zi.apply(this,arguments)}(C,null==N?void 0:N.serviceWorkerRegistration),function W(C){return ne.apply(this,arguments)}(C)}),Li.apply(this,arguments)}function Ws(){return(Ws=(0,le.Z)(function*(C,N,fe){const rt=function Js(C){switch(C){case Pe.NOTIFICATION_CLICKED:return"notification_open";case Pe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(N);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(rt,{message_id:fe[Qe],message_name:fe[de],message_time:fe[K],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ii(){return Ii=(0,le.Z)(function*(C,N){const fe=N.data;if(!fe.isFirebaseMessaging)return;C.onMessageHandler&&fe.messageType===Pe.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(gn(fe)):C.onMessageHandler.next(gn(fe)));const rt=fe.data;(function Fi(C){return"object"==typeof C&&!!C&&Qe in C})(rt)&&"1"===rt["google.c.a.e"]&&(yield function er(C,N,fe){return Ws.apply(this,arguments)}(C,fe.messageType,rt))}),Ii.apply(this,arguments)}const ss="@firebase/messaging",xs=C=>{const N=new hr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",fe=>function $r(C,N){return Ii.apply(this,arguments)}(N,fe)),N},fo=C=>{const N=C.getProvider("messaging").getImmediate();return{getToken:rt=>function Yi(C,N){return Li.apply(this,arguments)}(N,rt)}};function $s(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,le.Z)(function*(){try{yield(0,De.eu)()}catch{return!1}return typeof window<"u"&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function po(){(0,ve._registerComponent)(new Re.wA("messaging",xs,"PUBLIC")),(0,ve._registerComponent)(new Re.wA("messaging-internal",fo,"PRIVATE")),(0,ve.registerVersion)(ss,"0.12.4"),(0,ve.registerVersion)(ss,"0.12.4","esm2017")}();var qs=L(5132),Ps=L(4408),Ta=L(7565);const Gi=new class os extends Ta.v{}(class Ti extends Ps.o{constructor(N,fe){super(N,fe),this.scheduler=N,this.work=fe}schedule(N,fe=0){return fe>0?super.schedule(N,fe):(this.delay=fe,this.state=N,this.scheduler.flush(this),this)}execute(N,fe){return fe>0||this.closed?super.execute(N,fe):this._execute(N,fe)}requestAsyncId(N,fe,rt=0){return null!=rt&&rt>0||null==rt&&this.delay>0?super.requestAsyncId(N,fe,rt):(N.flush(this),0)}});var Do=L(4986),Qi=L(9751),Wi=L(8505),to=L(5363),So=L(9468);const Cs=new y.GfV("7.6.1"),Bo="__angularfire_symbol__analyticsIsSupportedValue",bs="__angularfire_symbol__analyticsIsSupported",Bi="__angularfire_symbol__remoteConfigIsSupportedValue",To="__angularfire_symbol__remoteConfigIsSupported",Es="__angularfire_symbol__messagingIsSupportedValue",no="__angularfire_symbol__messagingIsSupported";globalThis[bs]||(globalThis[bs]=(0,qs.Gb)().then(C=>globalThis[Bo]=C).catch(()=>globalThis[Bo]=!1)),globalThis[no]||(globalThis[no]=$s().then(C=>globalThis[Es]=C).catch(()=>globalThis[Es]=!1)),globalThis[To]||(globalThis[To]=or().then(C=>globalThis[Bi]=C).catch(()=>globalThis[Bi]=!1));const T={async:()=>globalThis[bs],sync:()=>{const C=globalThis[Bo];if(void 0===C)throw new Error((C=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${C} in the constructor, first ensure that ${C} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${C})\`.`)("Analytics"));return C}};function Q(C,N,fe){if(N){if(1===N.length)return N[0];const nn=N.filter(an=>an.app===fe);if(1===nn.length)return nn[0]}return fe.container.getProvider(C).getImmediate({optional:!0})}const Me=(C,N)=>{const fe=N?[N]:(0,m.C6)(),rt=[];return fe.forEach(Lt=>{Lt.container.getProvider(C).instances.forEach(an=>{rt.includes(an)||rt.push(an)})}),rt};function Kt(){}class Ln{constructor(N,fe=Gi){this.zone=N,this.delegate=fe}now(){return this.delegate.now()}schedule(N,fe,rt){const Lt=this.zone;return this.delegate.schedule(function(an){Lt.runGuarded(()=>{N.apply(this,[an])})},fe,rt)}}class Yn{constructor(N){this.zone=N,this.task=null}call(N,fe){const rt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kt,{},Kt,Kt)),fe.pipe((0,Wi.b)({next:rt,complete:rt,error:rt})).subscribe(N).add(rt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kr=(()=>{class C{constructor(fe){this.ngZone=fe,this.outsideAngular=fe.runOutsideAngular(()=>new Ln(Zone.current)),this.insideAngular=fe.run(()=>new Ln(Zone.current,Do.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(fe){return new(fe||C)(y.LFG(y.R0b))},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function br(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function $i(C){return br().ngZone.run(()=>C())}function gs(C){return C.pipe((0,to.Q)(br().outsideAngular))}function Mo(C){return br(),function Ds(C){return function(fe){return(fe=fe.lift(new Yn(C.ngZone))).pipe((0,So.R)(C.outsideAngular),(0,to.Q)(C.insideAngular))}}(br())(C)}const Z=(C,N)=>function(){const rt=arguments;return N&&setTimeout(()=>{"scheduled"===N.state&&N.invoke()},10),$i(()=>C.apply(void 0,rt))},j=(C,N)=>function(){let fe;const rt=arguments;for(let nn=0;nn<arguments.length;nn++)"function"==typeof rt[nn]&&(N&&(fe||(fe=$i(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kt,{},Kt,Kt)))),rt[nn]=Z(rt[nn],fe));const Lt=function Ki(C){return br().ngZone.runOutsideAngular(()=>C())}(()=>C.apply(this,rt));if(!N){if(Lt instanceof Qi.y){const nn=br();return Lt.pipe((0,So.R)(nn.outsideAngular),(0,to.Q)(nn.insideAngular))}return $i(()=>Lt)}return Lt instanceof Qi.y?Lt.pipe(Mo):Lt instanceof Promise?$i(()=>new Promise((nn,an)=>Lt.then(jr=>$i(()=>nn(jr)),jr=>$i(()=>an(jr))))):"function"==typeof Lt&&fe?function(){return setTimeout(()=>{fe&&"scheduled"===fe.state&&fe.invoke()},10),Lt.apply(this,arguments)}:$i(()=>Lt)}},1389:(pn,dt,L)=>{"use strict";L.d(dt,{$:()=>br,A:()=>we,D:()=>Ue,I:()=>Qs,J:()=>G,L:()=>$r,N:()=>On,P:()=>na,Q:()=>Zi,R:()=>Te,U:()=>Ti,V:()=>Ta,W:()=>os,X:()=>Ps,Y:()=>Qi,Z:()=>Wi,_:()=>bs,a:()=>wc,a0:()=>$i,a1:()=>Vs,a2:()=>j,a3:()=>nn,a4:()=>jr,a5:()=>Vr,a6:()=>Fr,a7:()=>$o,a8:()=>Us,a9:()=>as,aA:()=>Le,aB:()=>Iu,aC:()=>sn,aD:()=>_r,aE:()=>Yo,aF:()=>pr,aG:()=>Eu,aH:()=>ei,aL:()=>$l,aO:()=>Lo,aa:()=>Ys,ab:()=>Ko,ac:()=>js,ad:()=>Vo,ae:()=>Vi,af:()=>fu,ai:()=>yl,aj:()=>Ka,ak:()=>jo,an:()=>Ao,ao:()=>pu,aq:()=>Ai,ar:()=>Zn,as:()=>nt,at:()=>Ct,au:()=>it,av:()=>ze,aw:()=>Wl,ax:()=>qu,ay:()=>jt,az:()=>et,b:()=>Za,c:()=>Ap,d:()=>_f,e:()=>ah,f:()=>Tc,g:()=>Po,h:()=>hm,i:()=>Wr,j:()=>cd,k:()=>pd,l:()=>Er,m:()=>gd,o:()=>Zu,p:()=>_e,r:()=>ir,s:()=>Wt,u:()=>qo});var y=L(5861),m=L(2090),le=L(6881),ve=L(655),De=L(1877),Re=L(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},we={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ue=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},It=new m.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new De.Yd("@firebase/auth");function at(R,..._){Ce.logLevel<=De.in.ERROR&&Ce.error(`Auth (${le.SDK_VERSION}): ${R}`,..._)}function ze(R,..._){throw Ye(R,..._)}function et(R,..._){return Ye(R,..._)}function ft(R,_,I){const O=Object.assign(Object.assign({},qe()),{[_]:I});return new m.LL("auth","Firebase",O).create(_,{appName:R.name})}function vt(R,_,I){if(!(_ instanceof I))throw I.name!==_.constructor.name&&ze(R,"argument-error"),ft(R,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(R,..._){if("string"!=typeof R){const I=_[0],O=[..._.slice(1)];return O[0]&&(O[0].appName=R.name),R._errorFactory.create(I,...O)}return It.create(R,..._)}function Le(R,_,...I){if(!R)throw Ye(_,...I)}function _t(R){const _="INTERNAL ASSERTION FAILED: "+R;throw at(_),new Error(_)}function nt(R,_){R||_t(_)}function pt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function Et(){return"http:"===ce()||"https:"===ce()}function ce(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class We{constructor(_,I){this.shortDelay=_,this.longDelay=I,nt(I>_,"Short delay should be less than long delay!"),this.isMobile=(0,m.uI)()||(0,m.b$)()}get(){return function xe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,m.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ne(R,_){nt(R.emulator,"Emulator should always be set here");const{url:I}=R.emulator;return _?`${I}${_.startsWith("/")?_.slice(1):_}`:I}class Fe{static initialize(_,I,O){this.fetchImpl=_,I&&(this.headersImpl=I),O&&(this.responseImpl=O)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mt=new We(3e4,6e4);function lt(R,_){return R.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:R.tenantId}):_}function Mt(R,_,I,O){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,y.Z)(function*(R,_,I,O,ae={}){return un(R,ae,(0,y.Z)(function*(){let be={},bt={};O&&("GET"===_?bt=O:be={body:JSON.stringify(O)});const Ht=(0,m.xO)(Object.assign({key:R.config.apiKey},bt)).slice(1),wn=yield R._getAdditionalHeaders();return wn["Content-Type"]="application/json",R.languageCode&&(wn["X-Firebase-Locale"]=R.languageCode),Fe.fetch()(Qt(R,R.config.apiHost,I,Ht),Object.assign({method:_,headers:wn,referrerPolicy:"no-referrer"},be))}))})).apply(this,arguments)}function un(R,_,I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,y.Z)(function*(R,_,I){R._canInitEmulator=!1;const O=Object.assign(Object.assign({},He),_);try{const ae=new yn(R),be=yield Promise.race([I(),ae.promise]);ae.clearNetworkTimeout();const bt=yield be.json();if("needConfirmation"in bt)throw Tn(R,"account-exists-with-different-credential",bt);if(be.ok&&!("errorMessage"in bt))return bt;{const Ht=be.ok?bt.errorMessage:bt.error.message,[wn,jn]=Ht.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wn)throw Tn(R,"credential-already-in-use",bt);if("EMAIL_EXISTS"===wn)throw Tn(R,"email-already-in-use",bt);if("USER_DISABLED"===wn)throw Tn(R,"user-disabled",bt);const gr=O[wn]||wn.toLowerCase().replace(/[_\s]+/g,"-");if(jn)throw ft(R,gr,jn);ze(R,gr)}}catch(ae){if(ae instanceof m.ZR)throw ae;ze(R,"network-request-failed",{message:String(ae)})}})).apply(this,arguments)}function Je(R,_,I,O){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,y.Z)(function*(R,_,I,O,ae={}){const be=yield Mt(R,_,I,O,ae);return"mfaPendingCredential"in be&&ze(R,"multi-factor-auth-required",{_serverResponse:be}),be})).apply(this,arguments)}function Qt(R,_,I,O){const ae=`${_}${I}?${O}`;return R.config.emulator?Ne(R.config,ae):`${R.config.apiScheme}://${ae}`}class yn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((I,O)=>{this.timer=setTimeout(()=>O(et(this.auth,"network-request-failed")),mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tn(R,_,I){const O={appName:R.name};I.email&&(O.email=I.email),I.phoneNumber&&(O.phoneNumber=I.phoneNumber);const ae=et(R,_,O);return ae.customData._tokenResponse=I,ae}function Nt(){return(Nt=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Ft(){return(Ft=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function sr(){return(sr=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function yr(R){if(R)try{const _=new Date(Number(R));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function dr(){return(dr=(0,y.Z)(function*(R,_=!1){const I=(0,m.m9)(R),O=yield I.getIdToken(_),ae=Or(O);Le(ae&&ae.exp&&ae.auth_time&&ae.iat,I.auth,"internal-error");const be="object"==typeof ae.firebase?ae.firebase:void 0,bt=null==be?void 0:be.sign_in_provider;return{claims:ae,token:O,authTime:yr(rr(ae.auth_time)),issuedAtTime:yr(rr(ae.iat)),expirationTime:yr(rr(ae.exp)),signInProvider:bt||null,signInSecondFactor:(null==be?void 0:be.sign_in_second_factor)||null}})).apply(this,arguments)}function rr(R){return 1e3*Number(R)}function Or(R){const[_,I,O]=R.split(".");if(void 0===_||void 0===I||void 0===O)return at("JWT malformed, contained fewer than 3 sections"),null;try{const ae=(0,m.tV)(I);return ae?JSON.parse(ae):(at("Failed to decode base64 JWT payload"),null)}catch(ae){return at("Caught error parsing JWT payload as JSON",null==ae?void 0:ae.toString()),null}}function Sn(R,_){return vn.apply(this,arguments)}function vn(){return(vn=(0,y.Z)(function*(R,_,I=!1){if(I)return _;try{return yield _}catch(O){throw O instanceof m.ZR&&function $n({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}(O)&&R.auth.currentUser===R&&(yield R.auth.signOut()),O}})).apply(this,arguments)}class Ir{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var I;if(_){const O=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),O}{this.errorBackoff=3e4;const ae=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,ae)}}schedule(_=!1){var I=this;if(!this.isRunning)return;const O=this.getInterval(_);this.timerId=setTimeout((0,y.Z)(function*(){yield I.iteration()}),O)}iteration(){var _=this;return(0,y.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null==I?void 0:I.code)&&_.schedule(!0))}_.schedule()})()}}class vr{constructor(_,I){this.createdAt=_,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(R){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,y.Z)(function*(R){var _;const I=R.auth,O=yield R.getIdToken(),ae=yield Sn(R,function or(R,_){return sr.apply(this,arguments)}(I,{idToken:O}));Le(null==ae?void 0:ae.users.length,I,"internal-error");const be=ae.users[0];R._notifyReloadListener(be);const bt=null!==(_=be.providerUserInfo)&&void 0!==_&&_.length?function ci(R){return R.map(_=>{var{providerId:I}=_,O=(0,ve._T)(_,["providerId"]);return{providerId:I,uid:O.rawId||"",displayName:O.displayName||null,email:O.email||null,phoneNumber:O.phoneNumber||null,photoURL:O.photoUrl||null}})}(be.providerUserInfo):[],Ht=function Rn(R,_){return[...R.filter(O=>!_.some(ae=>ae.providerId===O.providerId)),..._]}(R.providerData,bt),gr=!!R.isAnonymous&&!(R.email&&be.passwordHash||null!=Ht&&Ht.length),Xr={uid:be.localId,displayName:be.displayName||null,photoURL:be.photoUrl||null,email:be.email||null,emailVerified:be.emailVerified||!1,phoneNumber:be.phoneNumber||null,tenantId:be.tenantId||null,providerData:Ht,metadata:new vr(be.createdAt,be.lastLoginAt),isAnonymous:gr};Object.assign(R,Xr)}),Lr.apply(this,arguments)}function Gn(){return(Gn=(0,y.Z)(function*(R){const _=(0,m.m9)(R);yield ar(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function qt(){return(qt=(0,y.Z)(function*(R,_){const I=yield un(R,{},(0,y.Z)(function*(){const O=(0,m.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:ae,apiKey:be}=R.config,bt=Qt(R,ae,"/v1/token",`key=${be}`),Ht=yield R._getAdditionalHeaders();return Ht["Content-Type"]="application/x-www-form-urlencoded",Fe.fetch()(bt,{method:"POST",headers:Ht,body:O})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class me{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){Le(_.idToken,"internal-error"),Le(typeof _.idToken<"u","internal-error"),Le(typeof _.refreshToken<"u","internal-error");const I="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Nr(R){const _=Or(R);return Le(_,"internal-error"),Le(typeof _.exp<"u","internal-error"),Le(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,I)}getToken(_,I=!1){var O=this;return(0,y.Z)(function*(){return Le(!O.accessToken||O.refreshToken,_,"user-token-expired"),I||!O.accessToken||O.isExpired?O.refreshToken?(yield O.refresh(_,O.refreshToken),O.accessToken):null:O.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,I){var O=this;return(0,y.Z)(function*(){const{accessToken:ae,refreshToken:be,expiresIn:bt}=yield function Un(R,_){return qt.apply(this,arguments)}(_,I);O.updateTokensAndExpiration(ae,be,Number(bt))})()}updateTokensAndExpiration(_,I,O){this.refreshToken=I||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*O}static fromJSON(_,I){const{refreshToken:O,accessToken:ae,expirationTime:be}=I,bt=new me;return O&&(Le("string"==typeof O,"internal-error",{appName:_}),bt.refreshToken=O),ae&&(Le("string"==typeof ae,"internal-error",{appName:_}),bt.accessToken=ae),be&&(Le("number"==typeof be,"internal-error",{appName:_}),bt.expirationTime=be),bt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new me,this.toJSON())}_performRefresh(){return _t("not implemented")}}function Ge(R,_){Le("string"==typeof R||typeof R>"u","internal-error",{appName:_})}class At{constructor(_){var{uid:I,auth:O,stsTokenManager:ae}=_,be=(0,ve._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=O,this.stsTokenManager=ae,this.accessToken=ae.accessToken,this.displayName=be.displayName||null,this.email=be.email||null,this.emailVerified=be.emailVerified||!1,this.phoneNumber=be.phoneNumber||null,this.photoURL=be.photoURL||null,this.isAnonymous=be.isAnonymous||!1,this.tenantId=be.tenantId||null,this.providerData=be.providerData?[...be.providerData]:[],this.metadata=new vr(be.createdAt||void 0,be.lastLoginAt||void 0)}getIdToken(_){var I=this;return(0,y.Z)(function*(){const O=yield Sn(I,I.stsTokenManager.getToken(I.auth,_));return Le(O,I.auth,"internal-error"),I.accessToken!==O&&(I.accessToken=O,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),O})()}getIdTokenResult(_){return function xr(R){return dr.apply(this,arguments)}(this,_)}reload(){return function Mr(R){return Gn.apply(this,arguments)}(this)}_assign(_){this!==_&&(Le(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(I=>Object.assign({},I)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const I=new At(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return I.metadata._copy(this.metadata),I}_onReload(_){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,I=!1){var O=this;return(0,y.Z)(function*(){let ae=!1;_.idToken&&_.idToken!==O.stsTokenManager.accessToken&&(O.stsTokenManager.updateFromServerResponse(_),ae=!0),I&&(yield ar(O)),yield O.auth._persistUserIfCurrent(O),ae&&O.auth._notifyListenersIfCurrent(O)})()}delete(){var _=this;return(0,y.Z)(function*(){const I=yield _.getIdToken();return yield Sn(_,function Dn(R,_){return Nt.apply(this,arguments)}(_.auth,{idToken:I})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,I){var O,ae,be,bt,Ht,wn,jn,gr;const Xr=null!==(O=I.displayName)&&void 0!==O?O:void 0,Zo=null!==(ae=I.email)&&void 0!==ae?ae:void 0,Yl=null!==(be=I.phoneNumber)&&void 0!==be?be:void 0,Qu=null!==(bt=I.photoURL)&&void 0!==bt?bt:void 0,Ba=null!==(Ht=I.tenantId)&&void 0!==Ht?Ht:void 0,Xu=null!==(wn=I._redirectEventId)&&void 0!==wn?wn:void 0,Ho=null!==(jn=I.createdAt)&&void 0!==jn?jn:void 0,_d=null!==(gr=I.lastLoginAt)&&void 0!==gr?gr:void 0,{uid:Au,emailVerified:$a,isAnonymous:Va,providerData:Lc,stsTokenManager:Bc}=I;Le(Au&&Bc,_,"internal-error");const Op=me.fromJSON(this.name,Bc);Le("string"==typeof Au,_,"internal-error"),Ge(Xr,_.name),Ge(Zo,_.name),Le("boolean"==typeof $a,_,"internal-error"),Le("boolean"==typeof Va,_,"internal-error"),Ge(Yl,_.name),Ge(Qu,_.name),Ge(Ba,_.name),Ge(Xu,_.name),Ge(Ho,_.name),Ge(_d,_.name);const Ed=new At({uid:Au,auth:_,email:Zo,emailVerified:$a,displayName:Xr,isAnonymous:Va,photoURL:Qu,phoneNumber:Yl,tenantId:Ba,stsTokenManager:Op,createdAt:Ho,lastLoginAt:_d});return Lc&&Array.isArray(Lc)&&(Ed.providerData=Lc.map(si=>Object.assign({},si))),Xu&&(Ed._redirectEventId=Xu),Ed}static _fromIdTokenResponse(_,I,O=!1){return(0,y.Z)(function*(){const ae=new me;ae.updateFromServerResponse(I);const be=new At({uid:I.localId,auth:_,stsTokenManager:ae,isAnonymous:O});return yield ar(be),be})()}}const Xt=new Map;function sn(R){nt(R instanceof Function,"Expected a class definition");let _=Xt.get(R);return _?(nt(_ instanceof R,"Instance stored in cache mismatched with class"),_):(_=new R,Xt.set(R,_),_)}const On=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(I,O){var ae=this;return(0,y.Z)(function*(){ae.storage[I]=O})()}_get(I){var O=this;return(0,y.Z)(function*(){const ae=O.storage[I];return void 0===ae?null:ae})()}_remove(I){var O=this;return(0,y.Z)(function*(){delete O.storage[I]})()}_addListener(I,O){}_removeListener(I,O){}}return R.type="NONE",R})();function _r(R,_,I){return`firebase:${R}:${_}:${I}`}class Qe{constructor(_,I,O){this.persistence=_,this.auth=I,this.userKey=O;const{config:ae,name:be}=this.auth;this.fullUserKey=_r(this.userKey,ae.apiKey,be),this.fullPersistenceKey=_r("persistence",ae.apiKey,be),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,y.Z)(function*(){const I=yield _.persistence._get(_.fullUserKey);return I?At._fromJSON(_.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var I=this;return(0,y.Z)(function*(){if(I.persistence===_)return;const O=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=_,O?I.setCurrentUser(O):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,I,O="authUser"){return(0,y.Z)(function*(){if(!I.length)return new Qe(sn(On),_,O);const ae=(yield Promise.all(I.map(function(){var jn=(0,y.Z)(function*(gr){if(yield gr._isAvailable())return gr});return function(gr){return jn.apply(this,arguments)}}()))).filter(jn=>jn);let be=ae[0]||sn(On);const bt=_r(O,_.config.apiKey,_.name);let Ht=null;for(const jn of I)try{const gr=yield jn._get(bt);if(gr){const Xr=At._fromJSON(_,gr);jn!==be&&(Ht=Xr),be=jn;break}}catch{}const wn=ae.filter(jn=>jn._shouldAllowMigration);return be._shouldAllowMigration&&wn.length?(be=wn[0],Ht&&(yield be._set(bt,Ht.toJSON())),yield Promise.all(I.map(function(){var jn=(0,y.Z)(function*(gr){if(gr!==be)try{yield gr._remove(bt)}catch{}});return function(gr){return jn.apply(this,arguments)}}())),new Qe(be,_,O)):new Qe(be,_,O)})()}}function de(R){const _=R.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Pe(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(K(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(ke(_))return"Blackberry";if(ht(_))return"Webos";if(z(_))return"Safari";if((_.includes("chrome/")||q(_))&&!_.includes("edge/"))return"Chrome";if(it(_))return"Android";{const O=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==O?void 0:O.length))return O[1]}return"Other"}function K(R=(0,m.z$)()){return/firefox\//i.test(R)}function z(R=(0,m.z$)()){const _=R.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function q(R=(0,m.z$)()){return/crios\//i.test(R)}function Pe(R=(0,m.z$)()){return/iemobile/i.test(R)}function it(R=(0,m.z$)()){return/android/i.test(R)}function ke(R=(0,m.z$)()){return/blackberry/i.test(R)}function ht(R=(0,m.z$)()){return/webos/i.test(R)}function Ct(R=(0,m.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function jt(R=(0,m.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(R)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(R)}function fn(R=(0,m.z$)()){return Ct(R)||it(R)||ht(R)||ke(R)||/windows phone/i.test(R)||Pe(R)}function kn(R,_=[]){let I;switch(R){case"Browser":I=de((0,m.z$)());break;case"Worker":I=`${de((0,m.z$)())}-${R}`;break;default:I=R}const O=_.length?_.join(","):"FirebaseCore-web";return`${I}/JsCore/${le.SDK_VERSION}/${O}`}function wt(){return(wt=(0,y.Z)(function*(R){return(yield Mt(R,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zt(R,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,y.Z)(function*(R,_){return Mt(R,"GET","/v2/recaptchaConfig",lt(R,_))})).apply(this,arguments)}function Nn(R){return void 0!==R&&void 0!==R.getResponse}function Xn(R){return void 0!==R&&void 0!==R.enterprise}class nr{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(I=>"EMAIL_PASSWORD_PROVIDER"===I.provider&&"OFF"!==I.enforcementState)}}function Tr(R){return new Promise((_,I)=>{const O=document.createElement("script");O.setAttribute("src",R),O.onload=_,O.onerror=ae=>{const be=et("internal-error");be.customData=ae,I(be)},O.type="text/javascript",O.charset="UTF-8",function Jr(){var R,_;return null!==(_=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==_?_:document}().appendChild(O)})}function Qn(R){return`__${R}${Math.floor(1e6*Math.random())}`}class rs{constructor(_){this.type="recaptcha-enterprise",this.auth=ei(_)}verify(_="verify",I=!1){var O=this;return(0,y.Z)(function*(){function be(){return be=(0,y.Z)(function*(Ht){if(!I){if(null==Ht.tenantId&&null!=Ht._agentRecaptchaConfig)return Ht._agentRecaptchaConfig.siteKey;if(null!=Ht.tenantId&&void 0!==Ht._tenantRecaptchaConfigs[Ht.tenantId])return Ht._tenantRecaptchaConfigs[Ht.tenantId].siteKey}return new Promise(function(){var wn=(0,y.Z)(function*(jn,gr){zt(Ht,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Xr=>{if(void 0!==Xr.recaptchaKey){const Zo=new nr(Xr);return null==Ht.tenantId?Ht._agentRecaptchaConfig=Zo:Ht._tenantRecaptchaConfigs[Ht.tenantId]=Zo,jn(Zo.siteKey)}gr(new Error("recaptcha Enterprise site key undefined"))}).catch(Xr=>{gr(Xr)})});return function(jn,gr){return wn.apply(this,arguments)}}())}),be.apply(this,arguments)}function bt(Ht,wn,jn){const gr=window.grecaptcha;Xn(gr)?gr.enterprise.ready(()=>{gr.enterprise.execute(Ht,{action:_}).then(Xr=>{wn(Xr)}).catch(()=>{wn("NO_RECAPTCHA")})}):jn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ht,wn)=>{(function ae(Ht){return be.apply(this,arguments)})(O.auth).then(jn=>{if(!I&&Xn(window.grecaptcha))bt(jn,Ht,wn);else{if(typeof window>"u")return void wn(new Error("RecaptchaVerifier is only supported in browser"));Tr("https://www.google.com/recaptcha/enterprise.js?render="+jn).then(()=>{bt(jn,Ht,wn)}).catch(gr=>{wn(gr)})}}).catch(jn=>{wn(jn)})})})()}}function ki(R,_,I){return pi.apply(this,arguments)}function pi(){return(pi=(0,y.Z)(function*(R,_,I,O=!1){const ae=new rs(R);let be;try{be=yield ae.verify(I)}catch{be=yield ae.verify(I,!0)}const bt=Object.assign({},_);return Object.assign(bt,O?{captchaResp:be}:{captchaResponse:be}),Object.assign(bt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(bt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),bt})).apply(this,arguments)}class Bs{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,I){const O=be=>new Promise((bt,Ht)=>{try{bt(_(be))}catch(wn){Ht(wn)}});O.onAbort=I,this.queue.push(O);const ae=this.queue.length-1;return()=>{this.queue[ae]=()=>Promise.resolve()}}runMiddleware(_){var I=this;return(0,y.Z)(function*(){if(I.auth.currentUser===_)return;const O=[];try{for(const ae of I.queue)yield ae(_),ae.onAbort&&O.push(ae.onAbort)}catch(ae){O.reverse();for(const be of O)try{be()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null==ae?void 0:ae.message})}})()}}class Si{constructor(_,I,O,ae){this.app=_,this.heartbeatServiceProvider=I,this.appCheckServiceProvider=O,this.config=ae,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vs(this),this.idTokenSubscription=new vs(this),this.beforeStateQueue=new Bs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=It,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=ae.sdkClientVersion}_initializeWithPersistence(_,I){var O=this;return I&&(this._popupRedirectResolver=sn(I)),this._initializationPromise=this.queue((0,y.Z)(function*(){var ae,be;if(!O._deleted&&(O.persistenceManager=yield Qe.create(O,_),!O._deleted)){if(null!==(ae=O._popupRedirectResolver)&&void 0!==ae&&ae._shouldInitProactively)try{yield O._popupRedirectResolver._initialize(O)}catch{}yield O.initializeCurrentUser(I),O.lastNotifiedUid=(null===(be=O.currentUser)||void 0===be?void 0:be.uid)||null,!O._deleted&&(O._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,y.Z)(function*(){if(_._deleted)return;const I=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||I){if(_.currentUser&&I&&_.currentUser.uid===I.uid)return _._currentUser._assign(I),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(I,!0)}})()}initializeCurrentUser(_){var I=this;return(0,y.Z)(function*(){var O;const ae=yield I.assertedPersistence.getCurrentUser();let be=ae,bt=!1;if(_&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const Ht=null===(O=I.redirectUser)||void 0===O?void 0:O._redirectEventId,wn=null==be?void 0:be._redirectEventId,jn=yield I.tryRedirectSignIn(_);(!Ht||Ht===wn)&&null!=jn&&jn.user&&(be=jn.user,bt=!0)}if(!be)return I.directlySetCurrentUser(null);if(!be._redirectEventId){if(bt)try{yield I.beforeStateQueue.runMiddleware(be)}catch(Ht){be=ae,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(Ht))}return be?I.reloadAndSetCurrentUserOrClear(be):I.directlySetCurrentUser(null)}return Le(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===be._redirectEventId?I.directlySetCurrentUser(be):I.reloadAndSetCurrentUserOrClear(be)})()}tryRedirectSignIn(_){var I=this;return(0,y.Z)(function*(){let O=null;try{O=yield I._popupRedirectResolver._completeRedirectFn(I,_,!0)}catch{yield I._setRedirectUser(null)}return O})()}reloadAndSetCurrentUserOrClear(_){var I=this;return(0,y.Z)(function*(){try{yield ar(_)}catch(O){if("auth/network-request-failed"!==(null==O?void 0:O.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var _=this;return(0,y.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var I=this;return(0,y.Z)(function*(){const O=_?(0,m.m9)(_):null;return O&&Le(O.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(O&&O._clone(I))})()}_updateCurrentUser(_,I=!1){var O=this;return(0,y.Z)(function*(){if(!O._deleted)return _&&Le(O.tenantId===_.tenantId,O,"tenant-id-mismatch"),I||(yield O.beforeStateQueue.runMiddleware(_)),O.queue((0,y.Z)(function*(){yield O.directlySetCurrentUser(_),O.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,y.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var I=this;return this.queue((0,y.Z)(function*(){yield I.assertedPersistence.setPersistence(sn(_))}))}initializeRecaptchaConfig(){var _=this;return(0,y.Z)(function*(){const I=yield zt(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),O=new nr(I);null==_.tenantId?_._agentRecaptchaConfig=O:_._tenantRecaptchaConfigs[_.tenantId]=O,O.emailPasswordEnabled&&new rs(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new m.LL("auth","Firebase",_())}onAuthStateChanged(_,I,O){return this.registerStateListener(this.authStateSubscription,_,I,O)}beforeAuthStateChanged(_,I){return this.beforeStateQueue.pushCallback(_,I)}onIdTokenChanged(_,I,O){return this.registerStateListener(this.idTokenSubscription,_,I,O)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,I){var O=this;return(0,y.Z)(function*(){const ae=yield O.getOrInitRedirectPersistenceManager(I);return null===_?ae.removeCurrentUser():ae.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var I=this;return(0,y.Z)(function*(){if(!I.redirectPersistenceManager){const O=_&&sn(_)||I._popupRedirectResolver;Le(O,I,"argument-error"),I.redirectPersistenceManager=yield Qe.create(I,[sn(O._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(_){var I=this;return(0,y.Z)(function*(){var O,ae;return I._isInitialized&&(yield I.queue((0,y.Z)(function*(){}))),(null===(O=I._currentUser)||void 0===O?void 0:O._redirectEventId)===_?I._currentUser:(null===(ae=I.redirectUser)||void 0===ae?void 0:ae._redirectEventId)===_?I.redirectUser:null})()}_persistUserIfCurrent(_){var I=this;return(0,y.Z)(function*(){if(_===I.currentUser)return I.queue((0,y.Z)(function*(){return I.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const O=null!==(I=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==O&&(this.lastNotifiedUid=O,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,I,O,ae){if(this._deleted)return()=>{};const be="function"==typeof I?I:I.next.bind(I),bt=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(bt,this,"internal-error"),bt.then(()=>be(this.currentUser)),"function"==typeof I?_.addObserver(I,O,ae):_.addObserver(I)}directlySetCurrentUser(_){var I=this;return(0,y.Z)(function*(){I.currentUser&&I.currentUser!==_&&I._currentUser._stopProactiveRefresh(),_&&I.isProactiveRefreshEnabled&&_._startProactiveRefresh(),I.currentUser=_,_?yield I.assertedPersistence.setCurrentUser(_):yield I.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,y.Z)(function*(){var I;const O={"X-Client-Version":_.clientVersion};_.app.options.appId&&(O["X-Firebase-gmpid"]=_.app.options.appId);const ae=yield null===(I=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();ae&&(O["X-Firebase-Client"]=ae);const be=yield _._getAppCheckToken();return be&&(O["X-Firebase-AppCheck"]=be),O})()}_getAppCheckToken(){var _=this;return(0,y.Z)(function*(){var I;const O=yield null===(I=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getToken();return null!=O&&O.error&&function ct(R,..._){Ce.logLevel<=De.in.WARN&&Ce.warn(`Auth (${le.SDK_VERSION}): ${R}`,..._)}(`Error while retrieving App Check token: ${O.error}`),null==O?void 0:O.token})()}}function ei(R){return(0,m.m9)(R)}class vs{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,m.ne)(I=>this.observer=I)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qs(R,_,I){const O=ei(R);Le(O._canInitEmulator,O,"emulator-config-failed"),Le(/^https?:\/\//.test(_),O,"invalid-emulator-scheme");const ae=!(null==I||!I.disableWarnings),be=W(_),{host:bt,port:Ht}=function ne(R){const _=W(R),I=/(\/\/)?([^?#/]+)/.exec(R.substr(_.length));if(!I)return{host:"",port:null};const O=I[2].split("@").pop()||"",ae=/^(\[[^\]]+\])(:|$)/.exec(O);if(ae){const be=ae[1];return{host:be,port:Ee(O.substr(be.length+1))}}{const[be,bt]=O.split(":");return{host:be,port:Ee(bt)}}}(_);O.config.emulator={url:`${be}//${bt}${null===Ht?"":`:${Ht}`}/`},O.settings.appVerificationDisabledForTesting=!0,O.emulatorConfig=Object.freeze({host:bt,port:Ht,protocol:be.replace(":",""),options:Object.freeze({disableWarnings:ae})}),ae||function oe(){function R(){const _=document.createElement("p"),I=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}function W(R){const _=R.indexOf(":");return _<0?"":R.substr(0,_+1)}function Ee(R){if(!R)return null;const _=Number(R);return isNaN(_)?null:_}class G{constructor(_,I){this.providerId=_,this.signInMethod=I}toJSON(){return _t("not implemented")}_getIdTokenResponse(_){return _t("not implemented")}_linkToIdToken(_,I){return _t("not implemented")}_getReauthenticationResolver(_){return _t("not implemented")}}function ie(R,_){return $e.apply(this,arguments)}function $e(){return($e=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:resetPassword",lt(R,_))})).apply(this,arguments)}function Xe(R,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function cn(){return(cn=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:update",lt(R,_))})).apply(this,arguments)}function gn(R,_){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithPassword",lt(R,_))})).apply(this,arguments)}function ur(R,_){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:sendOobCode",lt(R,_))})).apply(this,arguments)}function is(){return(is=(0,y.Z)(function*(R,_){return ur(R,_)})).apply(this,arguments)}function Gr(R,_){return En.apply(this,arguments)}function En(){return(En=(0,y.Z)(function*(R,_){return ur(R,_)})).apply(this,arguments)}function hr(R,_){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,y.Z)(function*(R,_){return ur(R,_)})).apply(this,arguments)}function bo(){return(bo=(0,y.Z)(function*(R,_){return ur(R,_)})).apply(this,arguments)}function Xs(){return(Xs=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithEmailLink",lt(R,_))})).apply(this,arguments)}function Yi(){return(Yi=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithEmailLink",lt(R,_))})).apply(this,arguments)}class Li extends G{constructor(_,I,O,ae=null){super("password",O),this._email=_,this._password=I,this._tenantId=ae}static _fromEmailAndPassword(_,I){return new Li(_,I,"password")}static _fromEmailAndCode(_,I,O=null){return new Li(_,I,"emailLink",O)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_;if(null!=I&&I.email&&null!=I&&I.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(_){var I=this;return(0,y.Z)(function*(){var O;switch(I.signInMethod){case"password":const ae={returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(O=_._getRecaptchaConfig())&&void 0!==O&&O.emailPasswordEnabled){const be=yield ki(_,ae,"signInWithPassword");return gn(_,be)}return gn(_,ae).catch(function(){var be=(0,y.Z)(function*(bt){if("auth/missing-recaptcha-token"===bt.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ht=yield ki(_,ae,"signInWithPassword");return gn(_,Ht)}return Promise.reject(bt)});return function(bt){return be.apply(this,arguments)}}());case"emailLink":return function zi(R,_){return Xs.apply(this,arguments)}(_,{email:I._email,oobCode:I._password});default:ze(_,"internal-error")}})()}_linkToIdToken(_,I){var O=this;return(0,y.Z)(function*(){switch(O.signInMethod){case"password":return Xe(_,{idToken:I,returnSecureToken:!0,email:O._email,password:O._password});case"emailLink":return function Qr(R,_){return Yi.apply(this,arguments)}(_,{idToken:I,email:O._email,oobCode:O._password});default:ze(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function er(R,_){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithIdp",lt(R,_))})).apply(this,arguments)}class $r extends G{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const I=new $r(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(I.idToken=_.idToken),_.accessToken&&(I.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(I.nonce=_.nonce),_.pendingToken&&(I.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(I.accessToken=_.oauthToken,I.secret=_.oauthTokenSecret):ze("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_,{providerId:O,signInMethod:ae}=I,be=(0,ve._T)(I,["providerId","signInMethod"]);if(!O||!ae)return null;const bt=new $r(O,ae);return bt.idToken=be.idToken||void 0,bt.accessToken=be.accessToken||void 0,bt.secret=be.secret,bt.nonce=be.nonce,bt.pendingToken=be.pendingToken||null,bt}_getIdTokenResponse(_){return er(_,this.buildRequest())}_linkToIdToken(_,I){const O=this.buildRequest();return O.idToken=I,er(_,O)}_getReauthenticationResolver(_){const I=this.buildRequest();return I.autoCreate=!1,er(_,I)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),_.postBody=(0,m.xO)(I)}return _}}function ss(){return(ss=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:sendVerificationCode",lt(R,_))})).apply(this,arguments)}function xs(){return(xs=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithPhoneNumber",lt(R,_))})).apply(this,arguments)}function po(){return(po=(0,y.Z)(function*(R,_){const I=yield Je(R,"POST","/v1/accounts:signInWithPhoneNumber",lt(R,_));if(I.temporaryProof)throw Tn(R,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const $s={USER_NOT_FOUND:"user-not-found"};function ta(){return(ta=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithPhoneNumber",lt(R,Object.assign(Object.assign({},_),{operation:"REAUTH"})),$s)})).apply(this,arguments)}class xi extends G{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,I){return new xi({verificationId:_,verificationCode:I})}static _fromTokenResponse(_,I){return new xi({phoneNumber:_,temporaryProof:I})}_getIdTokenResponse(_){return function Rs(R,_){return xs.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,I){return function fo(R,_){return po.apply(this,arguments)}(_,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Ks(R,_){return ta.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:I,verificationId:O,verificationCode:ae}=this.params;return _&&I?{temporaryProof:_,phoneNumber:I}:{sessionInfo:O,code:ae}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:I,verificationCode:O,phoneNumber:ae,temporaryProof:be}=_;return O||I||ae||be?new xi({verificationId:I,verificationCode:O,phoneNumber:ae,temporaryProof:be}):null}}class eo{constructor(_){var I,O,ae,be,bt,Ht;const wn=(0,m.zd)((0,m.pd)(_)),jn=null!==(I=wn.apiKey)&&void 0!==I?I:null,gr=null!==(O=wn.oobCode)&&void 0!==O?O:null,Xr=function Cr(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ae=wn.mode)&&void 0!==ae?ae:null);Le(jn&&gr&&Xr,"argument-error"),this.apiKey=jn,this.operation=Xr,this.code=gr,this.continueUrl=null!==(be=wn.continueUrl)&&void 0!==be?be:null,this.languageCode=null!==(bt=wn.languageCode)&&void 0!==bt?bt:null,this.tenantId=null!==(Ht=wn.tenantId)&&void 0!==Ht?Ht:null}static parseLink(_){const I=function Wa(R){const _=(0,m.zd)((0,m.pd)(R)).link,I=_?(0,m.zd)((0,m.pd)(_)).deep_link_id:null,O=(0,m.zd)((0,m.pd)(R)).deep_link_id;return(O?(0,m.zd)((0,m.pd)(O)).link:null)||O||I||_||R}(_);try{return new eo(I)}catch{return null}}}let Zi=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(I,O){return Li._fromEmailAndPassword(I,O)}static credentialWithLink(I,O){const ae=eo.parseLink(O);return Le(ae,"argument-error"),Li._fromEmailAndCode(I,ae.code,ae.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class yi{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class qs extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Ps extends qs{static credentialFromJSON(_){const I="string"==typeof _?JSON.parse(_):_;return Le("providerId"in I&&"signInMethod"in I,"argument-error"),$r._fromParams(I)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return Le(_.idToken||_.accessToken,"argument-error"),$r._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Ps.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Ps.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:O,oauthTokenSecret:ae,pendingToken:be,nonce:bt,providerId:Ht}=_;if(!O&&!ae&&!I&&!be||!Ht)return null;try{return new Ps(Ht)._credential({idToken:I,accessToken:O,nonce:bt,pendingToken:be})}catch{return null}}}let Ti=(()=>{class R extends qs{constructor(){super("facebook.com")}static credential(I){return $r._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch{return null}}}return R.FACEBOOK_SIGN_IN_METHOD="facebook.com",R.PROVIDER_ID="facebook.com",R})(),Ta=(()=>{class R extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(I,O){return $r._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:O})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:O,oauthAccessToken:ae}=I;if(!O&&!ae)return null;try{return R.credential(O,ae)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})(),os=(()=>{class R extends qs{constructor(){super("github.com")}static credential(I){return $r._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch{return null}}}return R.GITHUB_SIGN_IN_METHOD="github.com",R.PROVIDER_ID="github.com",R})();class Lo extends G{constructor(_,I){super(_,_),this.pendingToken=I}_getIdTokenResponse(_){return er(_,this.buildRequest())}_linkToIdToken(_,I){const O=this.buildRequest();return O.idToken=I,er(_,O)}_getReauthenticationResolver(_){const I=this.buildRequest();return I.autoCreate=!1,er(_,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_,{providerId:O,signInMethod:ae,pendingToken:be}=I;return O&&ae&&be&&O===ae?new Lo(O,be):null}static _create(_,I){return new Lo(_,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qi extends yi{constructor(_){Le(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Qi.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Qi.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const I=Lo.fromJSON(_);return Le(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:I,providerId:O}=_;if(!I||!O)return null;try{return Lo._create(O,I)}catch{return null}}}let Wi=(()=>{class R extends qs{constructor(){super("twitter.com")}static credential(I,O){return $r._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:O})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:O,oauthTokenSecret:ae}=I;if(!O||!ae)return null;try{return R.credential(O,ae)}catch{return null}}}return R.TWITTER_SIGN_IN_METHOD="twitter.com",R.PROVIDER_ID="twitter.com",R})();function to(R,_){return So.apply(this,arguments)}function So(){return(So=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signUp",lt(R,_))})).apply(this,arguments)}class Cs{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,I,O,ae=!1){return(0,y.Z)(function*(){const be=yield At._fromIdTokenResponse(_,O,ae),bt=Bo(O);return new Cs({user:be,providerId:bt,_tokenResponse:O,operationType:I})})()}static _forOperation(_,I,O){return(0,y.Z)(function*(){yield _._updateTokensIfNecessary(O,!0);const ae=Bo(O);return new Cs({user:_,providerId:ae,_tokenResponse:O,operationType:I})})()}}function Bo(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}function bs(R){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,y.Z)(function*(R){var _;const I=ei(R);if(yield I._initializationPromise,null!==(_=I.currentUser)&&void 0!==_&&_.isAnonymous)return new Cs({user:I.currentUser,providerId:null,operationType:"signIn"});const O=yield to(I,{returnSecureToken:!0}),ae=yield Cs._fromIdTokenResponse(I,"signIn",O,!0);return yield I._updateCurrentUser(ae.user),ae})).apply(this,arguments)}class To extends m.ZR{constructor(_,I,O,ae){var be;super(I.code,I.message),this.operationType=O,this.user=ae,Object.setPrototypeOf(this,To.prototype),this.customData={appName:_.name,tenantId:null!==(be=_.tenantId)&&void 0!==be?be:void 0,_serverResponse:I.customData._serverResponse,operationType:O}}static _fromErrorAndOperation(_,I,O,ae){return new To(_,I,O,ae)}}function Es(R,_,I,O){return("reauthenticate"===_?I._getReauthenticationResolver(R):I._getIdTokenResponse(R)).catch(be=>{throw"auth/multi-factor-auth-required"===be.code?To._fromErrorAndOperation(R,be,_,O):be})}function no(R){return new Set(R.map(({providerId:_})=>_).filter(_=>!!_))}function Ao(R,_){return S.apply(this,arguments)}function S(){return S=(0,y.Z)(function*(R,_){const I=(0,m.m9)(R);yield Q(!0,I,_);const{providerUserInfo:O}=yield function In(R,_){return Ft.apply(this,arguments)}(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[_]}),ae=no(O||[]);return I.providerData=I.providerData.filter(be=>ae.has(be.providerId)),ae.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I}),S.apply(this,arguments)}function J(R,_){return T.apply(this,arguments)}function T(){return(T=(0,y.Z)(function*(R,_,I=!1){const O=yield Sn(R,_._linkToIdToken(R.auth,yield R.getIdToken()),I);return Cs._forOperation(R,"link",O)})).apply(this,arguments)}function Q(R,_,I){return Me.apply(this,arguments)}function Me(){return(Me=(0,y.Z)(function*(R,_,I){yield ar(_);const ae=!1===R?"provider-already-linked":"no-such-provider";Le(no(_.providerData).has(I)===R,_.auth,ae)})).apply(this,arguments)}function Kt(R,_){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,y.Z)(function*(R,_,I=!1){const{auth:O}=R,ae="reauthenticate";try{const be=yield Sn(R,Es(O,ae,_,R),I);Le(be.idToken,O,"internal-error");const bt=Or(be.idToken);Le(bt,O,"internal-error");const{sub:Ht}=bt;return Le(R.uid===Ht,O,"user-mismatch"),Cs._forOperation(R,ae,be)}catch(be){throw"auth/user-not-found"===(null==be?void 0:be.code)&&ze(O,"user-mismatch"),be}})).apply(this,arguments)}function Yn(R,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,y.Z)(function*(R,_,I=!1){const O="signIn",ae=yield Es(R,O,_),be=yield Cs._fromIdTokenResponse(R,O,ae);return I||(yield R._updateCurrentUser(be.user)),be})).apply(this,arguments)}function br(R,_){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,y.Z)(function*(R,_){return Yn(ei(R),_)})).apply(this,arguments)}function $i(R,_){return gs.apply(this,arguments)}function gs(){return(gs=(0,y.Z)(function*(R,_){const I=(0,m.m9)(R);return yield Q(!1,I,_.providerId),J(I,_)})).apply(this,arguments)}function Vs(R,_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(R,_){return Kt((0,m.m9)(R),_)})).apply(this,arguments)}function Z(){return(Z=(0,y.Z)(function*(R,_){return Je(R,"POST","/v1/accounts:signInWithCustomToken",lt(R,_))})).apply(this,arguments)}function j(R,_){return C.apply(this,arguments)}function C(){return C=(0,y.Z)(function*(R,_){const I=ei(R),O=yield function Ds(R,_){return Z.apply(this,arguments)}(I,{token:_,returnSecureToken:!0}),ae=yield Cs._fromIdTokenResponse(I,"signIn",O);return yield I._updateCurrentUser(ae.user),ae}),C.apply(this,arguments)}class N{constructor(_,I){this.factorId=_,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(_,I){return"phoneInfo"in I?fe._fromServerResponse(_,I):"totpInfo"in I?rt._fromServerResponse(_,I):ze(_,"internal-error")}}class fe extends N{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,I){return new fe(I)}}class rt extends N{constructor(_){super("totp",_)}static _fromServerResponse(_,I){return new rt(I)}}function Lt(R,_,I){var O;Le((null===(O=I.url)||void 0===O?void 0:O.length)>0,R,"invalid-continue-uri"),Le(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,R,"invalid-dynamic-link-domain"),_.continueUrl=I.url,_.dynamicLinkDomain=I.dynamicLinkDomain,_.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(Le(I.iOS.bundleId.length>0,R,"missing-ios-bundle-id"),_.iOSBundleId=I.iOS.bundleId),I.android&&(Le(I.android.packageName.length>0,R,"missing-android-pkg-name"),_.androidInstallApp=I.android.installApp,_.androidMinimumVersionCode=I.android.minimumVersion,_.androidPackageName=I.android.packageName)}function nn(R,_,I){return an.apply(this,arguments)}function an(){return an=(0,y.Z)(function*(R,_,I){var O;const ae=ei(R),be={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(O=ae._getRecaptchaConfig())&&void 0!==O&&O.emailPasswordEnabled){const bt=yield ki(ae,be,"getOobCode",!0);I&&Lt(ae,bt,I),yield Gr(ae,bt)}else I&&Lt(ae,be,I),yield Gr(ae,be).catch(function(){var bt=(0,y.Z)(function*(Ht){if("auth/missing-recaptcha-token"!==Ht.code)return Promise.reject(Ht);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const wn=yield ki(ae,be,"getOobCode",!0);I&&Lt(ae,wn,I),yield Gr(ae,wn)}});return function(Ht){return bt.apply(this,arguments)}}())}),an.apply(this,arguments)}function jr(R,_,I){return qr.apply(this,arguments)}function qr(){return(qr=(0,y.Z)(function*(R,_,I){yield ie((0,m.m9)(R),{oobCode:_,newPassword:I})})).apply(this,arguments)}function Vr(R,_){return wr.apply(this,arguments)}function wr(){return wr=(0,y.Z)(function*(R,_){yield function Rt(R,_){return cn.apply(this,arguments)}((0,m.m9)(R),{oobCode:_})}),wr.apply(this,arguments)}function Fr(R,_){return go.apply(this,arguments)}function go(){return(go=(0,y.Z)(function*(R,_){const I=(0,m.m9)(R),O=yield ie(I,{oobCode:_}),ae=O.requestType;switch(Le(ae,I,"internal-error"),ae){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(O.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(O.mfaInfo,I,"internal-error");default:Le(O.email,I,"internal-error")}let be=null;return O.mfaInfo&&(be=N._fromServerResponse(ei(I),O.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.newEmail:O.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.email:O.newEmail)||null,multiFactorInfo:be},operation:ae}})).apply(this,arguments)}function $o(R,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)(function*(R,_){const{data:I}=yield Fr((0,m.m9)(R),_);return I.email})).apply(this,arguments)}function Us(R,_,I){return ro.apply(this,arguments)}function ro(){return ro=(0,y.Z)(function*(R,_,I){var O;const ae=ei(R),be={returnSecureToken:!0,email:_,password:I,clientType:"CLIENT_TYPE_WEB"};let bt;if(null!==(O=ae._getRecaptchaConfig())&&void 0!==O&&O.emailPasswordEnabled){const jn=yield ki(ae,be,"signUpPassword");bt=to(ae,jn)}else bt=to(ae,be).catch(function(){var jn=(0,y.Z)(function*(gr){if("auth/missing-recaptcha-token"===gr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Xr=yield ki(ae,be,"signUpPassword");return to(ae,Xr)}return Promise.reject(gr)});return function(gr){return jn.apply(this,arguments)}}());const Ht=yield bt.catch(jn=>Promise.reject(jn)),wn=yield Cs._fromIdTokenResponse(ae,"signIn",Ht);return yield ae._updateCurrentUser(wn.user),wn}),ro.apply(this,arguments)}function as(R,_,I){return br((0,m.m9)(R),Zi.credential(_,I))}function Ys(R,_,I){return ma.apply(this,arguments)}function ma(){return ma=(0,y.Z)(function*(R,_,I){var O;const ae=ei(R),be={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function bt(Ht,wn){Le(wn.handleCodeInApp,ae,"argument-error"),wn&&Lt(ae,Ht,wn)}if(null!==(O=ae._getRecaptchaConfig())&&void 0!==O&&O.emailPasswordEnabled){const Ht=yield ki(ae,be,"getOobCode",!0);bt(Ht,I),yield hr(ae,Ht)}else bt(be,I),yield hr(ae,be).catch(function(){var Ht=(0,y.Z)(function*(wn){if("auth/missing-recaptcha-token"!==wn.code)return Promise.reject(wn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const jn=yield ki(ae,be,"getOobCode",!0);bt(jn,I),yield hr(ae,jn)}});return function(wn){return Ht.apply(this,arguments)}}())}),ma.apply(this,arguments)}function Ko(R,_){const I=eo.parseLink(_);return"EMAIL_SIGNIN"===(null==I?void 0:I.operation)}function js(R,_,I){return ya.apply(this,arguments)}function ya(){return(ya=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R),ae=Zi.credentialWithLink(_,I||pt());return Le(ae._tenantId===(O.tenantId||null),O,"tenant-id-mismatch"),br(O,ae)})).apply(this,arguments)}function hu(){return(hu=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:createAuthUri",lt(R,_))})).apply(this,arguments)}function Vo(R,_){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,y.Z)(function*(R,_){const O={identifier:_,continueUri:Et()?pt():"http://localhost"},{signinMethods:ae}=yield function Fl(R,_){return hu.apply(this,arguments)}((0,m.m9)(R),O);return ae||[]}),Ll.apply(this,arguments)}function Vi(R,_){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,y.Z)(function*(R,_){const I=(0,m.m9)(R),ae={requestType:"VERIFY_EMAIL",idToken:yield R.getIdToken()};_&&Lt(I.auth,ae,_);const{email:be}=yield function Fi(R,_){return is.apply(this,arguments)}(I.auth,ae);be!==R.email&&(yield R.reload())}),Ec.apply(this,arguments)}function fu(R,_,I){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R),be={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield R.getIdToken(),newEmail:_};I&&Lt(O.auth,be,I);const{email:bt}=yield function Hi(R,_){return bo.apply(this,arguments)}(O.auth,be);bt!==R.email&&(yield R.reload())}),Ss.apply(this,arguments)}function oa(){return(oa=(0,y.Z)(function*(R,_){return Mt(R,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function yl(R,_){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,y.Z)(function*(R,{displayName:_,photoURL:I}){if(void 0===_&&void 0===I)return;const O=(0,m.m9)(R),be={idToken:yield O.getIdToken(),displayName:_,photoUrl:I,returnSecureToken:!0},bt=yield Sn(O,function ld(R,_){return oa.apply(this,arguments)}(O.auth,be));O.displayName=bt.displayName||null,O.photoURL=bt.photoUrl||null;const Ht=O.providerData.find(({providerId:wn})=>"password"===wn);Ht&&(Ht.displayName=O.displayName,Ht.photoURL=O.photoURL),yield O._updateTokensIfNecessary(bt)}),Uo.apply(this,arguments)}function Ka(R,_){return ti((0,m.m9)(R),_,null)}function jo(R,_){return ti((0,m.m9)(R),null,_)}function ti(R,_,I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,y.Z)(function*(R,_,I){const{auth:O}=R,be={idToken:yield R.getIdToken(),returnSecureToken:!0};_&&(be.email=_),I&&(be.password=I);const bt=yield Sn(R,Xe(O,be));yield R._updateTokensIfNecessary(bt,!0)})).apply(this,arguments)}class ls{constructor(_,I,O={}){this.isNewUser=_,this.providerId=I,this.profile=O}}class vl extends ls{constructor(_,I,O,ae){super(_,I,O),this.username=ae}}class Bl extends ls{constructor(_,I){super(_,"facebook.com",I)}}class qa extends vl{constructor(_,I){super(_,"github.com",I,"string"==typeof(null==I?void 0:I.login)?null==I?void 0:I.login:null)}}class Ts extends ls{constructor(_,I){super(_,"google.com",I)}}class ud extends vl{constructor(_,I,O){super(_,"twitter.com",I,O)}}function pu(R){const{user:_,_tokenResponse:I}=R;return _.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function Aa(R){var _,I;if(!R)return null;const{providerId:O}=R,ae=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},be=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!O&&null!=R&&R.idToken){const bt=null===(I=null===(_=Or(R.idToken))||void 0===_?void 0:_.firebase)||void 0===I?void 0:I.sign_in_provider;if(bt)return new ls(be,"anonymous"!==bt&&"custom"!==bt?bt:null)}if(!O)return null;switch(O){case"facebook.com":return new Bl(be,ae);case"github.com":return new qa(be,ae);case"google.com":return new Ts(be,ae);case"twitter.com":return new ud(be,ae,R.screenName||null);case"custom":case"anonymous":return new ls(be,null);default:return new ls(be,O,ae)}}(I)}class fr{constructor(_,I,O){this.type=_,this.credential=I,this.auth=O}static _fromIdtoken(_,I){return new fr("enroll",_,I)}static _fromMfaPendingCredential(_){return new fr("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var I,O;if(null!=_&&_.multiFactorSession){if(null!==(I=_.multiFactorSession)&&void 0!==I&&I.pendingCredential)return fr._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(O=_.multiFactorSession)&&void 0!==O&&O.idToken)return fr._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Ar{constructor(_,I,O){this.session=_,this.hints=I,this.signInResolver=O}static _fromError(_,I){const O=ei(_),ae=I.customData._serverResponse,be=(ae.mfaInfo||[]).map(Ht=>N._fromServerResponse(O,Ht));Le(ae.mfaPendingCredential,O,"internal-error");const bt=fr._fromMfaPendingCredential(ae.mfaPendingCredential);return new Ar(bt,be,function(){var Ht=(0,y.Z)(function*(wn){const jn=yield wn._process(O,bt);delete ae.mfaInfo,delete ae.mfaPendingCredential;const gr=Object.assign(Object.assign({},ae),{idToken:jn.idToken,refreshToken:jn.refreshToken});switch(I.operationType){case"signIn":const Xr=yield Cs._fromIdTokenResponse(O,I.operationType,gr);return yield O._updateCurrentUser(Xr.user),Xr;case"reauthenticate":return Le(I.user,O,"internal-error"),Cs._forOperation(I.user,I.operationType,gr);default:ze(O,"internal-error")}});return function(wn){return Ht.apply(this,arguments)}}())}resolveSignIn(_){var I=this;return(0,y.Z)(function*(){return I.signInResolver(_)})()}}function Ai(R,_){var I;const O=(0,m.m9)(R),ae=_;return Le(_.customData.operationType,O,"argument-error"),Le(null===(I=ae.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,O,"argument-error"),Ar._fromError(O,ae)}class mo{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(O=>N._fromServerResponse(_.auth,O)))})}static _fromUser(_){return new mo(_)}getSession(){var _=this;return(0,y.Z)(function*(){return fr._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,I){var O=this;return(0,y.Z)(function*(){const ae=_,be=yield O.getSession(),bt=yield Sn(O.user,ae._process(O.user.auth,be,I));return yield O.user._updateTokensIfNecessary(bt),O.user.reload()})()}unenroll(_){var I=this;return(0,y.Z)(function*(){const O="string"==typeof _?_:_.uid,ae=yield I.user.getIdToken();try{const be=yield Sn(I.user,function zs(R,_){return Mt(R,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(R,_))}(I.user.auth,{idToken:ae,mfaEnrollmentId:O}));I.enrolledFactors=I.enrolledFactors.filter(({uid:bt})=>bt!==O),yield I.user._updateTokensIfNecessary(be),yield I.user.reload()}catch(be){throw be}})()}}const Pn=new WeakMap;function Zn(R){const _=(0,m.m9)(R);return Pn.has(_)||Pn.set(_,mo._fromUser(_)),Pn.get(_)}const rn="__sak";class en{constructor(_,I){this.storageRetriever=_,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(rn,"1"),this.storage.removeItem(rn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,I){return this.storage.setItem(_,JSON.stringify(I)),Promise.resolve()}_get(_){const I=this.storage.getItem(_);return Promise.resolve(I?JSON.parse(I):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Za=(()=>{class R extends en{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,O)=>this.onStorageEvent(I,O),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vt(){const R=(0,m.z$)();return z(R)||Ct(R)}()&&function Wn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const O of Object.keys(this.listeners)){const ae=this.storage.getItem(O),be=this.localCache[O];ae!==be&&I(O,be,ae)}}onStorageEvent(I,O=!1){if(!I.key)return void this.forAllChangedKeys((Ht,wn,jn)=>{this.notifyListeners(Ht,jn)});const ae=I.key;if(O?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ht=this.storage.getItem(ae);if(I.newValue!==Ht)null!==I.newValue?this.storage.setItem(ae,I.newValue):this.storage.removeItem(ae);else if(this.localCache[ae]===I.newValue&&!O)return}const be=()=>{const Ht=this.storage.getItem(ae);!O&&this.localCache[ae]===Ht||this.notifyListeners(ae,Ht)},bt=this.storage.getItem(ae);!function on(){return(0,m.w1)()&&10===document.documentMode}()||bt===I.newValue||I.newValue===I.oldValue?be():setTimeout(be,10)}notifyListeners(I,O){this.localCache[I]=O;const ae=this.listeners[I];if(ae)for(const be of Array.from(ae))be(O&&JSON.parse(O))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,O,ae)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:O,newValue:ae}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,O){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(O)}_removeListener(I,O){this.listeners[I]&&(this.listeners[I].delete(O),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,O){var ae=()=>super._set,be=this;return(0,y.Z)(function*(){yield ae().call(be,I,O),be.localCache[I]=JSON.stringify(O)})()}_get(I){var O=()=>super._get,ae=this;return(0,y.Z)(function*(){const be=yield O().call(ae,I);return ae.localCache[I]=JSON.stringify(be),be})()}_remove(I){var O=()=>super._remove,ae=this;return(0,y.Z)(function*(){yield O().call(ae,I),delete ae.localCache[I]})()}}return R.type="LOCAL",R})(),wc=(()=>{class R extends en{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,O){}_removeListener(I,O){}}return R.type="SESSION",R})();let _l=(()=>{class R{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const O=this.receivers.find(be=>be.isListeningto(I));if(O)return O;const ae=new R(I);return this.receivers.push(ae),ae}isListeningto(I){return this.eventTarget===I}handleEvent(I){var O=this;return(0,y.Z)(function*(){const ae=I,{eventId:be,eventType:bt,data:Ht}=ae.data,wn=O.handlersMap[bt];if(null==wn||!wn.size)return;ae.ports[0].postMessage({status:"ack",eventId:be,eventType:bt});const jn=Array.from(wn).map(function(){var Xr=(0,y.Z)(function*(Zo){return Zo(ae.origin,Ht)});return function(Zo){return Xr.apply(this,arguments)}}()),gr=yield function gu(R){return Promise.all(R.map(function(){var _=(0,y.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(O){return{fulfilled:!1,reason:O}}});return function(I){return _.apply(this,arguments)}}()))}(jn);ae.ports[0].postMessage({status:"done",eventId:be,eventType:bt,response:gr})})()}_subscribe(I,O){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(O)}_unsubscribe(I,O){this.handlersMap[I]&&O&&this.handlersMap[I].delete(O),(!O||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function $l(R="",_=10){let I="";for(let O=0;O<_;O++)I+=Math.floor(10*Math.random());return R+I}class gf{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,I,O=50){var ae=this;return(0,y.Z)(function*(){const be=typeof MessageChannel<"u"?new MessageChannel:null;if(!be)throw new Error("connection_unavailable");let bt,Ht;return new Promise((wn,jn)=>{const gr=$l("",20);be.port1.start();const Xr=setTimeout(()=>{jn(new Error("unsupported_event"))},O);Ht={messageChannel:be,onMessage(Zo){const Yl=Zo;if(Yl.data.eventId===gr)switch(Yl.data.status){case"ack":clearTimeout(Xr),bt=setTimeout(()=>{jn(new Error("timeout"))},3e3);break;case"done":clearTimeout(bt),wn(Yl.data.response);break;default:clearTimeout(Xr),clearTimeout(bt),jn(new Error("invalid_response"))}}},ae.handlers.add(Ht),be.port1.addEventListener("message",Ht.onMessage),ae.target.postMessage({eventType:_,eventId:gr,data:I},[be.port2])}).finally(()=>{Ht&&ae.removeMessageHandler(Ht)})})()}}function bi(){return window}function Gu(){return typeof bi().WorkerGlobalScope<"u"&&"function"==typeof bi().importScripts}function Ro(){return(Ro=(0,y.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cr="firebaseLocalStorageDb",ni="firebaseLocalStorage",Wu="fbase_key";class es{constructor(_){this.request=_}toPromise(){return new Promise((_,I)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function Mn(R,_){return R.transaction([ni],_?"readwrite":"readonly").objectStore(ni)}function mu(){const R=indexedDB.open(cr,1);return new Promise((_,I)=>{R.addEventListener("error",()=>{I(R.error)}),R.addEventListener("upgradeneeded",()=>{const O=R.result;try{O.createObjectStore(ni,{keyPath:Wu})}catch(ae){I(ae)}}),R.addEventListener("success",(0,y.Z)(function*(){const O=R.result;O.objectStoreNames.contains(ni)?_(O):(O.close(),yield function Ku(){const R=indexedDB.deleteDatabase(cr);return new es(R).toPromise()}(),_(yield mu()))}))})}function Ma(R,_,I){return yu.apply(this,arguments)}function yu(){return(yu=(0,y.Z)(function*(R,_,I){const O=Mn(R,!0).put({[Wu]:_,value:I});return new es(O).toPromise()})).apply(this,arguments)}function Ic(){return(Ic=(0,y.Z)(function*(R,_){const I=Mn(R,!1).get(_),O=yield new es(I).toPromise();return void 0===O?null:O.value})).apply(this,arguments)}function hi(R,_){const I=Mn(R,!0).delete(_);return new es(I).toPromise()}const Wr=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,y.Z)(function*(){return I.db||(I.db=yield mu()),I.db})()}_withRetries(I){var O=this;return(0,y.Z)(function*(){let ae=0;for(;;)try{const be=yield O._openDb();return yield I(be)}catch(be){if(ae++>3)throw be;O.db&&(O.db.close(),O.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,y.Z)(function*(){return Gu()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,y.Z)(function*(){I.receiver=_l._getInstance(function Ji(){return Gu()?self:null}()),I.receiver._subscribe("keyChanged",function(){var O=(0,y.Z)(function*(ae,be){return{keyProcessed:(yield I._poll()).includes(be.key)}});return function(ae,be){return O.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var O=(0,y.Z)(function*(ae,be){return["keyChanged"]});return function(ae,be){return O.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,y.Z)(function*(){var O,ae;if(I.activeServiceWorker=yield function Dr(){return Ro.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new gf(I.activeServiceWorker);const be=yield I.sender._send("ping",{},800);be&&null!==(O=be[0])&&void 0!==O&&O.fulfilled&&null!==(ae=be[0])&&void 0!==ae&&ae.value.includes("keyChanged")&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var O=this;return(0,y.Z)(function*(){if(O.sender&&O.activeServiceWorker&&function mf(){var R;return(null===(R=null==navigator?void 0:navigator.serviceWorker)||void 0===R?void 0:R.controller)||null}()===O.activeServiceWorker)try{yield O.sender._send("keyChanged",{key:I},O.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const I=yield mu();return yield Ma(I,rn,"1"),yield hi(I,rn),!0}catch{}return!1})()}_withPendingWrite(I){var O=this;return(0,y.Z)(function*(){O.pendingWrites++;try{yield I()}finally{O.pendingWrites--}})()}_set(I,O){var ae=this;return(0,y.Z)(function*(){return ae._withPendingWrite((0,y.Z)(function*(){return yield ae._withRetries(be=>Ma(be,I,O)),ae.localCache[I]=O,ae.notifyServiceWorker(I)}))})()}_get(I){var O=this;return(0,y.Z)(function*(){const ae=yield O._withRetries(be=>function vu(R,_){return Ic.apply(this,arguments)}(be,I));return O.localCache[I]=ae,ae})()}_remove(I){var O=this;return(0,y.Z)(function*(){return O._withPendingWrite((0,y.Z)(function*(){return yield O._withRetries(ae=>hi(ae,I)),delete O.localCache[I],O.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,y.Z)(function*(){const O=yield I._withRetries(bt=>{const Ht=Mn(bt,!1).getAll();return new es(Ht).toPromise()});if(!O)return[];if(0!==I.pendingWrites)return[];const ae=[],be=new Set;for(const{fbase_key:bt,value:Ht}of O)be.add(bt),JSON.stringify(I.localCache[bt])!==JSON.stringify(Ht)&&(I.notifyListeners(bt,Ht),ae.push(bt));for(const bt of Object.keys(I.localCache))I.localCache[bt]&&!be.has(bt)&&(I.notifyListeners(bt,null),ae.push(bt));return ae})()}notifyListeners(I,O){this.localCache[I]=O;const ae=this.listeners[I];if(ae)for(const be of Array.from(ae))be(O)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,O){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(O)}_removeListener(I,O){this.listeners[I]&&(this.listeners[I].delete(O),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})(),Hr=1e12;class us{constructor(_){this.auth=_,this.counter=Hr,this._widgets=new Map}render(_,I){const O=this.counter;return this._widgets.set(O,new yf(_,this.auth.name,I||{})),this.counter++,O}reset(_){var I;const O=_||Hr;null===(I=this._widgets.get(O))||void 0===I||I.delete(),this._widgets.delete(O)}getResponse(_){var I;return(null===(I=this._widgets.get(_||Hr))||void 0===I?void 0:I.getResponse())||""}execute(_){var I=this;return(0,y.Z)(function*(){var O;return null===(O=I._widgets.get(_||Hr))||void 0===O||O.execute(),""})()}}class yf{constructor(_,I,O){this.params=O,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ae="string"==typeof _?document.getElementById(_):_;Le(ae,"argument-error",{appName:I}),this.container=ae,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xa(R){const _=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let O=0;O<R;O++)_.push(I.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":I}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ts=Qn("rcb"),Sp=new We(3e4,6e4);class M{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=bi().grecaptcha)||void 0===_||!_.render)}load(_,I=""){return Le(function P(R){return R.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(R)}(I),_,"argument-error"),this.shouldResolveImmediately(I)&&Nn(bi().grecaptcha)?Promise.resolve(bi().grecaptcha):new Promise((O,ae)=>{const be=bi().setTimeout(()=>{ae(et(_,"network-request-failed"))},Sp.get());bi()[ts]=()=>{bi().clearTimeout(be),delete bi()[ts];const Ht=bi().grecaptcha;if(!Ht||!Nn(Ht))return void ae(et(_,"internal-error"));const wn=Ht.render;Ht.render=(jn,gr)=>{const Xr=wn(jn,gr);return this.counter++,Xr},this.hostLanguage=I,O(Ht)},Tr(`https://www.google.com/recaptcha/api.js??${(0,m.xO)({onload:ts,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(be),ae(et(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var I;return!(null===(I=bi().grecaptcha)||void 0===I||!I.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D{load(_){return(0,y.Z)(function*(){return new us(_)})()}clearedOneInstance(){}}const F="recaptcha",ee={theme:"light",type:"image"};class Te{constructor(_,I=Object.assign({},ee),O){this.parameters=I,this.type=F,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ei(O),this.isInvisible="invisible"===this.parameters.size,Le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ae="string"==typeof _?document.getElementById(_):_;Le(ae,this.auth,"argument-error"),this.container=ae,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D:new M,this.validateStartingState()}verify(){var _=this;return(0,y.Z)(function*(){_.assertNotDestroyed();const I=yield _.render(),O=_.getAssertedRecaptcha();return O.getResponse(I)||new Promise(be=>{const bt=Ht=>{Ht&&(_.tokenChangeListeners.delete(bt),be(Ht))};_.tokenChangeListeners.add(bt),_.isInvisible&&O.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return I=>{if(this.tokenChangeListeners.forEach(O=>O(I)),"function"==typeof _)_(I);else if("string"==typeof _){const O=bi()[_];"function"==typeof O&&O(I)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,y.Z)(function*(){if(yield _.init(),!_.widgetId){let I=_.container;if(!_.isInvisible){const O=document.createElement("div");I.appendChild(O),I=O}_.widgetId=_.getAssertedRecaptcha().render(I,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,y.Z)(function*(){Le(Et()&&!Gu(),_.auth,"internal-error"),yield function Ie(){let R=null;return new Promise(_=>{"complete"!==document.readyState?(R=()=>_(),window.addEventListener("load",R)):_()}).catch(_=>{throw R&&window.removeEventListener("load",R),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const I=yield function Dt(R){return wt.apply(this,arguments)}(_.auth);Le(I,_.auth,"internal-error"),_.parameters.sitekey=I})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gt{constructor(_,I){this.verificationId=_,this.onConfirmation=I}confirm(_){const I=xi._fromVerification(this.verificationId,_);return this.onConfirmation(I)}}function Wt(R,_,I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,y.Z)(function*(R,_,I){const O=ei(R),ae=yield xo(O,_,(0,m.m9)(I));return new gt(ae,be=>br(O,be))})).apply(this,arguments)}function Er(R,_,I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R);yield Q(!1,O,"phone");const ae=yield xo(O.auth,_,(0,m.m9)(I));return new gt(ae,be=>$i(O,be))})).apply(this,arguments)}function ir(R,_,I){return Os.apply(this,arguments)}function Os(){return(Os=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R),ae=yield xo(O.auth,_,(0,m.m9)(I));return new gt(ae,be=>Vs(O,be))})).apply(this,arguments)}function xo(R,_,I){return va.apply(this,arguments)}function va(){return va=(0,y.Z)(function*(R,_,I){var O;const ae=yield I.verify();try{let be;if(Le("string"==typeof ae,R,"argument-error"),Le(I.type===F,R,"argument-error"),be="string"==typeof _?{phoneNumber:_}:_,"session"in be){const bt=be.session;if("phoneNumber"in be)return Le("enroll"===bt.type,R,"internal-error"),(yield function Ci(R,_){return Mt(R,"POST","/v2/accounts/mfaEnrollment:start",lt(R,_))}(R,{idToken:bt.credential,phoneEnrollmentInfo:{phoneNumber:be.phoneNumber,recaptchaToken:ae}})).phoneSessionInfo.sessionInfo;{Le("signin"===bt.type,R,"internal-error");const Ht=(null===(O=be.multiFactorHint)||void 0===O?void 0:O.uid)||be.multiFactorUid;return Le(Ht,R,"missing-multi-factor-info"),(yield function Ra(R,_){return Mt(R,"POST","/v2/accounts/mfaSignIn:start",lt(R,_))}(R,{mfaPendingCredential:bt.credential,mfaEnrollmentId:Ht,phoneSignInInfo:{recaptchaToken:ae}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:bt}=yield function Ii(R,_){return ss.apply(this,arguments)}(R,{phoneNumber:be.phoneNumber,recaptchaToken:ae});return bt}}finally{I._reset()}}),va.apply(this,arguments)}function qo(R,_){return _a.apply(this,arguments)}function _a(){return(_a=(0,y.Z)(function*(R,_){yield J((0,m.m9)(R),_)})).apply(this,arguments)}let na=(()=>{class R{constructor(I){this.providerId=R.PROVIDER_ID,this.auth=ei(I)}verifyPhoneNumber(I,O){return xo(this.auth,I,(0,m.m9)(O))}static credential(I,O){return xi._fromVerification(I,O)}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:O,temporaryProof:ae}=I;return O&&ae?xi._fromTokenResponse(O,ae):null}}return R.PROVIDER_ID="phone",R.PHONE_SIGN_IN_METHOD="phone",R})();function la(R,_){return _?sn(_):(Le(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}class io extends G{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return er(_,this._buildIdpRequest())}_linkToIdToken(_,I){return er(_,this._buildIdpRequest(I))}_getReauthenticationResolver(_){return er(_,this._buildIdpRequest())}_buildIdpRequest(_){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(I.idToken=_),I}}function Vl(R){return Yn(R.auth,new io(R),R.bypassAuthState)}function Tp(R){const{auth:_,user:I}=R;return Le(I,_,"internal-error"),Kt(I,new io(R),R.bypassAuthState)}function sh(R){return oh.apply(this,arguments)}function oh(){return(oh=(0,y.Z)(function*(R){const{auth:_,user:I}=R;return Le(I,_,"internal-error"),J(I,new io(R),R.bypassAuthState)})).apply(this,arguments)}class vf{constructor(_,I,O,ae,be=!1){this.auth=_,this.resolver=O,this.user=ae,this.bypassAuthState=be,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var _=this;return new Promise(function(){var I=(0,y.Z)(function*(O,ae){_.pendingPromise={resolve:O,reject:ae};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(be){_.reject(be)}});return function(O,ae){return I.apply(this,arguments)}}())}onAuthEvent(_){var I=this;return(0,y.Z)(function*(){const{urlResponse:O,sessionId:ae,postBody:be,tenantId:bt,error:Ht,type:wn}=_;if(Ht)return void I.reject(Ht);const jn={auth:I.auth,requestUri:O,sessionId:ae,tenantId:bt||void 0,postBody:be||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(wn)(jn))}catch(gr){I.reject(gr)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Vl;case"linkViaPopup":case"linkViaRedirect":return sh;case"reauthViaPopup":case"reauthViaRedirect":return Tp;default:ze(this.auth,"internal-error")}}resolve(_){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const el=new We(2e3,1e4);function Ap(R,_,I){return tl.apply(this,arguments)}function tl(){return(tl=(0,y.Z)(function*(R,_,I){const O=ei(R);vt(R,_,yi);const ae=la(O,I);return new lh(O,"signInViaPopup",_,ae).executeNotNull()})).apply(this,arguments)}function ah(R,_,I){return bc.apply(this,arguments)}function bc(){return(bc=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R);vt(O.auth,_,yi);const ae=la(O.auth,I);return new lh(O.auth,"reauthViaPopup",_,ae,O).executeNotNull()})).apply(this,arguments)}function _f(R,_,I){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R);vt(O.auth,_,yi);const ae=la(O.auth,I);return new lh(O.auth,"linkViaPopup",_,ae,O).executeNotNull()})).apply(this,arguments)}let lh=(()=>{class R extends vf{constructor(I,O,ae,be,bt){super(I,O,be,bt),this.provider=ae,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var I=this;return(0,y.Z)(function*(){const O=yield I.execute();return Le(O,I.auth,"internal-error"),O})()}onExecution(){var I=this;return(0,y.Z)(function*(){nt(1===I.filter.length,"Popup operations only handle one event");const O=$l();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],O),I.authWindow.associatedEvent=O,I.resolver._originValidation(I.auth).catch(ae=>{I.reject(ae)}),I.resolver._isIframeWebStorageSupported(I.auth,ae=>{ae||I.reject(et(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const I=()=>{var O,ae;this.pollId=null!==(ae=null===(O=this.authWindow)||void 0===O?void 0:O.window)&&void 0!==ae&&ae.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(I,el.get())};I()}}return R.currentPopupAction=null,R})();const cs="pendingRedirect",_u=new Map;class vo extends vf{constructor(_,I,O=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,O),this.eventId=null}execute(){var _=()=>super.execute,I=this;return(0,y.Z)(function*(){let O=_u.get(I.auth._key());if(!O){try{const be=(yield function Sc(R,_){return xa.apply(this,arguments)}(I.resolver,I.auth))?yield _().call(I):null;O=()=>Promise.resolve(be)}catch(ae){O=()=>Promise.reject(ae)}_u.set(I.auth._key(),O)}return I.bypassAuthState||_u.set(I.auth._key(),()=>Promise.resolve(null)),O()})()}onAuthEvent(_){var I=()=>super.onAuthEvent,O=this;return(0,y.Z)(function*(){if("signInViaRedirect"===_.type)return I().call(O,_);if("unknown"!==_.type){if(_.eventId){const ae=yield O.auth._redirectUserForId(_.eventId);if(ae)return O.user=ae,I().call(O,_);O.resolve(null)}}else O.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function xa(){return(xa=(0,y.Z)(function*(R,_){const I=Oa(_),O=ds(R);if(!(yield O._isAvailable()))return!1;const ae="true"===(yield O._get(I));return yield O._remove(I),ae})).apply(this,arguments)}function Pa(R,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,y.Z)(function*(R,_){return ds(R)._set(Oa(_),"true")})).apply(this,arguments)}function Eu(){_u.clear()}function pr(R,_){_u.set(R._key(),_)}function ds(R){return sn(R._redirectPersistence)}function Oa(R){return _r(cs,R.config.apiKey,R.name)}function Tc(R,_,I){return function Ei(R,_,I){return wu.apply(this,arguments)}(R,_,I)}function wu(){return(wu=(0,y.Z)(function*(R,_,I){const O=ei(R);vt(R,_,yi),yield O._initializationPromise;const ae=la(O,I);return yield Pa(ae,O),ae._openRedirect(O,_,"signInViaRedirect")})).apply(this,arguments)}function hm(R,_,I){return function Gs(R,_,I){return Ac.apply(this,arguments)}(R,_,I)}function Ac(){return(Ac=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R);vt(O.auth,_,yi),yield O.auth._initializationPromise;const ae=la(O.auth,I);yield Pa(ae,O.auth);const be=yield Na(O);return ae._openRedirect(O.auth,_,"reauthViaRedirect",be)})).apply(this,arguments)}function Po(R,_,I){return function qi(R,_,I){return so.apply(this,arguments)}(R,_,I)}function so(){return(so=(0,y.Z)(function*(R,_,I){const O=(0,m.m9)(R);vt(O.auth,_,yi),yield O.auth._initializationPromise;const ae=la(O.auth,I);yield Q(!1,O,_.providerId),yield Pa(ae,O.auth);const be=yield Na(O);return ae._openRedirect(O.auth,_,"linkViaRedirect",be)})).apply(this,arguments)}function cd(R,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,y.Z)(function*(R,_){return yield ei(R)._initializationPromise,Yo(R,_,!1)})).apply(this,arguments)}function Yo(R,_){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,y.Z)(function*(R,_,I=!1){const O=ei(R),ae=la(O,_),bt=yield new vo(O,ae,I).execute();return bt&&!I&&(delete bt.user._redirectEventId,yield O._persistUserIfCurrent(bt.user),yield O._setRedirectUser(null,_)),bt})).apply(this,arguments)}function Na(R){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,y.Z)(function*(R){const _=$l(`${R.uid}:::`);return R._redirectEventId=_,yield R.auth._setRedirectUser(R),yield R.auth._persistUserIfCurrent(R),_})).apply(this,arguments)}class Iu{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let I=!1;return this.consumers.forEach(O=>{this.isEventForConsumer(_,O)&&(I=!0,this.sendToConsumer(_,O),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function jl(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dd(R);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=_,I=!0)),I}sendToConsumer(_,I){var O;if(_.error&&!dd(_)){const ae=(null===(O=_.error.code)||void 0===O?void 0:O.split("auth/")[1])||"internal-error";I.onError(et(this.auth,ae))}else I.onAuthEvent(_)}isEventForConsumer(_,I){const O=null===I.eventId||!!_.eventId&&_.eventId===I.eventId;return I.filter.includes(_.type)&&O}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ka(_))}saveEventToCache(_){this.cachedEventUids.add(ka(_)),this.lastProcessedEventTime=Date.now()}}function ka(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(_=>_).join("-")}function dd({type:R,error:_}){return"unknown"===R&&"auth/no-auth-event"===(null==_?void 0:_.code)}function qu(R){return Il.apply(this,arguments)}function Il(){return(Il=(0,y.Z)(function*(R,_={}){return Mt(R,"GET","/v1/projects",_)})).apply(this,arguments)}const wf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ns=/^https?/;function Hl(){return(Hl=(0,y.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:_}=yield qu(R);for(const I of _)try{if(Cu(I))return}catch{}ze(R,"unauthorized-domain")})).apply(this,arguments)}function Cu(R){const _=pt(),{protocol:I,hostname:O}=new URL(_);if(R.startsWith("chrome-extension://")){const bt=new URL(R);return""===bt.hostname&&""===O?"chrome-extension:"===I&&R.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===I&&bt.hostname===O}if(!Ns.test(I))return!1;if(wf.test(R))return O===R;const ae=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ae+"|"+ae+")$","i").test(O)}const Oo=new We(3e4,6e4);function zl(){const R=bi().___jsl;if(null!=R&&R.H)for(const _ of Object.keys(R.H))if(R.H[_].r=R.H[_].r||[],R.H[_].L=R.H[_].L||[],R.H[_].r=[...R.H[_].L],R.CP)for(let I=0;I<R.CP.length;I++)R.CP[I]=null}let nl=null;const Rp=new We(5e3,15e3),qy="__/auth/iframe",xp="emulator/auth/iframe",fm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rc(R){const _=R.config;Le(_.authDomain,R,"auth-domain-config-required");const I=_.emulator?Ne(_,xp):`https://${R.config.authDomain}/${qy}`,O={apiKey:_.apiKey,appName:R.name,v:le.SDK_VERSION},ae=Ur.get(R.config.apiHost);ae&&(O.eid=ae);const be=R._getFrameworks();return be.length&&(O.fw=be.join(",")),`${I}?${(0,m.xO)(O).slice(1)}`}function rl(){return rl=(0,y.Z)(function*(R){const _=yield function Mc(R){return nl=nl||function Yu(R){return new Promise((_,I)=>{var O,ae,be;function bt(){zl(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{zl(),I(et(R,"network-request-failed"))},timeout:Oo.get()})}if(null!==(ae=null===(O=bi().gapi)||void 0===O?void 0:O.iframes)&&void 0!==ae&&ae.Iframe)_(gapi.iframes.getContext());else{if(null===(be=bi().gapi)||void 0===be||!be.load){const Ht=Qn("iframefcb");return bi()[Ht]=()=>{gapi.load?bt():I(et(R,"network-request-failed"))},Tr(`https://apis.google.com/js/api.js?onload=${Ht}`).catch(wn=>I(wn))}bt()}}).catch(_=>{throw nl=null,_})}(R),nl}(R),I=bi().gapi;return Le(I,R,"internal-error"),_.open({where:document.body,url:Rc(R),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fm,dontclear:!0},O=>new Promise(function(){var ae=(0,y.Z)(function*(be,bt){yield O.restyle({setHideOnLeave:!1});const Ht=et(R,"network-request-failed"),wn=bi().setTimeout(()=>{bt(Ht)},Rp.get());function jn(){bi().clearTimeout(wn),be(O)}O.ping(jn).then(jn,()=>{bt(Ht)})});return function(be,bt){return ae.apply(this,arguments)}}()))}),rl.apply(this,arguments)}const xc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wi{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Nc="__/auth/handler",If="emulator/auth/handler",bu=encodeURIComponent("fac");function Wl(R,_,I,O,ae,be){return Du.apply(this,arguments)}function Du(){return(Du=(0,y.Z)(function*(R,_,I,O,ae,be){Le(R.config.authDomain,R,"auth-domain-config-required"),Le(R.config.apiKey,R,"invalid-api-key");const bt={apiKey:R.config.apiKey,appName:R.name,authType:I,redirectUrl:O,v:le.SDK_VERSION,eventId:ae};if(_ instanceof yi){_.setDefaultLanguage(R.languageCode),bt.providerId=_.providerId||"",(0,m.xb)(_.getCustomParameters())||(bt.customParameters=JSON.stringify(_.getCustomParameters()));for(const[gr,Xr]of Object.entries(be||{}))bt[gr]=Xr}if(_ instanceof qs){const gr=_.getScopes().filter(Xr=>""!==Xr);gr.length>0&&(bt.scopes=gr.join(","))}R.tenantId&&(bt.tid=R.tenantId);const Ht=bt;for(const gr of Object.keys(Ht))void 0===Ht[gr]&&delete Ht[gr];const wn=yield R._getAppCheckToken(),jn=wn?`#${bu}=${encodeURIComponent(wn)}`:"";return`${function hd({config:R}){return R.emulator?Ne(R,If):`https://${R.authDomain}/${Nc}`}(R)}?${(0,m.xO)(Ht).slice(1)}${jn}`})).apply(this,arguments)}const il="webStorageSupport",pd=class fd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wc,this._completeRedirectFn=Yo,this._overrideRedirectResult=pr}_openPopup(_,I,O,ae){var be=this;return(0,y.Z)(function*(){var bt;nt(null===(bt=be.eventManagers[_._key()])||void 0===bt?void 0:bt.manager,"_initialize() not called before _openPopup()");const Ht=yield Wl(_,I,O,pt(),ae);return function ns(R,_,I,O=500,ae=600){const be=Math.max((window.screen.availHeight-ae)/2,0).toString(),bt=Math.max((window.screen.availWidth-O)/2,0).toString();let Ht="";const wn=Object.assign(Object.assign({},xc),{width:O.toString(),height:ae.toString(),top:be,left:bt}),jn=(0,m.z$)().toLowerCase();I&&(Ht=q(jn)?"_blank":I),K(jn)&&(_=_||"http://localhost",wn.scrollbars="yes");const gr=Object.entries(wn).reduce((Zo,[Yl,Qu])=>`${Zo}${Yl}=${Qu},`,"");if(function Ut(R=(0,m.z$)()){var _;return Ct(R)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(jn)&&"_self"!==Ht)return function La(R,_){const I=document.createElement("a");I.href=R,I.target=_;const O=document.createEvent("MouseEvent");O.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(O)}(_||"",Ht),new wi(null);const Xr=window.open(_||"",Ht,gr);Le(Xr,R,"popup-blocked");try{Xr.focus()}catch{}return new wi(Xr)}(_,Ht,$l())})()}_openRedirect(_,I,O,ae){var be=this;return(0,y.Z)(function*(){return yield be._originValidation(_),function yo(R){bi().location.href=R}(yield Wl(_,I,O,pt(),ae)),new Promise(()=>{})})()}_initialize(_){const I=_._key();if(this.eventManagers[I]){const{manager:ae,promise:be}=this.eventManagers[I];return ae?Promise.resolve(ae):(nt(be,"If manager is not set, promise should be"),be)}const O=this.initAndGetManager(_);return this.eventManagers[I]={promise:O},O.catch(()=>{delete this.eventManagers[I]}),O}initAndGetManager(_){var I=this;return(0,y.Z)(function*(){const O=yield function Ui(R){return rl.apply(this,arguments)}(_),ae=new Iu(_);return O.register("authEvent",be=>(Le(null==be?void 0:be.authEvent,_,"invalid-auth-event"),{status:ae.onEvent(be.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[_._key()]={manager:ae},I.iframes[_._key()]=O,ae})()}_isIframeWebStorageSupported(_,I){this.iframes[_._key()].send(il,{type:il},ae=>{var be;const bt=null===(be=null==ae?void 0:ae[0])||void 0===be?void 0:be[il];void 0!==bt&&I(!!bt),ze(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const I=_._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function Cl(R){return Hl.apply(this,arguments)}(_)),this.originValidationPromises[I]}get _shouldInitProactively(){return fn()||z()||Ct()}};class hs{constructor(_){this.factorId=_}_process(_,I,O){switch(I.type){case"enroll":return this._finalizeEnroll(_,I.credential,O);case"signin":return this._finalizeSignIn(_,I.credential);default:return _t("unexpected MultiFactorSessionType")}}}class ua extends hs{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new ua(_)}_finalizeEnroll(_,I,O){return function As(R,_){return Mt(R,"POST","/v2/accounts/mfaEnrollment:finalize",lt(R,_))}(_,{idToken:I,displayName:O,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,I){return function ms(R,_){return Mt(R,"POST","/v2/accounts/mfaSignIn:finalize",lt(R,_))}(_,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gd=(()=>{class R{constructor(){}static assertion(I){return ua._fromCredential(I)}}return R.FACTOR_ID="phone",R})();var kc="@firebase/auth";class Fc{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var I=this;return(0,y.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const I=this.auth.onIdTokenChanged(O=>{_((null==O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,I),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const I=this.internalListeners.get(_);I&&(this.internalListeners.delete(_),I(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vd=(0,m.Pz)("authIdTokenMaxAge")||300;let sl=null;const Pp=R=>function(){var _=(0,y.Z)(function*(I){const O=I&&(yield I.getIdTokenResult()),ae=O&&((new Date).getTime()-Date.parse(O.issuedAtTime))/1e3;if(ae&&ae>vd)return;const be=null==O?void 0:O.token;sl!==be&&(sl=be,yield fetch(R,{method:be?"POST":"DELETE",headers:be?{Authorization:`Bearer ${be}`}:{}}))});return function(I){return _.apply(this,arguments)}}();function Zu(R=(0,le.getApp)()){const _=(0,le._getProvider)(R,"auth");if(_.isInitialized())return _.getImmediate();const I=function ps(R,_){const I=(0,le._getProvider)(R,"auth");if(I.isInitialized()){const ae=I.getImmediate(),be=I.getOptions();if((0,m.vZ)(be,null!=_?_:{}))return ae;ze(ae,"already-initialized")}return I.initialize({options:_})}(R,{popupRedirectResolver:pd,persistence:[Wr,Za,wc]}),O=(0,m.Pz)("authTokenSyncURL");if(O){const be=Pp(O);(function ye(R,_,I){(0,m.m9)(R).beforeAuthStateChanged(_,I)})(I,be,()=>be(I.currentUser)),function H(R,_,I,O){(0,m.m9)(R).onIdTokenChanged(_,I,O)}(I,bt=>be(bt))}const ae=(0,m.q4)("auth");return ae&&Qs(I,`http://${ae}`),I}!function md(R){(0,le._registerComponent)(new Re.wA("auth",(_,{options:I})=>{const O=_.getProvider("app").getImmediate(),ae=_.getProvider("heartbeat"),be=_.getProvider("app-check-internal"),{apiKey:bt,authDomain:Ht}=O.options;Le(bt&&!bt.includes(":"),"invalid-api-key",{appName:O.name});const wn={apiKey:bt,authDomain:Ht,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kn(R)},jn=new Si(O,ae,be,wn);return function _s(R,_){const I=(null==_?void 0:_.persistence)||[],O=(Array.isArray(I)?I:[I]).map(sn);null!=_&&_.errorMap&&R._updateErrorMap(_.errorMap),R._initializeWithPersistence(O,null==_?void 0:_.popupRedirectResolver)}(jn,I),jn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,I,O)=>{_.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new Re.wA("auth-internal",_=>{const I=ei(_.getProvider("auth").getImmediate());return new Fc(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(kc,"0.23.2",function ql(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,le.registerVersion)(kc,"0.23.2","esm2017")}("Browser")},2810:(pn,dt,L)=>{"use strict";L.d(dt,{u7:()=>Jg,Jj:()=>Rl,IX:()=>Yv,my:()=>Is,xU:()=>ea,Lz:()=>su,WA:()=>hn,F8:()=>Uu,$q:()=>gl,W:()=>od,EK:()=>Ji,PU:()=>xl,l7:()=>Na,Ky:()=>Mn,Xb:()=>es,Cf:()=>di,K9:()=>rn,Me:()=>hm,yq:()=>zs,Wi:()=>vy,ET:()=>Wo,Ab:()=>O0,vr:()=>P0,Fc:()=>IE,hJ:()=>Jh,B$:()=>ko,at:()=>cc,oe:()=>S0,AK:()=>x0,TF:()=>Ug,JU:()=>$u,ST:()=>Ml,fH:()=>Vu,Ix:()=>tf,Wu:()=>l_,Lx:()=>a_,qY:()=>co,GL:()=>uf,QT:()=>eh,kl:()=>I0,Xk:()=>Oy,PL:()=>C0,UQ:()=>Ny,zN:()=>b0,ad:()=>Ey,nP:()=>N0,b9:()=>Ay,vh:()=>qg,Pb:()=>CE,L$:()=>Qv,cf:()=>T0,sc:()=>A0,Xo:()=>Ty,IO:()=>i_,iE:()=>Al,Eo:()=>ef,i3:()=>tm,Bt:()=>m_,pl:()=>D0,Ub:()=>As,qK:()=>Py,TQ:()=>v0,e0:()=>o_,r7:()=>h_,Mx:()=>h0,ar:()=>y0});var _e,y=L(5861),m=L(6881),le=L(4859),ve=L(1877),De=L(2090),Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={},Be=Be||{},U=Re||self;function we(){}function je(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function ge(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var qe="closure_uid_"+(1e9*Math.random()>>>0),It=0;function Ae(s,e,t){return s.call.apply(s.bind,arguments)}function Ce(s,e,t){if(!s)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,l),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function ct(s,e,t){return(ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ae:Ce).apply(null,arguments)}function at(s,e){var t=Array.prototype.slice.call(arguments,1);return function(){var l=t.slice();return l.push.apply(l,arguments),s.apply(this,l)}}function ze(s,e){function t(){}t.prototype=e.prototype,s.$=e.prototype,s.prototype=new t,s.prototype.constructor=s,s.ac=function(l,h,g){for(var E=Array(arguments.length-2),k=2;k<arguments.length;k++)E[k-2]=arguments[k];return e.prototype[h].apply(l,E)}}function et(){this.s=this.s,this.o=this.o}et.prototype.s=!1,et.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ue(s){Object.prototype.hasOwnProperty.call(s,qe)&&s[qe]||(s[qe]=++It)}(this)},et.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vt=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let t=0;t<s.length;t++)if(t in s&&s[t]===e)return t;return-1};function Ye(s){const e=s.length;if(0<e){const t=Array(e);for(let l=0;l<e;l++)t[l]=s[l];return t}return[]}function Le(s,e){for(let t=1;t<arguments.length;t++){const l=arguments[t];if(je(l)){const h=s.length||0,g=l.length||0;s.length=h+g;for(let E=0;E<g;E++)s[h+E]=l[E]}else s.push(l)}}function _t(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!U.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{U.addEventListener("test",we,e),U.removeEventListener("test",we,e)}catch{}return s}();function pt(s){return/^[\s\xa0]*$/.test(s)}var Et=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function ce(s,e){return s<e?-1:s>e?1:0}function xe(){var s=U.navigator;return s&&(s=s.userAgent)?s:""}function Ve(s){return-1!=xe().indexOf(s)}function We(s){return We[" "](s),s}function Ne(s,e,t){return Object.prototype.hasOwnProperty.call(s,e)?s[e]:s[e]=t(e)}We[" "]=we;var Tt,s,Fe=Ve("Opera"),He=Ve("Trident")||Ve("MSIE"),mt=Ve("Edge"),lt=mt||He,Mt=Ve("Gecko")&&!(-1!=xe().toLowerCase().indexOf("webkit")&&!Ve("Edge"))&&!(Ve("Trident")||Ve("MSIE"))&&!Ve("Edge"),Pt=-1!=xe().toLowerCase().indexOf("webkit")&&!Ve("Edge");function un(){var s=U.document;return s?s.documentMode:void 0}e:{var Je="",Ot=(s=xe(),Mt?/rv:([^\);]+)(\)|;)/.exec(s):mt?/Edge\/([\d\.]+)/.exec(s):He?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Pt?/WebKit\/(\S+)/.exec(s):Fe?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Ot&&(Je=Ot?Ot[1]:""),He){var Qt=un();if(null!=Qt&&Qt>parseFloat(Je)){Tt=String(Qt);break e}}Tt=Je}var yn={},In=U.document&&He&&(un()||parseInt(Tt,10))||void 0;function Ft(s,e){if(_t.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var t=this.type=s.type,l=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Mt){e:{try{We(e.nodeName);var h=!0;break e}catch{}h=!1}h||(e=null)}}else"mouseover"==t?e=s.fromElement:"mouseout"==t&&(e=s.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:or[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Ft.$.h.call(this)}}ze(Ft,_t);var or={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.$.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var sr="closure_listenable_"+(1e6*Math.random()|0),yr=0;function tn(s,e,t,l,h){this.listener=s,this.proxy=null,this.src=e,this.type=t,this.capture=!!l,this.la=h,this.key=++yr,this.fa=this.ia=!1}function xr(s){s.fa=!0,s.listener=null,s.proxy=null,s.src=null,s.la=null}function dr(s,e,t){for(const l in s)e.call(t,s[l],l,s)}function rr(s){const e={};for(const t in s)e[t]=s[t];return e}const Or="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(s,e){let t,l;for(let h=1;h<arguments.length;h++){for(t in l=arguments[h],l)s[t]=l[t];for(let g=0;g<Or.length;g++)t=Or[g],Object.prototype.hasOwnProperty.call(l,t)&&(s[t]=l[t])}}function Sn(s){this.src=s,this.g={},this.h=0}function vn(s,e){var t=e.type;if(t in s.g){var g,l=s.g[t],h=vt(l,e);(g=0<=h)&&Array.prototype.splice.call(l,h,1),g&&(xr(e),0==s.g[t].length&&(delete s.g[t],s.h--))}}function $n(s,e,t,l){for(var h=0;h<s.length;++h){var g=s[h];if(!g.fa&&g.listener==e&&g.capture==!!t&&g.la==l)return h}return-1}Sn.prototype.add=function(s,e,t,l,h){var g=s.toString();(s=this.g[g])||(s=this.g[g]=[],this.h++);var E=$n(s,e,l,h);return-1<E?(e=s[E],t||(e.ia=!1)):((e=new tn(e,this.src,g,!!l,h)).ia=t,s.push(e)),e};var Ir="closure_lm_"+(1e6*Math.random()|0),vr={};function ar(s,e,t,l,h){if(l&&l.once)return Gn(s,e,t,l,h);if(Array.isArray(e)){for(var g=0;g<e.length;g++)ar(s,e[g],t,l,h);return null}return t=At(t),s&&s[sr]?s.O(e,t,ge(l)?!!l.capture:!!l,h):Lr(s,e,t,!1,l,h)}function Lr(s,e,t,l,h,g){if(!e)throw Error("Invalid event type");var E=ge(h)?!!h.capture:!!h,k=me(s);if(k||(s[Ir]=k=new Sn(s)),(t=k.add(e,t,l,E,g)).proxy)return t;if(l=function Mr(){const e=qt;return function s(t){return e.call(s.src,s.listener,t)}}(),t.proxy=l,l.src=s,l.listener=t,s.addEventListener)nt||(h=E),void 0===h&&(h=!1),s.addEventListener(e.toString(),l,h);else if(s.attachEvent)s.attachEvent(Un(e.toString()),l);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(l)}return t}function Gn(s,e,t,l,h){if(Array.isArray(e)){for(var g=0;g<e.length;g++)Gn(s,e[g],t,l,h);return null}return t=At(t),s&&s[sr]?s.P(e,t,ge(l)?!!l.capture:!!l,h):Lr(s,e,t,!0,l,h)}function Rn(s,e,t,l,h){if(Array.isArray(e))for(var g=0;g<e.length;g++)Rn(s,e[g],t,l,h);else l=ge(l)?!!l.capture:!!l,t=At(t),s&&s[sr]?(s=s.i,(e=String(e).toString())in s.g&&-1<(t=$n(g=s.g[e],t,l,h))&&(xr(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete s.g[e],s.h--))):s&&(s=me(s))&&(e=s.g[e.toString()],s=-1,e&&(s=$n(e,t,l,h)),(t=-1<s?e[s]:null)&&ci(t))}function ci(s){if("number"!=typeof s&&s&&!s.fa){var e=s.src;if(e&&e[sr])vn(e.i,s);else{var t=s.type,l=s.proxy;e.removeEventListener?e.removeEventListener(t,l,s.capture):e.detachEvent?e.detachEvent(Un(t),l):e.addListener&&e.removeListener&&e.removeListener(l),(t=me(e))?(vn(t,s),0==t.h&&(t.src=null,e[Ir]=null)):xr(s)}}}function Un(s){return s in vr?vr[s]:vr[s]="on"+s}function qt(s,e){if(s.fa)s=!0;else{e=new Ft(e,this);var t=s.listener,l=s.la||s.src;s.ia&&ci(s),s=t.call(l,e)}return s}function me(s){return(s=s[Ir])instanceof Sn?s:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(s){return"function"==typeof s?s:(s[Ge]||(s[Ge]=function(e){return s.handleEvent(e)}),s[Ge])}function Xt(){et.call(this),this.i=new Sn(this),this.S=this,this.J=null}function sn(s,e){var t,l=s.J;if(l)for(t=[];l;l=l.J)t.push(l);if(s=s.S,l=e.type||e,"string"==typeof e)e=new _t(e,s);else if(e instanceof _t)e.target=e.target||s;else{var h=e;Nr(e=new _t(l,s),h)}if(h=!0,t)for(var g=t.length-1;0<=g;g--){var E=e.g=t[g];h=lr(E,l,!0,e)&&h}if(h=lr(E=e.g=s,l,!0,e)&&h,h=lr(E,l,!1,e)&&h,t)for(g=0;g<t.length;g++)h=lr(E=e.g=t[g],l,!1,e)&&h}function lr(s,e,t,l){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,g=0;g<e.length;++g){var E=e[g];if(E&&!E.fa&&E.capture==t){var k=E.listener,Y=E.la||E.src;E.ia&&vn(s.i,E),h=!1!==k.call(Y,l)&&h}}return h&&!l.defaultPrevented}ze(Xt,et),Xt.prototype[sr]=!0,Xt.prototype.removeEventListener=function(s,e,t,l){Rn(this,s,e,t,l)},Xt.prototype.N=function(){if(Xt.$.N.call(this),this.i){var e,s=this.i;for(e in s.g){for(var t=s.g[e],l=0;l<t.length;l++)xr(t[l]);delete s.g[e],s.h--}}this.J=null},Xt.prototype.O=function(s,e,t,l){return this.i.add(String(s),e,!1,t,l)},Xt.prototype.P=function(s,e,t,l){return this.i.add(String(s),e,!0,t,l)};var On=U.JSON.stringify;function _r(){var s=ht;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Pe,de=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new K,s=>s.reset());class K{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function z(s){U.setTimeout(()=>{throw s},0)}function q(s,e){Pe||function it(){var s=U.Promise.resolve(void 0);Pe=function(){s.then(Ct)}}(),ke||(Pe(),ke=!0),ht.add(s,e)}var ke=!1,ht=new class Qe{constructor(){this.h=this.g=null}add(e,t){const l=de.get();l.set(e,t),this.h?this.h.next=l:this.g=l,this.h=l}};function Ct(){for(var s;s=_r();){try{s.h.call(s.g)}catch(t){z(t)}var e=de;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}ke=!1}function jt(s,e){Xt.call(this),this.h=s||1,this.g=e||U,this.j=ct(this.qb,this),this.l=Date.now()}function Ut(s){s.ga=!1,s.T&&(s.g.clearTimeout(s.T),s.T=null)}function on(s,e,t){if("function"==typeof s)t&&(s=ct(s,t));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=ct(s.handleEvent,s)}return 2147483647<Number(e)?-1:U.setTimeout(s,e||0)}function fn(s){s.g=on(()=>{s.g=null,s.i&&(s.i=!1,fn(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}ze(jt,Xt),(_e=jt.prototype).ga=!1,_e.T=null,_e.qb=function(){if(this.ga){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-s):(this.T&&(this.g.clearTimeout(this.T),this.T=null),sn(this,"tick"),this.ga&&(Ut(this),this.start()))}},_e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_e.N=function(){jt.$.N.call(this),Ut(this),delete this.g};class Wn extends et{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fn(this)}N(){super.N(),this.g&&(U.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(s){et.call(this),this.h=s,this.g={}}ze(kn,et);var Dt=[];function wt(s,e,t,l){Array.isArray(t)||(t&&(Dt[0]=t.toString()),t=Dt);for(var h=0;h<t.length;h++){var g=ar(e,t[h],l||s.handleEvent,!1,s.h||s);if(!g)break;s.g[g.key]=g}}function zt(s){dr(s.g,function(e,t){this.g.hasOwnProperty(t)&&ci(e)},s),s.g={}}function _n(){this.g=!0}function nr(s,e,t,l){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Tr(s,e){if(!s.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(s=0;s<t.length;s++)if(Array.isArray(t[s])){var l=t[s];if(!(2>l.length)){var h=l[1];if(Array.isArray(h)&&!(1>h.length)){var g=h[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var E=1;E<h.length;E++)h[E]=""}}}return On(t)}catch{return e}}(s,t)+(l?" "+l:"")})}kn.prototype.N=function(){kn.$.N.call(this),zt(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_n.prototype.Ea=function(){this.g=!1},_n.prototype.info=function(){};var Qn={},Jn=null;function fi(){return Jn=Jn||new Xt}function Ls(s){_t.call(this,Qn.Ta,s)}function rs(s){const e=fi();sn(e,new Ls(e))}function ki(s,e){_t.call(this,Qn.STAT_EVENT,s),this.stat=e}function pi(s){const e=fi();sn(e,new ki(e,s))}function Bs(s,e){_t.call(this,Qn.Ua,s),this.size=e}function Si(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return U.setTimeout(function(){s()},e)}Qn.Ta="serverreachability",ze(Ls,_t),Qn.STAT_EVENT="statevent",ze(ki,_t),Qn.Ua="timingevent",ze(Bs,_t);var ei={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ps(){}function Qs(){}ps.prototype.h=null;var oe,W={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ne(){_t.call(this,"d")}function Ee(){_t.call(this,"c")}function G(){}function ie(s,e,t,l){this.l=s,this.j=e,this.m=t,this.W=l||1,this.U=new kn(this),this.P=Xe,this.V=new jt(s=lt?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}ze(ne,_t),ze(Ee,_t),ze(G,ps),G.prototype.g=function(){return new XMLHttpRequest},G.prototype.i=function(){return{}},oe=new G;var Xe=45e3,ut={},Rt={};function cn(s,e,t){s.L=1,s.v=Ii(Li(e)),s.s=t,s.S=!0,gn(s,null)}function gn(s,e){s.G=Date.now(),Fi(s),s.A=Li(s.v);var t=s.A,l=s.W;Array.isArray(l)||(l=[String(l)]),ga(t.i,"t",l),s.C=0,t=s.l.I,s.h=new $e,s.g=as(s.l,t?e:null,!s.s),0<s.O&&(s.M=new Wn(ct(s.Pa,s,s.g),s.O)),wt(s.U,s.g,"readystatechange",s.nb),e=s.I?rr(s.I):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ha(s.A,s.u,s.s,e)):(s.u="GET",s.g.ha(s.A,s.u,null,e)),rs(),function Nn(s,e,t,l,h,g){s.info(function(){if(s.g)if(g)for(var E="",k=g.split("&"),Y=0;Y<k.length;Y++){var se=k[Y].split("=");if(1<se.length){var Se=se[0];se=se[1];var tt=Se.split("_");E=2<=tt.length&&"type"==tt[1]?E+(Se+"=")+se+"&":E+(Se+"=redacted&")}}else E=null;else E=g;return"XMLHTTP REQ ("+l+") [attempt "+h+"]: "+e+"\n"+t+"\n"+E})}(s.j,s.u,s.A,s.m,s.W,s.s)}function zn(s){return!!s.g&&"GET"==s.u&&2!=s.L&&s.l.Ha}function ur(s,e,t){let h,l=!0;for(;!s.J&&s.C<t.length;){if(h=Ri(s,t),h==Rt){4==e&&(s.o=4,pi(14),l=!1),nr(s.j,s.m,null,"[Incomplete Response]");break}if(h==ut){s.o=4,pi(15),nr(s.j,s.m,t,"[Invalid Chunk]"),l=!1;break}nr(s.j,s.m,h,null),Kr(s,h)}zn(s)&&h!=Rt&&h!=ut&&(s.h.g="",s.C=0),4!=e||0!=t.length||s.h.h||(s.o=1,pi(16),l=!1),s.i=s.i&&l,l?0<t.length&&!s.ca&&(s.ca=!0,(e=s.l).g==s&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vr(e),e.L=!0,pi(11))):(nr(s.j,s.m,t,"[Invalid Chunked Response]"),hr(s),En(s))}function Ri(s,e){var t=s.C,l=e.indexOf("\n",t);return-1==l?Rt:(t=Number(e.substring(t,l)),isNaN(t)?ut:(l+=1)+t>e.length?Rt:(e=e.substr(l,t),s.C=l+t,e))}function Fi(s){s.Y=Date.now()+s.P,is(s,s.P)}function is(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Si(ct(s.lb,s),e)}function Gr(s){s.B&&(U.clearTimeout(s.B),s.B=null)}function En(s){0==s.l.H||s.J||go(s.l,s)}function hr(s){Gr(s);var e=s.M;e&&"function"==typeof e.ra&&e.ra(),s.M=null,Ut(s.V),zt(s.U),s.g&&(e=s.g,s.g=null,e.abort(),e.ra())}function Kr(s,e){try{var t=s.l;if(0!=t.H&&(t.g==s||Gi(t.h,s)))if(!s.K&&Gi(t.h,s)&&3==t.H){try{var l=t.Ja.g.parse(e)}catch{l=null}if(Array.isArray(l)&&3==l.length){var h=l;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<s.G))break e;Fr(t),C(t)}qr(t),pi(18)}}else t.Fa=h[1],0<t.Fa-t.V&&37500>h[2]&&t.M&&0==t.A&&!t.v&&(t.v=Si(ct(t.ib,t),6e3));if(1>=os(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Xi(t,11)}else if((s.K||t.g==s)&&Fr(t),!pt(e))for(h=t.Ja.g.parse(e),e=0;e<h.length;e++){let se=h[e];if(t.V=se[0],se=se[1],2==t.H)if("c"==se[0]){t.J=se[1],t.oa=se[2];const Se=se[3];null!=Se&&(t.qa=Se,t.j.info("VER="+t.qa));const tt=se[4];null!=tt&&(t.Ga=tt,t.j.info("SVER="+t.Ga));const kt=se[5];null!=kt&&"number"==typeof kt&&0<kt&&(t.K=l=1.5*kt,t.j.info("backChannelRequestTimeoutMs_="+l)),l=t;const Zt=s.g;if(Zt){const Cn=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cn){var g=l.h;g.g||-1==Cn.indexOf("spdy")&&-1==Cn.indexOf("quic")&&-1==Cn.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(Lo(g,g.h),g.h=null))}if(l.F){const Hn=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(l.Da=Hn,$r(l.G,l.F,Hn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-s.G,t.j.info("Handshake RTT: "+t.S+"ms"));var E=s;if((l=t).wa=ro(l,l.I?l.oa:null,l.Y),E.K){Do(l.h,E);var k=E,Y=l.K;Y&&k.setTimeout(Y),k.B&&(Gr(k),Fi(k)),l.g=E}else jr(l);0<t.i.length&&fe(t)}else"stop"!=se[0]&&"close"!=se[0]||Xi(t,7);else 3==t.H&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?Xi(t,7):j(t):"noop"!=se[0]&&t.l&&t.l.Aa(se),t.A=0)}rs()}catch{}}function zi(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(je(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var t=function bo(s){if(s.sa&&"function"==typeof s.sa)return s.sa();if(!s.Z||"function"!=typeof s.Z){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(je(s)||"string"==typeof s){var e=[];s=s.length;for(var t=0;t<s;t++)e.push(t);return e}e=[],t=0;for(const l in s)e[t++]=l;return e}}}(s),l=function Hi(s){if(s.Z&&"function"==typeof s.Z)return s.Z();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(je(s)){for(var e=[],t=s.length,l=0;l<t;l++)e.push(s[l]);return e}for(l in e=[],t=0,s)e[t++]=s[l];return e}(s),h=l.length,g=0;g<h;g++)e.call(void 0,l[g],t&&t[g],s)}(_e=ie.prototype).setTimeout=function(s){this.P=s},_e.nb=function(s){s=s.target;const e=this.M;e&&3==$i(s)?e.l():this.Pa(s)},_e.Pa=function(s){try{if(s==this.g)e:{const Se=$i(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Se)&&(3!=Se||lt||this.g&&(this.h.h||this.g.ja()||gs(this.g)))){this.J||4!=Se||7==e||rs(),Gr(this);var t=this.g.da();this.aa=t;t:if(zn(this)){var l=gs(this.g);s="";var h=l.length,g=4==$i(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),En(this);var E="";break t}this.h.i=new U.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(l[e],{stream:g&&e==h-1});l.splice(0,h),this.h.g+=s,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function Xn(s,e,t,l,h,g,E){s.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+g+" "+E})}(this.j,this.u,this.A,this.m,this.W,Se,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var k,Y=this.g;if((k=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pt(k)){var se=k;break t}}se=null}if(!(t=se)){this.i=!1,this.o=3,pi(12),hr(this),En(this);break e}nr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,t)}this.S?(ur(this,Se,E),lt&&this.i&&3==Se&&(wt(this.U,this.V,"tick",this.mb),this.V.start())):(nr(this.j,this.m,E,null),Kr(this,E)),4==Se&&hr(this),this.i&&!this.J&&(4==Se?go(this.l,this):(this.i=!1,Fi(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),hr(this),En(this)}}}catch{}},_e.mb=function(){if(this.g){var s=$i(this.g),e=this.g.ja();this.C<e.length&&(Gr(this),ur(this,s,e),this.i&&4!=s&&Fi(this))}},_e.cancel=function(){this.J=!0,hr(this)},_e.lb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function Jr(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(rs(),pi(17)),hr(this),this.o=2,En(this)):is(this,this.Y-s)};var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yi(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof Yi){this.h=void 0!==e?e:s.h,er(this,s.j),this.s=s.s,this.g=s.g,Ws(this,s.m),this.l=s.l,e=s.i;var t=new xi;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Js(this,t),this.o=s.o}else s&&(t=String(s).match(Xs))?(this.h=!!e,er(this,t[1]||"",!0),this.s=ss(t[2]||""),this.g=ss(t[3]||"",!0),Ws(this,t[4]),this.l=ss(t[5]||"",!0),Js(this,t[6]||"",!0),this.o=ss(t[7]||"")):(this.h=!!e,this.i=new xi(null,this.h))}function Li(s){return new Yi(s)}function er(s,e,t){s.j=t?ss(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ws(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function Js(s,e,t){e instanceof xi?(s.i=e,function yi(s,e){e&&!s.j&&(Cr(s),s.i=null,s.g.forEach(function(t,l){var h=l.toLowerCase();l!=h&&(Wa(this,l),ga(this,h,t))},s)),s.j=e}(s.i,s.h)):(t||(e=Rs(e,Ks)),s.i=new xi(e,s.h))}function $r(s,e,t){s.i.set(e,t)}function Ii(s){return $r(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ss(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Rs(s,e,t){return"string"==typeof s?(s=encodeURI(s).replace(e,xs),t&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function xs(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Yi.prototype.toString=function(){var s=[],e=this.j;e&&s.push(Rs(e,fo,!0),":");var t=this.g;return(t||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(Rs(e,fo,!0),"@"),s.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&s.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&s.push("/"),s.push(Rs(t,"/"==t.charAt(0)?$s:po,!0))),(t=this.i.toString())&&s.push("?",t),(t=this.o)&&s.push("#",Rs(t,ta)),s.join("")};var fo=/[#\/\?@]/g,po=/[#\?:]/g,$s=/[#\?]/g,Ks=/[#\?@]/g,ta=/#/g;function xi(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Cr(s){s.g||(s.g=new Map,s.h=0,s.i&&function Qr(s,e){if(s){s=s.split("&");for(var t=0;t<s.length;t++){var l=s[t].indexOf("="),h=null;if(0<=l){var g=s[t].substring(0,l);h=s[t].substring(l+1)}else g=s[t];e(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,t){s.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wa(s,e){Cr(s),e=Zi(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function eo(s,e){return Cr(s),e=Zi(s,e),s.g.has(e)}function ga(s,e,t){Wa(s,e),0<t.length&&(s.i=null,s.g.set(Zi(s,e),Ye(t)),s.h+=t.length)}function Zi(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Ps(s){this.l=s||Ti,s=U.PerformanceNavigationTiming?0<(s=U.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(U.g&&U.g.Ka&&U.g.Ka()&&U.g.Ka().ec),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_e=xi.prototype).add=function(s,e){Cr(this),this.i=null,s=Zi(this,s);var t=this.g.get(s);return t||this.g.set(s,t=[]),t.push(e),this.h+=1,this},_e.forEach=function(s,e){Cr(this),this.g.forEach(function(t,l){t.forEach(function(h){s.call(e,h,l,this)},this)},this)},_e.sa=function(){Cr(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let l=0;l<e.length;l++){const h=s[l];for(let g=0;g<h.length;g++)t.push(e[l])}return t},_e.Z=function(s){Cr(this);let e=[];if("string"==typeof s)eo(this,s)&&(e=e.concat(this.g.get(Zi(this,s))));else{s=Array.from(this.g.values());for(let t=0;t<s.length;t++)e=e.concat(s[t])}return e},_e.set=function(s,e){return Cr(this),this.i=null,eo(this,s=Zi(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},_e.get=function(s,e){return s&&0<(s=this.Z(s)).length?String(s[0]):e},_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var l=e[t];const g=encodeURIComponent(String(l)),E=this.Z(l);for(l=0;l<E.length;l++){var h=g;""!==E[l]&&(h+="="+encodeURIComponent(String(E[l]))),s.push(h)}}return this.i=s.join("&")};var Ti=10;function Ta(s){return!!s.h||!!s.g&&s.g.size>=s.j}function os(s){return s.h?1:s.g?s.g.size:0}function Gi(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Lo(s,e){s.g?s.g.add(e):s.h=e}function Do(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Qi(s){if(null!=s.h)return s.i.concat(s.h.F);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const t of s.g.values())e=e.concat(t.F);return e}return Ye(s.i)}function Wi(){}function to(){this.g=new Wi}function So(s,e,t){const l=t||"";try{zi(s,function(h,g){let E=h;ge(h)&&(E=On(h)),e.push(l+g+"="+encodeURIComponent(E))})}catch(h){throw e.push(l+"type="+encodeURIComponent("_badmap")),h}}function Bo(s,e,t,l,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(l)}catch{}}function bs(s){this.l=s.fc||null,this.j=s.ob||!1}function Bi(s,e){Xt.call(this),this.F=s,this.u=e,this.m=void 0,this.readyState=To,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ps.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Wi.prototype.stringify=function(s){return U.JSON.stringify(s,void 0)},Wi.prototype.parse=function(s){return U.JSON.parse(s,void 0)},ze(bs,ps),bs.prototype.g=function(){return new Bi(this.l,this.j)},bs.prototype.i=function(s){return function(){return s}}({}),ze(Bi,Xt);var To=0;function Es(s){s.j.read().then(s.Xa.bind(s)).catch(s.ka.bind(s))}function no(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Ao(s)}function Ao(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(_e=Bi.prototype).open=function(s,e){if(this.readyState!=To)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,Ao(this)},_e.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.F||U).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},_e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,no(this)),this.readyState=To},_e.$a=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof U.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Es(this)}else s.text().then(this.Za.bind(this),this.ka.bind(this))},_e.Xa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?no(this):Ao(this),3==this.readyState&&Es(this)}},_e.Za=function(s){this.g&&(this.response=this.responseText=s,no(this))},_e.Ya=function(s){this.g&&(this.response=s,no(this))},_e.ka=function(){this.g&&no(this)},_e.setRequestHeader=function(s,e){this.v.append(s,e)},_e.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var t=e.next();!t.done;)s.push((t=t.value)[0]+": "+t[1]),t=e.next();return s.join("\r\n")},Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var S=U.JSON.parse;function J(s){Xt.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=T,this.L=this.M=!1}ze(J,Xt);var T="",Q=/^https?$/i,Me=["POST","PUT"];function Ln(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Yn(s),br(s)}function Yn(s){s.F||(s.F=!0,sn(s,"complete"),sn(s,"error"))}function kr(s){if(s.h&&typeof Be<"u"&&(!s.C[1]||4!=$i(s)||2!=s.da()))if(s.v&&4==$i(s))on(s.La,0,s);else if(sn(s,"readystatechange"),4==$i(s)){s.h=!1;try{const k=s.da();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var l;if(l=0===k){var h=String(s.I).match(Xs)[1]||null;if(!h&&U.self&&U.self.location){var g=U.self.location.protocol;h=g.substr(0,g.length-1)}l=!Q.test(h?h.toLowerCase():"")}t=l}if(t)sn(s,"complete"),sn(s,"success");else{s.m=6;try{var E=2<$i(s)?s.g.statusText:""}catch{E=""}s.j=E+" ["+s.da()+"]",Yn(s)}}finally{br(s)}}}function br(s,e){if(s.g){Ki(s);const t=s.g,l=s.C[0]?we:null;s.g=null,s.C=null,e||sn(s,"ready");try{t.onreadystatechange=l}catch{}}}function Ki(s){s.g&&s.L&&(s.g.ontimeout=null),s.A&&(U.clearTimeout(s.A),s.A=null)}function $i(s){return s.g?s.g.readyState:0}function gs(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.K){case T:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Vs(s){let e="";return dr(s,function(t,l){e+=l,e+=":",e+=t,e+="\r\n"}),e}function Mo(s,e,t){e:{for(l in t){var l=!1;break e}l=!0}l||(t=Vs(t),"string"==typeof s?null!=t&&encodeURIComponent(String(t)):$r(s,e,t))}function Ds(s,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[s]||e}function Z(s){this.Ga=0,this.i=[],this.j=new _n,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ds("failFast",!1,s),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ds("baseRetryDelayMs",5e3,s),this.hb=Ds("retryDelaySeedMs",1e4,s),this.eb=Ds("forwardChannelMaxRetries",2,s),this.xa=Ds("forwardChannelRequestTimeoutMs",2e4,s),this.va=s&&s.xmlHttpFactory||void 0,this.Ha=s&&s.dc||!1,this.K=void 0,this.I=s&&s.supportsCrossDomainXhr||!1,this.J="",this.h=new Ps(s&&s.concurrentRequestLimit),this.Ja=new to,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=s&&s.bc||!1,s&&s.Ea&&this.j.Ea(),s&&s.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&s&&s.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function j(s){if(N(s),3==s.H){var e=s.W++,t=Li(s.G);$r(t,"SID",s.J),$r(t,"RID",e),$r(t,"TYPE","terminate"),nn(s,t),(e=new ie(s,s.j,e,void 0)).L=2,e.v=Ii(Li(t)),t=!1,U.navigator&&U.navigator.sendBeacon&&(t=U.navigator.sendBeacon(e.v.toString(),"")),!t&&U.Image&&((new Image).src=e.v,t=!0),t||(e.g=as(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Fi(e)}Us(s)}function C(s){s.g&&(Vr(s),s.g.cancel(),s.g=null)}function N(s){C(s),s.u&&(U.clearTimeout(s.u),s.u=null),Fr(s),s.h.cancel(),s.m&&("number"==typeof s.m&&U.clearTimeout(s.m),s.m=null)}function fe(s){Ta(s.h)||s.m||(s.m=!0,q(s.Na,s),s.C=0)}function Lt(s,e){var t;t=e?e.m:s.W++;const l=Li(s.G);$r(l,"SID",s.J),$r(l,"RID",t),$r(l,"AID",s.V),nn(s,l),s.o&&s.s&&Mo(l,s.o,s.s),t=new ie(s,s.j,t,s.C+1),null===s.o&&(t.I=s.s),e&&(s.i=e.F.concat(s.i)),e=an(s,t,1e3),t.setTimeout(Math.round(.5*s.xa)+Math.round(.5*s.xa*Math.random())),Lo(s.h,t),cn(t,l,e)}function nn(s,e){s.ma&&dr(s.ma,function(t,l){$r(e,l,t)}),s.l&&zi({},function(t,l){$r(e,l,t)})}function an(s,e,t){t=Math.min(s.i.length,t);var l=s.l?ct(s.l.Va,s.l,s):null;e:{var h=s.i;let g=-1;for(;;){const E=["count="+t];-1==g?0<t?(g=h[0].h,E.push("ofs="+g)):g=0:E.push("ofs="+g);let k=!0;for(let Y=0;Y<t;Y++){let se=h[Y].h;const Se=h[Y].g;if(se-=g,0>se)g=Math.max(0,h[Y].h-100),k=!1;else try{So(Se,E,"req"+se+"_")}catch{l&&l(Se)}}if(k){l=E.join("&");break e}}}return s=s.i.splice(0,t),e.F=s,l}function jr(s){s.g||s.u||(s.ba=1,q(s.Ma,s),s.A=0)}function qr(s){return!(s.g||s.u||3<=s.A||(s.ba++,s.u=Si(ct(s.Ma,s),$o(s,s.A)),s.A++,0))}function Vr(s){null!=s.B&&(U.clearTimeout(s.B),s.B=null)}function wr(s){s.g=new ie(s,s.j,"rpc",s.ba),null===s.o&&(s.g.I=s.s),s.g.O=0;var e=Li(s.wa);$r(e,"RID","rpc"),$r(e,"SID",s.J),$r(e,"CI",s.M?"0":"1"),$r(e,"AID",s.V),$r(e,"TYPE","xmlhttp"),nn(s,e),s.o&&s.s&&Mo(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var t=s.g;s=s.oa,t.L=1,t.v=Ii(Li(e)),t.s=null,t.S=!0,gn(t,s)}function Fr(s){null!=s.v&&(U.clearTimeout(s.v),s.v=null)}function go(s,e){var t=null;if(s.g==e){Fr(s),Vr(s),s.g=null;var l=2}else{if(!Gi(s.h,e))return;t=e.F,Do(s.h,e),l=1}if(0!=s.H)if(s.ta=e.aa,e.i)if(1==l){t=e.s?e.s.length:0,e=Date.now()-e.G;var h=s.C;sn(l=fi(),new Bs(l,t)),fe(s)}else jr(s);else if(3==(h=e.o)||0==h&&0<s.ta||!(1==l&&function rt(s,e){return!(os(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.F.concat(s.i),0):1==s.H||2==s.H||s.C>=(s.cb?0:s.eb)||(s.m=Si(ct(s.Na,s,e),$o(s,s.C)),s.C++,0)))}(s,e)||2==l&&qr(s)))switch(t&&0<t.length&&(e=s.h,e.i=e.i.concat(t)),h){case 1:Xi(s,5);break;case 4:Xi(s,10);break;case 3:Xi(s,6);break;default:Xi(s,2)}}function $o(s,e){let t=s.ab+Math.floor(Math.random()*s.hb);return s.l||(t*=2),t*e}function Xi(s,e){if(s.j.info("Error code "+e),2==e){var t=null;s.l&&(t=null);var l=ct(s.pb,s);t||(t=new Yi("//www.google.com/images/cleardot.gif"),U.location&&"http"==U.location.protocol||er(t,"https"),Ii(t)),function Cs(s,e){const t=new _n;if(U.Image){const l=new Image;l.onload=at(Bo,t,l,"TestLoadImage: loaded",!0,e),l.onerror=at(Bo,t,l,"TestLoadImage: error",!1,e),l.onabort=at(Bo,t,l,"TestLoadImage: abort",!1,e),l.ontimeout=at(Bo,t,l,"TestLoadImage: timeout",!1,e),U.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=s}else e(!1)}(t.toString(),l)}else pi(2);s.H=0,s.l&&s.l.za(e),Us(s),N(s)}function Us(s){if(s.H=0,s.pa=[],s.l){const e=Qi(s.h);(0!=e.length||0!=s.i.length)&&(Le(s.pa,e),Le(s.pa,s.i),s.h.i.length=0,Ye(s.i),s.i.length=0),s.l.ya()}}function ro(s,e,t){var l=t instanceof Yi?Li(t):new Yi(t,void 0);if(""!=l.g)e&&(l.g=e+"."+l.g),Ws(l,l.m);else{var h=U.location;l=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var g=new Yi(null,void 0);l&&er(g,l),e&&(g.g=e),h&&Ws(g,h),t&&(g.l=t),l=g}return e=s.Da,(t=s.F)&&e&&$r(l,t,e),$r(l,"VER",s.qa),nn(s,l),l}function as(s,e,t){if(e&&!s.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new J(t&&s.Ha&&!s.va?new bs({ob:!0}):s.va)).Oa(s.I),e}function Ys(){}function ma(){if(He&&!(10<=Number(In)))throw Error("Environmental error: no available transport.")}function Ko(s,e){Xt.call(this),this.g=new Z(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(s?s["X-WebChannel-Client-Profile"]=e.Ca:s={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=s,(s=e&&e.cc)&&!pt(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pt(e)&&(this.g.F=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Fl(this)}function js(s){ne.call(this);var e=s.__sm__;if(e){e:{for(const t in e){s=t;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function ya(){Ee.call(this),this.status=1}function Fl(s){this.g=s}function Vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ll(s,e,t){t||(t=0);var l=Array(16);if("string"==typeof e)for(var h=0;16>h;++h)l[h]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(h=0;16>h;++h)l[h]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var g=s.g[3],E=(e=s.g[0])+(g^(t=s.g[1])&((h=s.g[2])^g))+l[0]+3614090360&4294967295;E=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=(t=(h=(g=(e=t+(E<<7&4294967295|E>>>25))+((E=g+(h^e&(t^h))+l[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=h+(t^g&(e^t))+l[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^h&(g^e))+l[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(g^t&(h^g))+l[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=g+(h^e&(t^h))+l[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=h+(t^g&(e^t))+l[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^h&(g^e))+l[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(g^t&(h^g))+l[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=g+(h^e&(t^h))+l[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=h+(t^g&(e^t))+l[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^h&(g^e))+l[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(g^t&(h^g))+l[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=g+(h^e&(t^h))+l[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=h+(t^g&(e^t))+l[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^h&(g^e))+l[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(h^g&(t^h))+l[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=g+(t^h&(e^t))+l[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=h+(e^t&(g^e))+l[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(g^e&(h^g))+l[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(h^g&(t^h))+l[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=g+(t^h&(e^t))+l[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=h+(e^t&(g^e))+l[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(g^e&(h^g))+l[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(h^g&(t^h))+l[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=g+(t^h&(e^t))+l[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=h+(e^t&(g^e))+l[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(g^e&(h^g))+l[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(h^g&(t^h))+l[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=g+(t^h&(e^t))+l[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=h+(e^t&(g^e))+l[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(g^e&(h^g))+l[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^h^g)+l[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=g+(e^t^h)+l[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=h+(g^e^t)+l[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(h^g^e)+l[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^h^g)+l[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=g+(e^t^h)+l[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=h+(g^e^t)+l[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(h^g^e)+l[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^h^g)+l[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=g+(e^t^h)+l[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=h+(g^e^t)+l[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(h^g^e)+l[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^h^g)+l[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=g+(e^t^h)+l[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=h+(g^e^t)+l[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(h^g^e)+l[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(h^(t|~g))+l[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=g+(t^(e|~h))+l[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=h+(e^(g|~t))+l[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(g^(h|~e))+l[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(h^(t|~g))+l[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=g+(t^(e|~h))+l[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=h+(e^(g|~t))+l[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(g^(h|~e))+l[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(h^(t|~g))+l[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=g+(t^(e|~h))+l[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=h+(e^(g|~t))+l[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(g^(h|~e))+l[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((g=(e=t+((E=e+(h^(t|~g))+l[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=g+(t^(e|~h))+l[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((h=g+((E=h+(e^(g|~t))+l[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+l[9]+3951481745&4294967295,s.g[0]=s.g[0]+e&4294967295,s.g[1]=s.g[1]+(h+(E<<21&4294967295|E>>>11))&4294967295,s.g[2]=s.g[2]+h&4294967295,s.g[3]=s.g[3]+g&4294967295}function Vi(s,e){this.h=e;for(var t=[],l=!0,h=s.length-1;0<=h;h--){var g=0|s[h];l&&g==e||(t[h]=g,l=!1)}this.g=t}(_e=J.prototype).Oa=function(s){this.M=s},_e.ha=function(s,e,t,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+s);e=e?e.toUpperCase():"GET",this.I=s,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oe.g(),this.C=function _s(s){return s.h||(s.h=s.i())}(this.u?this.u:oe),this.g.onreadystatechange=ct(this.La,this);try{this.G=!0,this.g.open(e,String(s),!0),this.G=!1}catch(g){return void Ln(this,g)}if(s=t||"",t=new Map(this.headers),l)if(Object.getPrototypeOf(l)===Object.prototype)for(var h in l)t.set(h,l[h]);else{if("function"!=typeof l.keys||"function"!=typeof l.get)throw Error("Unknown input type for opt_headers: "+String(l));for(const g of l.keys())t.set(g,l.get(g))}l=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),h=U.FormData&&s instanceof U.FormData,!(0<=vt(Me,e))||l||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,E]of t)this.g.setRequestHeader(g,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ki(this),0<this.B&&((this.L=function Kt(s){return He&&function Tn(){return Ne(yn,9,function(){let s=0;const e=Et(String(Tt)).split("."),t=Et("9").split("."),l=Math.max(e.length,t.length);for(let E=0;0==s&&E<l;E++){var h=e[E]||"",g=t[E]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==h[0].length&&0==g[0].length)break;s=ce(0==h[1].length?0:parseInt(h[1],10),0==g[1].length?0:parseInt(g[1],10))||ce(0==h[2].length,0==g[2].length)||ce(h[2],g[2]),h=h[3],g=g[3]}while(0==s)}return 0<=s})}()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ct(this.ua,this)):this.A=on(this.ua,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(g){Ln(this,g)}},_e.ua=function(){typeof Be<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sn(this,"timeout"),this.abort(8))},_e.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,sn(this,"complete"),sn(this,"abort"),br(this))},_e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),br(this,!0)),J.$.N.call(this)},_e.La=function(){this.s||(this.G||this.v||this.l?kr(this):this.kb())},_e.kb=function(){kr(this)},_e.da=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},_e.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},_e.Wa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),S(e)}},_e.Ia=function(){return this.m},_e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(_e=Z.prototype).qa=8,_e.H=1,_e.Na=function(s){if(this.m)if(this.m=null,1==this.H){if(!s){this.W=Math.floor(1e5*Math.random()),s=this.W++;const h=new ie(this,this.j,s,void 0);let g=this.s;if(this.U&&(g?(g=rr(g),Nr(g,this.U)):g=this.U),null!==this.o||this.O||(h.I=g,g=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var l=this.i[t];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=an(this,h,e),$r(t=Li(this.G),"RID",s),$r(t,"CVER",22),this.F&&$r(t,"X-HTTP-Session-Id",this.F),nn(this,t),g&&(this.O?e="headers="+encodeURIComponent(String(Vs(g)))+"&"+e:this.o&&Mo(t,this.o,g)),Lo(this.h,h),this.bb&&$r(t,"TYPE","init"),this.P?($r(t,"$req",e),$r(t,"SID","null"),h.ba=!0,cn(h,t,null)):cn(h,t,e),this.H=2}}else 3==this.H&&(s?Lt(this,s):0==this.i.length||Ta(this.h)||Lt(this))},_e.Ma=function(){if(this.u=null,wr(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var s=2*this.S;this.j.info("BP detection timer enabled: "+s),this.B=Si(ct(this.jb,this),s)}},_e.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,pi(10),C(this),wr(this))},_e.ib=function(){null!=this.v&&(this.v=null,C(this),qr(this),pi(19))},_e.pb=function(s){s?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(_e=Ys.prototype).Ba=function(){},_e.Aa=function(){},_e.za=function(){},_e.ya=function(){},_e.Va=function(){},ma.prototype.g=function(s,e){return new Ko(s,e)},ze(Ko,Xt),Ko.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var s=this.g,e=this.l,t=this.h||void 0;pi(0),s.Y=e,s.ma=t||{},s.M=s.aa,s.G=ro(s,null,s.Y),fe(s)},Ko.prototype.close=function(){j(this.g)},Ko.prototype.u=function(s){var e=this.g;if("string"==typeof s){var t={};t.__data__=s,s=t}else this.v&&((t={}).__data__=On(s),s=t);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.fb++,s)),3==e.H&&fe(e)},Ko.prototype.N=function(){this.g.l=null,delete this.j,j(this.g),delete this.g,Ko.$.N.call(this)},ze(js,ne),ze(ya,Ee),ze(Fl,Ys),Fl.prototype.Ba=function(){sn(this.g,"a")},Fl.prototype.Aa=function(s){sn(this.g,new js(s))},Fl.prototype.za=function(s){sn(this.g,new ya)},Fl.prototype.ya=function(){sn(this.g,"b")},ze(Vo,function hu(){this.blockSize=-1}),Vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vo.prototype.j=function(s,e){void 0===e&&(e=s.length);for(var t=e-this.blockSize,l=this.m,h=this.h,g=0;g<e;){if(0==h)for(;g<=t;)Ll(this,s,g),g+=this.blockSize;if("string"==typeof s){for(;g<e;)if(l[h++]=s.charCodeAt(g++),h==this.blockSize){Ll(this,l),h=0;break}}else for(;g<e;)if(l[h++]=s[g++],h==this.blockSize){Ll(this,l),h=0;break}}this.h=h,this.i+=e},Vo.prototype.l=function(){var s=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);s[0]=128;for(var e=1;e<s.length-8;++e)s[e]=0;var t=8*this.i;for(e=s.length-8;e<s.length;++e)s[e]=255&t,t/=256;for(this.j(s),s=Array(16),e=t=0;4>e;++e)for(var l=0;32>l;l+=8)s[t++]=this.g[e]>>>l&255;return s};var Ec={};function fu(s){return-128<=s&&128>s?Ne(Ec,s,function(e){return new Vi([0|e],0>e?-1:0)}):new Vi([0|s],0>s?-1:0)}function Ss(s){if(isNaN(s)||!isFinite(s))return yl;if(0>s)return Hs(Ss(-s));for(var e=[],t=1,l=0;s>=t;l++)e[l]=s/t|0,t*=oa;return new Vi(e,0)}var oa=4294967296,yl=fu(0),Uo=fu(1),Ka=fu(16777216);function jo(s){if(0!=s.h)return!1;for(var e=0;e<s.g.length;e++)if(0!=s.g[e])return!1;return!0}function ti(s){return-1==s.h}function Hs(s){for(var e=s.g.length,t=[],l=0;l<e;l++)t[l]=~s.g[l];return new Vi(t,~s.h).add(Uo)}function Aa(s,e){return s.add(Hs(e))}function ls(s,e){for(;(65535&s[e])!=s[e];)s[e+1]+=s[e]>>>16,s[e]&=65535,e++}function vl(s,e){this.g=s,this.h=e}function Bl(s,e){if(jo(e))throw Error("division by zero");if(jo(s))return new vl(yl,yl);if(ti(s))return e=Bl(Hs(s),e),new vl(Hs(e.g),Hs(e.h));if(ti(e))return e=Bl(s,Hs(e)),new vl(Hs(e.g),e.h);if(30<s.g.length){if(ti(s)||ti(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Uo,l=e;0>=l.X(s);)t=qa(t),l=qa(l);var h=Ts(t,1),g=Ts(l,1);for(l=Ts(l,2),t=Ts(t,2);!jo(l);){var E=g.add(l);0>=E.X(s)&&(h=h.add(t),g=E),l=Ts(l,1),t=Ts(t,1)}return e=Aa(s,h.R(e)),new vl(h,e)}for(h=yl;0<=s.X(e);){for(t=Math.max(1,Math.floor(s.ea()/e.ea())),l=48>=(l=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,l-48),E=(g=Ss(t)).R(e);ti(E)||0<E.X(s);)E=(g=Ss(t-=l)).R(e);jo(g)&&(g=Uo),h=h.add(g),s=Aa(s,E)}return new vl(h,s)}function qa(s){for(var e=s.g.length+1,t=[],l=0;l<e;l++)t[l]=s.D(l)<<1|s.D(l-1)>>>31;return new Vi(t,s.h)}function Ts(s,e){var t=e>>5;e%=32;for(var l=s.g.length-t,h=[],g=0;g<l;g++)h[g]=0<e?s.D(g+t)>>>e|s.D(g+t+1)<<32-e:s.D(g+t);return new Vi(h,s.h)}(_e=Vi.prototype).ea=function(){if(ti(this))return-Hs(this).ea();for(var s=0,e=1,t=0;t<this.g.length;t++){var l=this.D(t);s+=(0<=l?l:oa+l)*e,e*=oa}return s},_e.toString=function(s){if(2>(s=s||10)||36<s)throw Error("radix out of range: "+s);if(jo(this))return"0";if(ti(this))return"-"+Hs(this).toString(s);for(var e=Ss(Math.pow(s,6)),t=this,l="";;){var h=Bl(t,e).g,g=((0<(t=Aa(t,h.R(e))).g.length?t.g[0]:t.h)>>>0).toString(s);if(jo(t=h))return g+l;for(;6>g.length;)g="0"+g;l=g+l}},_e.D=function(s){return 0>s?0:s<this.g.length?this.g[s]:this.h},_e.X=function(s){return ti(s=Aa(this,s))?-1:jo(s)?0:1},_e.abs=function(){return ti(this)?Hs(this):this},_e.add=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],l=0,h=0;h<=e;h++){var g=l+(65535&this.D(h))+(65535&s.D(h)),E=(g>>>16)+(this.D(h)>>>16)+(s.D(h)>>>16);l=E>>>16,t[h]=(E&=65535)<<16|(g&=65535)}return new Vi(t,-2147483648&t[t.length-1]?-1:0)},_e.R=function(s){if(jo(this)||jo(s))return yl;if(ti(this))return ti(s)?Hs(this).R(Hs(s)):Hs(Hs(this).R(s));if(ti(s))return Hs(this.R(Hs(s)));if(0>this.X(Ka)&&0>s.X(Ka))return Ss(this.ea()*s.ea());for(var e=this.g.length+s.g.length,t=[],l=0;l<2*e;l++)t[l]=0;for(l=0;l<this.g.length;l++)for(var h=0;h<s.g.length;h++){var g=this.D(l)>>>16,E=65535&this.D(l),k=s.D(h)>>>16,Y=65535&s.D(h);t[2*l+2*h]+=E*Y,ls(t,2*l+2*h),t[2*l+2*h+1]+=g*Y,ls(t,2*l+2*h+1),t[2*l+2*h+1]+=E*k,ls(t,2*l+2*h+1),t[2*l+2*h+2]+=g*k,ls(t,2*l+2*h+2)}for(l=0;l<e;l++)t[l]=t[2*l+1]<<16|t[2*l];for(l=e;l<2*e;l++)t[l]=0;return new Vi(t,0)},_e.gb=function(s){return Bl(this,s).h},_e.and=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)&s.D(l);return new Vi(t,this.h&s.h)},_e.or=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)|s.D(l);return new Vi(t,this.h|s.h)},_e.xor=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)^s.D(l);return new Vi(t,this.h^s.h)},ma.prototype.createWebChannel=ma.prototype.g,Ko.prototype.send=Ko.prototype.u,Ko.prototype.open=Ko.prototype.m,Ko.prototype.close=Ko.prototype.close,ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,vs.COMPLETE="complete",Qs.EventType=W,W.OPEN="a",W.CLOSE="b",W.ERROR="c",W.MESSAGE="d",Xt.prototype.listen=Xt.prototype.O,J.prototype.listenOnce=J.prototype.P,J.prototype.getLastError=J.prototype.Sa,J.prototype.getLastErrorCode=J.prototype.Ia,J.prototype.getStatus=J.prototype.da,J.prototype.getResponseJson=J.prototype.Wa,J.prototype.getResponseText=J.prototype.ja,J.prototype.send=J.prototype.ha,J.prototype.setWithCredentials=J.prototype.Oa,Vo.prototype.digest=Vo.prototype.l,Vo.prototype.reset=Vo.prototype.reset,Vo.prototype.update=Vo.prototype.j,Vi.prototype.add=Vi.prototype.add,Vi.prototype.multiply=Vi.prototype.R,Vi.prototype.modulo=Vi.prototype.gb,Vi.prototype.compare=Vi.prototype.X,Vi.prototype.toNumber=Vi.prototype.ea,Vi.prototype.toString=Vi.prototype.toString,Vi.prototype.getBits=Vi.prototype.D,Vi.fromNumber=Ss,Vi.fromString=function ld(s,e){if(0==s.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==s.charAt(0))return Hs(ld(s.substring(1),e));if(0<=s.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ss(Math.pow(e,8)),l=yl,h=0;h<s.length;h+=8){var g=Math.min(8,s.length-h),E=parseInt(s.substring(h,h+g),e);8>g?(g=Ss(Math.pow(e,g)),l=l.R(g).add(Ss(E))):l=(l=l.R(t)).add(Ss(E))}return l};var ud=he.createWebChannelTransport=function(){return new ma},pu=he.getStatEventTarget=function(){return fi()},V=he.ErrorCode=ei,re=he.EventType=vs,H=he.Event=Qn,ye=he.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ke=he.FetchXmlHttpFactory=bs,Bt=he.WebChannel=Qs,Yt=he.XhrIo=J,tr=he.Md5=Vo,An=he.Integer=Vi;const li="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let Ar="9.22.0";const Ai=new ve.Yd("@firebase/firestore");function Ci(){return Ai.logLevel}function As(s){Ai.setLogLevel(s)}function dn(s,...e){if(Ai.logLevel<=ve.in.DEBUG){const t=e.map(mo);Ai.debug(`Firestore (${Ar}): ${s}`,...t)}}function Yr(s,...e){if(Ai.logLevel<=ve.in.ERROR){const t=e.map(mo);Ai.error(`Firestore (${Ar}): ${s}`,...t)}}function zs(s,...e){if(Ai.logLevel<=ve.in.WARN){const t=e.map(mo);Ai.warn(`Firestore (${Ar}): ${s}`,...t)}}function mo(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function Pn(s="Unexpected state"){const e=`FIRESTORE (${Ar}) INTERNAL ASSERTION FAILED: `+s;throw Yr(e),new Error(e)}function Zn(s,e){s||Pn()}function rn(s,e){s||Pn()}function en(s,e){return s}const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends De.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class Qa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wc{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var l=this;let h=this.i;const g=se=>this.i!==h?(h=this.i,t(se)):Promise.resolve();let E=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new vi,e.enqueueRetryable(()=>g(this.currentUser))};const k=()=>{const se=E;e.enqueueRetryable((0,y.Z)(function*(){yield se.promise,yield g(l.currentUser)}))},Y=se=>{dn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(se=>Y(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?Y(se):(dn("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new vi)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(l=>this.i!==e?(dn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Zn("string"==typeof l.accessToken),new Ya(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zn(null===e||"string"==typeof e),new fr(e)}}class gu{constructor(e,t,l){this.h=e,this.l=t,this.m=l,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _l{constructor(e,t,l){this.h=e,this.l=t,this.m=l}getToken(){return Promise.resolve(new gu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gf{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const l=g=>{null!=g.error&&dn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const E=g.token!==this.T;return this.T=g.token,dn("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>l(g))};const h=g=>{dn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.I.onInit(g=>h(g)),setTimeout(()=>{if(!this.appCheck){const g=this.I.getImmediate({optional:!0});g?h(g):dn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zn("string"==typeof t.token),this.T=t.token,new $l(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yo(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let l=0;l<s;l++)t[l]=Math.floor(256*Math.random());return t}class Gu{static A(){const t=62*Math.floor(256/62);let l="";for(;l.length<20;){const h=yo(40);for(let g=0;g<h.length;++g)l.length<20&&h[g]<t&&(l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(h[g]%62))}return l}}function Dr(s,e){return s<e?-1:s>e?1:0}function Ro(s,e,t){return s.length===e.length&&s.every((l,h)=>t(l,e[h]))}function mf(s){return s+"\0"}class Ji{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hn(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hn(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hn(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hn(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ji.fromMillis(Date.now())}static fromDate(e){return Ji.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*t));return new Ji(t,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dr(this.nanoseconds,e.nanoseconds):Dr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cr(e)}static min(){return new cr(new Ji(0,0))}static max(){return new cr(new Ji(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class El{constructor(e,t,l){void 0===t?t=0:t>e.length&&Pn(),void 0===l?l=e.length-t:l>e.length-t&&Pn(),this.segments=e,this.offset=t,this.len=l}get length(){return this.len}isEqual(e){return 0===El.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof El?e.forEach(l=>{t.push(l)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,l=this.limit();t<l;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const l=Math.min(e.length,t.length);for(let h=0;h<l;h++){const g=e.get(h),E=t.get(h);if(g<E)return-1;if(g>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ni extends El{construct(e,t,l){return new ni(e,t,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const l of e){if(l.indexOf("//")>=0)throw new hn(Vt.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);t.push(...l.split("/").filter(h=>h.length>0))}return new ni(t)}static emptyPath(){return new ni([])}}const Wu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class es extends El{construct(e,t,l){return new es(e,t,l)}static isValidIdentifier(e){return Wu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),es.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new es(["__name__"])}static fromServerFormat(e){const t=[];let l="",h=0;const g=()=>{if(0===l.length)throw new hn(Vt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(l),l=""};let E=!1;for(;h<e.length;){const k=e[h];if("\\"===k){if(h+1===e.length)throw new hn(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Y=e[h+1];if("\\"!==Y&&"."!==Y&&"`"!==Y)throw new hn(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=Y,h+=2}else"`"===k?(E=!E,h++):"."!==k||E?(l+=k,h++):(g(),h++)}if(g(),E)throw new hn(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new es(t)}static emptyPath(){return new es([])}}class Mn{constructor(e){this.path=e}static fromPath(e){return new Mn(ni.fromString(e))}static fromName(e){return new Mn(ni.fromString(e).popFirst(5))}static empty(){return new Mn(ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mn(new ni(e.slice()))}}class Ku{constructor(e,t,l,h){this.indexId=e,this.collectionGroup=t,this.fields=l,this.indexState=h}}function mu(s){return s.fields.find(e=>2===e.kind)}function Ma(s){return s.fields.filter(e=>2!==e.kind)}Ku.UNKNOWN_ID=-1;class vu{constructor(e,t){this.fieldPath=e,this.kind=t}}class hi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hi(0,Zs.min())}}function _i(s,e){const t=s.toTimestamp().seconds,l=s.toTimestamp().nanoseconds+1,h=cr.fromTimestamp(1e9===l?new Ji(t+1,0):new Ji(t,l));return new Zs(h,Mn.empty(),e)}function ri(s){return new Zs(s.readTime,s.key,-1)}class Zs{constructor(e,t,l){this.readTime=e,this.documentKey=t,this.largestBatchId=l}static min(){return new Zs(cr.min(),Mn.empty(),-1)}static max(){return new Zs(cr.max(),Mn.empty(),-1)}}function Wr(s,e){let t=s.readTime.compareTo(e.readTime);return 0!==t?t:(t=Mn.comparator(s.documentKey,e.documentKey),0!==t?t:Dr(s.largestBatchId,e.largestBatchId))}const Ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function aa(s){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,y.Z)(function*(s){if(s.code!==Vt.FAILED_PRECONDITION||s.message!==Ra)throw s;dn("LocalStore","Unexpectedly lost primary lease")}),Cc.apply(this,arguments)}class St{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new St((l,h)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(l,h)},this.catchCallback=g=>{this.wrapFailure(t,g).next(l,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof St?t:St.resolve(t)}catch(t){return St.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):St.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):St.reject(t)}static resolve(e){return new St((t,l)=>{t(e)})}static reject(e){return new St((t,l)=>{l(e)})}static waitFor(e){return new St((t,l)=>{let h=0,g=0,E=!1;e.forEach(k=>{++h,k.next(()=>{++g,E&&g===h&&t()},Y=>l(Y))}),E=!0,g===h&&t()})}static or(e){let t=St.resolve(!1);for(const l of e)t=t.next(h=>h?St.resolve(h):l());return t}static forEach(e,t){const l=[];return e.forEach((h,g)=>{l.push(t.call(this,h,g))}),this.waitFor(l)}static mapArray(e,t){return new St((l,h)=>{const g=e.length,E=new Array(g);let k=0;for(let Y=0;Y<g;Y++){const se=Y;t(e[se]).next(Se=>{E[se]=Se,++k,k===g&&l(E)},Se=>h(Se))}})}static doWhile(e,t){return new St((l,h)=>{const g=()=>{!0===e()?t().next(()=>{g()},h):l()};g()})}}class Hr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new vi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Xa(e,t.error)):this.v.resolve()},this.transaction.onerror=l=>{const h=P(l.target.error);this.v.reject(new Xa(e,h))}}static open(e,t,l,h){try{return new Hr(t,e.transaction(h,l))}catch(g){throw new Xa(t,g)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(dn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sp(t)}}class us{constructor(e,t,l){this.name=e,this.version=t,this.V=l,12.2===us.S((0,De.z$)())&&Yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dn("SimpleDb","Removing database:",e),Ja(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,De.hl)())return!1;if(us.C())return!0;const e=(0,De.z$)(),t=us.S(e),l=0<t&&t<10,h=us.N(e),g=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||g)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static N(e){const t=e.match(/Android ([\d.]+)/i),l=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(l)}$(e){var t=this;return(0,y.Z)(function*(){return t.db||(dn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((l,h)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=E=>{l(E.target.result)},g.onblocked=()=>{h(new Xa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=E=>{const k=E.target.error;h("VersionError"===k.name?new hn(Vt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new hn(Vt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new Xa(e,k))},g.onupgradeneeded=E=>{dn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.O(E.target.result,g.transaction,E.oldVersion,t.version).next(()=>{dn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=l=>t.F(l)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,l,h){var g=this;return(0,y.Z)(function*(){const E="readonly"===t;let k=0;for(;;){++k;try{g.db=yield g.$(e);const Y=Hr.open(g.db,e,E?"readonly":"readwrite",l),se=h(Y).next(Se=>(Y.P(),Se)).catch(Se=>(Y.abort(Se),St.reject(Se))).toPromise();return se.catch(()=>{}),yield Y.R,se}catch(Y){const se=Y,Se="FirebaseError"!==se.name&&k<3;if(dn("SimpleDb","Transaction failed with error:",se.message,"Retrying:",Se),g.close(),!Se)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yf{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ja(this.L.delete())}}class Xa extends hn{constructor(e,t){super(Vt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ts(s){return"IndexedDbTransactionError"===s.name}class Sp{constructor(e){this.store=e}put(e,t){let l;return void 0!==t?(dn("SimpleDb","PUT",this.store.name,e,t),l=this.store.put(t,e)):(dn("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),Ja(l)}add(e){return dn("SimpleDb","ADD",this.store.name,e,e),Ja(this.store.add(e))}get(e){return Ja(this.store.get(e)).next(t=>(void 0===t&&(t=null),dn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dn("SimpleDb","DELETE",this.store.name,e),Ja(this.store.delete(e))}count(){return dn("SimpleDb","COUNT",this.store.name),Ja(this.store.count())}j(e,t){const l=this.options(e,t);if(l.index||"function"!=typeof this.store.getAll){const h=this.cursor(l),g=[];return this.W(h,(E,k)=>{g.push(k)}).next(()=>g)}{const h=this.store.getAll(l.range);return new St((g,E)=>{h.onerror=k=>{E(k.target.error)},h.onsuccess=k=>{g(k.target.result)}})}}H(e,t){const l=this.store.getAll(e,null===t?void 0:t);return new St((h,g)=>{l.onerror=E=>{g(E.target.error)},l.onsuccess=E=>{h(E.target.result)}})}J(e,t){dn("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,t);l.Y=!1;const h=this.cursor(l);return this.W(h,(g,E,k)=>k.delete())}X(e,t){let l;t?l=e:(l={},t=e);const h=this.cursor(l);return this.W(h,t)}Z(e){const t=this.cursor({});return new St((l,h)=>{t.onerror=g=>{const E=P(g.target.error);h(E)},t.onsuccess=g=>{const E=g.target.result;E?e(E.primaryKey,E.value).next(k=>{k?E.continue():l()}):l()}})}W(e,t){const l=[];return new St((h,g)=>{e.onerror=E=>{g(E.target.error)},e.onsuccess=E=>{const k=E.target.result;if(!k)return void h();const Y=new yf(k),se=t(k.primaryKey,k.value,Y);if(se instanceof St){const Se=se.catch(tt=>(Y.done(),St.reject(tt)));l.push(Se)}Y.isDone?h():null===Y.K?k.continue():k.continue(Y.K)}}).next(()=>St.waitFor(l))}options(e,t){let l;return void 0!==e&&("string"==typeof e?l=e:t=e),{index:l,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const l=this.store.index(e.index);return e.Y?l.openKeyCursor(e.range,t):l.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ja(s){return new St((e,t)=>{s.onsuccess=l=>{e(l.target.result)},s.onerror=l=>{const h=P(l.target.error);t(h)}})}let M=!1;function P(s){const e=us.S((0,De.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const l=new hn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return M||(M=!0,setTimeout(()=>{throw l},0)),l}}return s}class D{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;dn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.Z)(function*(){t.task=null;try{dn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(l){ts(l)?dn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",l):yield aa(l)}yield t.et(6e4)}))}}class F{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,y.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",l=>t.st(l,e))})()}st(e,t){const l=new Set;let h=t,g=!0;return St.doWhile(()=>!0===g&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!l.has(E))return dn("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,h).next(k=>{h-=k,l.add(E)});g=!1})).next(()=>t-h)}it(e,t,l){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,l).next(g=>{const E=g.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(h,g)).next(k=>(dn("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>E.size)}))}rt(e,t){let l=e;return t.changes.forEach((h,g)=>{const E=ri(g);Wr(E,l)>0&&(l=E)}),new Zs(l.readTime,l.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ee=(()=>{class s{constructor(t,l){this.previousValue=t,l&&(l.sequenceNumberHandler=h=>this.ot(h),this.ut=h=>l.writeSequenceNumber(h))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return s.ct=-1,s})();function Te(s){return null==s}function Ie(s){return 0===s&&1/s==-1/0}function gt(s){return"number"==typeof s&&Number.isInteger(s)&&!Ie(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Wt(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Er(e)),e=Bn(s.get(t),e);return Er(e)}function Bn(s,e){let t=e;const l=s.length;for(let h=0;h<l;h++){const g=s.charAt(h);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Er(s){return s+"\x01\x01"}function Vn(s){const e=s.length;if(Zn(e>=2),2===e)return Zn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),ni.emptyPath();const t=e-2,l=[];let h="";for(let g=0;g<e;){const E=s.indexOf("\x01",g);switch((E<0||E>t)&&Pn(),s.charAt(E+1)){case"\x01":const k=s.substring(g,E);let Y;0===h.length?Y=k:(h+=k,Y=h,h=""),l.push(Y);break;case"\x10":h+=s.substring(g,E),h+="\0";break;case"\x11":h+=s.substring(g,E+1);break;default:Pn()}g=E+2}return new ni(l)}const ir=["userId","batchId"];function Os(s,e){return[s,Wt(e)]}function xo(s,e,t){return[s,Wt(e),t]}const va={},qo=["prefixPath","collectionGroup","readTime","documentId"],_a=["prefixPath","collectionGroup","documentId"],na=["collectionGroup","readTime","prefixPath","documentId"],la=["canonicalId","targetId"],io=["targetId","path"],Vl=["path","targetId"],Tp=["collectionId","parent"],sh=["indexId","uid"],oh=["uid","sequenceNumber"],vf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],el=["indexId","uid","orderedDocumentKey"],Ap=["userId","collectionPath","documentId"],tl=["userId","collectionPath","largestBatchId"],ah=["userId","collectionGroup","largestBatchId"],bc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_f=[...bc,"documentOverlays"],Dc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lh=Dc,cs=[...lh,"indexConfiguration","indexState","indexEntries"];class _u extends ms{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function vo(s,e){const t=en(s);return us.M(t.ht,e)}function Sc(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function xa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Pa(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ii{constructor(e,t){this.comparator=e,this.root=t||pr.EMPTY}insert(e,t){return new ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const l=this.comparator(e,t.key);if(0===l)return t.value;l<0?t=t.left:l>0&&(t=t.right)}return null}indexOf(e){let t=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(e,l.key);if(0===h)return t+l.left.size;h<0?l=l.left:(t+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,l)=>(e(t,l),!1))}toString(){const e=[];return this.inorderTraversal((t,l)=>(e.push(`${t}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,l,h){this.isReverse=h,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?l(e.key,t):1,t&&h&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,t,l,h,g){this.key=e,this.value=t,this.color=null!=l?l:pr.RED,this.left=null!=h?h:pr.EMPTY,this.right=null!=g?g:pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,l,h,g){return new pr(null!=e?e:this.key,null!=t?t:this.value,null!=l?l:this.color,null!=h?h:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,l){let h=this;const g=l(e,h.key);return h=g<0?h.copy(null,null,null,h.left.insert(e,t,l),null):0===g?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let l,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return pr.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pn();const e=this.left.check();if(e!==this.right.check())throw Pn();return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1,pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Pn()}get value(){throw Pn()}get color(){throw Pn()}get left(){throw Pn()}get right(){throw Pn()}copy(s,e,t,l,h){return this}insert(s,e,t){return new pr(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ds{constructor(e){this.comparator=e,this.data=new ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,l)=>(e(t),!1))}forEachInRange(e,t){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let l;for(l=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oa(this.data.getIterator())}getIteratorFrom(e){return new Oa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(l=>{t=t.add(l)}),t}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const t=this.data.getIterator(),l=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,g=l.getNext().key;if(0!==this.comparator(h,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ds(this.comparator);return t.data=e,t}}class Oa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tc(s){return s.hasNext()?s.getNext():void 0}class Ei{constructor(e){this.fields=e,e.sort(es.comparator)}static empty(){return new Ei([])}unionWith(e){let t=new ds(es.comparator);for(const l of this.fields)t=t.add(l);for(const l of e)t=t.add(l);return new Ei(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(t,l)=>t.isEqual(l))}}class wu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function hm(){return typeof atob<"u"}class Gs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new wu("Invalid base64 string: "+h):h}}(e);return new Gs(t)}static fromUint8Array(e){const t=function(l){let h="";for(let g=0;g<l.length;++g)h+=String.fromCharCode(l[g]);return h}(e);return new Gs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gs.EMPTY_BYTE_STRING=new Gs("");const Ac=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(s){if(Zn(!!s),"string"==typeof s){let e=0;const t=Ac.exec(s);if(Zn(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const l=new Date(s);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:qi(s.seconds),nanos:qi(s.nanos)}}function qi(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function so(s){return"string"==typeof s?Gs.fromBase64String(s):Gs.fromUint8Array(s)}function cd(s){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wl(s){const e=s.mapValue.fields.__previous_value__;return cd(e)?wl(e):e}function Yo(s){const e=Po(s.mapValue.fields.__local_write_time__.timestampValue);return new Ji(e.seconds,e.nanos)}class Mp{constructor(e,t,l,h,g,E,k,Y,se){this.databaseId=e,this.appId=t,this.persistenceKey=l,this.host=h,this.ssl=g,this.forceLongPolling=E,this.autoDetectLongPolling=k,this.longPollingOptions=Y,this.useFetchStreams=se}}class Na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}const Ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ef={nullValue:"NULL_VALUE"};function Iu(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?cd(s)?4:Mc(s)?9007199254740991:10:Pn()}function ka(s,e){if(s===e)return!0;const t=Iu(s);if(t!==Iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Yo(s).isEqual(Yo(e));case 3:return function(l,h){if("string"==typeof l.timestampValue&&"string"==typeof h.timestampValue&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const g=Po(l.timestampValue),E=Po(h.timestampValue);return g.seconds===E.seconds&&g.nanos===E.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,so(s.bytesValue).isEqual(so(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(l,h){return qi(l.geoPointValue.latitude)===qi(h.geoPointValue.latitude)&&qi(l.geoPointValue.longitude)===qi(h.geoPointValue.longitude)}(s,e);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return qi(l.integerValue)===qi(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const g=qi(l.doubleValue),E=qi(h.doubleValue);return g===E?Ie(g)===Ie(E):isNaN(g)&&isNaN(E)}return!1}(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:return function(l,h){const g=l.mapValue.fields||{},E=h.mapValue.fields||{};if(Sc(g)!==Sc(E))return!1;for(const k in g)if(g.hasOwnProperty(k)&&(void 0===E[k]||!ka(g[k],E[k])))return!1;return!0}(s,e);default:return Pn()}var h}function dd(s,e){return void 0!==(s.values||[]).find(t=>ka(t,e))}function jl(s,e){if(s===e)return 0;const t=Iu(s),l=Iu(e);if(t!==l)return Dr(t,l);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dr(s.booleanValue,e.booleanValue);case 2:return function(h,g){const E=qi(h.integerValue||h.doubleValue),k=qi(g.integerValue||g.doubleValue);return E<k?-1:E>k?1:E===k?0:isNaN(E)?isNaN(k)?0:-1:1}(s,e);case 3:return qu(s.timestampValue,e.timestampValue);case 4:return qu(Yo(s),Yo(e));case 5:return Dr(s.stringValue,e.stringValue);case 6:return function(h,g){const E=so(h),k=so(g);return E.compareTo(k)}(s.bytesValue,e.bytesValue);case 7:return function(h,g){const E=h.split("/"),k=g.split("/");for(let Y=0;Y<E.length&&Y<k.length;Y++){const se=Dr(E[Y],k[Y]);if(0!==se)return se}return Dr(E.length,k.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,g){const E=Dr(qi(h.latitude),qi(g.latitude));return 0!==E?E:Dr(qi(h.longitude),qi(g.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,g){const E=h.values||[],k=g.values||[];for(let Y=0;Y<E.length&&Y<k.length;++Y){const se=jl(E[Y],k[Y]);if(se)return se}return Dr(E.length,k.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===Ul.mapValue&&g===Ul.mapValue)return 0;if(h===Ul.mapValue)return 1;if(g===Ul.mapValue)return-1;const E=h.fields||{},k=Object.keys(E),Y=g.fields||{},se=Object.keys(Y);k.sort(),se.sort();for(let Se=0;Se<k.length&&Se<se.length;++Se){const tt=Dr(k[Se],se[Se]);if(0!==tt)return tt;const kt=jl(E[k[Se]],Y[se[Se]]);if(0!==kt)return kt}return Dr(k.length,se.length)}(s.mapValue,e.mapValue);default:throw Pn()}}function qu(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return Dr(s,e);const t=Po(s),l=Po(e),h=Dr(t.seconds,l.seconds);return 0!==h?h:Dr(t.nanos,l.nanos)}function Il(s){return wf(s)}function wf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(l){const h=Po(l);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?so(s.bytesValue).toBase64():"referenceValue"in s?Mn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(l){let h="[",g=!0;for(const E of l.values||[])g?g=!1:h+=",",h+=wf(E);return h+"]"}(s.arrayValue):"mapValue"in s?function(l){const h=Object.keys(l.fields||{}).sort();let g="{",E=!0;for(const k of h)E?E=!1:g+=",",g+=`${k}:${wf(l.fields[k])}`;return g+"}"}(s.mapValue):Pn();var e}function Cl(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Hl(s){return!!s&&"integerValue"in s}function Cu(s){return!!s&&"arrayValue"in s}function Oo(s){return!!s&&"nullValue"in s}function zl(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yu(s){return!!s&&"mapValue"in s}function nl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return xa(s.mapValue.fields,(t,l)=>e.mapValue.fields[t]=nl(l)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Mc(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rp(s){return"nullValue"in s?Ef:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Cl(Na.empty(),Mn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Pn()}function qy(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Cl(Na.empty(),Mn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Ul:Pn()}function xp(s,e){const t=jl(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function fm(s,e){const t=jl(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let l=0;l<e.length-1;++l)if(t=(t.mapValue.fields||{})[e.get(l)],!Yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=es.emptyPath(),l={},h=[];e.forEach((E,k)=>{if(!t.isImmediateParentOf(k)){const Y=this.getFieldsMap(t);this.applyChanges(Y,l,h),l={},h=[],t=k.popLast()}E?l[k.lastSegment()]=nl(E):h.push(k.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,l,h)}delete(e){const t=this.field(e.popLast());Yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let l=0;l<e.length;++l){let h=t.mapValue.fields[e.get(l)];Yu(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(l)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,l){xa(t,(h,g)=>e[h]=g);for(const h of l)delete e[h]}clone(){return new Ur(nl(this.value))}}function Rc(s){const e=[];return xa(s.fields,(t,l)=>{const h=new es([t]);if(Yu(l)){const g=Rc(l.mapValue).fields;if(0===g.length)e.push(h);else for(const E of g)e.push(h.child(E))}else e.push(h)}),new Ei(e)}class Ui{constructor(e,t,l,h,g,E,k){this.key=e,this.documentType=t,this.version=l,this.readTime=h,this.createTime=g,this.data=E,this.documentState=k}static newInvalidDocument(e){return new Ui(e,0,cr.min(),cr.min(),cr.min(),Ur.empty(),0)}static newFoundDocument(e,t,l,h){return new Ui(e,1,t,cr.min(),l,h,0)}static newNoDocument(e,t){return new Ui(e,2,t,cr.min(),cr.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Ui(e,3,t,cr.min(),cr.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(cr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rl{constructor(e,t){this.position=e,this.inclusive=t}}function xc(s,e,t){let l=0;for(let h=0;h<s.position.length;h++){const g=e[h],E=s.position[h];if(l=g.field.isKeyField()?Mn.comparator(Mn.fromName(E.referenceValue),t.key):jl(E,t.data.field(g.field)),"desc"===g.dir&&(l*=-1),0!==l)break}return l}function Pc(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!ka(s.position[t],e.position[t]))return!1;return!0}class Fa{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oc(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Gl{}class wi extends Gl{constructor(e,t,l){super(),this.field=e,this.op=t,this.value=l}static create(e,t,l){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,l):new fd(e,t,l):"array-contains"===t?new gd(e,l):"in"===t?new Su(e,l):"not-in"===t?new Tu(e,l):"array-contains-any"===t?new uh(e,l):new wi(e,t,l)}static createKeyFieldInFilter(e,t,l){return"in"===t?new pd(e,l):new hs(e,l)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jl(t,this.value)):null!==t&&Iu(this.value)===Iu(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ns extends Gl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ns(e,t)}matches(e){return La(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function La(s){return"and"===s.op}function Nc(s){return"or"===s.op}function If(s){return bu(s)&&La(s)}function bu(s){for(const e of s.filters)if(e instanceof ns)return!1;return!0}function Wl(s){if(s instanceof wi)return s.field.canonicalString()+s.op.toString()+Il(s.value);if(If(s))return s.filters.map(e=>Wl(e)).join(",");{const e=s.filters.map(t=>Wl(t)).join(",");return`${s.op}(${e})`}}function Du(s,e){return s instanceof wi?(t=s,(l=e)instanceof wi&&t.op===l.op&&t.field.isEqual(l.field)&&ka(t.value,l.value)):s instanceof ns?function(t,l){return l instanceof ns&&t.op===l.op&&t.filters.length===l.filters.length&&t.filters.reduce((h,g,E)=>h&&Du(g,l.filters[E]),!0)}(s,e):void Pn();var t,l}function hd(s,e){const t=s.filters.concat(e);return ns.create(t,s.op)}function il(s){return s instanceof wi?`${(e=s).field.canonicalString()} ${e.op} ${Il(e.value)}`:s instanceof ns?function(e){return e.op.toString()+" {"+e.getFilters().map(il).join(" ,")+"}"}(s):"Filter";var e}class fd extends wi{constructor(e,t,l){super(e,t,l),this.key=Mn.fromName(l.referenceValue)}matches(e){const t=Mn.comparator(e.key,this.key);return this.matchesComparison(t)}}class pd extends wi{constructor(e,t){super(e,"in",t),this.keys=ua(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hs extends wi{constructor(e,t){super(e,"not-in",t),this.keys=ua(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ua(s,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(l=>Mn.fromName(l.referenceValue))}class gd extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cu(t)&&dd(t.arrayValue,this.value)}}class Su extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dd(this.value.arrayValue,t)}}class Tu extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dd(this.value.arrayValue,t)}}class uh extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(l=>dd(this.value.arrayValue,l))}}class Kl{constructor(e,t=null,l=[],h=[],g=null,E=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=l,this.filters=h,this.limit=g,this.startAt=E,this.endAt=k,this.dt=null}}function kc(s,e=null,t=[],l=[],h=null,g=null,E=null){return new Kl(s,e,t,l,h,g,E)}function ra(s){const e=en(s);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(l=>Wl(l)).join(","),t+="|ob:",t+=e.orderBy.map(l=>{return(h=l).field.canonicalString()+h.dir;var h}).join(","),Te(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>Il(l)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>Il(l)).join(",")),e.dt=t}return e.dt}function Fc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Oc(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Du(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Pc(s.startAt,e.startAt)&&Pc(s.endAt,e.endAt)}function ql(s){return Mn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function md(s,e){return s.filters.filter(t=>t instanceof wi&&t.field.isEqual(e))}function yd(s,e,t){let l=Ef,h=!0;for(const g of md(s,e)){let E=Ef,k=!0;switch(g.op){case"<":case"<=":E=Rp(g.value);break;case"==":case"in":case">=":E=g.value;break;case">":E=g.value,k=!1;break;case"!=":case"not-in":E=Ef}xp({value:l,inclusive:h},{value:E,inclusive:k})<0&&(l=E,h=k)}if(null!==t)for(let g=0;g<s.orderBy.length;++g)if(s.orderBy[g].field.isEqual(e)){const E=t.position[g];xp({value:l,inclusive:h},{value:E,inclusive:t.inclusive})<0&&(l=E,h=t.inclusive);break}return{value:l,inclusive:h}}function vd(s,e,t){let l=Ul,h=!0;for(const g of md(s,e)){let E=Ul,k=!0;switch(g.op){case">=":case">":E=qy(g.value),k=!1;break;case"==":case"in":case"<=":E=g.value;break;case"<":E=g.value,k=!1;break;case"!=":case"not-in":E=Ul}fm({value:l,inclusive:h},{value:E,inclusive:k})>0&&(l=E,h=k)}if(null!==t)for(let g=0;g<s.orderBy.length;++g)if(s.orderBy[g].field.isEqual(e)){const E=t.position[g];fm({value:l,inclusive:h},{value:E,inclusive:t.inclusive})>0&&(l=E,h=t.inclusive);break}return{value:l,inclusive:h}}class sl{constructor(e,t=null,l=[],h=[],g=null,E="F",k=null,Y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=l,this.filters=h,this.limit=g,this.limitType=E,this.startAt=k,this.endAt=Y,this.wt=null,this._t=null}}function Pp(s,e,t,l,h,g,E,k){return new sl(s,e,t,l,h,g,E,k)}function Zu(s){return new sl(s)}function R(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function _(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function I(s){for(const e of s.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function O(s){return null!==s.collectionGroup}function ae(s){const e=en(s);if(null===e.wt){e.wt=[];const t=I(e),l=_(e);if(null!==t&&null===l)t.isKeyField()||e.wt.push(new Fa(t)),e.wt.push(new Fa(es.keyField(),"asc"));else{let h=!1;for(const g of e.explicitOrderBy)e.wt.push(g),g.field.isKeyField()&&(h=!0);if(!h){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Fa(es.keyField(),g))}}}return e.wt}function be(s){const e=en(s);if(!e._t)if("F"===e.limitType)e._t=kc(e.path,e.collectionGroup,ae(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of ae(e))t.push(new Fa(g.field,"desc"===g.dir?"asc":"desc"));const l=e.endAt?new rl(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new rl(e.startAt.position,e.startAt.inclusive):null;e._t=kc(e.path,e.collectionGroup,t,e.filters,e.limit,l,h)}return e._t}function bt(s,e){e.getFirstInequalityField(),I(s);const t=s.filters.concat([e]);return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Ht(s,e,t){return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function wn(s,e){return Fc(be(s),be(e))&&s.limitType===e.limitType}function jn(s){return`${ra(be(s))}|lt:${s.limitType}`}function gr(s){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(l=>il(l)).join(", ")}]`),Te(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(l=>{return`${(h=l).field.canonicalString()} (${h.dir})`;var h}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>Il(l)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>Il(l)).join(",")),`Target(${t})`}(be(s))}; limitType=${s.limitType})`}function Xr(s,e){return e.isFoundDocument()&&function(t,l){const h=l.key.path;return null!==t.collectionGroup?l.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):Mn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(s,e)&&function(t,l){for(const h of ae(t))if(!h.field.isKeyField()&&null===l.data.field(h.field))return!1;return!0}(s,e)&&function(t,l){for(const h of t.filters)if(!h.matches(l))return!1;return!0}(s,e)&&(l=e,!((t=s).startAt&&!function(h,g,E){const k=xc(h,g,E);return h.inclusive?k<=0:k<0}(t.startAt,ae(t),l)||t.endAt&&!function(h,g,E){const k=xc(h,g,E);return h.inclusive?k>=0:k>0}(t.endAt,ae(t),l)));var t,l}function Zo(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yl(s){return(e,t)=>{let l=!1;for(const h of ae(s)){const g=Qu(h,e,t);if(0!==g)return g;l=l||h.field.isKeyField()}return 0}}function Qu(s,e,t){const l=s.field.isKeyField()?Mn.comparator(e.key,t.key):function(h,g,E){const k=g.data.field(h),Y=E.data.field(h);return null!==k&&null!==Y?jl(k,Y):Pn()}(s.field,e,t);switch(s.dir){case"asc":return l;case"desc":return-1*l;default:return Pn()}}class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0!==l)for(const[h,g]of l)if(this.equalsFn(h,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const l=this.mapKeyFn(e),h=this.inner[l];if(void 0===h)return this.inner[l]=[[e,t]],void this.innerSize++;for(let g=0;g<h.length;g++)if(this.equalsFn(h[g][0],e))return void(h[g]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0===l)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return 1===l.length?delete this.inner[t]:l.splice(h,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,(t,l)=>{for(const[h,g]of l)e(h,g)})}isEmpty(){return Pa(this.inner)}size(){return this.innerSize}}const Xu=new ii(Mn.comparator);function Ho(){return Xu}const _d=new ii(Mn.comparator);function Au(...s){let e=_d;for(const t of s)e=e.insert(t.key,t);return e}function $a(s){let e=_d;return s.forEach((t,l)=>e=e.insert(t,l.overlayedDocument)),e}function Va(){return Bc()}function Lc(){return Bc()}function Bc(){return new Ba(s=>s.toString(),(s,e)=>s.isEqual(e))}const Op=new ii(Mn.comparator),Ed=new ds(Mn.comparator);function si(...s){let e=Ed;for(const t of s)e=e.add(t);return e}const Yy=new ds(Dr);function ch(){return Yy}function Cf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ie(e)?"-0":e}}function pm(s){return{integerValue:""+s}}function Zy(s,e){return gt(e)?pm(e):Cf(s,e)}class Qo{constructor(){this._=void 0}}function bf(s,e,t){return s instanceof _o?function(l,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&cd(h)&&(h=wl(h)),h&&(g.fields.__previous_value__=h),{mapValue:g}}(t,e):s instanceof Zl?gm(s,e):s instanceof $c?Xy(s,e):function(l,h){const g=Np(l,h),E=Jy(g)+Jy(l.gt);return Hl(g)&&Hl(l.gt)?pm(E):Cf(l.serializer,E)}(s,e)}function Qy(s,e,t){return s instanceof Zl?gm(s,e):s instanceof $c?Xy(s,e):t}function Np(s,e){return s instanceof Vc?Hl(t=e)||(l=t)&&"doubleValue"in l?e:{integerValue:0}:null;var l,t}class _o extends Qo{}class Zl extends Qo{constructor(e){super(),this.elements=e}}function gm(s,e){const t=kp(e);for(const l of s.elements)t.some(h=>ka(h,l))||t.push(l);return{arrayValue:{values:t}}}class $c extends Qo{constructor(e){super(),this.elements=e}}function Xy(s,e){let t=kp(e);for(const l of s.elements)t=t.filter(h=>!ka(h,l));return{arrayValue:{values:t}}}class Vc extends Qo{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Jy(s){return qi(s.integerValue||s.doubleValue)}function kp(s){return Cu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class dh{constructor(e,t){this.field=e,this.transform=t}}class tv{constructor(e,t){this.version=e,this.transformResults=t}}class ws{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class hh{}function nv(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new Ea(s.key,ws.none()):new Uc(s.key,s.data,ws.none());{const t=s.data,l=Ur.empty();let h=new ds(es.comparator);for(let g of e.fields)if(!h.has(g)){let E=t.field(g);null===E&&g.length>1&&(g=g.popLast(),E=t.field(g)),null===E?l.delete(g):l.set(g,E),h=h.add(g)}return new Ql(s.key,l,new Ei(h.toArray()),ws.none())}}function Df(s,e,t){s instanceof Uc?function(l,h,g){const E=l.value.clone(),k=fh(l.fieldTransforms,h,g.transformResults);E.setAll(k),h.convertToFoundDocument(g.version,E).setHasCommittedMutations()}(s,e,t):s instanceof Ql?function(l,h,g){if(!wd(l.precondition,h))return void h.convertToUnknownDocument(g.version);const E=fh(l.fieldTransforms,h,g.transformResults),k=h.data;k.setAll(Ua(l)),k.setAll(E),h.convertToFoundDocument(g.version,k).setHasCommittedMutations()}(s,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Id(s,e,t,l){return s instanceof Uc?function(h,g,E,k){if(!wd(h.precondition,g))return E;const Y=h.value.clone(),se=Lp(h.fieldTransforms,k,g);return Y.setAll(se),g.convertToFoundDocument(g.version,Y).setHasLocalMutations(),null}(s,e,t,l):s instanceof Ql?function(h,g,E,k){if(!wd(h.precondition,g))return E;const Y=Lp(h.fieldTransforms,k,g),se=g.data;return se.setAll(Ua(h)),se.setAll(Y),g.convertToFoundDocument(g.version,se).setHasLocalMutations(),null===E?null:E.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(Se=>Se.field))}(s,e,t,l):(E=t,wd(s.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):E);var g,E}function rv(s,e){let t=null;for(const l of s.fieldTransforms){const h=e.data.field(l.field),g=Np(l.transform,h||null);null!=g&&(null===t&&(t=Ur.empty()),t.set(l.field,g))}return t||null}function Fp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(t=s.fieldTransforms)&&void 0===l||t&&l&&Ro(t,l,(h,g)=>function ev(s,e){return s.field.isEqual(e.field)&&(l=e.transform,(t=s.transform)instanceof Zl&&l instanceof Zl||t instanceof $c&&l instanceof $c?Ro(t.elements,l.elements,ka):t instanceof Vc&&l instanceof Vc?ka(t.gt,l.gt):t instanceof _o&&l instanceof _o);var t,l}(h,g))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var t,l}class Uc extends hh{constructor(e,t,l,h=[]){super(),this.key=e,this.value=t,this.precondition=l,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Ql extends hh{constructor(e,t,l,h,g=[]){super(),this.key=e,this.data=t,this.fieldMask=l,this.precondition=h,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Ua(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const l=s.data.field(t);e.set(t,l)}}),e}function fh(s,e,t){const l=new Map;Zn(s.length===t.length);for(let h=0;h<t.length;h++){const g=s[h],E=g.transform,k=e.data.field(g.field);l.set(g.field,Qy(E,k,t[h]))}return l}function Lp(s,e,t){const l=new Map;for(const h of s){const g=h.transform,E=t.data.field(h.field);l.set(h.field,bf(g,E,e))}return l}class Ea extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ju extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ph{constructor(e,t,l,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(e,t){const l=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const g=this.mutations[h];g.key.isEqual(e.key)&&Df(g,e,l[h])}}applyToLocalView(e,t){for(const l of this.baseMutations)l.key.isEqual(e.key)&&(t=Id(l,e,t,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(e.key)&&(t=Id(l,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const l=Lc();return this.mutations.forEach(h=>{const g=e.get(h.key),E=g.overlayedDocument;let k=this.applyToLocalView(E,g.mutatedFields);k=t.has(h.key)?null:k;const Y=nv(E,k);null!==Y&&l.set(h.key,Y),E.isValidDocument()||E.convertToNoDocument(cr.min())}),l}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),si())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(t,l)=>Fp(t,l))&&Ro(this.baseMutations,e.baseMutations,(t,l)=>Fp(t,l))}}class mm{constructor(e,t,l,h){this.batch=e,this.commitVersion=t,this.mutationResults=l,this.docVersions=h}static from(e,t,l){Zn(e.mutations.length===l.length);let h=Op;const g=e.mutations;for(let E=0;E<g.length;E++)h=h.insert(g[E].key,l[E].version);return new mm(e,t,l,h)}}class ym{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class iv{constructor(e,t){this.count=e,this.unchangedNames=t}}var oo,Pi;function Xl(s){switch(s){default:return Pn();case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0}}function Cd(s){if(void 0===s)return Yr("GRPC error has no .code"),Vt.UNKNOWN;switch(s){case oo.OK:return Vt.OK;case oo.CANCELLED:return Vt.CANCELLED;case oo.UNKNOWN:return Vt.UNKNOWN;case oo.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case oo.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case oo.INTERNAL:return Vt.INTERNAL;case oo.UNAVAILABLE:return Vt.UNAVAILABLE;case oo.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case oo.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case oo.NOT_FOUND:return Vt.NOT_FOUND;case oo.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case oo.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case oo.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case oo.ABORTED:return Vt.ABORTED;case oo.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case oo.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case oo.DATA_LOSS:return Vt.DATA_LOSS;default:return Pn()}}(Pi=oo||(oo={}))[Pi.OK=0]="OK",Pi[Pi.CANCELLED=1]="CANCELLED",Pi[Pi.UNKNOWN=2]="UNKNOWN",Pi[Pi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pi[Pi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pi[Pi.NOT_FOUND=5]="NOT_FOUND",Pi[Pi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pi[Pi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pi[Pi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pi[Pi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pi[Pi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pi[Pi.ABORTED=10]="ABORTED",Pi[Pi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pi[Pi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pi[Pi.INTERNAL=13]="INTERNAL",Pi[Pi.UNAVAILABLE=14]="UNAVAILABLE",Pi[Pi.DATA_LOSS=15]="DATA_LOSS";class Sf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Bp}static getOrCreateInstance(){return null===Bp&&(Bp=new Sf),Bp}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Bp=null;function sv(){return new TextEncoder}const gh=new An([4294967295,4294967295],0);function $p(s){const e=sv().encode(s),t=new tr;return t.update(e),new Uint8Array(t.digest())}function jc(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),l=e.getUint32(4,!0),h=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new An([t,l],0),new An([h,g],0)]}class mh{constructor(e,t,l){if(this.bitmap=e,this.padding=t,this.hashCount=l,t<0||t>=8)throw new ec(`Invalid padding: ${t}`);if(l<0)throw new ec(`Invalid hash count: ${l}`);if(e.length>0&&0===this.hashCount)throw new ec(`Invalid hash count: ${l}`);if(0===e.length&&0!==t)throw new ec(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=An.fromNumber(this.It)}Et(e,t,l){let h=e.add(t.multiply(An.fromNumber(l)));return 1===h.compare(gh)&&(h=new An([h.getBits(0),h.getBits(1)],0)),h.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=$p(e),[l,h]=jc(t);for(let g=0;g<this.hashCount;g++){const E=this.Et(l,h,g);if(!this.At(E))return!1}return!0}static create(e,t,l){const h=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),E=new mh(g,h,t);return l.forEach(k=>E.insert(k)),E}insert(e){if(0===this.It)return;const t=$p(e),[l,h]=jc(t);for(let g=0;g<this.hashCount;g++){const E=this.Et(l,h,g);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tf{constructor(e,t,l,h,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,l){const h=new Map;return h.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,l)),new Tf(cr.min(),h,new ii(Dr),Ho(),si())}}class tc{constructor(e,t,l,h,g){this.resumeToken=e,this.current=t,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,l){return new tc(l,t,si(),si(),si())}}class Hc{constructor(e,t,l,h){this.Pt=e,this.removedTargetIds=t,this.key=l,this.bt=h}}class vm{constructor(e,t){this.targetId=e,this.Vt=t}}class Vp{constructor(e,t,l=Gs.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=l,this.cause=h}}class bd{constructor(){this.St=0,this.Dt=Mf(),this.Ct=Gs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=si(),t=si(),l=si();return this.Dt.forEach((h,g)=>{switch(g){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:l=l.add(h);break;default:Pn()}}),new tc(this.Ct,this.xt,e,t,l)}Ft(){this.Nt=!1,this.Dt=Mf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Af{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ho(),this.zt=yh(),this.Wt=new ii(Dr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const l=this.Zt(t);switch(e.state){case 0:this.te(t)&&l.$t(e.resumeToken);break;case 1:l.Ut(),l.kt||l.Ft(),l.$t(e.resumeToken);break;case 2:l.Ut(),l.kt||this.removeTarget(t);break;case 3:this.te(t)&&(l.Kt(),l.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),l.$t(e.resumeToken));break;default:Pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((l,h)=>{this.te(h)&&t(h)})}ne(e){var t;const l=e.targetId,h=e.Vt.count,g=this.se(l);if(g){const E=g.target;if(ql(E))if(0===h){const k=new Mn(E.path);this.Yt(l,k,Ui.newNoDocument(k,cr.min()))}else Zn(1===h);else{const k=this.ie(l);if(k!==h){const Y=this.re(e,k);0!==Y&&(this.ee(l),this.Wt=this.Wt.insert(l,2===Y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Sf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(se,Se,tt){var kt,Zt,Cn,Hn,Kn,ui;const Oi={localCacheCount:Se,existenceFilterCount:tt.count},gi=tt.unchangedNames;return gi&&(Oi.bloomFilter={applied:0===se,hashCount:null!==(kt=null==gi?void 0:gi.hashCount)&&void 0!==kt?kt:0,bitmapLength:null!==(Hn=null===(Cn=null===(Zt=null==gi?void 0:gi.bits)||void 0===Zt?void 0:Zt.bitmap)||void 0===Cn?void 0:Cn.length)&&void 0!==Hn?Hn:0,padding:null!==(ui=null===(Kn=null==gi?void 0:gi.bits)||void 0===Kn?void 0:Kn.padding)&&void 0!==ui?ui:0}),Oi}(Y,k,e.Vt))}}}}re(e,t){const{unchangedNames:l,count:h}=e.Vt;if(!l||!l.bits)return 1;const{bits:{bitmap:g="",padding:E=0},hashCount:k=0}=l;let Y,se;try{Y=so(g).toUint8Array()}catch(Se){if(Se instanceof wu)return zs("Decoding the base64 bloom filter in existence filter failed ("+Se.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Se}try{se=new mh(Y,E,k)}catch(Se){return zs(Se instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",Se),1}return 0===se.It?1:h!==t-this.oe(e.targetId,se)?2:0}oe(e,t){const l=this.Gt.getRemoteKeysForTarget(e);let h=0;return l.forEach(g=>{const E=this.Gt.ue(),k=`projects/${E.projectId}/databases/${E.database}/documents/${g.path.canonicalString()}`;t.vt(k)||(this.Yt(e,g,null),h++)}),h}ce(e){const t=new Map;this.Qt.forEach((g,E)=>{const k=this.se(E);if(k){if(g.current&&ql(k.target)){const Y=new Mn(k.target.path);null!==this.jt.get(Y)||this.ae(E,Y)||this.Yt(E,Y,Ui.newNoDocument(Y,e))}g.Mt&&(t.set(E,g.Ot()),g.Ft())}});let l=si();this.zt.forEach((g,E)=>{let k=!0;E.forEachWhile(Y=>{const se=this.se(Y);return!se||"TargetPurposeLimboResolution"===se.purpose||(k=!1,!1)}),k&&(l=l.add(g))}),this.jt.forEach((g,E)=>E.setReadTime(e));const h=new Tf(e,t,this.Wt,this.jt,l);return this.jt=Ho(),this.zt=yh(),this.Wt=new ii(Dr),h}Jt(e,t){if(!this.te(e))return;const l=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,l),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,l){if(!this.te(e))return;const h=this.Zt(e);this.ae(e,t)?h.Bt(t,1):h.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),l&&(this.jt=this.jt.insert(t,l))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new bd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ds(Dr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||dn("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new bd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function yh(){return new ii(Mn.comparator)}function Mf(){return new ii(Mn.comparator)}const vh={asc:"ASCENDING",desc:"DESCENDING"},Rf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_h={and:"AND",or:"OR"};class _m{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Eh(s,e){return s.useProto3Json||Te(e)?e:{value:e}}function Dd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wh(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Sd(s,e){return Dd(s,e.toTimestamp())}function Eo(s){return Zn(!!s),cr.fromTimestamp(function(e){const t=Po(e);return new Ji(t.seconds,t.nanos)}(s))}function xf(s,e){return(t=s,new ni(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ov(s){const e=ni.fromString(s);return Zn(nc(e)),e}function Pf(s,e){return xf(s.databaseId,e.path)}function Jl(s,e){const t=ov(e);if(t.get(1)!==s.databaseId.projectId)throw new hn(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new hn(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Mn(Td(t))}function Ih(s,e){return xf(s.databaseId,e)}function Of(s){const e=ov(s);return 4===e.length?ni.emptyPath():Td(e)}function Mu(s){return new ni(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Td(s){return Zn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function ol(s,e,t){return{name:Pf(s,e),fields:t.value.mapValue.fields}}function Up(s,e,t){const l=Jl(s,e.name),h=Eo(e.updateTime),g=e.createTime?Eo(e.createTime):cr.min(),E=new Ur({mapValue:{fields:e.fields}}),k=Ui.newFoundDocument(l,h,g,E);return t&&k.setHasCommittedMutations(),t?k.setHasCommittedMutations():k}function zc(s,e){let t;if(e instanceof Uc)t={update:ol(s,e.key,e.value)};else if(e instanceof Ea)t={delete:Pf(s,e.key)};else if(e instanceof Ql)t={update:ol(s,e.key,e.data),updateMask:kf(e.fieldMask)};else{if(!(e instanceof Ju))return Pn();t={verify:Pf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(l=>function(h,g){const E=g.transform;if(E instanceof _o)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Zl)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof $c)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Vc)return{fieldPath:g.field.canonicalString(),increment:E.gt};throw Pn()}(0,l))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Sd(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Pn()),t;var h}function Ch(s,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?ws.updateTime(Eo(h.updateTime)):void 0!==h.exists?ws.exists(h.exists):ws.none():ws.none(),l=e.updateTransforms?e.updateTransforms.map(h=>function(g,E){let k=null;"setToServerValue"in E?(Zn("REQUEST_TIME"===E.setToServerValue),k=new _o):"appendMissingElements"in E?k=new Zl(E.appendMissingElements.values||[]):"removeAllFromArray"in E?k=new $c(E.removeAllFromArray.values||[]):"increment"in E?k=new Vc(g,E.increment):Pn();const Y=es.fromServerFormat(E.fieldPath);return new dh(Y,k)}(s,h)):[];var h;if(e.update){const h=Jl(s,e.update.name),g=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new Ei((e.updateMask.fieldPaths||[]).map(se=>es.fromServerFormat(se)));return new Ql(h,g,E,t,l)}return new Uc(h,g,t,l)}if(e.delete){const h=Jl(s,e.delete);return new Ea(h,t)}if(e.verify){const h=Jl(s,e.verify);return new Ju(h,t)}return Pn()}function Ru(s,e){return{documents:[Ih(s,e.path)]}}function Gc(s,e){const t={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(t.parent=Ih(s,l),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ih(s,l.popLast()),t.structuredQuery.from=[{collectionId:l.lastSegment()}]);const h=function(Y){if(0!==Y.length)return eu(ns.create(Y,"and"))}(e.filters);h&&(t.structuredQuery.where=h);const g=function(Y){if(0!==Y.length)return Y.map(se=>{return{field:Wc((Se=se).field),direction:Hp(Se.dir)};var Se})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const E=Eh(s,e.limit);var k,Y;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Y=e.endAt).inclusive,values:Y.position}),t}function jp(s){let e=Of(s.parent);const t=s.structuredQuery,l=t.from?t.from.length:0;let h=null;if(l>0){Zn(1===l);const Se=t.from[0];Se.allDescendants?h=Se.collectionId:e=e.child(Se.collectionId)}let g=[];t.where&&(g=function(Se){const tt=Em(Se);return tt instanceof ns&&If(tt)?tt.getFilters():[tt]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(Se=>{return new Fa(xu((tt=Se).field),function(kt){switch(kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(tt.direction));var tt}));let k=null;t.limit&&(k=function(Se){let tt;return tt="object"==typeof Se?Se.value:Se,Te(tt)?null:tt}(t.limit));let Y=null;var Se;t.startAt&&(Y=new rl((Se=t.startAt).values||[],!!Se.before));let se=null;return t.endAt&&(se=function(Se){return new rl(Se.values||[],!Se.before)}(t.endAt)),Pp(e,h,E,g,k,"F",Y,se)}function Em(s){return void 0!==s.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xu(e.unaryFilter.field);return wi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const l=xu(e.unaryFilter.field);return wi.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=xu(e.unaryFilter.field);return wi.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=xu(e.unaryFilter.field);return wi.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Pn()}}(s):void 0!==s.fieldFilter?wi.create(xu((e=s).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==s.compositeFilter?function(e){return ns.create(e.compositeFilter.filters.map(t=>Em(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Pn()}}(e.compositeFilter.op))}(s):Pn();var e}function Hp(s){return vh[s]}function Nf(s){return Rf[s]}function uv(s){return _h[s]}function Wc(s){return{fieldPath:s.canonicalString()}}function xu(s){return es.fromServerFormat(s.fieldPath)}function eu(s){return s instanceof wi?function(e){if("=="===e.op){if(zl(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NAN"}};if(Oo(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zl(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NAN"}};if(Oo(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(e.field),op:Nf(e.op),value:e.value}}}(s):s instanceof ns?function(e){const t=e.getFilters().map(l=>eu(l));return 1===t.length?t[0]:{compositeFilter:{op:uv(e.op),filters:t}}}(s):Pn()}function kf(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nc(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}class ja{constructor(e,t,l,h,g=cr.min(),E=cr.min(),k=Gs.EMPTY_BYTE_STRING,Y=null){this.target=e,this.targetId=t,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=k,this.expectedCount=Y}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zp{constructor(e){this.fe=e}}function Ff(s,e){const t=e.key,l={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())l.document={name:Pf(h=s.fe,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Dd(h,g.version.toTimestamp()),createTime:Dd(h,g.createTime.toTimestamp())};else if(e.isNoDocument())l.noDocument={path:t.path.toArray(),readTime:ia(e.version)};else{if(!e.isUnknownDocument())return Pn();l.unknownDocument={path:t.path.toArray(),version:ia(e.version)}}var h,g;return l}function wm(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function ia(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ad(s){const e=new Ji(s.seconds,s.nanoseconds);return cr.fromTimestamp(e)}function Kc(s,e){const t=(e.baseMutations||[]).map(g=>Ch(s.fe,g));for(let g=0;g<e.mutations.length-1;++g)g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(e.mutations[g].updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g);const l=e.mutations.map(g=>Ch(s.fe,g)),h=Ji.fromMillis(e.localWriteTimeMs);return new ph(e.batchId,h,t,l)}function qc(s){const e=Ad(s.readTime),t=void 0!==s.lastLimboFreeSnapshotVersion?Ad(s.lastLimboFreeSnapshotVersion):cr.min();let l;var h;return void 0!==s.query.documents?(Zn(1===(h=s.query).documents.length),l=be(Zu(Of(h.documents[0])))):l=be(jp(s.query)),new ja(l,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Gs.fromBase64String(s.resumeToken))}function Im(s,e){const t=ia(e.snapshotVersion),l=ia(e.lastLimboFreeSnapshotVersion);let h;h=ql(e.target)?Ru(s.fe,e.target):Gc(s.fe,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ra(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:h}}function wa(s){const e=jp({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Ht(e,e.limit,"L"):e}function Wp(s,e){return new ym(e.largestBatchId,Ch(s.fe,e.overlayMutation))}function Kp(s,e){const t=e.path.lastSegment();return[s,Wt(e.path.popLast()),t]}function tu(s,e,t,l){return{indexId:s,uid:e.uid||"",sequenceNumber:t,readTime:ia(l.readTime),documentKey:Wt(l.documentKey.path),largestBatchId:l.largestBatchId}}class Lf{getBundleMetadata(e,t){return Cm(e).get(t).next(l=>{if(l)return{id:(h=l).bundleId,createTime:Ad(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return Cm(e).put({bundleId:(l=t).id,createTime:ia(Eo(l.createTime)),version:l.version});var l}getNamedQuery(e,t){return bm(e).get(t).next(l=>{if(l)return{name:(h=l).name,query:wa(h.bundledQuery),readTime:Ad(h.readTime)};var h})}saveNamedQuery(e,t){return bm(e).put({name:(l=t).name,readTime:ia(Eo(l.readTime)),bundledQuery:l.bundledQuery});var l}}function Cm(s){return vo(s,"bundles")}function bm(s){return vo(s,"namedQueries")}class bh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new bh(e,t.uid||"")}getOverlay(e,t){return Yc(e).get(Kp(this.userId,t)).next(l=>l?Wp(this.serializer,l):null)}getOverlays(e,t){const l=Va();return St.forEach(t,h=>this.getOverlay(e,h).next(g=>{null!==g&&l.set(h,g)})).next(()=>l)}saveOverlays(e,t,l){const h=[];return l.forEach((g,E)=>{const k=new ym(t,E);h.push(this.we(e,k))}),St.waitFor(h)}removeOverlaysForBatchId(e,t,l){const h=new Set;t.forEach(E=>h.add(Wt(E.getCollectionPath())));const g=[];return h.forEach(E=>{const k=IDBKeyRange.bound([this.userId,E,l],[this.userId,E,l+1],!1,!0);g.push(Yc(e).J("collectionPathOverlayIndex",k))}),St.waitFor(g)}getOverlaysForCollection(e,t,l){const h=Va(),g=Wt(t),E=IDBKeyRange.bound([this.userId,g,l],[this.userId,g,Number.POSITIVE_INFINITY],!0);return Yc(e).j("collectionPathOverlayIndex",E).next(k=>{for(const Y of k){const se=Wp(this.serializer,Y);h.set(se.getKey(),se)}return h})}getOverlaysForCollectionGroup(e,t,l,h){const g=Va();let E;const k=IDBKeyRange.bound([this.userId,t,l],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yc(e).X({index:"collectionGroupOverlayIndex",range:k},(Y,se,Se)=>{const tt=Wp(this.serializer,se);g.size()<h||tt.largestBatchId===E?(g.set(tt.getKey(),tt),E=tt.largestBatchId):Se.done()}).next(()=>g)}we(e,t){return Yc(e).put(function(l,h,g){const[E,k,Y]=Kp(h,g.mutation.key);return{userId:h,collectionPath:k,documentId:Y,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:zc(l.fe,g.mutation)}}(this.serializer,this.userId,t))}}function Yc(s){return vo(s,"documentOverlays")}class Md{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(qi(e.integerValue));else if("doubleValue"in e){const l=qi(e.doubleValue);isNaN(l)?this.ye(t,13):(this.ye(t,15),Ie(l)?t.pe(0):t.pe(l))}else if("timestampValue"in e){const l=e.timestampValue;this.ye(t,20),"string"==typeof l?t.Ie(l):(t.Ie(`${l.seconds||""}`),t.pe(l.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(so(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const l=e.geoPointValue;this.ye(t,45),t.pe(l.latitude||0),t.pe(l.longitude||0)}else"mapValue"in e?Mc(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Pn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const l=e.fields||{};this.ye(t,55);for(const h of Object.keys(l))this.Te(h,t),this.me(l[h],t)}Pe(e,t){const l=e.values||[];this.ye(t,50);for(const h of l)this.me(h,t)}ve(e,t){this.ye(t,37),Mn.fromName(e).path.forEach(l=>{this.ye(t,60),this.be(l,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function z_(s){if(0===s)return 8;let e=0;return!(s>>4)&&(e+=4,s<<=4),!(s>>6)&&(e+=2,s<<=2),!(s>>7)&&(e+=1),e}function qp(s){const e=64-function(t){let l=0;for(let h=0;h<8;++h){const g=z_(255&t[h]);if(l+=g,8!==g)break}return l}(s);return Math.ceil(e/8)}Md.Ve=new Md;class Bf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.De(l.value),l=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Ne(l.value),l=t.next();this.ke()}Me(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.De(l);else if(l<2048)this.De(960|l>>>6),this.De(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.De(480|l>>>12),this.De(128|63&l>>>6),this.De(128|63&l);else{const h=t.codePointAt(0);this.De(240|h>>>18),this.De(128|63&h>>>12),this.De(128|63&h>>>6),this.De(128|63&h)}}this.Ce()}$e(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Ne(l);else if(l<2048)this.Ne(960|l>>>6),this.Ne(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|l>>>12),this.Ne(128|63&l>>>6),this.Ne(128|63&l);else{const h=t.codePointAt(0);this.Ne(240|h>>>18),this.Ne(128|63&h>>>12),this.Ne(128|63&h>>>6),this.Ne(128|63&h)}}this.ke()}Oe(e){const t=this.Fe(e),l=qp(t);this.Be(1+l),this.buffer[this.position++]=255&l;for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Le(e){const t=this.Fe(e),l=qp(t);this.Be(1+l),this.buffer[this.position++]=~(255&l);for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),l=0!=(128&t[0]);t[0]^=l?255:128;for(let h=1;h<t.length;++h)t[h]^=l?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let l=2*this.buffer.length;l<t&&(l=t);const h=new Uint8Array(l);h.set(this.buffer),this.buffer=h}}class Dm{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class pE{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Zc{constructor(){this.je=new Bf,this.ze=new Dm(this.je),this.We=new pE(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Rd{constructor(e,t,l,h){this.indexId=e,this.documentKey=t,this.arrayValue=l,this.directionalValue=h}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,l=new Uint8Array(t);return l.set(this.directionalValue,0),t!==e?l.set([0],this.directionalValue.length):++l[l.length-1],new Rd(this.indexId,this.documentKey,this.arrayValue,l)}}function Qc(s,e){let t=s.indexId-e.indexId;return 0!==t?t:(t=cv(s.arrayValue,e.arrayValue),0!==t?t:(t=cv(s.directionalValue,e.directionalValue),0!==t?t:Mn.comparator(s.documentKey,e.documentKey)))}function cv(s,e){for(let t=0;t<s.length&&t<e.length;++t){const l=s[t]-e[t];if(0!==l)return l}return s.length-e.length}class dv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const l=t;l.isInequality()?this.Ze=l:this.Xe.push(l)}}tn(e){Zn(e.collectionGroup===this.collectionId);const t=mu(e);if(void 0!==t&&!this.en(t))return!1;const l=Ma(e);let h=0,g=0;for(;h<l.length&&this.en(l[h]);++h);if(h===l.length)return!0;if(void 0!==this.Ze){const E=l[h];if(!this.nn(this.Ze,E)||!this.sn(this.Ye[g++],E))return!1;++h}for(;h<l.length;++h)if(g>=this.Ye.length||!this.sn(this.Ye[g++],l[h]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Sm(s){var e,t;if(Zn(s instanceof wi||s instanceof ns),s instanceof wi){if(s instanceof Su){const h=(null===(t=null===(e=s.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(g=>wi.create(s.field,"==",g)))||[];return ns.create(h,"or")}return s}const l=s.filters.map(h=>Sm(h));return ns.create(l,s.op)}function Yp(s){if(0===s.getFilters().length)return[];const e=ao(Sm(s));return Zn(Am(e)),Tm(e)||xd(e)?[e]:e.getFilters()}function Tm(s){return s instanceof wi}function xd(s){return s instanceof ns&&If(s)}function Am(s){return Tm(s)||xd(s)||function(e){if(e instanceof ns&&Nc(e)){for(const t of e.getFilters())if(!Tm(t)&&!xd(t))return!1;return!0}return!1}(s)}function ao(s){if(Zn(s instanceof wi||s instanceof ns),s instanceof wi)return s;if(1===s.filters.length)return ao(s.filters[0]);const e=s.filters.map(l=>ao(l));let t=ns.create(e,s.op);return t=Dh(t),Am(t)?t:(Zn(t instanceof ns),Zn(La(t)),Zn(t.filters.length>1),t.filters.reduce((l,h)=>Xc(l,h)))}function Xc(s,e){let t;return Zn(s instanceof wi||s instanceof ns),Zn(e instanceof wi||e instanceof ns),t=s instanceof wi?e instanceof wi?ns.create([s,e],"and"):rc(s,e):e instanceof wi?rc(e,s):function(l,h){if(Zn(l.filters.length>0&&h.filters.length>0),La(l)&&La(h))return hd(l,h.getFilters());const g=Nc(l)?l:h,E=Nc(l)?h:l,k=g.filters.map(Y=>Xc(Y,E));return ns.create(k,"or")}(s,e),Dh(t)}function rc(s,e){if(La(e))return hd(e,s.getFilters());{const t=e.filters.map(l=>Xc(s,l));return ns.create(t,"or")}}function Dh(s){if(Zn(s instanceof wi||s instanceof ns),s instanceof wi)return s;const e=s.getFilters();if(1===e.length)return Dh(e[0]);if(bu(s))return s;const t=e.map(h=>Dh(h)),l=[];return t.forEach(h=>{h instanceof wi?l.push(h):h instanceof ns&&(h.op===s.op?l.push(...h.filters):l.push(h))}),1===l.length?l[0]:ns.create(l,s.op)}class Zp{constructor(){this.rn=new Sh}addToCollectionParentIndex(e,t){return this.rn.add(t),St.resolve()}getCollectionParents(e,t){return St.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return St.resolve()}deleteFieldIndex(e,t){return St.resolve()}getDocumentsMatchingTarget(e,t){return St.resolve(null)}getIndexType(e,t){return St.resolve(0)}getFieldIndexes(e,t){return St.resolve([])}getNextCollectionGroupToUpdate(e){return St.resolve(null)}getMinOffset(e,t){return St.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,t){return St.resolve(Zs.min())}updateCollectionGroup(e,t,l){return St.resolve()}updateIndexEntries(e,t){return St.resolve()}}class Sh{constructor(){this.index={}}add(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t]||new ds(ni.comparator),g=!h.has(l);return this.index[t]=h.add(l),g}has(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t];return h&&h.has(l)}getEntries(e){return(this.index[e]||new ds(ni.comparator)).toArray()}}const Qp=new Uint8Array(0);class Th{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Sh,this.un=new Ba(l=>ra(l),(l,h)=>Fc(l,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const l=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const g={collectionId:l,parent:Wt(h)};return hv(e).put(g)}return St.resolve()}getCollectionParents(e,t){const l=[],h=IDBKeyRange.bound([t,""],[mf(t),""],!1,!0);return hv(e).j(h).next(g=>{for(const E of g){if(E.collectionId!==t)break;l.push(Vn(E.parent))}return l})}addFieldIndex(e,t){const l=Xp(e),h={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var E;delete h.indexId;const g=l.add(h);if(t.indexState){const E=$f(e);return g.next(k=>{E.put(tu(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const l=Xp(e),h=$f(e),g=Pd(e);return l.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const l=Pd(e);let h=!0;const g=new Map;return St.forEach(this.cn(t),E=>this.an(e,E).next(k=>{h&&(h=!!k),g.set(E,k)})).next(()=>{if(h){let E=si();const k=[];return St.forEach(g,(Y,se)=>{var Se;dn("IndexedDbIndexManager",`Using index ${Se=Y,`id=${Se.indexId}|cg=${Se.collectionGroup}|f=${Se.fields.map(gi=>`${gi.fieldPath}:${gi.kind}`).join(",")}`} to execute ${ra(t)}`);const tt=function(gi,Fo){const wo=mu(Fo);if(void 0===wo)return null;for(const Fs of md(gi,wo.fieldPath))switch(Fs.op){case"array-contains-any":return Fs.value.arrayValue.values||[];case"array-contains":return[Fs.value]}return null}(se,Y),kt=function(gi,Fo){const wo=new Map;for(const Fs of Ma(Fo))for(const za of md(gi,Fs.fieldPath))switch(za.op){case"==":case"in":wo.set(Fs.fieldPath.canonicalString(),za.value);break;case"not-in":case"!=":return wo.set(Fs.fieldPath.canonicalString(),za.value),Array.from(wo.values())}return null}(se,Y),Zt=function(gi,Fo){const wo=[];let Fs=!0;for(const za of Ma(Fo)){const th=0===za.kind?yd(gi,za.fieldPath,gi.startAt):vd(gi,za.fieldPath,gi.startAt);wo.push(th.value),Fs&&(Fs=th.inclusive)}return new rl(wo,Fs)}(se,Y),Cn=function(gi,Fo){const wo=[];let Fs=!0;for(const za of Ma(Fo)){const th=0===za.kind?vd(gi,za.fieldPath,gi.endAt):yd(gi,za.fieldPath,gi.endAt);wo.push(th.value),Fs&&(Fs=th.inclusive)}return new rl(wo,Fs)}(se,Y),Hn=this.hn(Y,se,Zt),Kn=this.hn(Y,se,Cn),ui=this.ln(Y,se,kt),Oi=this.fn(Y.indexId,tt,Hn,Zt.inclusive,Kn,Cn.inclusive,ui);return St.forEach(Oi,gi=>l.H(gi,t.limit).next(Fo=>{Fo.forEach(wo=>{const Fs=Mn.fromSegments(wo.documentKey);E.has(Fs)||(E=E.add(Fs),k.push(Fs))})}))}).next(()=>k)}return St.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Yp(ns.create(e.filters,"and")).map(l=>kc(e.path,e.collectionGroup,e.orderBy,l.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,l,h,g,E,k){const Y=(null!=t?t.length:1)*Math.max(l.length,g.length),se=Y/(null!=t?t.length:1),Se=[];for(let tt=0;tt<Y;++tt){const kt=t?this.dn(t[tt/se]):Qp,Zt=this.wn(e,kt,l[tt%se],h),Cn=this._n(e,kt,g[tt%se],E),Hn=k.map(Kn=>this.wn(e,kt,Kn,!0));Se.push(...this.createRange(Zt,Cn,Hn))}return Se}wn(e,t,l,h){const g=new Rd(e,Mn.empty(),t,l);return h?g:g.Je()}_n(e,t,l,h){const g=new Rd(e,Mn.empty(),t,l);return h?g.Je():g}an(e,t){const l=new dv(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(g=>{let E=null;for(const k of g)l.tn(k)&&(!E||k.fields.length>E.fields.length)&&(E=k);return E})}getIndexType(e,t){let l=2;const h=this.cn(t);return St.forEach(h,g=>this.an(e,g).next(E=>{E?0!==l&&E.fields.length<function(k){let Y=new ds(es.comparator),se=!1;for(const Se of k.filters)for(const tt of Se.getFlattenedFilters())tt.field.isKeyField()||("array-contains"===tt.op||"array-contains-any"===tt.op?se=!0:Y=Y.add(tt.field));for(const Se of k.orderBy)Se.field.isKeyField()||(Y=Y.add(Se.field));return Y.size+(se?1:0)}(g)&&(l=1):l=0})).next(()=>null!==t.limit&&h.length>1&&2===l?1:l)}mn(e,t){const l=new Zc;for(const h of Ma(e)){const g=t.data.field(h.fieldPath);if(null==g)return null;const E=l.He(h.kind);Md.Ve._e(g,E)}return l.Qe()}dn(e){const t=new Zc;return Md.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const l=new Zc;return Md.Ve._e(Cl(this.databaseId,t),l.He(function(h){const g=Ma(h);return 0===g.length?0:g[g.length-1].kind}(e))),l.Qe()}ln(e,t,l){if(null===l)return[];let h=[];h.push(new Zc);let g=0;for(const E of Ma(e)){const k=l[g++];for(const Y of h)if(this.yn(t,E.fieldPath)&&Cu(k))h=this.pn(h,E,k);else{const se=Y.He(E.kind);Md.Ve._e(k,se)}}return this.In(h)}hn(e,t,l){return this.ln(e,t,l.position)}In(e){const t=[];for(let l=0;l<e.length;++l)t[l]=e[l].Qe();return t}pn(e,t,l){const h=[...e],g=[];for(const E of l.arrayValue.values||[])for(const k of h){const Y=new Zc;Y.seed(k.Qe()),Md.Ve._e(E,Y.He(t.kind)),g.push(Y)}return g}yn(e,t){return!!e.filters.find(l=>l instanceof wi&&l.field.isEqual(t)&&("in"===l.op||"not-in"===l.op))}getFieldIndexes(e,t){const l=Xp(e),h=$f(e);return(t?l.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):l.j()).next(g=>{const E=[];return St.forEach(g,k=>h.get([k.indexId,this.uid]).next(Y=>{E.push(function(se,Se){const tt=Se?new hi(Se.sequenceNumber,new Zs(Ad(Se.readTime),new Mn(Vn(Se.documentKey)),Se.largestBatchId)):hi.empty(),kt=se.fields.map(([Zt,Cn])=>new vu(es.fromServerFormat(Zt),Cn));return new Ku(se.indexId,se.collectionGroup,kt,tt)}(k,Y))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((l,h)=>{const g=l.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==g?g:Dr(l.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,l){const h=Xp(e),g=$f(e);return this.Tn(e).next(E=>h.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>St.forEach(k,Y=>g.put(tu(Y.indexId,this.user,E,l)))))}updateIndexEntries(e,t){const l=new Map;return St.forEach(t,(h,g)=>{const E=l.get(h.collectionGroup);return(E?St.resolve(E):this.getFieldIndexes(e,h.collectionGroup)).next(k=>(l.set(h.collectionGroup,k),St.forEach(k,Y=>this.En(e,h,Y).next(se=>{const Se=this.An(g,Y);return se.isEqual(Se)?St.resolve():this.vn(e,g,Y,se,Se)}))))})}Rn(e,t,l,h){return Pd(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.gn(l,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,l,h){return Pd(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.gn(l,t.key),t.key.path.toArray()])}En(e,t,l){const h=Pd(e);let g=new ds(Qc);return h.X({index:"documentKeyIndex",range:IDBKeyRange.only([l.indexId,this.uid,this.gn(l,t)])},(E,k)=>{g=g.add(new Rd(l.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>g)}An(e,t){let l=new ds(Qc);const h=this.mn(t,e);if(null==h)return l;const g=mu(t);if(null!=g){const E=e.data.field(g.fieldPath);if(Cu(E))for(const k of E.arrayValue.values||[])l=l.add(new Rd(t.indexId,e.key,this.dn(k),h))}else l=l.add(new Rd(t.indexId,e.key,Qp,h));return l}vn(e,t,l,h,g){dn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(k,Y,se,Se,tt){const kt=k.getIterator(),Zt=Y.getIterator();let Cn=Tc(kt),Hn=Tc(Zt);for(;Cn||Hn;){let Kn=!1,ui=!1;if(Cn&&Hn){const Oi=se(Cn,Hn);Oi<0?ui=!0:Oi>0&&(Kn=!0)}else null!=Cn?ui=!0:Kn=!0;Kn?(Se(Hn),Hn=Tc(Zt)):ui?(tt(Cn),Cn=Tc(kt)):(Cn=Tc(kt),Hn=Tc(Zt))}}(h,g,Qc,k=>{E.push(this.Rn(e,t,l,k))},k=>{E.push(this.Pn(e,t,l,k))}),St.waitFor(E)}Tn(e){let t=1;return $f(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(l,h,g)=>{g.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,l){l=l.sort((E,k)=>Qc(E,k)).filter((E,k,Y)=>!k||0!==Qc(E,Y[k-1]));const h=[];h.push(e);for(const E of l){const k=Qc(E,e),Y=Qc(E,t);if(0===k)h[0]=e.Je();else if(k>0&&Y<0)h.push(E),h.push(E.Je());else if(Y>0)break}h.push(t);const g=[];for(let E=0;E<h.length;E+=2){if(this.bn(h[E],h[E+1]))return[];g.push(IDBKeyRange.bound([h[E].indexId,this.uid,h[E].arrayValue,h[E].directionalValue,Qp,[]],[h[E+1].indexId,this.uid,h[E+1].arrayValue,h[E+1].directionalValue,Qp,[]]))}return g}bn(e,t){return Qc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ic)}getMinOffset(e,t){return St.mapArray(this.cn(t),l=>this.an(e,l).next(h=>h||Pn())).next(ic)}}function hv(s){return vo(s,"collectionParents")}function Pd(s){return vo(s,"indexEntries")}function Xp(s){return vo(s,"indexConfiguration")}function $f(s){return vo(s,"indexState")}function ic(s){Zn(0!==s.length);let e=s[0].indexState.offset,t=e.largestBatchId;for(let l=1;l<s.length;l++){const h=s[l].indexState.offset;Wr(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new Zs(e.readTime,e.documentKey,t)}const ji={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,t,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mm(s,e,t){const l=s.store("mutations"),h=s.store("documentMutations"),g=[],E=IDBKeyRange.only(t.batchId);let k=0;const Y=l.X({range:E},(Se,tt,kt)=>(k++,kt.delete()));g.push(Y.next(()=>{Zn(1===k)}));const se=[];for(const Se of t.mutations){const tt=xo(e,Se.key.path,t.batchId);g.push(h.delete(tt)),se.push(Se.key)}return St.waitFor(g).next(()=>se)}function Vf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Pn();e=s.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class Od{constructor(e,t,l,h){this.userId=e,this.serializer=t,this.indexManager=l,this.referenceDelegate=h,this.Vn={}}static de(e,t,l,h){Zn(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Od(g,t,l,h)}checkEmpty(e){let t=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).X({index:"userMutationsIndex",range:l},(h,g,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,l,h){const g=Nd(e),E=sc(e);return E.add({}).next(k=>{Zn("number"==typeof k);const Y=new ph(k,t,l,h),se=function(kt,Zt,Cn){const Hn=Cn.baseMutations.map(ui=>zc(kt.fe,ui)),Kn=Cn.mutations.map(ui=>zc(kt.fe,ui));return{userId:Zt,batchId:Cn.batchId,localWriteTimeMs:Cn.localWriteTime.toMillis(),baseMutations:Hn,mutations:Kn}}(this.serializer,this.userId,Y),Se=[];let tt=new ds((kt,Zt)=>Dr(kt.canonicalString(),Zt.canonicalString()));for(const kt of h){const Zt=xo(this.userId,kt.key.path,k);tt=tt.add(kt.key.path.popLast()),Se.push(E.put(se)),Se.push(g.put(Zt,va))}return tt.forEach(kt=>{Se.push(this.indexManager.addToCollectionParentIndex(e,kt))}),e.addOnCommittedListener(()=>{this.Vn[k]=Y.keys()}),St.waitFor(Se).next(()=>Y)})}lookupMutationBatch(e,t){return sc(e).get(t).next(l=>l?(Zn(l.userId===this.userId),Kc(this.serializer,l)):null)}Sn(e,t){return this.Vn[t]?St.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(l=>{if(l){const h=l.keys();return this.Vn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const l=t+1,h=IDBKeyRange.lowerBound([this.userId,l]);let g=null;return sc(e).X({index:"userMutationsIndex",range:h},(E,k,Y)=>{k.userId===this.userId&&(Zn(k.batchId>=l),g=Kc(this.serializer,k)),Y.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return sc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(h,g,E)=>{l=g.batchId,E.done()}).next(()=>l)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).j("userMutationsIndex",t).next(l=>l.map(h=>Kc(this.serializer,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const l=Os(this.userId,t.path),h=IDBKeyRange.lowerBound(l),g=[];return Nd(e).X({range:h},(E,k,Y)=>{const[se,Se,tt]=E,kt=Vn(Se);if(se===this.userId&&t.path.isEqual(kt))return sc(e).get(tt).next(Zt=>{if(!Zt)throw Pn();Zn(Zt.userId===this.userId),g.push(Kc(this.serializer,Zt))});Y.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new ds(Dr);const h=[];return t.forEach(g=>{const E=Os(this.userId,g.path),k=IDBKeyRange.lowerBound(E),Y=Nd(e).X({range:k},(se,Se,tt)=>{const[kt,Zt,Cn]=se,Hn=Vn(Zt);kt===this.userId&&g.path.isEqual(Hn)?l=l.add(Cn):tt.done()});h.push(Y)}),St.waitFor(h).next(()=>this.Dn(e,l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1,g=Os(this.userId,l),E=IDBKeyRange.lowerBound(g);let k=new ds(Dr);return Nd(e).X({range:E},(Y,se,Se)=>{const[tt,kt,Zt]=Y,Cn=Vn(kt);tt===this.userId&&l.isPrefixOf(Cn)?Cn.length===h&&(k=k.add(Zt)):Se.done()}).next(()=>this.Dn(e,k))}Dn(e,t){const l=[],h=[];return t.forEach(g=>{h.push(sc(e).get(g).next(E=>{if(null===E)throw Pn();Zn(E.userId===this.userId),l.push(Kc(this.serializer,E))}))}),St.waitFor(h).next(()=>l)}removeMutationBatch(e,t){return Mm(e.ht,this.userId,t).next(l=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),St.forEach(l,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return St.resolve();const l=IDBKeyRange.lowerBound([this.userId]),h=[];return Nd(e).X({range:l},(g,E,k)=>{if(g[0]===this.userId){const Y=Vn(g[1]);h.push(Y)}else k.done()}).next(()=>{Zn(0===h.length)})})}containsKey(e,t){return Rm(e,this.userId,t)}xn(e){return Jp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rm(s,e,t){const l=Os(e,t.path),h=l[1],g=IDBKeyRange.lowerBound(l);let E=!1;return Nd(s).X({range:g,Y:!0},(k,Y,se)=>{const[Se,tt,kt]=k;Se===e&&tt===h&&(E=!0),se.done()}).next(()=>E)}function sc(s){return vo(s,"mutations")}function Nd(s){return vo(s,"documentMutations")}function Jp(s){return vo(s,"mutationQueues")}class Pu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Pu(0)}static Mn(){return new Pu(-1)}}class fv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const l=new Pu(t.highestTargetId);return t.highestTargetId=l.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>cr.fromTimestamp(new Ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,l){return this.$n(e).next(h=>(h.highestListenSequenceNumber=t,l&&(h.lastRemoteSnapshotVersion=l.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.On(e,h)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(l=>(l.targetCount+=1,this.Bn(t,l),this.On(e,l))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oc(e).delete(t.targetId)).next(()=>this.$n(e)).next(l=>(Zn(l.targetCount>0),l.targetCount-=1,this.On(e,l)))}removeTargets(e,t,l){let h=0;const g=[];return oc(e).X((E,k)=>{const Y=qc(k);Y.sequenceNumber<=t&&null===l.get(Y.targetId)&&(h++,g.push(this.removeTargetData(e,Y)))}).next(()=>St.waitFor(g)).next(()=>h)}forEachTarget(e,t){return oc(e).X((l,h)=>{const g=qc(h);t(g)})}$n(e){return Ia(e).get("targetGlobalKey").next(t=>(Zn(null!==t),t))}On(e,t){return Ia(e).put("targetGlobalKey",t)}Fn(e,t){return oc(e).put(Im(this.serializer,t))}Bn(e,t){let l=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,l=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const l=ra(t),h=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let g=null;return oc(e).X({range:h,index:"queryTargetsIndex"},(E,k,Y)=>{const se=qc(k);Fc(t,se.target)&&(g=se,Y.done())}).next(()=>g)}addMatchingKeys(e,t,l){const h=[],g=al(e);return t.forEach(E=>{const k=Wt(E.path);h.push(g.put({targetId:l,path:k})),h.push(this.referenceDelegate.addReference(e,l,E))}),St.waitFor(h)}removeMatchingKeys(e,t,l){const h=al(e);return St.forEach(t,g=>{const E=Wt(g.path);return St.waitFor([h.delete([l,E]),this.referenceDelegate.removeReference(e,l,g)])})}removeMatchingKeysForTargetId(e,t){const l=al(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return l.delete(h)}getMatchingKeysForTargetId(e,t){const l=IDBKeyRange.bound([t],[t+1],!1,!0),h=al(e);let g=si();return h.X({range:l,Y:!0},(E,k,Y)=>{const se=Vn(E[1]),Se=new Mn(se);g=g.add(Se)}).next(()=>g)}containsKey(e,t){const l=Wt(t.path),h=IDBKeyRange.bound([l],[mf(l)],!1,!0);let g=0;return al(e).X({index:"documentTargetsIndex",Y:!0,range:h},([E,k],Y,se)=>{0!==E&&(g++,se.done())}).next(()=>g>0)}le(e,t){return oc(e).get(t).next(l=>l?qc(l):null)}}function oc(s){return vo(s,"targets")}function Ia(s){return vo(s,"targetGlobal")}function al(s){return vo(s,"targetDocuments")}function Ou([s,e],[t,l]){const h=Dr(s,t);return 0===h?Dr(e,l):h}class Uf{constructor(e){this.Ln=e,this.buffer=new ds(Ou),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const l=this.buffer.last();Ou(t,l)<0&&(this.buffer=this.buffer.delete(l).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zo{constructor(e,t,l){this.garbageCollector=e,this.asyncQueue=t,this.localStore=l,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;dn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(l){ts(l)?dn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield aa(l)}yield t.Qn(3e5)}))}}class kd{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(l=>Math.floor(t/100*l))}nthSequenceNumber(e,t){if(0===t)return St.resolve(ee.ct);const l=new Uf(t);return this.jn.forEachTarget(e,h=>l.Kn(h.sequenceNumber)).next(()=>this.jn.Wn(e,h=>l.Kn(h))).next(()=>l.maxValue)}removeTargets(e,t,l){return this.jn.removeTargets(e,t,l)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector","Garbage collection skipped; disabled"),St.resolve(ji)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ji):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let l,h,g,E,k,Y,se;const Se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(tt=>(tt>this.params.maximumSequenceNumbersToCollect?(dn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${tt}`),h=this.params.maximumSequenceNumbersToCollect):h=tt,E=Date.now(),this.nthSequenceNumber(e,h))).next(tt=>(l=tt,k=Date.now(),this.removeTargets(e,l,t))).next(tt=>(g=tt,Y=Date.now(),this.removeOrphanedDocuments(e,l))).next(tt=>(se=Date.now(),Ci()<=ve.in.DEBUG&&dn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Se}ms\n\tDetermined least recently used ${h} in `+(k-E)+`ms\n\tRemoved ${g} targets in `+(Y-k)+`ms\n\tRemoved ${tt} documents in `+(se-Y)+`ms\nTotal Duration: ${se-Se}ms`),St.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:g,documentsRemoved:tt})))}}class Hf{constructor(e,t){this.db=e,this.garbageCollector=function jf(s,e){return new kd(s,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(l=>t.next(h=>l+h))}Jn(e){let t=0;return this.Wn(e,l=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(l,h)=>t(h))}addReference(e,t,l){return Nu(e,l)}removeReference(e,t,l){return Nu(e,l)}removeTargets(e,t,l){return this.db.getTargetCache().removeTargets(e,t,l)}markPotentiallyOrphaned(e,t){return Nu(e,t)}Xn(e,t){return function(l,h){let g=!1;return Jp(l).Z(E=>Rm(l,E,h).next(k=>(k&&(g=!0),St.resolve(!k)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let g=0;return this.Yn(e,(E,k)=>{if(k<=t){const Y=this.Xn(e,E).next(se=>{if(!se)return g++,l.getEntry(e,E).next(()=>(l.removeEntry(E,cr.min()),al(e).delete([0,Wt(E.path)])))});h.push(Y)}}).next(()=>St.waitFor(h)).next(()=>l.apply(e)).next(()=>g)}removeTarget(e,t){const l=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,t){return Nu(e,t)}Yn(e,t){const l=al(e);let h,g=ee.ct;return l.X({index:"documentTargetsIndex"},([E,k],{path:Y,sequenceNumber:se})=>{0===E?(g!==ee.ct&&t(new Mn(Vn(h)),g),g=se,h=Y):g=ee.ct}).next(()=>{g!==ee.ct&&t(new Mn(Vn(h)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nu(s,e){return al(s).put((l=s.currentSequenceNumber,{targetId:0,path:Wt(e.path),sequenceNumber:l}));var l}class xm{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const l=this.changes.get(t);return void 0!==l?St.resolve(l):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,l){return Fd(e).put(l)}removeEntry(e,t,l){return Fd(e).delete(function(h,g){const E=h.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],wm(g),E[E.length-1]]}(t,l))}updateMetadata(e,t){return this.getMetadata(e).next(l=>(l.byteSize+=t,this.Zn(e,l)))}getEntry(e,t){let l=Ui.newInvalidDocument(t);return Fd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gf(t))},(h,g)=>{l=this.ts(t,g)}).next(()=>l)}es(e,t){let l={size:0,document:Ui.newInvalidDocument(t)};return Fd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gf(t))},(h,g)=>{l={document:this.ts(t,g),size:Vf(g)}}).next(()=>l)}getEntries(e,t){let l=Ho();return this.ns(e,t,(h,g)=>{const E=this.ts(h,g);l=l.insert(h,E)}).next(()=>l)}ss(e,t){let l=Ho(),h=new ii(Mn.comparator);return this.ns(e,t,(g,E)=>{const k=this.ts(g,E);l=l.insert(g,k),h=h.insert(g,Vf(E))}).next(()=>({documents:l,rs:h}))}ns(e,t,l){if(t.isEmpty())return St.resolve();let h=new ds(nu);t.forEach(Y=>h=h.add(Y));const g=IDBKeyRange.bound(Gf(h.first()),Gf(h.last())),E=h.getIterator();let k=E.getNext();return Fd(e).X({index:"documentKeyIndex",range:g},(Y,se,Se)=>{const tt=Mn.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;k&&nu(k,tt)<0;)l(k,null),k=E.getNext();k&&k.isEqual(tt)&&(l(k,se),k=E.hasNext()?E.getNext():null),k?Se.G(Gf(k)):Se.done()}).next(()=>{for(;k;)l(k,null),k=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,l,h){const g=t.path,E=[g.popLast().toArray(),g.lastSegment(),wm(l.readTime),l.documentKey.path.isEmpty()?"":l.documentKey.path.lastSegment()],k=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fd(e).j(IDBKeyRange.bound(E,k,!0)).next(Y=>{let se=Ho();for(const Se of Y){const tt=this.ts(Mn.fromSegments(Se.prefixPath.concat(Se.collectionGroup,Se.documentId)),Se);tt.isFoundDocument()&&(Xr(t,tt)||h.has(tt.key))&&(se=se.insert(tt.key,tt))}return se})}getAllFromCollectionGroup(e,t,l,h){let g=Ho();const E=Pm(t,l),k=Pm(t,Zs.max());return Fd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,k,!0)},(Y,se,Se)=>{const tt=this.ts(Mn.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);g=g.insert(tt.key,tt),g.size===h&&Se.done()}).next(()=>g)}newChangeBuffer(e){return new zf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tg(e).get("remoteDocumentGlobalKey").next(t=>(Zn(!!t),t))}Zn(e,t){return tg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const l=function Gp(s,e){let t;if(e.document)t=Up(s.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const l=Mn.fromSegments(e.noDocument.path),h=Ad(e.noDocument.readTime);t=Ui.newNoDocument(l,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pn();{const l=Mn.fromSegments(e.unknownDocument.path),h=Ad(e.unknownDocument.version);t=Ui.newUnknownDocument(l,h)}}return e.readTime&&t.setReadTime(function(l){const h=new Ji(l[0],l[1]);return cr.fromTimestamp(h)}(e.readTime)),t}(this.serializer,t);if(!l.isNoDocument()||!l.version.isEqual(cr.min()))return l}return Ui.newInvalidDocument(e)}}function Jc(s){return new eg(s)}class zf extends xm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ba(l=>l.toString(),(l,h)=>l.isEqual(h))}applyChanges(e){const t=[];let l=0,h=new ds((g,E)=>Dr(g.canonicalString(),E.canonicalString()));return this.changes.forEach((g,E)=>{const k=this.us.get(g);if(t.push(this.os.removeEntry(e,g,k.readTime)),E.isValidDocument()){const Y=Ff(this.os.serializer,E);h=h.add(g.path.popLast());const se=Vf(Y);l+=se-k.size,t.push(this.os.addEntry(e,g,Y))}else if(l-=k.size,this.trackRemovals){const Y=Ff(this.os.serializer,E.convertToNoDocument(cr.min()));t.push(this.os.addEntry(e,g,Y))}}),h.forEach(g=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.os.updateMetadata(e,l)),St.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(l=>(this.us.set(t,{size:l.size,readTime:l.document.readTime}),l.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:l,rs:h})=>(h.forEach((g,E)=>{this.us.set(g,{size:E,readTime:l.get(g).readTime})}),l))}}function tg(s){return vo(s,"remoteDocumentGlobal")}function Fd(s){return vo(s,"remoteDocumentsV14")}function Gf(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pm(s,e){const t=e.documentKey.path.toArray();return[s,wm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nu(s,e){const t=s.path.toArray(),l=e.path.toArray();let h=0;for(let g=0;g<t.length-2&&g<l.length-2;++g)if(h=Dr(t[g],l[g]),h)return h;return h=Dr(t.length,l.length),h||(h=Dr(t[t.length-2],l[l.length-2]),h||Dr(t[t.length-1],l[l.length-1]))}class ng{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ah{constructor(e,t,l,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=l,this.indexManager=h}getDocument(e,t){let l=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(l=h,this.remoteDocumentCache.getEntry(e,t))).next(h=>(null!==l&&Id(l.mutation,h,Ei.empty(),Ji.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.getLocalViewOfDocuments(e,l,si()).next(()=>l))}getLocalViewOfDocuments(e,t,l=si()){const h=Va();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,l).next(g=>{let E=Au();return g.forEach((k,Y)=>{E=E.insert(k,Y.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const l=Va();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,si()))}populateOverlays(e,t,l){const h=[];return l.forEach(g=>{t.has(g)||h.push(g)}),this.documentOverlayCache.getOverlays(e,h).next(g=>{g.forEach((E,k)=>{t.set(E,k)})})}computeViews(e,t,l,h){let g=Ho();const E=Bc(),k=Bc();return t.forEach((Y,se)=>{const Se=l.get(se.key);h.has(se.key)&&(void 0===Se||Se.mutation instanceof Ql)?g=g.insert(se.key,se):void 0!==Se?(E.set(se.key,Se.mutation.getFieldMask()),Id(Se.mutation,se,Se.mutation.getFieldMask(),Ji.now())):E.set(se.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,g).next(Y=>(Y.forEach((se,Se)=>E.set(se,Se)),t.forEach((se,Se)=>{var tt;return k.set(se,new ng(Se,null!==(tt=E.get(se))&&void 0!==tt?tt:null))}),k))}recalculateAndSaveOverlays(e,t){const l=Bc();let h=new ii((E,k)=>E-k),g=si();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const k of E)k.keys().forEach(Y=>{const se=t.get(Y);if(null===se)return;let Se=l.get(Y)||Ei.empty();Se=k.applyToLocalView(se,Se),l.set(Y,Se);const tt=(h.get(k.batchId)||si()).add(Y);h=h.insert(k.batchId,tt)})}).next(()=>{const E=[],k=h.getReverseIterator();for(;k.hasNext();){const Y=k.getNext(),se=Y.key,Se=Y.value,tt=Lc();Se.forEach(kt=>{if(!g.has(kt)){const Zt=nv(t.get(kt),l.get(kt));null!==Zt&&tt.set(kt,Zt),g=g.add(kt)}}),E.push(this.documentOverlayCache.saveOverlays(e,se,tt))}return St.waitFor(E)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.recalculateAndSaveOverlays(e,l))}getDocumentsMatchingQuery(e,t,l){return Mn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):O(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,l):this.getDocumentsMatchingCollectionQuery(e,t,l);var h}getNextDocuments(e,t,l,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,l,h).next(g=>{const E=h-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,l.largestBatchId,h-g.size):St.resolve(Va());let k=-1,Y=g;return E.next(se=>St.forEach(se,(Se,tt)=>(k<tt.largestBatchId&&(k=tt.largestBatchId),g.get(Se)?St.resolve():this.remoteDocumentCache.getEntry(e,Se).next(kt=>{Y=Y.insert(Se,kt)}))).next(()=>this.populateOverlays(e,se,g)).next(()=>this.computeViews(e,Y,se,si())).next(Se=>({batchId:k,changes:$a(Se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mn(t)).next(l=>{let h=Au();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,l){const h=t.collectionGroup;let g=Au();return this.indexManager.getCollectionParents(e,h).next(E=>St.forEach(E,k=>{const Y=(se=t,Se=k.child(h),new sl(Se,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Se;return this.getDocumentsMatchingCollectionQuery(e,Y,l).next(se=>{se.forEach((Se,tt)=>{g=g.insert(Se,tt)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,l){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,l.largestBatchId).next(g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,l,h))).next(g=>{h.forEach((k,Y)=>{const se=Y.getKey();null===g.get(se)&&(g=g.insert(se,Ui.newInvalidDocument(se)))});let E=Au();return g.forEach((k,Y)=>{const se=h.get(k);void 0!==se&&Id(se.mutation,Y,Ei.empty(),Ji.now()),Xr(t,Y)&&(E=E.insert(k,Y))}),E})}}class Om{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return St.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var l;return this.cs.set(t.id,{id:(l=t).id,version:l.version,createTime:Eo(l.createTime)}),St.resolve()}getNamedQuery(e,t){return St.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(l=t).name,query:wa(l.bundledQuery),readTime:Eo(l.readTime)}),St.resolve();var l}}class rg{constructor(){this.overlays=new ii(Mn.comparator),this.ls=new Map}getOverlay(e,t){return St.resolve(this.overlays.get(t))}getOverlays(e,t){const l=Va();return St.forEach(t,h=>this.getOverlay(e,h).next(g=>{null!==g&&l.set(h,g)})).next(()=>l)}saveOverlays(e,t,l){return l.forEach((h,g)=>{this.we(e,t,g)}),St.resolve()}removeOverlaysForBatchId(e,t,l){const h=this.ls.get(l);return void 0!==h&&(h.forEach(g=>this.overlays=this.overlays.remove(g)),this.ls.delete(l)),St.resolve()}getOverlaysForCollection(e,t,l){const h=Va(),g=t.length+1,E=new Mn(t.child("")),k=this.overlays.getIteratorFrom(E);for(;k.hasNext();){const Y=k.getNext().value,se=Y.getKey();if(!t.isPrefixOf(se.path))break;se.path.length===g&&Y.largestBatchId>l&&h.set(Y.getKey(),Y)}return St.resolve(h)}getOverlaysForCollectionGroup(e,t,l,h){let g=new ii((se,Se)=>se-Se);const E=this.overlays.getIterator();for(;E.hasNext();){const se=E.getNext().value;if(se.getKey().getCollectionGroup()===t&&se.largestBatchId>l){let Se=g.get(se.largestBatchId);null===Se&&(Se=Va(),g=g.insert(se.largestBatchId,Se)),Se.set(se.getKey(),se)}}const k=Va(),Y=g.getIterator();for(;Y.hasNext()&&(Y.getNext().value.forEach((se,Se)=>k.set(se,Se)),!(k.size()>=h)););return St.resolve(k)}we(e,t,l){const h=this.overlays.get(l.key);if(null!==h){const E=this.ls.get(h.largestBatchId).delete(l.key);this.ls.set(h.largestBatchId,E)}this.overlays=this.overlays.insert(l.key,new ym(t,l));let g=this.ls.get(t);void 0===g&&(g=si(),this.ls.set(t,g)),this.ls.set(t,g.add(l.key))}}class Wf{constructor(){this.fs=new ds(Go.ds),this.ws=new ds(Go._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const l=new Go(e,t);this.fs=this.fs.add(l),this.ws=this.ws.add(l)}gs(e,t){e.forEach(l=>this.addReference(l,t))}removeReference(e,t){this.ys(new Go(e,t))}ps(e,t){e.forEach(l=>this.removeReference(l,t))}Is(e){const t=new Mn(new ni([])),l=new Go(t,e),h=new Go(t,e+1),g=[];return this.ws.forEachInRange([l,h],E=>{this.ys(E),g.push(E.key)}),g}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Mn(new ni([])),l=new Go(t,e),h=new Go(t,e+1);let g=si();return this.ws.forEachInRange([l,h],E=>{g=g.add(E.key)}),g}containsKey(e){const t=new Go(e,0),l=this.fs.firstAfterOrEqual(t);return null!==l&&e.isEqual(l.key)}}class Go{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Mn.comparator(e.key,t.key)||Dr(e.As,t.As)}static _s(e,t){return Dr(e.As,t.As)||Mn.comparator(e.key,t.key)}}class Nm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ds(Go.ds)}checkEmpty(e){return St.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,l,h){const g=this.vs;this.vs++;const E=new ph(g,t,l,h);this.mutationQueue.push(E);for(const k of h)this.Rs=this.Rs.add(new Go(k.key,g)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return St.resolve(E)}lookupMutationBatch(e,t){return St.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.bs(t+1),g=h<0?0:h;return St.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return St.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return St.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const l=new Go(t,0),h=new Go(t,Number.POSITIVE_INFINITY),g=[];return this.Rs.forEachInRange([l,h],E=>{const k=this.Ps(E.As);g.push(k)}),St.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new ds(Dr);return t.forEach(h=>{const g=new Go(h,0),E=new Go(h,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([g,E],k=>{l=l.add(k.As)})}),St.resolve(this.Vs(l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1;let g=l;Mn.isDocumentKey(g)||(g=g.child(""));const E=new Go(new Mn(g),0);let k=new ds(Dr);return this.Rs.forEachWhile(Y=>{const se=Y.key.path;return!!l.isPrefixOf(se)&&(se.length===h&&(k=k.add(Y.As)),!0)},E),St.resolve(this.Vs(k))}Vs(e){const t=[];return e.forEach(l=>{const h=this.Ps(l);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){Zn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let l=this.Rs;return St.forEach(t.mutations,h=>{const g=new Go(h.key,t.batchId);return l=l.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.Rs=l})}Cn(e){}containsKey(e,t){const l=new Go(t,0),h=this.Rs.firstAfterOrEqual(l);return St.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return St.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class km{constructor(e){this.Ds=e,this.docs=new ii(Mn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const l=t.key,h=this.docs.get(l),g=h?h.size:0,E=this.Ds(t);return this.docs=this.docs.insert(l,{document:t.mutableCopy(),size:E}),this.size+=E-g,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const l=this.docs.get(t);return St.resolve(l?l.document.mutableCopy():Ui.newInvalidDocument(t))}getEntries(e,t){let l=Ho();return t.forEach(h=>{const g=this.docs.get(h);l=l.insert(h,g?g.document.mutableCopy():Ui.newInvalidDocument(h))}),St.resolve(l)}getDocumentsMatchingQuery(e,t,l,h){let g=Ho();const E=t.path,k=new Mn(E.child("")),Y=this.docs.getIteratorFrom(k);for(;Y.hasNext();){const{key:se,value:{document:Se}}=Y.getNext();if(!E.isPrefixOf(se.path))break;se.path.length>E.length+1||Wr(ri(Se),l)<=0||(h.has(Se.key)||Xr(t,Se))&&(g=g.insert(Se.key,Se.mutableCopy()))}return St.resolve(g)}getAllFromCollectionGroup(e,t,l,h){Pn()}Cs(e,t){return St.forEach(this.docs,l=>t(l))}newChangeBuffer(e){return new ku(this)}getSize(e){return St.resolve(this.size)}}class ku extends xm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((l,h)=>{h.isValidDocument()?t.push(this.os.addEntry(e,h)):this.os.removeEntry(l)}),St.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class pv{constructor(e){this.persistence=e,this.xs=new Ba(t=>ra(t),Fc),this.lastRemoteSnapshotVersion=cr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Wf,this.targetCount=0,this.Ms=Pu.kn()}forEachTarget(e,t){return this.xs.forEach((l,h)=>t(h)),St.resolve()}getLastRemoteSnapshotVersion(e){return St.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return St.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),St.resolve(this.highestTargetId)}setTargetsMetadata(e,t,l){return l&&(this.lastRemoteSnapshotVersion=l),t>this.Ns&&(this.Ns=t),St.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Pu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,St.resolve()}updateTargetData(e,t){return this.Fn(t),St.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,St.resolve()}removeTargets(e,t,l){let h=0;const g=[];return this.xs.forEach((E,k)=>{k.sequenceNumber<=t&&null===l.get(k.targetId)&&(this.xs.delete(E),g.push(this.removeMatchingKeysForTargetId(e,k.targetId)),h++)}),St.waitFor(g).next(()=>h)}getTargetCount(e){return St.resolve(this.targetCount)}getTargetData(e,t){const l=this.xs.get(t)||null;return St.resolve(l)}addMatchingKeys(e,t,l){return this.ks.gs(t,l),St.resolve()}removeMatchingKeys(e,t,l){this.ks.ps(t,l);const h=this.persistence.referenceDelegate,g=[];return h&&t.forEach(E=>{g.push(h.markPotentiallyOrphaned(e,E))}),St.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),St.resolve()}getMatchingKeysForTargetId(e,t){const l=this.ks.Es(t);return St.resolve(l)}containsKey(e,t){return St.resolve(this.ks.containsKey(t))}}class Fm{constructor(e,t){this.$s={},this.overlays={},this.Os=new ee(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pv(this),this.indexManager=new Zp,this.remoteDocumentCache=new km(l=>this.referenceDelegate.Ls(l)),this.serializer=new zp(t),this.qs=new Om(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let l=this.$s[e.toKey()];return l||(l=new Nm(t,this.referenceDelegate),this.$s[e.toKey()]=l),l}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,l){dn("MemoryPersistence","Starting transaction:",e);const h=new G_(this.Os.next());return this.referenceDelegate.Us(),l(h).next(g=>this.referenceDelegate.Ks(h).next(()=>g)).toPromise().then(g=>(h.raiseOnCommittedEvent(),g))}Gs(e,t){return St.or(Object.values(this.$s).map(l=>()=>l.containsKey(e,t)))}}class G_ extends ms{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Qs=new Wf,this.js=null}static zs(e){return new Lm(e)}get Ws(){if(this.js)return this.js;throw Pn()}addReference(e,t,l){return this.Qs.addReference(l,t),this.Ws.delete(l.toString()),St.resolve()}removeReference(e,t,l){return this.Qs.removeReference(l,t),this.Ws.add(l.toString()),St.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),St.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(h=>this.Ws.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(g=>this.Ws.add(g.toString()))}).next(()=>l.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return St.forEach(this.Ws,l=>{const h=Mn.fromPath(l);return this.Hs(e,h).next(g=>{g||t.removeEntry(h,cr.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(l=>{l?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return St.or([()=>St.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class gE{constructor(e){this.serializer=e}O(e,t,l,h){const g=new Hr("createOrUpgrade",t);var k;l<1&&h>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ir,{unique:!0}),k.createObjectStore("documentMutations"),W_(e),function(k){k.createObjectStore("remoteDocuments")}(e));let E=St.resolve();return l<3&&h>=3&&(0!==l&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),W_(e)),E=E.next(()=>function(k){const Y=k.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cr.min().toTimestamp(),targetCount:0};return Y.put("targetGlobalKey",se)}(g))),l<4&&h>=4&&(0!==l&&(E=E.next(()=>function(k,Y){return Y.store("mutations").j().next(se=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ir,{unique:!0});const Se=Y.store("mutations"),tt=se.map(kt=>Se.put(kt));return St.waitFor(tt)})}(e,g))),E=E.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),l<5&&h>=5&&(E=E.next(()=>this.Ys(g))),l<6&&h>=6&&(E=E.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(g)))),l<7&&h>=7&&(E=E.next(()=>this.Zs(g))),l<8&&h>=8&&(E=E.next(()=>this.ti(e,g))),l<9&&h>=9&&(E=E.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),l<10&&h>=10&&(E=E.next(()=>this.ei(g))),l<11&&h>=11&&(E=E.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),l<12&&h>=12&&(E=E.next(()=>{!function(k){const Y=k.createObjectStore("documentOverlays",{keyPath:Ap});Y.createIndex("collectionPathOverlayIndex",tl,{unique:!1}),Y.createIndex("collectionGroupOverlayIndex",ah,{unique:!1})}(e)})),l<13&&h>=13&&(E=E.next(()=>function(k){const Y=k.createObjectStore("remoteDocumentsV14",{keyPath:qo});Y.createIndex("documentKeyIndex",_a),Y.createIndex("collectionGroupIndex",na)}(e)).next(()=>this.ni(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),l<14&&h>=14&&(E=E.next(()=>this.si(e,g))),l<15&&h>=15&&(E=E.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:sh}).createIndex("sequenceNumberIndex",oh,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:vf}).createIndex("documentKeyIndex",el,{unique:!1})}(e))),E}Xs(e){let t=0;return e.store("remoteDocuments").X((l,h)=>{t+=Vf(h)}).next(()=>{const l={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",l)})}Ys(e){const t=e.store("mutationQueues"),l=e.store("mutations");return t.j().next(h=>St.forEach(h,g=>{const E=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return l.j("userMutationsIndex",E).next(k=>St.forEach(k,Y=>{Zn(Y.userId===g.userId);const se=Kc(this.serializer,Y);return Mm(e,g.userId,se).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),l=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const g=[];return l.X((E,k)=>{const Y=new ni(E),se=[0,Wt(Y)];g.push(t.get(se).next(Se=>Se?St.resolve():t.put({targetId:0,path:Wt(Y),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>St.waitFor(g))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Tp});const l=t.store("collectionParents"),h=new Sh,g=E=>{if(h.add(E)){const k=E.lastSegment(),Y=E.popLast();return l.put({collectionId:k,parent:Wt(Y)})}};return t.store("remoteDocuments").X({Y:!0},(E,k)=>{const Y=new ni(E);return g(Y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,k,Y],se)=>{const Se=Vn(k);return g(Se.popLast())}))}ei(e){const t=e.store("targets");return t.X((l,h)=>{const g=qc(h),E=Im(this.serializer,g);return t.put(E)})}ni(e,t){const l=t.store("remoteDocuments"),h=[];return l.X((g,E)=>{const k=t.store("remoteDocumentsV14"),Y=(se=E,se.document?new Mn(ni.fromString(se.document.name).popFirst(5)):se.noDocument?Mn.fromSegments(se.noDocument.path):se.unknownDocument?Mn.fromSegments(se.unknownDocument.path):Pn()).path.toArray();var se;const Se={prefixPath:Y.slice(0,Y.length-2),collectionGroup:Y[Y.length-2],documentId:Y[Y.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};h.push(k.put(Se))}).next(()=>St.waitFor(h))}si(e,t){const l=t.store("mutations"),h=Jc(this.serializer),g=new Fm(Lm.zs,this.serializer.fe);return l.j().next(E=>{const k=new Map;return E.forEach(Y=>{var se;let Se=null!==(se=k.get(Y.userId))&&void 0!==se?se:si();Kc(this.serializer,Y).keys().forEach(tt=>Se=Se.add(tt)),k.set(Y.userId,Se)}),St.forEach(k,(Y,se)=>{const Se=new fr(se),tt=bh.de(this.serializer,Se),kt=g.getIndexManager(Se),Zt=Od.de(Se,this.serializer,kt,g.referenceDelegate);return new Ah(h,Zt,tt,kt).recalculateAndSaveOverlaysForDocumentKeys(new _u(t,ee.ct),Y).next()})})}}function W_(s){s.createObjectStore("targetDocuments",{keyPath:io}).createIndex("documentTargetsIndex",Vl,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",la,{unique:!0}),s.createObjectStore("targetGlobal")}const Mh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bm{constructor(e,t,l,h,g,E,k,Y,se,Se,tt=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=l,this.ii=g,this.window=E,this.document=k,this.ri=se,this.oi=Se,this.ui=tt,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=kt=>Promise.resolve(),!Bm.D())throw new hn(Vt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hf(this,h),this.di=t+"main",this.serializer=new zp(Y),this.wi=new us(this.di,this.ui,new gE(this.serializer)),this.Bs=new fv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jc(this.serializer),this.qs=new Lf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Se&&Yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hn(Vt.FAILED_PRECONDITION,Mh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ee(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var l=(0,y.Z)(function*(h){if(t.started)return e(h)});return function(h){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,y.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,y.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ts(e))return dn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Ld(e).get("owner").next(t=>St.resolve(this.Ri(t)))}Pi(e){return Rh(e).delete(this.clientId)}bi(){var e=this;return(0,y.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const h=vo(l,"clientMetadata");return h.j().next(g=>{const E=e.Si(g,18e5),k=g.filter(Y=>-1===E.indexOf(Y));return St.forEach(k,Y=>h.delete(Y.clientId)).next(()=>k)})}).catch(()=>[]);if(e._i)for(const l of t)e._i.removeItem(e.Di(l.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?St.resolve(!0):Ld(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new hn(Vt.FAILED_PRECONDITION,Mh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rh(e).j().next(l=>void 0===this.Si(l,5e3).find(h=>!(this.clientId===h.clientId||!(!this.networkEnabled&&h.networkEnabled||!this.inForeground&&h.inForeground&&this.networkEnabled===h.networkEnabled))))}).next(t=>(this.isPrimary!==t&&dn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,y.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const l=new _u(t,ee.ct);return e.Ai(l).next(()=>e.Pi(l))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(l=>this.Vi(l.updateTimeMs,t)&&!this.Ci(l.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Rh(e).j().next(t=>this.Si(t,18e5).map(l=>l.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Od.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Th(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return bh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,l){dn("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",g=15===(E=this.ui)?cs:14===E?lh:13===E?Dc:12===E?_f:11===E?bc:void Pn();var E;let k;return this.wi.runTransaction(e,h,g,Y=>(k=new _u(Y,this.Os?this.Os.next():ee.ct),"readwrite-primary"===t?this.Ti(k).next(se=>!!se||this.Ei(k)).next(se=>{if(!se)throw Yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new hn(Vt.FAILED_PRECONDITION,Ra);return l(k)}).next(se=>this.vi(k).next(()=>se)):this.Oi(k).next(()=>l(k)))).then(Y=>(k.raiseOnCommittedEvent(),Y))}Oi(e){return Ld(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new hn(Vt.FAILED_PRECONDITION,Mh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ld(e).put("owner",t)}static D(){return us.D()}Ai(e){const t=Ld(e);return t.get("owner").next(l=>this.Ri(l)?(dn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):St.resolve())}Vi(e,t){const l=Date.now();return!(e<l-t||e>l&&(Yr(`Detected an update time that is in the future: ${e} > ${l}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,De.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const l=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return dn("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return Yr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Yr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ld(s){return vo(s,"owner")}function Rh(s){return vo(s,"clientMetadata")}function Bd(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class xh{constructor(e,t,l,h){this.targetId=e,this.fromCache=t,this.Fi=l,this.Bi=h}static Li(e,t){let l=si(),h=si();for(const g of t.docChanges)switch(g.type){case 0:l=l.add(g.doc.key);break;case 1:h=h.add(g.doc.key)}return new xh(e,t.fromCache,l,h)}}class qf{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,l,h){return this.Ki(e,t).next(g=>g||this.Gi(e,t,h,l)).next(g=>g||this.Qi(e,t))}Ki(e,t){if(R(t))return St.resolve(null);let l=be(t);return this.indexManager.getIndexType(e,l).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=Ht(t,null,"F"),l=be(t)),this.indexManager.getDocumentsMatchingTarget(e,l).next(g=>{const E=si(...g);return this.Ui.getDocuments(e,E).next(k=>this.indexManager.getMinOffset(e,l).next(Y=>{const se=this.ji(t,k);return this.zi(t,se,E,Y.readTime)?this.Ki(e,Ht(t,null,"F")):this.Wi(e,se,t,Y)}))})))}Gi(e,t,l,h){return R(t)||h.isEqual(cr.min())?this.Qi(e,t):this.Ui.getDocuments(e,l).next(g=>{const E=this.ji(t,g);return this.zi(t,E,l,h)?this.Qi(e,t):(Ci()<=ve.in.DEBUG&&dn("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),gr(t)),this.Wi(e,E,t,_i(h,-1)))})}ji(e,t){let l=new ds(Yl(e));return t.forEach((h,g)=>{Xr(e,g)&&(l=l.add(g))}),l}zi(e,t,l,h){if(null===e.limit)return!1;if(l.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(h)>0)}Qi(e,t){return Ci()<=ve.in.DEBUG&&dn("QueryEngine","Using full collection scan to execute query:",gr(t)),this.Ui.getDocumentsMatchingQuery(e,t,Zs.min())}Wi(e,t,l,h){return this.Ui.getDocumentsMatchingQuery(e,l,h).next(g=>(t.forEach(E=>{g=g.insert(E.key,E)}),g))}}class Ph{constructor(e,t,l,h){this.persistence=e,this.Hi=t,this.serializer=h,this.Ji=new ii(Dr),this.Yi=new Ba(g=>ra(g),Fc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(l)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ah(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Oh(s,e,t,l){return new Ph(s,e,t,l)}function Nh(s,e){return ig.apply(this,arguments)}function ig(){return ig=(0,y.Z)(function*(s,e){const t=en(s);return yield t.persistence.runTransaction("Handle user change","readonly",l=>{let h;return t.mutationQueue.getAllMutationBatches(l).next(g=>(h=g,t.tr(e),t.mutationQueue.getAllMutationBatches(l))).next(g=>{const E=[],k=[];let Y=si();for(const se of h){E.push(se.batchId);for(const Se of se.mutations)Y=Y.add(Se.key)}for(const se of g){k.push(se.batchId);for(const Se of se.mutations)Y=Y.add(Se.key)}return t.localDocuments.getDocuments(l,Y).next(se=>({er:se,removedBatchIds:E,addedBatchIds:k}))})})}),ig.apply(this,arguments)}function kh(s){const e=en(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function og(s,e,t){let l=si(),h=si();return t.forEach(g=>l=l.add(g)),e.getEntries(s,l).next(g=>{let E=Ho();return t.forEach((k,Y)=>{const se=g.get(k);Y.isFoundDocument()!==se.isFoundDocument()&&(h=h.add(k)),Y.isNoDocument()&&Y.version.isEqual(cr.min())?(e.removeEntry(k,Y.readTime),E=E.insert(k,Y)):!se.isValidDocument()||Y.version.compareTo(se.version)>0||0===Y.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(Y),E=E.insert(k,Y)):dn("LocalStore","Ignoring outdated watch update for ",k,". Current version:",se.version," Watch version:",Y.version)}),{nr:E,sr:h}})}function ll(s,e){const t=en(s);return t.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(l,e)))}function $d(s,e){const t=en(s);return t.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return t.Bs.getTargetData(l,e).next(g=>g?(h=g,St.resolve(h)):t.Bs.allocateTargetId(l).next(E=>(h=new ja(e,E,"TargetPurposeListen",l.currentSequenceNumber),t.Bs.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=t.Ji.get(l.targetId);return(null===h||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(l.targetId,l),t.Yi.set(e,l.targetId)),l})}function ed(s,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,y.Z)(function*(s,e,t){const l=en(s),h=l.Ji.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield l.persistence.runTransaction("Release target",g,E=>l.persistence.referenceDelegate.removeTarget(E,h)))}catch(E){if(!ts(E))throw E;dn("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}l.Ji=l.Ji.remove(e),l.Yi.delete(h.target)}),ag.apply(this,arguments)}function Yf(s,e,t){const l=en(s);let h=cr.min(),g=si();return l.persistence.runTransaction("Execute query","readonly",E=>function(k,Y,se){const Se=en(k),tt=Se.Yi.get(se);return void 0!==tt?St.resolve(Se.Ji.get(tt)):Se.Bs.getTargetData(Y,se)}(l,E,be(e)).next(k=>{if(k)return h=k.lastLimboFreeSnapshotVersion,l.Bs.getMatchingKeysForTargetId(E,k.targetId).next(Y=>{g=Y})}).next(()=>l.Hi.getDocumentsMatchingQuery(E,e,t?h:cr.min(),t?g:si())).next(k=>(mv(l,Zo(e),k),{documents:k,ir:g})))}function lg(s,e){const t=en(s),l=en(t.Bs),h=t.Ji.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",g=>l.le(g,e).next(E=>E?E.target:null))}function gv(s,e){const t=en(s),l=t.Xi.get(e)||cr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Zi.getAllFromCollectionGroup(h,e,_i(l,-1),Number.MAX_SAFE_INTEGER)).then(h=>(mv(t,e,h),h))}function mv(s,e,t){let l=s.Xi.get(e)||cr.min();t.forEach((h,g)=>{g.readTime.compareTo(l)>0&&(l=g.readTime)}),s.Xi.set(e,l)}function $m(){return $m=(0,y.Z)(function*(s,e,t,l){const h=en(s);let g=si(),E=Ho();for(const se of t){const Se=e.rr(se.metadata.name);se.document&&(g=g.add(Se));const tt=e.ur(se);tt.setReadTime(e.cr(se.metadata.readTime)),E=E.insert(Se,tt)}const k=h.Zi.newChangeBuffer({trackRemovals:!0}),Y=yield $d(h,(se=l,be(Zu(ni.fromString(`__bundle__/docs/${se}`)))));var se;return h.persistence.runTransaction("Apply bundle documents","readwrite",se=>og(se,k,E).next(Se=>(k.apply(se),Se)).next(Se=>h.Bs.removeMatchingKeysForTargetId(se,Y.targetId).next(()=>h.Bs.addMatchingKeys(se,g,Y.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(se,Se.nr,Se.sr)).next(()=>Se.nr)))}),$m.apply(this,arguments)}function ug(s,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,y.Z)(function*(s,e,t=si()){const l=yield $d(s,be(wa(e.bundledQuery))),h=en(s);return h.persistence.runTransaction("Save named query","readwrite",g=>{const E=Eo(e.readTime);if(l.snapshotVersion.compareTo(E)>=0)return h.qs.saveNamedQuery(g,e);const k=l.withResumeToken(Gs.EMPTY_BYTE_STRING,E);return h.Ji=h.Ji.insert(k.targetId,k),h.Bs.updateTargetData(g,k).next(()=>h.Bs.removeMatchingKeysForTargetId(g,l.targetId)).next(()=>h.Bs.addMatchingKeys(g,t,l.targetId)).next(()=>h.qs.saveNamedQuery(g,e))})}),Zf.apply(this,arguments)}function yv(s,e){return`firestore_clients_${s}_${e}`}function vv(s,e,t){let l=`firestore_mutations_${s}_${t}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function Fh(s,e){return`firestore_targets_${s}_${e}`}class Vd{constructor(e,t,l,h){this.user=e,this.batchId=t,this.state=l,this.error=h}static ar(e,t,l){const h=JSON.parse(l);let g,E="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return E&&h.error&&(E="string"==typeof h.error.message&&"string"==typeof h.error.code,E&&(g=new hn(h.error.code,h.error.message))),E?new Vd(e,t,h.state,g):(Yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${l}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,t,l){this.targetId=e,this.state=t,this.error=l}static ar(e,t){const l=JSON.parse(t);let h,g="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return g&&l.error&&(g="string"==typeof l.error.message&&"string"==typeof l.error.code,g&&(h=new hn(l.error.code,l.error.message))),g?new Qf(e,l.state,h):(Yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const l=JSON.parse(t);let h="object"==typeof l&&l.activeTargetIds instanceof Array,g=ch();for(let E=0;h&&E<l.activeTargetIds.length;++E)h=gt(l.activeTargetIds[E]),g=g.add(l.activeTargetIds[E]);return h?new Xf(e,g):(Yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vm{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vm(t.clientId,t.onlineState):(Yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cg{constructor(){this.activeTargetIds=ch()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _v{constructor(e,t,l,h,g){this.window=e,this.ii=t,this.persistenceKey=l,this.wr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ii(Dr),this.started=!1,this.yr=[];const E=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.pr=yv(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new cg),this.Tr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.Z)(function*(){const t=yield e.syncEngine.$i();for(const h of t){if(h===e.wr)continue;const g=e.getItem(yv(e.persistenceKey,h));if(g){const E=Xf.ar(h,g);E&&(e.gr=e.gr.insert(E.clientId,E))}}e.Pr();const l=e.storage.getItem(e.vr);if(l){const h=e.br(l);h&&e.Vr(h)}for(const h of e.yr)e.mr(h);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((l,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,l){this.Dr(e,t,l),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(Fh(this.persistenceKey,e));if(l){const h=Qf.ar(e,l);h&&(t=h.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fh(this.persistenceKey,e))}updateQueryState(e,t,l){this.kr(e,t,l)}handleUserChange(e,t,l){t.forEach(h=>{this.Cr(h)}),this.currentUser=e,l.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dn("SharedClientState","READ",e,t),t}setItem(e,t){dn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const l=e;if(l.storageArea===this.storage){if(dn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.pr)return void Yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,y.Z)(function*(){if(t.started){if(null!==l.key)if(t.Tr.test(l.key)){if(null==l.newValue){const h=t.Or(l.key);return t.Fr(h,null)}{const h=t.Br(l.key,l.newValue);if(h)return t.Fr(h.clientId,h)}}else if(t.Er.test(l.key)){if(null!==l.newValue){const h=t.Lr(l.key,l.newValue);if(h)return t.qr(h)}}else if(t.Ar.test(l.key)){if(null!==l.newValue){const h=t.Ur(l.key,l.newValue);if(h)return t.Kr(h)}}else if(l.key===t.vr){if(null!==l.newValue){const h=t.br(l.newValue);if(h)return t.Vr(h)}}else if(l.key===t.Ir){const h=function(g){let E=ee.ct;if(null!=g)try{const k=JSON.parse(g);Zn("number"==typeof k),E=k}catch(k){Yr("SharedClientState","Failed to read sequence number from WebStorage",k)}return E}(l.newValue);h!==ee.ct&&t.sequenceNumberHandler(h)}else if(l.key===t.Rr){const h=t.Gr(l.newValue);yield Promise.all(h.map(g=>t.syncEngine.Qr(g)))}}else t.yr.push(l)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,l){const h=new Vd(this.currentUser,e,t,l),g=vv(this.persistenceKey,this.currentUser,e);this.setItem(g,h.hr())}Cr(e){const t=vv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,l){const h=Fh(this.persistenceKey,e),g=new Qf(e,t,l);this.setItem(h,g.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const l=this.Or(e);return Xf.ar(l,t)}Lr(e,t){const l=this.Er.exec(e),h=Number(l[1]);return Vd.ar(new fr(void 0!==l[2]?l[2]:null),h,t)}Ur(e,t){const l=this.Ar.exec(e),h=Number(l[1]);return Qf.ar(h,t)}br(e){return Vm.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);dn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const l=t?this.gr.insert(e,t):this.gr.remove(e),h=this.Sr(this.gr),g=this.Sr(l),E=[],k=[];return g.forEach(Y=>{h.has(Y)||E.push(Y)}),h.forEach(Y=>{g.has(Y)||k.push(Y)}),this.syncEngine.Wr(E,k).then(()=>{this.gr=l})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=ch();return e.forEach((l,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Ev{constructor(){this.Hr=new cg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,l){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,l){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new cg,Promise.resolve()}handleUserChange(e,t,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jf{Yr(e){}shutdown(){}}class wv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){dn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){dn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let td=null;function Lh(){return null===td?td=268435456+Math.round(2147483648*Math.random()):td++,"0x"+td.toString(16)}const K_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Iv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ca="WebChannelConnection";class Cv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,l,h,g){const E=Lh(),k=this.To(e,t);dn("RestConnection",`Sending RPC '${e}' ${E}:`,k,l);const Y={};return this.Eo(Y,h,g),this.Ao(e,k,Y,l).then(se=>(dn("RestConnection",`Received RPC '${e}' ${E}: `,se),se),se=>{throw zs("RestConnection",`RPC '${e}' ${E} failed with error: `,se,"url: ",k,"request:",l),se})}vo(e,t,l,h,g,E){return this.Io(e,t,l,h,g)}Eo(e,t,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ar,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,g)=>e[g]=h),l&&l.headers.forEach((h,g)=>e[g]=h)}To(e,t){return`${this.mo}/v1/${t}:${K_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,l,h){const g=Lh();return new Promise((E,k)=>{const Y=new Yt;Y.setWithCredentials(!0),Y.listenOnce(re.COMPLETE,()=>{try{switch(Y.getLastErrorCode()){case V.NO_ERROR:const Se=Y.getResponseJson();dn(ca,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(Se)),E(Se);break;case V.TIMEOUT:dn(ca,`RPC '${e}' ${g} timed out`),k(new hn(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case V.HTTP_ERROR:const tt=Y.getStatus();if(dn(ca,`RPC '${e}' ${g} failed with status:`,tt,"response text:",Y.getResponseText()),tt>0){let kt=Y.getResponseJson();Array.isArray(kt)&&(kt=kt[0]);const Zt=null==kt?void 0:kt.error;if(Zt&&Zt.status&&Zt.message){const Cn=function(Hn){const Kn=Hn.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(Kn)>=0?Kn:Vt.UNKNOWN}(Zt.status);k(new hn(Cn,Zt.message))}else k(new hn(Vt.UNKNOWN,"Server responded with status "+Y.getStatus()))}else k(new hn(Vt.UNAVAILABLE,"Connection failed."));break;default:Pn()}}finally{dn(ca,`RPC '${e}' ${g} completed.`)}});const se=JSON.stringify(h);dn(ca,`RPC '${e}' ${g} sending request:`,h),Y.send(t,"POST",se,l,15)})}Ro(e,t,l){const h=Lh(),g=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=ud(),k=pu(),Y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},se=this.longPollingOptions.timeoutSeconds;void 0!==se&&(Y.longPollingTimeout=Math.round(1e3*se)),this.useFetchStreams&&(Y.xmlHttpFactory=new Ke({})),this.Eo(Y.initMessageHeaders,t,l),Y.encodeInitMessageHeaders=!0;const Se=g.join("");dn(ca,`Creating RPC '${e}' stream ${h}: ${Se}`,Y);const tt=E.createWebChannel(Se,Y);let kt=!1,Zt=!1;const Cn=new Iv({ro:Kn=>{Zt?dn(ca,`Not sending because RPC '${e}' stream ${h} is closed:`,Kn):(kt||(dn(ca,`Opening RPC '${e}' stream ${h} transport.`),tt.open(),kt=!0),dn(ca,`RPC '${e}' stream ${h} sending:`,Kn),tt.send(Kn))},oo:()=>tt.close()}),Hn=(Kn,ui,Oi)=>{Kn.listen(ui,gi=>{try{Oi(gi)}catch(Fo){setTimeout(()=>{throw Fo},0)}})};return Hn(tt,Bt.EventType.OPEN,()=>{Zt||dn(ca,`RPC '${e}' stream ${h} transport opened.`)}),Hn(tt,Bt.EventType.CLOSE,()=>{Zt||(Zt=!0,dn(ca,`RPC '${e}' stream ${h} transport closed`),Cn.wo())}),Hn(tt,Bt.EventType.ERROR,Kn=>{Zt||(Zt=!0,zs(ca,`RPC '${e}' stream ${h} transport errored:`,Kn),Cn.wo(new hn(Vt.UNAVAILABLE,"The operation could not be completed")))}),Hn(tt,Bt.EventType.MESSAGE,Kn=>{var ui;if(!Zt){const Oi=Kn.data[0];Zn(!!Oi);const Fo=Oi.error||(null===(ui=Oi[0])||void 0===ui?void 0:ui.error);if(Fo){dn(ca,`RPC '${e}' stream ${h} received error:`,Fo);const wo=Fo.status;let Fs=function(th){const __=oo[th];if(void 0!==__)return Cd(__)}(wo),za=Fo.message;void 0===Fs&&(Fs=Vt.INTERNAL,za="Unknown error status: "+wo+" with message "+Fo.message),Zt=!0,Cn.wo(new hn(Fs,za)),tt.close()}else dn(ca,`RPC '${e}' stream ${h} received:`,Oi),Cn._o(Oi)}}),Hn(k,H.STAT_EVENT,Kn=>{Kn.stat===ye.PROXY?dn(ca,`RPC '${e}' stream ${h} detected buffering proxy`):Kn.stat===ye.NOPROXY&&dn(ca,`RPC '${e}' stream ${h} detected no buffering proxy`)}),setTimeout(()=>{Cn.fo()},0),Cn}}function bv(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}function Bh(s){return new _m(s,!0)}class tp{constructor(e,t,l=1e3,h=1.5,g=6e4){this.ii=e,this.timerId=t,this.Po=l,this.bo=h,this.Vo=g,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),l=Math.max(0,Date.now()-this.Co),h=Math.max(0,t-l);h>0&&dn("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${l} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,h,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class ul{constructor(e,t,l,h,g,E,k,Y){this.ii=e,this.$o=l,this.Oo=h,this.connection=g,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=k,this.listener=Y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new tp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,y.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,y.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var l=this;return(0,y.Z)(function*(){l.Ho(),l.Jo(),l.qo.cancel(),l.Fo++,4!==e?l.qo.reset():t&&t.code===Vt.RESOURCE_EXHAUSTED?(Yr(t.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),l.qo.xo()):t&&t.code===Vt.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Yo(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,h])=>{this.Fo===t&&this.Zo(l,h)},l=>{e(()=>{const h=new hn(Vt.UNKNOWN,"Fetching auth token failed: "+l.message);return this.tu(h)})})}Zo(e,t){const l=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{l(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(h=>{l(()=>this.tu(h))}),this.stream.onMessage(h=>{l(()=>this.onMessage(h))})}Go(){var e=this;this.state=5,this.qo.No((0,y.Z)(function*(){e.state=0,e.start()}))}tu(e){return dn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(dn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xo extends ul{constructor(e,t,l,h,g,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,l,h,E),this.serializer=g}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function fE(s,e){let t;if("targetChange"in e){const l="NO_CHANGE"===(Y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Y?1:"REMOVE"===Y?2:"CURRENT"===Y?3:"RESET"===Y?4:Pn(),h=e.targetChange.targetIds||[],g=function(Y,se){return Y.useProto3Json?(Zn(void 0===se||"string"==typeof se),Gs.fromBase64String(se||"")):(Zn(void 0===se||se instanceof Uint8Array),Gs.fromUint8Array(se||new Uint8Array))}(s,e.targetChange.resumeToken),E=e.targetChange.cause,k=E&&function(Y){const se=void 0===Y.code?Vt.UNKNOWN:Cd(Y.code);return new hn(se,Y.message||"")}(E);t=new Vp(l,h,g,k||null)}else if("documentChange"in e){const l=e.documentChange,h=Jl(s,l.document.name),g=Eo(l.document.updateTime),E=l.document.createTime?Eo(l.document.createTime):cr.min(),k=new Ur({mapValue:{fields:l.document.fields}}),Y=Ui.newFoundDocument(h,g,E,k);t=new Hc(l.targetIds||[],l.removedTargetIds||[],Y.key,Y)}else if("documentDelete"in e){const l=e.documentDelete,h=Jl(s,l.document),g=l.readTime?Eo(l.readTime):cr.min(),E=Ui.newNoDocument(h,g);t=new Hc([],l.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const l=e.documentRemove,h=Jl(s,l.document);t=new Hc([],l.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Pn();{const l=e.filter,{count:h=0,unchangedNames:g}=l,E=new iv(h,g);t=new vm(l.targetId,E)}}var Y;return t}(this.serializer,e),l=function(h){if(!("targetChange"in h))return cr.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?cr.min():g.readTime?Eo(g.readTime):cr.min()}(e);return this.listener.nu(t,l)}su(e){const t={};t.database=Mu(this.serializer),t.addTarget=function(h,g){let E;const k=g.target;if(E=ql(k)?{documents:Ru(h,k)}:{query:Gc(h,k)},E.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){E.resumeToken=wh(h,g.resumeToken);const Y=Eh(h,g.expectedCount);null!==Y&&(E.expectedCount=Y)}else if(g.snapshotVersion.compareTo(cr.min())>0){E.readTime=Dd(h,g.snapshotVersion.toTimestamp());const Y=Eh(h,g.expectedCount);null!==Y&&(E.expectedCount=Y)}return E}(this.serializer,e);const l=function lv(s,e){const t=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);l&&(t.labels=l),this.Wo(t)}iu(e){const t={};t.database=Mu(this.serializer),t.removeTarget=e,this.Wo(t)}}class bl extends ul{constructor(e,t,l,h,g,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,l,h,E),this.serializer=g,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Zn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function H_(s,e){return s&&s.length>0?(Zn(void 0!==e),s.map(t=>function(l,h){let g=Eo(l.updateTime?l.updateTime:h);return g.isEqual(cr.min())&&(g=Eo(h)),new tv(g,l.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),l=Eo(e.commitTime);return this.listener.cu(l,t)}return Zn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mu(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(l=>zc(this.serializer,l))};this.Wo(t)}}class Ud extends class{}{constructor(e,t,l,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=l,this.serializer=h,this.lu=!1}fu(){if(this.lu)throw new hn(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,l){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Io(e,t,l,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new hn(Vt.UNKNOWN,h.toString())})}vo(e,t,l,h){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,E])=>this.connection.vo(e,t,l,g,E,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new hn(Vt.UNKNOWN,g.toString())})}terminate(){this.lu=!0}}class Dv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Yr(t),this.mu=!1):dn("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class dg{constructor(e,t,l,h,g){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=l,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=g,this.Pu.Yr(k=>{l.enqueueAndForget((0,y.Z)(function*(){var Y;cl(E)&&(dn("RemoteStore","Restarting streams for network reachability change."),yield(Y=(0,y.Z)(function*(se){const Se=en(se);Se.vu.add(4),yield jd(Se),Se.bu.set("Unknown"),Se.vu.delete(4),yield Dl(Se)}),function(se){return Y.apply(this,arguments)})(E))}))}),this.bu=new Dv(l,h)}}function Dl(s){return hg.apply(this,arguments)}function hg(){return hg=(0,y.Z)(function*(s){if(cl(s))for(const e of s.Ru)yield e(!0)}),hg.apply(this,arguments)}function jd(s){return fg.apply(this,arguments)}function fg(){return fg=(0,y.Z)(function*(s){for(const e of s.Ru)yield e(!1)}),fg.apply(this,arguments)}function np(s,e){const t=en(s);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),rp(t)?Um(t):dl(t).Ko()&&pg(t,e))}function Vh(s,e){const t=en(s),l=dl(t);t.Au.delete(e),l.Ko()&&Uh(t,e),0===t.Au.size&&(l.Ko()?l.jo():cl(t)&&t.bu.set("Unknown"))}function pg(s,e){if(s.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(cr.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(s).su(e)}function Uh(s,e){s.Vu.qt(e),dl(s).iu(e)}function Um(s){s.Vu=new Af({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),le:e=>s.Au.get(e)||null,ue:()=>s.datastore.serializer.databaseId}),dl(s).start(),s.bu.gu()}function rp(s){return cl(s)&&!dl(s).Uo()&&s.Au.size>0}function cl(s){return 0===en(s).vu.size}function Fu(s){s.Vu=void 0}function q_(s){return gg.apply(this,arguments)}function gg(){return gg=(0,y.Z)(function*(s){s.Au.forEach((e,t)=>{pg(s,e)})}),gg.apply(this,arguments)}function Y_(s,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,y.Z)(function*(s,e){Fu(s),rp(s)?(s.bu.Iu(e),Um(s)):s.bu.set("Unknown")}),Sv.apply(this,arguments)}function Tv(s,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,y.Z)(function*(s,e,t){if(s.bu.set("Online"),e instanceof Vp&&2===e.state&&e.cause)try{yield(l=(0,y.Z)(function*(h,g){const E=g.cause;for(const k of g.targetIds)h.Au.has(k)&&(yield h.remoteSyncer.rejectListen(k,E),h.Au.delete(k),h.Vu.removeTarget(k))}),function(h,g){return l.apply(this,arguments)})(s,e)}catch(l){dn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield jh(s,l)}else if(e instanceof Hc?s.Vu.Ht(e):e instanceof vm?s.Vu.ne(e):s.Vu.Xt(e),!t.isEqual(cr.min()))try{const l=yield kh(s.localStore);t.compareTo(l)>=0&&(yield function(h,g){const E=h.Vu.ce(g);return E.targetChanges.forEach((k,Y)=>{if(k.resumeToken.approximateByteSize()>0){const se=h.Au.get(Y);se&&h.Au.set(Y,se.withResumeToken(k.resumeToken,g))}}),E.targetMismatches.forEach((k,Y)=>{const se=h.Au.get(k);if(!se)return;h.Au.set(k,se.withResumeToken(Gs.EMPTY_BYTE_STRING,se.snapshotVersion)),Uh(h,k);const Se=new ja(se.target,k,Y,se.sequenceNumber);pg(h,Se)}),h.remoteSyncer.applyRemoteEvent(E)}(s,t))}catch(l){dn("RemoteStore","Failed to raise snapshot:",l),yield jh(s,l)}var l}),Av.apply(this,arguments)}function jh(s,e,t){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,y.Z)(function*(s,e,t){if(!ts(e))throw e;s.vu.add(1),yield jd(s),s.bu.set("Offline"),t||(t=()=>kh(s.localStore)),s.asyncQueue.enqueueRetryable((0,y.Z)(function*(){dn("RemoteStore","Retrying IndexedDB access"),yield t(),s.vu.delete(1),yield Dl(s)}))}),Hd.apply(this,arguments)}function jm(s,e){return e().catch(t=>jh(s,t,e))}function rd(s){return mg.apply(this,arguments)}function mg(){return mg=(0,y.Z)(function*(s){const e=en(s),t=Sl(e);let l=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;oi(e);)try{const h=yield ll(e.localStore,l);if(null===h){0===e.Eu.length&&t.jo();break}l=h.batchId,Mv(e,h)}catch(h){yield jh(e,h)}Hm(e)&&Z_(e)}),mg.apply(this,arguments)}function oi(s){return cl(s)&&s.Eu.length<10}function Mv(s,e){s.Eu.push(e);const t=Sl(s);t.Ko()&&t.ou&&t.uu(e.mutations)}function Hm(s){return cl(s)&&!Sl(s).Uo()&&s.Eu.length>0}function Z_(s){Sl(s).start()}function Q_(s){return yg.apply(this,arguments)}function yg(){return yg=(0,y.Z)(function*(s){Sl(s).hu()}),yg.apply(this,arguments)}function X_(s){return zm.apply(this,arguments)}function zm(){return zm=(0,y.Z)(function*(s){const e=Sl(s);for(const t of s.Eu)e.uu(t.mutations)}),zm.apply(this,arguments)}function Gm(s,e,t){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,y.Z)(function*(s,e,t){const l=s.Eu.shift(),h=mm.from(l,e,t);yield jm(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield rd(s)}),Wm.apply(this,arguments)}function Rv(s,e){return Km.apply(this,arguments)}function Km(){return Km=(0,y.Z)(function*(s,e){var t;e&&Sl(s).ou&&(yield(t=(0,y.Z)(function*(l,h){if(Xl(g=h.code)&&g!==Vt.ABORTED){const E=l.Eu.shift();Sl(l).Qo(),yield jm(l,()=>l.remoteSyncer.rejectFailedWrite(E.batchId,h)),yield rd(l)}var g}),function(l,h){return t.apply(this,arguments)})(s,e)),Hm(s)&&Z_(s)}),Km.apply(this,arguments)}function xv(s,e){return qm.apply(this,arguments)}function qm(){return qm=(0,y.Z)(function*(s,e){const t=en(s);t.asyncQueue.verifyOperationInProgress(),dn("RemoteStore","RemoteStore received new credentials");const l=cl(t);t.vu.add(3),yield jd(t),l&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Dl(t)}),qm.apply(this,arguments)}function Hh(s,e){return ip.apply(this,arguments)}function ip(){return ip=(0,y.Z)(function*(s,e){const t=en(s);e?(t.vu.delete(2),yield Dl(t)):e||(t.vu.add(2),yield jd(t),t.bu.set("Unknown"))}),ip.apply(this,arguments)}function dl(s){return s.Su||(s.Su=function(e,t,l){const h=en(e);return h.fu(),new Xo(t,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{uo:q_.bind(null,s),ao:Y_.bind(null,s),nu:Tv.bind(null,s)}),s.Ru.push(function(){var e=(0,y.Z)(function*(t){t?(s.Su.Qo(),rp(s)?Um(s):s.bu.set("Unknown")):(yield s.Su.stop(),Fu(s))});return function(t){return e.apply(this,arguments)}}())),s.Su}function Sl(s){return s.Du||(s.Du=function(e,t,l){const h=en(e);return h.fu(),new bl(t,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{uo:Q_.bind(null,s),ao:Rv.bind(null,s),au:X_.bind(null,s),cu:Gm.bind(null,s)}),s.Ru.push(function(){var e=(0,y.Z)(function*(t){t?(s.Du.Qo(),yield rd(s)):(yield s.Du.stop(),s.Eu.length>0&&(dn("RemoteStore",`Stopping write stream with ${s.Eu.length} pending writes`),s.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),s.Du}class Ym{constructor(e,t,l,h,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=l,this.op=h,this.removalCallback=g,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,l,h,g){const E=Date.now()+l,k=new Ym(e,t,E,h,g);return k.start(l),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hn(Vt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(s,e){if(Yr("AsyncQueue",`${e}: ${s}`),ts(s))return new hn(Vt.UNAVAILABLE,`${e}: ${s}`);throw s}class id{constructor(e){this.comparator=e?(t,l)=>e(t,l)||Mn.comparator(t.key,l.key):(t,l)=>Mn.comparator(t.key,l.key),this.keyedMap=Au(),this.sortedSet=new ii(this.comparator)}static emptySet(e){return new id(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,l)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof id)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,g=l.getNext().key;if(!h.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const l=new id;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=t,l}}class zh{constructor(){this.Cu=new ii(Mn.comparator)}track(e){const t=e.doc.key,l=this.Cu.get(t);l?0!==e.type&&3===l.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==l.type?this.Cu=this.Cu.insert(t,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.Cu=this.Cu.remove(t):1===e.type&&2===l.type?this.Cu=this.Cu.insert(t,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Pn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,l)=>{e.push(l)}),e}}class zd{constructor(e,t,l,h,g,E,k,Y,se){this.query=e,this.docs=t,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=g,this.fromCache=E,this.syncStateChanged=k,this.excludesMetadataChanges=Y,this.hasCachedResults=se}static fromInitialDocuments(e,t,l,h,g){const E=[];return t.forEach(k=>{E.push({type:0,doc:k})}),new zd(e,t,id.emptySet(t),E,l,h,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,l=e.docChanges;if(t.length!==l.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==l[h].type||!t[h].doc.isEqual(l[h].doc))return!1;return!0}}class vg{constructor(){this.Nu=void 0,this.listeners=[]}}class J_{constructor(){this.queries=new Ba(e=>jn(e),wn),this.onlineState="Unknown",this.ku=new Set}}function _g(s,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,y.Z)(function*(s,e){const t=en(s),l=e.query;let h=!1,g=t.queries.get(l);if(g||(h=!0,g=new vg),h)try{g.Nu=yield t.onListen(l)}catch(E){const k=sp(E,`Initialization of query '${gr(e.query)}' failed`);return void e.onError(k)}t.queries.set(l,g),g.listeners.push(e),e.Mu(t.onlineState),g.Nu&&e.$u(g.Nu)&&Qm(t)}),Eg.apply(this,arguments)}function wg(s,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,y.Z)(function*(s,e){const t=en(s),l=e.query;let h=!1;const g=t.queries.get(l);if(g){const E=g.listeners.indexOf(e);E>=0&&(g.listeners.splice(E,1),h=0===g.listeners.length)}if(h)return t.queries.delete(l),t.onUnlisten(l)}),Ig.apply(this,arguments)}function Zm(s,e){const t=en(s);let l=!1;for(const h of e){const E=t.queries.get(h.query);if(E){for(const k of E.listeners)k.$u(h)&&(l=!0);E.Nu=h}}l&&Qm(t)}function e0(s,e,t){const l=en(s),h=l.queries.get(e);if(h)for(const g of h.listeners)g.onError(t);l.queries.delete(e)}function Qm(s){s.ku.forEach(e=>{e.next()})}class Xm{constructor(e,t,l){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=l||{}}$u(e){if(!this.options.includeMetadataChanges){const l=[];for(const h of e.docChanges)3!==h.type&&l.push(h);e=new zd(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Jm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Pv{constructor(e){this.serializer=e}rr(e){return Jl(this.serializer,e)}ur(e){return e.metadata.exists?Up(this.serializer,e.document,!1):Ui.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Eo(e)}}class ey{constructor(e,t,l){this.ju=e,this.localStore=t,this.serializer=l,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ov(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const l=ni.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(l.get(l.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,l=new Pv(this.serializer);for(const h of e)if(h.metadata.queries){const g=l.rr(h.metadata.name);for(const E of h.metadata.queries){const k=(t.get(E)||si()).add(g);t.set(E,k)}}return t}complete(){var e=this;return(0,y.Z)(function*(){const t=yield function yE(s,e,t,l){return $m.apply(this,arguments)}(e.localStore,new Pv(e.serializer),e.documents,e.ju.id),l=e.Wu(e.documents);for(const h of e.queries)yield ug(e.localStore,h,l.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Ov(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Nv{constructor(e){this.key=e}}class Gd{constructor(e){this.key=e}}class Cg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=si(),this.mutatedKeys=si(),this.tc=Yl(e),this.ec=new id(this.tc)}get nc(){return this.Yu}sc(e,t){const l=t?t.ic:new zh,h=t?t.ec:this.ec;let g=t?t.mutatedKeys:this.mutatedKeys,E=h,k=!1;const Y="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,se="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((Se,tt)=>{const kt=h.get(Se),Zt=Xr(this.query,tt)?tt:null,Cn=!!kt&&this.mutatedKeys.has(kt.key),Hn=!!Zt&&(Zt.hasLocalMutations||this.mutatedKeys.has(Zt.key)&&Zt.hasCommittedMutations);let Kn=!1;kt&&Zt?kt.data.isEqual(Zt.data)?Cn!==Hn&&(l.track({type:3,doc:Zt}),Kn=!0):this.rc(kt,Zt)||(l.track({type:2,doc:Zt}),Kn=!0,(Y&&this.tc(Zt,Y)>0||se&&this.tc(Zt,se)<0)&&(k=!0)):!kt&&Zt?(l.track({type:0,doc:Zt}),Kn=!0):kt&&!Zt&&(l.track({type:1,doc:kt}),Kn=!0,(Y||se)&&(k=!0)),Kn&&(Zt?(E=E.add(Zt),g=Hn?g.add(Se):g.delete(Se)):(E=E.delete(Se),g=g.delete(Se)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Se="F"===this.query.limitType?E.last():E.first();E=E.delete(Se.key),g=g.delete(Se.key),l.track({type:1,doc:Se})}return{ec:E,ic:l,zi:k,mutatedKeys:g}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,l){const h=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const g=e.ic.xu();g.sort((se,Se)=>function(tt,kt){const Zt=Cn=>{switch(Cn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pn()}};return Zt(tt)-Zt(kt)}(se.type,Se.type)||this.tc(se.doc,Se.doc)),this.oc(l);const E=t?this.uc():[],k=0===this.Zu.size&&this.current?1:0,Y=k!==this.Xu;return this.Xu=k,0!==g.length||Y?{snapshot:new zd(this.query,e.ec,h,g,e.mutatedKeys,0===k,Y,!1,!!l&&l.resumeToken.approximateByteSize()>0),cc:E}:{cc:E}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new zh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=si(),this.ec.forEach(l=>{this.ac(l.key)&&(this.Zu=this.Zu.add(l.key))});const t=[];return e.forEach(l=>{this.Zu.has(l)||t.push(new Gd(l))}),this.Zu.forEach(l=>{e.has(l)||t.push(new Nv(l))}),t}hc(e){this.Yu=e.ir,this.Zu=si();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return zd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class vE{constructor(e,t,l){this.query=e,this.targetId=t,this.view=l}}class t0{constructor(e){this.key=e,this.fc=!1}}class hl{constructor(e,t,l,h,g,E){this.localStore=e,this.remoteStore=t,this.eventManager=l,this.sharedClientState=h,this.currentUser=g,this.maxConcurrentLimboResolutions=E,this.dc={},this.wc=new Ba(k=>jn(k),wn),this._c=new Map,this.mc=new Set,this.gc=new ii(Mn.comparator),this.yc=new Map,this.Ic=new Wf,this.Tc={},this.Ec=new Map,this.Ac=Pu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function n0(s,e){return op.apply(this,arguments)}function op(){return op=(0,y.Z)(function*(s,e){const t=Kd(s);let l,h;const g=t.wc.get(e);if(g)l=g.targetId,t.sharedClientState.addLocalQueryTarget(l),h=g.view.lc();else{const E=yield $d(t.localStore,be(e)),k=t.sharedClientState.addLocalQueryTarget(E.targetId);l=E.targetId,h=yield kv(t,e,l,"current"===k,E.resumeToken),t.isPrimaryClient&&np(t.remoteStore,E)}return h}),op.apply(this,arguments)}function kv(s,e,t,l,h){return ap.apply(this,arguments)}function ap(){return ap=(0,y.Z)(function*(s,e,t,l,h){s.Rc=(tt,kt,Zt)=>{return(Cn=(0,y.Z)(function*(Hn,Kn,ui,Oi){let gi=Kn.view.sc(ui);gi.zi&&(gi=yield Yf(Hn.localStore,Kn.query,!1).then(({documents:Fs})=>Kn.view.sc(Fs,gi)));const Fo=Oi&&Oi.targetChanges.get(Kn.targetId),wo=Kn.view.applyChanges(gi,Hn.isPrimaryClient,Fo);return Wd(Hn,Kn.targetId,wo.cc),wo.snapshot}),function(Hn,Kn,ui,Oi){return Cn.apply(this,arguments)})(s,tt,kt,Zt);var Cn};const g=yield Yf(s.localStore,e,!0),E=new Cg(e,g.ir),k=E.sc(g.documents),Y=tc.createSynthesizedTargetChangeForCurrentChange(t,l&&"Offline"!==s.onlineState,h),se=E.applyChanges(k,s.isPrimaryClient,Y);Wd(s,t,se.cc);const Se=new vE(e,t,E);return s.wc.set(e,Se),s._c.has(t)?s._c.get(t).push(e):s._c.set(t,[e]),se.snapshot}),ap.apply(this,arguments)}function r0(s,e){return lp.apply(this,arguments)}function lp(){return lp=(0,y.Z)(function*(s,e){const t=en(s),l=t.wc.get(e),h=t._c.get(l.targetId);if(h.length>1)return t._c.set(l.targetId,h.filter(g=>!wn(g,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(l.targetId),t.sharedClientState.isActiveQueryTarget(l.targetId)||(yield ed(t.localStore,l.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(l.targetId),Vh(t.remoteStore,l.targetId),Gh(t,l.targetId)}).catch(aa))):(Gh(t,l.targetId),yield ed(t.localStore,l.targetId,!0))}),lp.apply(this,arguments)}function ty(){return ty=(0,y.Z)(function*(s,e,t){const l=Og(s);try{const h=yield function(g,E){const k=en(g),Y=Ji.now(),se=E.reduce((kt,Zt)=>kt.add(Zt.key),si());let Se,tt;return k.persistence.runTransaction("Locally write mutations","readwrite",kt=>{let Zt=Ho(),Cn=si();return k.Zi.getEntries(kt,se).next(Hn=>{Zt=Hn,Zt.forEach((Kn,ui)=>{ui.isValidDocument()||(Cn=Cn.add(Kn))})}).next(()=>k.localDocuments.getOverlayedDocuments(kt,Zt)).next(Hn=>{Se=Hn;const Kn=[];for(const ui of E){const Oi=rv(ui,Se.get(ui.key).overlayedDocument);null!=Oi&&Kn.push(new Ql(ui.key,Oi,Rc(Oi.value.mapValue),ws.exists(!0)))}return k.mutationQueue.addMutationBatch(kt,Y,Kn,E)}).next(Hn=>{tt=Hn;const Kn=Hn.applyToLocalDocumentSet(Se,Cn);return k.documentOverlayCache.saveOverlays(kt,Hn.batchId,Kn)})}).then(()=>({batchId:tt.batchId,changes:$a(Se)}))}(l.localStore,e);l.sharedClientState.addPendingMutation(h.batchId),function(g,E,k){let Y=g.Tc[g.currentUser.toKey()];Y||(Y=new ii(Dr)),Y=Y.insert(E,k),g.Tc[g.currentUser.toKey()]=Y}(l,h.batchId,t),yield lc(l,h.changes),yield rd(l.remoteStore)}catch(h){const g=sp(h,"Failed to persist write");t.reject(g)}}),ty.apply(this,arguments)}function Fv(s,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,y.Z)(function*(s,e){const t=en(s);try{const l=yield function mE(s,e){const t=en(s),l=e.snapshotVersion;let h=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const E=t.Zi.newChangeBuffer({trackRemovals:!0});h=t.Ji;const k=[];e.targetChanges.forEach((Se,tt)=>{const kt=h.get(tt);if(!kt)return;k.push(t.Bs.removeMatchingKeys(g,Se.removedDocuments,tt).next(()=>t.Bs.addMatchingKeys(g,Se.addedDocuments,tt)));let Zt=kt.withSequenceNumber(g.currentSequenceNumber);var Cn,Hn,Kn;null!==e.targetMismatches.get(tt)?Zt=Zt.withResumeToken(Gs.EMPTY_BYTE_STRING,cr.min()).withLastLimboFreeSnapshotVersion(cr.min()):Se.resumeToken.approximateByteSize()>0&&(Zt=Zt.withResumeToken(Se.resumeToken,l)),h=h.insert(tt,Zt),Hn=Zt,Kn=Se,(0===(Cn=kt).resumeToken.approximateByteSize()||Hn.snapshotVersion.toMicroseconds()-Cn.snapshotVersion.toMicroseconds()>=3e8||Kn.addedDocuments.size+Kn.modifiedDocuments.size+Kn.removedDocuments.size>0)&&k.push(t.Bs.updateTargetData(g,Zt))});let Y=Ho(),se=si();if(e.documentUpdates.forEach(Se=>{e.resolvedLimboDocuments.has(Se)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(g,Se))}),k.push(og(g,E,e.documentUpdates).next(Se=>{Y=Se.nr,se=Se.sr})),!l.isEqual(cr.min())){const Se=t.Bs.getLastRemoteSnapshotVersion(g).next(tt=>t.Bs.setTargetsMetadata(g,g.currentSequenceNumber,l));k.push(Se)}return St.waitFor(k).next(()=>E.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,Y,se)).next(()=>Y)}).then(g=>(t.Ji=h,g))}(t.localStore,e);e.targetChanges.forEach((h,g)=>{const E=t.yc.get(g);E&&(Zn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?E.fc=!0:h.modifiedDocuments.size>0?Zn(E.fc):h.removedDocuments.size>0&&(Zn(E.fc),E.fc=!1))}),yield lc(t,l,e)}catch(l){yield aa(l)}}),Lv.apply(this,arguments)}function Bv(s,e,t){const l=en(s);if(l.isPrimaryClient&&0===t||!l.isPrimaryClient&&1===t){const h=[];l.wc.forEach((g,E)=>{const k=E.view.Mu(e);k.snapshot&&h.push(k.snapshot)}),function(g,E){const k=en(g);k.onlineState=E;let Y=!1;k.queries.forEach((se,Se)=>{for(const tt of Se.listeners)tt.Mu(E)&&(Y=!0)}),Y&&Qm(k)}(l.eventManager,e),h.length&&l.dc.nu(h),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function $v(s,e,t){return ny.apply(this,arguments)}function ny(){return ny=(0,y.Z)(function*(s,e,t){const l=en(s);l.sharedClientState.updateQueryState(e,"rejected",t);const h=l.yc.get(e),g=h&&h.key;if(g){let E=new ii(Mn.comparator);E=E.insert(g,Ui.newNoDocument(g,cr.min()));const k=si().add(g),Y=new Tf(cr.min(),new Map,new ii(Dr),E,k);yield Fv(l,Y),l.gc=l.gc.remove(g),l.yc.delete(e),ac(l)}else yield ed(l.localStore,e,!1).then(()=>Gh(l,e,t)).catch(aa)}),ny.apply(this,arguments)}function o0(s,e){return ry.apply(this,arguments)}function ry(){return ry=(0,y.Z)(function*(s,e){const t=en(s),l=e.batch.batchId;try{const h=yield function sg(s,e){const t=en(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=e.batch.keys(),g=t.Zi.newChangeBuffer({trackRemovals:!0});return function(E,k,Y,se){const Se=Y.batch,tt=Se.keys();let kt=St.resolve();return tt.forEach(Zt=>{kt=kt.next(()=>se.getEntry(k,Zt)).next(Cn=>{const Hn=Y.docVersions.get(Zt);Zn(null!==Hn),Cn.version.compareTo(Hn)<0&&(Se.applyToRemoteDocument(Cn,Y),Cn.isValidDocument()&&(Cn.setReadTime(Y.commitVersion),se.addEntry(Cn)))})}),kt.next(()=>E.mutationQueue.removeMutationBatch(k,Se))}(t,l,e,g).next(()=>g.apply(l)).next(()=>t.mutationQueue.performConsistencyCheck(l)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(l,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(E){let k=si();for(let Y=0;Y<E.mutationResults.length;++Y)E.mutationResults[Y].transformResults.length>0&&(k=k.add(E.batch.mutations[Y].key));return k}(e))).next(()=>t.localDocuments.getDocuments(l,h))})}(t.localStore,e);bg(t,l,null),sy(t,l),t.sharedClientState.updateMutationState(l,"acknowledged"),yield lc(t,h)}catch(h){yield aa(h)}}),ry.apply(this,arguments)}function a0(s,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,y.Z)(function*(s,e,t){const l=en(s);try{const h=yield function(g,E){const k=en(g);return k.persistence.runTransaction("Reject batch","readwrite-primary",Y=>{let se;return k.mutationQueue.lookupMutationBatch(Y,E).next(Se=>(Zn(null!==Se),se=Se.keys(),k.mutationQueue.removeMutationBatch(Y,Se))).next(()=>k.mutationQueue.performConsistencyCheck(Y)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(Y,se,E)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Y,se)).next(()=>k.localDocuments.getDocuments(Y,se))})}(l.localStore,e);bg(l,e,t),sy(l,e),l.sharedClientState.updateMutationState(e,"rejected",t),yield lc(l,h)}catch(h){yield aa(h)}}),iy.apply(this,arguments)}function up(){return up=(0,y.Z)(function*(s,e){const t=en(s);cl(t.remoteStore)||dn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(g){const E=en(g);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>E.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===l)return void e.resolve();const h=t.Ec.get(l)||[];h.push(e),t.Ec.set(l,h)}catch(l){const h=sp(l,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),up.apply(this,arguments)}function sy(s,e){(s.Ec.get(e)||[]).forEach(t=>{t.resolve()}),s.Ec.delete(e)}function bg(s,e,t){const l=en(s);let h=l.Tc[l.currentUser.toKey()];if(h){const g=h.get(e);g&&(t?g.reject(t):g.resolve(),h=h.remove(e)),l.Tc[l.currentUser.toKey()]=h}}function Gh(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const l of s._c.get(e))s.wc.delete(l),t&&s.dc.Pc(l,t);s._c.delete(e),s.isPrimaryClient&&s.Ic.Is(e).forEach(l=>{s.Ic.containsKey(l)||Dg(s,l)})}function Dg(s,e){s.mc.delete(e.path.canonicalString());const t=s.gc.get(e);null!==t&&(Vh(s.remoteStore,t),s.gc=s.gc.remove(e),s.yc.delete(t),ac(s))}function Wd(s,e,t){for(const l of t)l instanceof Nv?(s.Ic.addReference(l.key,e),Sg(s,l)):l instanceof Gd?(dn("SyncEngine","Document no longer in limbo: "+l.key),s.Ic.removeReference(l.key,e),s.Ic.containsKey(l.key)||Dg(s,l.key)):Pn()}function Sg(s,e){const t=e.key,l=t.path.canonicalString();s.gc.get(t)||s.mc.has(l)||(dn("SyncEngine","New document in limbo: "+t),s.mc.add(l),ac(s))}function ac(s){for(;s.mc.size>0&&s.gc.size<s.maxConcurrentLimboResolutions;){const e=s.mc.values().next().value;s.mc.delete(e);const t=new Mn(ni.fromString(e)),l=s.Ac.next();s.yc.set(l,new t0(t)),s.gc=s.gc.insert(t,l),np(s.remoteStore,new ja(be(Zu(t.path)),l,"TargetPurposeLimboResolution",ee.ct))}}function lc(s,e,t){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,y.Z)(function*(s,e,t){const l=en(s),h=[],g=[],E=[];var k;l.wc.isEmpty()||(l.wc.forEach((k,Y)=>{E.push(l.Rc(Y,e,t).then(se=>{if((se||t)&&l.isPrimaryClient&&l.sharedClientState.updateQueryState(Y.targetId,null!=se&&se.fromCache?"not-current":"current"),se){h.push(se);const Se=xh.Li(Y.targetId,se);g.push(Se)}}))}),yield Promise.all(E),l.dc.nu(h),yield(k=(0,y.Z)(function*(Y,se){const Se=en(Y);try{yield Se.persistence.runTransaction("notifyLocalViewChanges","readwrite",tt=>St.forEach(se,kt=>St.forEach(kt.Fi,Zt=>Se.persistence.referenceDelegate.addReference(tt,kt.targetId,Zt)).next(()=>St.forEach(kt.Bi,Zt=>Se.persistence.referenceDelegate.removeReference(tt,kt.targetId,Zt)))))}catch(tt){if(!ts(tt))throw tt;dn("LocalStore","Failed to update sequence numbers: "+tt)}for(const tt of se){const kt=tt.targetId;if(!tt.fromCache){const Zt=Se.Ji.get(kt),Hn=Zt.withLastLimboFreeSnapshotVersion(Zt.snapshotVersion);Se.Ji=Se.Ji.insert(kt,Hn)}}}),function(Y,se){return k.apply(this,arguments)})(l.localStore,g))}),Tg.apply(this,arguments)}function Vv(s,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,y.Z)(function*(s,e){const t=en(s);if(!t.currentUser.isEqual(e)){dn("SyncEngine","User change. New user:",e.toKey());const l=yield Nh(t.localStore,e);t.currentUser=e,(h=t).Ec.forEach(E=>{E.forEach(k=>{k.reject(new hn(Vt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Ec.clear(),t.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield lc(t,l.er)}var h}),Ag.apply(this,arguments)}function Mg(s,e){const t=en(s),l=t.yc.get(e);if(l&&l.fc)return si().add(l.key);{let h=si();const g=t._c.get(e);if(!g)return h;for(const E of g){const k=t.wc.get(E);h=h.unionWith(k.view.nc)}return h}}function Wh(s,e){return ru.apply(this,arguments)}function ru(){return ru=(0,y.Z)(function*(s,e){const t=en(s),l=yield Yf(t.localStore,e.query,!0),h=e.view.hc(l);return t.isPrimaryClient&&Wd(t,e.targetId,h.cc),h}),ru.apply(this,arguments)}function Uv(s,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,y.Z)(function*(s,e){const t=en(s);return gv(t.localStore,e).then(l=>lc(t,l))}),Rg.apply(this,arguments)}function oy(s,e,t,l){return ay.apply(this,arguments)}function ay(){return ay=(0,y.Z)(function*(s,e,t,l){const h=en(s),g=yield function(E,k){const Y=en(E),se=en(Y.mutationQueue);return Y.persistence.runTransaction("Lookup mutation documents","readonly",Se=>se.Sn(Se,k).next(tt=>tt?Y.localDocuments.getDocuments(Se,tt):St.resolve(null)))}(h.localStore,e);var k;null!==g?("pending"===t?yield rd(h.remoteStore):"acknowledged"===t||"rejected"===t?(bg(h,e,l||null),sy(h,e),k=e,en(en(h.localStore).mutationQueue).Cn(k)):Pn(),yield lc(h,g)):dn("SyncEngine","Cannot apply mutation batch with id: "+e)}),ay.apply(this,arguments)}function ks(){return ks=(0,y.Z)(function*(s,e){const t=en(s);if(Kd(t),Og(t),!0===e&&!0!==t.vc){const l=t.sharedClientState.getAllActiveQueryTargets(),h=yield Br(t,l.toArray());t.vc=!0,yield Hh(t.remoteStore,!0);for(const g of h)np(t.remoteStore,g)}else if(!1===e&&!1!==t.vc){const l=[];let h=Promise.resolve();t._c.forEach((g,E)=>{t.sharedClientState.isLocalQueryTarget(E)?l.push(E):h=h.then(()=>(Gh(t,E),ed(t.localStore,E,!0))),Vh(t.remoteStore,E)}),yield h,yield Br(t,l),function(g){const E=en(g);E.yc.forEach((k,Y)=>{Vh(E.remoteStore,Y)}),E.Ic.Ts(),E.yc=new Map,E.gc=new ii(Mn.comparator)}(t),t.vc=!1,yield Hh(t.remoteStore,!1)}}),ks.apply(this,arguments)}function Br(s,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,y.Z)(function*(s,e,t){const l=en(s),h=[],g=[];for(const E of e){let k;const Y=l._c.get(E);if(Y&&0!==Y.length){k=yield $d(l.localStore,be(Y[0]));for(const se of Y){const Se=l.wc.get(se),tt=yield Wh(l,Se);tt.snapshot&&g.push(tt.snapshot)}}else{const se=yield lg(l.localStore,E);k=yield $d(l.localStore,se),yield kv(l,xg(se),E,!1,k.resumeToken)}h.push(k)}return l.dc.nu(g),h}),Kh.apply(this,arguments)}function xg(s){return Pp(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Pg(s){const e=en(s);return en(en(e.localStore).persistence).$i()}function cp(s,e,t,l){return qh.apply(this,arguments)}function qh(){return qh=(0,y.Z)(function*(s,e,t,l){const h=en(s);if(h.vc)return void dn("SyncEngine","Ignoring unexpected query state notification.");const g=h._c.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const E=yield gv(h.localStore,Zo(g[0])),k=Tf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gs.EMPTY_BYTE_STRING);yield lc(h,E,k);break}case"rejected":yield ed(h.localStore,e,!0),Gh(h,e,l);break;default:Pn()}}),qh.apply(this,arguments)}function _E(s,e,t){return ly.apply(this,arguments)}function ly(){return ly=(0,y.Z)(function*(s,e,t){const l=Kd(s);if(l.vc){for(const h of e){if(l._c.has(h)){dn("SyncEngine","Adding an already active target "+h);continue}const g=yield lg(l.localStore,h),E=yield $d(l.localStore,g);yield kv(l,xg(g),E.targetId,!1,E.resumeToken),np(l.remoteStore,E)}for(const h of t)l._c.has(h)&&(yield ed(l.localStore,h,!1).then(()=>{Vh(l.remoteStore,h),Gh(l,h)}).catch(aa))}}),ly.apply(this,arguments)}function Kd(s){const e=en(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$v.bind(null,e),e.dc.nu=Zm.bind(null,e.eventManager),e.dc.Pc=e0.bind(null,e.eventManager),e}function Og(s){const e=en(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a0.bind(null,e),e}class dp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,y.Z)(function*(){t.serializer=Bh(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Oh(this.persistence,new qf,e.initialUser,this.serializer)}createPersistence(e){return new Fm(Lm.zs,this.serializer)}createSharedClientState(e){return new Ev}terminate(){var e=this;return(0,y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ng extends dp{constructor(e,t,l){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,l=this;return(0,y.Z)(function*(){yield t().call(l,e),yield l.Vc.initialize(l,e),yield Og(l.Vc.syncEngine),yield rd(l.Vc.remoteStore),yield l.persistence.Ii(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(),l.indexBackfillerScheduler&&!l.indexBackfillerScheduler.started&&l.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Oh(this.persistence,new qf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new zo(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const l=new F(t,this.persistence);return new D(e.asyncQueue,l)}createPersistence(e){const t=Bd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new Bm(this.synchronizeTabs,t,e.clientId,l,e.asyncQueue,bv(),ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ev}}class Yh extends Ng{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,l=this;return(0,y.Z)(function*(){yield t().call(l,e);const h=l.Vc.syncEngine;l.sharedClientState instanceof _v&&(l.sharedClientState.syncEngine={jr:oy.bind(null,h),zr:cp.bind(null,h),Wr:_E.bind(null,h),$i:Pg.bind(null,h),Qr:Uv.bind(null,h)},yield l.sharedClientState.start()),yield l.persistence.Ii(function(){var g=(0,y.Z)(function*(E){yield function l0(s,e){return ks.apply(this,arguments)}(l.Vc.syncEngine,E),l.gcScheduler&&(E&&!l.gcScheduler.started?l.gcScheduler.start():E||l.gcScheduler.stop()),l.indexBackfillerScheduler&&(E&&!l.indexBackfillerScheduler.started?l.indexBackfillerScheduler.start():E||l.indexBackfillerScheduler.stop())});return function(E){return g.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bv();if(!_v.D(t))throw new hn(Vt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=Bd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _v(t,e.asyncQueue,l,e.clientId,e.initialUser)}}class Zh{initialize(e,t){var l=this;return(0,y.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(t),l.remoteStore=l.createRemoteStore(t),l.eventManager=l.createEventManager(t),l.syncEngine=l.createSyncEngine(t,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=h=>Bv(l.syncEngine,h,1),l.remoteStore.remoteSyncer.handleCredentialChange=Vv.bind(null,l.syncEngine),yield Hh(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new J_}createDatastore(e){const t=Bh(e.databaseInfo.databaseId),l=new Cv(e.databaseInfo);return new Ud(e.authCredentials,e.appCheckCredentials,l,t)}createRemoteStore(e){return t=this.localStore,l=this.datastore,h=e.asyncQueue,g=k=>Bv(this.syncEngine,k,0),E=wv.D()?new wv:new Jf,new dg(t,l,h,g,E);var t,l,h,g,E}createSyncEngine(e,t){return function(l,h,g,E,k,Y,se){const Se=new hl(l,h,g,E,k,Y);return se&&(Se.vc=!0),Se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,y.Z)(function*(t){const l=en(t);dn("RemoteStore","RemoteStore shutting down."),l.vu.add(5),yield jd(l),l.Pu.shutdown(),l.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cy(s,e=10240){let t=0;return{read:()=>(0,y.Z)(function*(){if(t<s.byteLength){const l={value:s.slice(t,t+e),done:!1};return t+=e,l}return{done:!0}})(),cancel:()=>(0,y.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Bu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jv{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new vi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(l=>{l&&l.Qu()?this.metadata.resolve(l.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.Gu)}`))},l=>this.metadata.reject(l))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,y.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,y.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,y.Z)(function*(){const t=yield e.kc();if(null===t)return null;const l=e.xc.decode(t),h=Number(l);isNaN(h)&&e.Mc(`length string (${l}) is not valid number`);const g=yield e.$c(h);return new Jm(JSON.parse(g),t.length+h)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,y.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),l})()}$c(e){var t=this;return(0,y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const l=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),l})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,y.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const l=new Uint8Array(e.buffer.length+t.value.length);l.set(e.buffer),l.set(t.value,e.buffer.length),e.buffer=l}return t.done})()}}class Hv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new hn(Vt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(h=(0,y.Z)(function*(g,E){const k=en(g),Y=Mu(k.serializer)+"/documents",se={documents:E.map(Zt=>Pf(k.serializer,Zt))},Se=yield k.vo("BatchGetDocuments",Y,se,E.length),tt=new Map;Se.forEach(Zt=>{const Cn=function av(s,e){return"found"in e?function(t,l){Zn(!!l.found);const h=Jl(t,l.found.name),g=Eo(l.found.updateTime),E=l.found.createTime?Eo(l.found.createTime):cr.min(),k=new Ur({mapValue:{fields:l.found.fields}});return Ui.newFoundDocument(h,g,E,k)}(s,e):"missing"in e?function(t,l){Zn(!!l.missing),Zn(!!l.readTime);const h=Jl(t,l.missing),g=Eo(l.readTime);return Ui.newNoDocument(h,g)}(s,e):Pn()}(k.serializer,Zt);tt.set(Cn.key.toString(),Cn)});const kt=[];return E.forEach(Zt=>{const Cn=tt.get(Zt.toString());Zn(!!Cn),kt.push(Cn)}),kt}),function(g,E){return h.apply(this,arguments)})(t.datastore,e);var h;return l.forEach(h=>t.recordVersion(h)),l})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ea(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var l;e.mutations.forEach(l=>{t.delete(l.key.toString())}),t.forEach((l,h)=>{const g=Mn.fromPath(h);e.mutations.push(new Ju(g,e.precondition(g)))}),yield(l=(0,y.Z)(function*(h,g){const E=en(h),k=Mu(E.serializer)+"/documents",Y={writes:g.map(se=>zc(E.serializer,se))};yield E.Io("Commit",k,Y)}),function(h,g){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pn();t=cr.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!t.isEqual(l))throw new hn(Vt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cr.min())?ws.exists(!1):ws.updateTime(t):ws.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cr.min()))throw new hn(Vt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ws.updateTime(t)}return ws.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uc{constructor(e,t,l,h,g){this.asyncQueue=e,this.datastore=t,this.options=l,this.updateFunction=h,this.deferred=g,this.Bc=l.maxAttempts,this.qo=new tp(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,y.Z)(function*(){const t=new Hv(e.datastore),l=e.qc(t);l&&l.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(g=>{e.Uc(g)}))}).catch(h=>{e.Uc(h)})}))}qc(e){try{const t=this.updateFunction(e);return!Te(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xl(t)}return!1}}class hp{constructor(e,t,l,h){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=l,this.databaseInfo=h,this.user=fr.UNAUTHENTICATED,this.clientId=Gu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var E=(0,y.Z)(function*(k){dn("FirestoreClient","Received user=",k.uid),yield g.authCredentialListener(k),g.user=k});return function(k){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(l,E=>(dn("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hn(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(l){const h=sp(l,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Jo(s,e){return dy.apply(this,arguments)}function dy(){return dy=(0,y.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),dn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield s.getConfiguration();yield e.initialize(t);let l=t.initialUser;s.setCredentialChangeListener(function(){var h=(0,y.Z)(function*(g){l.isEqual(g)||(yield Nh(e.localStore,g),l=g)});return function(g){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}),dy.apply(this,arguments)}function hy(s,e){return fy.apply(this,arguments)}function fy(){return fy=(0,y.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const t=yield py(s);dn("FirestoreClient","Initializing OnlineComponentProvider");const l=yield s.getConfiguration();yield e.initialize(t,l),s.setCredentialChangeListener(h=>xv(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,g)=>xv(e.remoteStore,g)),s._onlineComponents=e}),fy.apply(this,arguments)}function zv(s){return"FirebaseError"===s.name?s.code===Vt.FAILED_PRECONDITION||s.code===Vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code}function py(s){return gy.apply(this,arguments)}function gy(){return gy=(0,y.Z)(function*(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){dn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jo(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!zv(t))throw t;zs("Error using user provided cache. Falling back to memory cache: "+t),yield Jo(s,new dp)}}else dn("FirestoreClient","Using default OfflineComponentProvider"),yield Jo(s,new dp);return s._offlineComponents}),gy.apply(this,arguments)}function qd(s){return fp.apply(this,arguments)}function fp(){return fp=(0,y.Z)(function*(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(dn("FirestoreClient","Using user provided OnlineComponentProvider"),yield hy(s,s._uninitializedComponentsProvider._online)):(dn("FirestoreClient","Using default OnlineComponentProvider"),yield hy(s,new Zh))),s._onlineComponents}),fp.apply(this,arguments)}function Qh(s){return py(s).then(e=>e.persistence)}function Xh(s){return py(s).then(e=>e.localStore)}function Tl(s){return qd(s).then(e=>e.remoteStore)}function kg(s){return qd(s).then(e=>e.syncEngine)}function Yd(s){return my.apply(this,arguments)}function my(){return my=(0,y.Z)(function*(s){const e=yield qd(s),t=e.eventManager;return t.onListen=n0.bind(null,e.syncEngine),t.onUnlisten=r0.bind(null,e.syncEngine),t}),my.apply(this,arguments)}function yy(s,e,t={}){const l=new vi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,g,E,k,Y){const se=new Bu({next:tt=>{g.enqueueAndForget(()=>wg(h,Se));const kt=tt.docs.has(E);!kt&&tt.fromCache?Y.reject(new hn(Vt.UNAVAILABLE,"Failed to get document because the client is offline.")):kt&&tt.fromCache&&k&&"server"===k.source?Y.reject(new hn(Vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Y.resolve(tt)},error:tt=>Y.reject(tt)}),Se=new Xm(Zu(E.path),se,{includeMetadataChanges:!0,Ku:!0});return _g(h,Se)}(yield Yd(s),s.asyncQueue,e,t,l)})),l.promise}function Wv(s,e,t={}){const l=new vi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,g,E,k,Y){const se=new Bu({next:tt=>{g.enqueueAndForget(()=>wg(h,Se)),tt.fromCache&&"server"===k.source?Y.reject(new hn(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Y.resolve(tt)},error:tt=>Y.reject(tt)}),Se=new Xm(E,se,{includeMetadataChanges:!0,Ku:!0});return _g(h,Se)}(yield Yd(s),s.asyncQueue,e,t,l)})),l.promise}function Ha(s){const e={};return void 0!==s.timeoutSeconds&&(e.timeoutSeconds=s.timeoutSeconds),e}const Bg=new Map;function Zd(s,e,t){if(!t)throw new hn(Vt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function vy(s,e,t,l){if(!0===e&&!0===l)throw new hn(Vt.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function iu(s){if(!Mn.isDocumentKey(s))throw new hn(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Qd(s){if(Mn.isDocumentKey(s))throw new hn(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function No(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(t=s).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof s?"a function":Pn()}function di(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new hn(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=No(s);throw new hn(Vt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function pp(s,e){if(e<=0)throw new hn(Vt.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class fl{constructor(e){var t,l;if(void 0===e.host){if(void 0!==e.ssl)throw new hn(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hn(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Ha(null!==(l=e.experimentalLongPollingOptions)&&void 0!==l?l:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new hn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new hn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new hn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class da{constructor(e,t,l,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=l,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hn(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hn(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Za;switch(t.type){case"firstParty":return new _l(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new hn(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bg.get(e);t&&(dn("ComponentProvider","Removing Datastore"),Bg.delete(e),t.terminate())}(this),Promise.resolve()}}function cc(s,e,t,l={}){var h;const g=(s=di(s,da))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&zs("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),l.mockUserToken){let E,k;if("string"==typeof l.mockUserToken)E=l.mockUserToken,k=fr.MOCK_USER;else{E=(0,De.Sg)(l.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const Y=l.mockUserToken.sub||l.mockUserToken.user_id;if(!Y)throw new hn(Vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new fr(Y)}s._authCredentials=new Qa(new Ya(E,k))}}class Is{constructor(e,t,l){this.converter=t,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Is(this.firestore,e,this._key)}}class uo{constructor(e,t,l){this.converter=t,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class ha extends uo{constructor(e,t,l){super(e,t,Zu(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Is(this.firestore,null,new Mn(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function Jh(s,e,...t){if(s=(0,De.m9)(s),Zd("collection","path",e),s instanceof da){const l=ni.fromString(e,...t);return Qd(l),new ha(s,null,l)}{if(!(s instanceof Is||s instanceof ha))throw new hn(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=s._path.child(ni.fromString(e,...t));return Qd(l),new ha(s.firestore,null,l)}}function ko(s,e){if(s=di(s,da),Zd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hn(Vt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new uo(s,null,(t=e,new sl(ni.emptyPath(),t)));var t}function $u(s,e,...t){if(s=(0,De.m9)(s),1===arguments.length&&(e=Gu.A()),Zd("doc","path",e),s instanceof da){const l=ni.fromString(e,...t);return iu(l),new Is(s,null,new Mn(l))}{if(!(s instanceof Is||s instanceof ha))throw new hn(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=s._path.child(ni.fromString(e,...t));return iu(l),new Is(s.firestore,s instanceof ha?s.converter:null,new Mn(l))}}function ef(s,e){return s=(0,De.m9)(s),e=(0,De.m9)(e),(s instanceof Is||s instanceof ha)&&(e instanceof Is||e instanceof ha)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Al(s,e){return s=(0,De.m9)(s),e=(0,De.m9)(e),s instanceof uo&&e instanceof uo&&s.firestore===e.firestore&&wn(s._query,e._query)&&s.converter===e.converter}class qv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new tp(this,"async_queue_retry"),this.Xc=()=>{const t=ep();t&&dn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=ep();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new vi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,y.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ts(t))throw t;dn("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(l=>{throw this.Wc=l,this.Hc=!1,Yr("INTERNAL UNHANDLED ERROR: ",function(g){let E=g.message||"";return g.stack&&(E=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),E}(l)),l}).then(l=>(this.Hc=!1,l))));return this.Gc=t,t}enqueueAfterDelay(e,t,l){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const h=Ym.createAndSchedule(this,e,t,l,g=>this.na(g));return this.zc.push(h),h}Zc(){this.Wc&&Pn()}verifyOperationInProgress(){}sa(){var e=this;return(0,y.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,l)=>t.targetTimeMs-l.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function $g(s){return function(e,t){if("object"!=typeof e||null===e)return!1;const l=e;for(const h of["next","error","complete"])if(h in l&&"function"==typeof l[h])return!0;return!1}(s)}class _y{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,l){this._progressObserver={next:e,error:t,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Yv=-1;class ys extends da{constructor(e,t,l,h){super(e,t,l,h),this.type="firestore",this._queue=new qv,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wy(this),this._firestoreClient.terminate()}}function Ey(s,e){const t="object"==typeof s?s:(0,m.getApp)(),l="string"==typeof s?s:e||"(default)",h=(0,m._getProvider)(t,"firestore").getImmediate({identifier:l});if(!h._initialized){const g=(0,De.P0)("firestore");g&&cc(h,...g)}return h}function co(s){return s._firestoreClient||wy(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function wy(s){var e,t,l;const h=s._freezeSettings(),g=(k=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Mp(s._databaseId,k,s._persistenceKey,(se=h).host,se.ssl,se.experimentalForceLongPolling,se.experimentalAutoDetectLongPolling,Ha(se.experimentalLongPollingOptions),se.useFetchStreams));var k,se;s._firestoreClient=new hp(s._authCredentials,s._appCheckCredentials,s._queue,g),null!==(t=h.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(l=h.cache)&&void 0!==l&&l._onlineComponentProvider&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:h.cache.kind,_offline:h.cache._offlineComponentProvider,_online:h.cache._onlineComponentProvider})}function Ml(s,e){Xv(s=di(s,ys));const t=co(s);if(t._uninitializedComponentsProvider)throw new hn(Vt.FAILED_PRECONDITION,"SDK cache is already specified.");zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const l=s._freezeSettings(),h=new Zh;return Vg(t,h,new Ng(h,l.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Vu(s){Xv(s=di(s,ys));const e=co(s);if(e._uninitializedComponentsProvider)throw new hn(Vt.FAILED_PRECONDITION,"SDK cache is already specified.");zs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings(),l=new Zh;return Vg(e,l,new Yh(l,t.cacheSizeBytes))}function Vg(s,e,t){const l=new vi;return s.asyncQueue.enqueue((0,y.Z)(function*(){try{yield Jo(s,t),yield hy(s,e),l.resolve()}catch(h){const g=h;if(!zv(g))throw g;zs("Error enabling indexeddb cache. Falling back to memory cache: "+g),l.reject(g)}})).then(()=>l.promise)}function IE(s){if(s._initialized&&!s._terminated)throw new hn(Vt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{yield(t=(0,y.Z)(function*(l){if(!us.D())return Promise.resolve();const h=l+"main";yield us.delete(h)}),function(l){return t.apply(this,arguments)})(Bd(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function h0(s){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function Lu(s,e){return up.apply(this,arguments)}(yield kg(e),t)})),t.promise}(co(s=di(s,ys)))}function tf(s){return function Fg(s){return s.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Qh(s),t=yield Tl(s);return e.setNetworkEnabled(!0),function(l){const h=en(l);return h.vu.delete(0),Dl(h)}(t)}))}(co(s=di(s,ys)))}function Ug(s){return function c0(s){return s.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Qh(s),t=yield Tl(s);return e.setNetworkEnabled(!1),(l=(0,y.Z)(function*(h){const g=en(h);g.vu.add(0),yield jd(g),g.bu.set("Offline")}),function(h){return l.apply(this,arguments)})(t);var l}))}(co(s=di(s,ys)))}function CE(s,e){const t=co(s=di(s,ys)),l=new _y;return function Kv(s,e,t,l){const h=function(g,E){let k;return k="string"==typeof g?sv().encode(g):g,Y=function(Y,se){if(Y instanceof Uint8Array)return cy(Y,void 0);if(Y instanceof ArrayBuffer)return cy(new Uint8Array(Y),void 0);if(Y instanceof ReadableStream)return Y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new jv(Y,E);var Y}(t,Bh(e));s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){!function u0(s,e,t){const l=en(s);var h;(h=(0,y.Z)(function*(g,E,k){try{const Y=yield E.getMetadata();if(yield function(kt,Zt){const Cn=en(kt),Hn=Eo(Zt.createTime);return Cn.persistence.runTransaction("hasNewerBundle","readonly",Kn=>Cn.qs.getBundleMetadata(Kn,Zt.id)).then(Kn=>!!Kn&&Kn.createTime.compareTo(Hn)>=0)}(g.localStore,Y))return yield E.close(),k._completeWith({taskState:"Success",documentsLoaded:(kt=Y).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);k._updateProgress(Ov(Y));const se=new ey(Y,g.localStore,E.serializer);let Se=yield E.bc();for(;Se;){const kt=yield se.zu(Se);kt&&k._updateProgress(kt),Se=yield E.bc()}const tt=yield se.complete();return yield lc(g,tt.Ju,void 0),yield function(kt,Zt){const Cn=en(kt);return Cn.persistence.runTransaction("Save bundle","readwrite",Hn=>Cn.qs.saveBundleMetadata(Hn,Zt))}(g.localStore,Y),k._completeWith(tt.progress),Promise.resolve(tt.Hu)}catch(Y){return zs("SyncEngine",`Loading bundle failed with ${Y}`),k._failWith(Y),Promise.resolve(new Set)}var kt}),function(g,E,k){return h.apply(this,arguments)})(l,e,t).then(h=>{l.sharedClientState.notifyBundleLoaded(h)})}(yield kg(s),h,l)}))}(t,s._databaseId,e,l),l}function Qv(s,e){return function wE(s,e){return s.asyncQueue.enqueue((0,y.Z)(function*(){return function(t,l){const h=en(t);return h.persistence.runTransaction("Get named query","readonly",g=>h.qs.getNamedQuery(g,l))}(yield Xh(s),e)}))}(co(s=di(s,ys)),e).then(t=>t?new uo(s,null,t.query):null)}function Xv(s){if(s._initialized||s._terminated)throw new hn(Vt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Gs.fromBase64String(e))}catch(t){throw new hn(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(Gs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hn(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ou{constructor(e){this._methodName=e}}class Uu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hn(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hn(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dr(this._lat,e._lat)||Dr(this._long,e._long)}}const Jv=/^__.*__$/;class p0{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return null!==this.fieldMask?new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class Xd{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function e_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pn()}}class Hg{constructor(e,t,l,h,g,E){this.settings=e,this.databaseId=t,this.serializer=l,this.ignoreUndefinedProperties=h,void 0===g&&this.ua(),this.fieldTransforms=g||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.aa({path:l,la:!1});return h.fa(e),h}da(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.aa({path:l,la:!1});return h.ua(),h}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return mp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(e_(this.ca)&&Jv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ba{constructor(e,t,l){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=l||Bh(e)}ya(e,t,l,h=!1){return new Hg({ca:e,methodName:t,ga:l,path:es.emptyPath(),la:!1,ma:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(s){const e=s._freezeSettings(),t=Bh(s._databaseId);return new ba(s._databaseId,!!e.ignoreUndefinedProperties,t)}function nf(s,e,t,l,h,g={}){const E=s.ya(g.merge||g.mergeFields?2:0,e,t,h);Gg("Data must be an object, but it was:",E,l);const k=hc(l,E);let Y,se;if(g.merge)Y=new Ei(E.fieldMask),se=E.fieldTransforms;else if(g.mergeFields){const Se=[];for(const tt of g.mergeFields){const kt=sf(e,tt,t);if(!E.contains(kt))throw new hn(Vt.INVALID_ARGUMENT,`Field '${kt}' is specified in your field mask but missing from your input data.`);yp(Se,kt)||Se.push(kt)}Y=new Ei(Se),se=E.fieldTransforms.filter(tt=>Y.covers(tt.field))}else Y=null,se=E.fieldTransforms;return new p0(new Ur(k),Y,se)}class pl extends ou{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pl}}function rf(s,e,t){return new Hg({ca:3,ga:e.settings.ga,methodName:s._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class t_ extends ou{_toFieldTransform(e){return new dh(e.path,new _o)}isEqual(e){return e instanceof t_}}class g0 extends ou{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rf(this,e,!0),l=this.pa.map(g=>sd(g,t)),h=new Zl(l);return new dh(e.path,h)}isEqual(e){return this===e}}class au extends ou{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rf(this,e,!0),l=this.pa.map(g=>sd(g,t)),h=new $c(l);return new dh(e.path,h)}isEqual(e){return this===e}}class Cy extends ou{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Vc(e.serializer,Zy(e.serializer,this.Ia));return new dh(e.path,t)}isEqual(e){return this===e}}function by(s,e,t,l){const h=s.ya(1,e,t);Gg("Data must be an object, but it was:",h,l);const g=[],E=Ur.empty();xa(l,(Y,se)=>{const Se=Wg(e,Y,t);se=(0,De.m9)(se);const tt=h.da(Se);if(se instanceof pl)g.push(Se);else{const kt=sd(se,tt);null!=kt&&(g.push(Se),E.set(Se,kt))}});const k=new Ei(g);return new Xd(E,k,h.fieldTransforms)}function zg(s,e,t,l,h,g){const E=s.ya(1,e,t),k=[sf(e,l,t)],Y=[h];if(g.length%2!=0)throw new hn(Vt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let kt=0;kt<g.length;kt+=2)k.push(sf(e,g[kt])),Y.push(g[kt+1]);const se=[],Se=Ur.empty();for(let kt=k.length-1;kt>=0;--kt)if(!yp(se,k[kt])){const Zt=k[kt];let Cn=Y[kt];Cn=(0,De.m9)(Cn);const Hn=E.da(Zt);if(Cn instanceof pl)se.push(Zt);else{const Kn=sd(Cn,Hn);null!=Kn&&(se.push(Zt),Se.set(Zt,Kn))}}const tt=new Ei(se);return new Xd(Se,tt,E.fieldTransforms)}function n_(s,e,t,l=!1){return sd(t,s.ya(l?4:3,e))}function sd(s,e){if(Dy(s=(0,De.m9)(s)))return Gg("Unsupported field value:",e,s),hc(s,e);if(s instanceof ou)return function(t,l){if(!e_(l.ca))throw l._a(`${t._methodName}() can only be used with update() and set()`);if(!l.path)throw l._a(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,l){const h=[];let g=0;for(const E of t){let k=sd(E,l.wa(g));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),g++}return{arrayValue:{values:h}}}(s,e)}return function(t,l){if(null===(t=(0,De.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zy(l.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Ji.fromDate(t);return{timestampValue:Dd(l.serializer,h)}}if(t instanceof Ji){const h=new Ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dd(l.serializer,h)}}if(t instanceof Uu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:wh(l.serializer,t._byteString)};if(t instanceof Is){const h=l.databaseId,g=t.firestore._databaseId;if(!g.isEqual(h))throw l._a(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:xf(t.firestore._databaseId||l.databaseId,t._key.path)}}throw l._a(`Unsupported field value: ${No(t)}`)}(s,e)}function hc(s,e){const t={};return Pa(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(s,(l,h)=>{const g=sd(h,e.ha(l));null!=g&&(t[l]=g)}),{mapValue:{fields:t}}}function Dy(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Ji||s instanceof Uu||s instanceof Rl||s instanceof Is||s instanceof ou)}function Gg(s,e,t){if(!Dy(t)||"object"!=typeof(l=t)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=No(t);throw e._a("an object"===l?s+" a custom object":s+" "+l)}var l}function sf(s,e,t){if((e=(0,De.m9)(e))instanceof su)return e._internalPath;if("string"==typeof e)return Wg(s,e);throw mp("Field path arguments must be of type string or ",s,!1,void 0,t)}const m0=new RegExp("[~\\*/\\[\\]]");function Wg(s,e,t){if(e.search(m0)>=0)throw mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function mp(s,e,t,l,h){const g=l&&!l.isEmpty(),E=void 0!==h;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let Y="";return(g||E)&&(Y+=" (found",g&&(Y+=` in field ${l}`),E&&(Y+=` in document ${h}`),Y+=")"),new hn(Vt.INVALID_ARGUMENT,k+s+Y)}function yp(s,e){return s.some(t=>t.isEqual(e))}class fc{constructor(e,t,l,h,g){this._firestore=e,this._userDataWriter=t,this._key=l,this._document=h,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Is(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new r_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class r_ extends fc{data(){return super.data()}}function Jd(s,e){return"string"==typeof e?Wg(s,e):e instanceof su?e._internalPath:e._delegate._internalPath}function vp(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new hn(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class af extends _p{}function i_(s,e,...t){let l=[];e instanceof _p&&l.push(e),l=l.concat(t),function(h){const g=h.filter(k=>k instanceof pc).length,E=h.filter(k=>k instanceof Ep).length;if(g>1||g>0&&E>0)throw new hn(Vt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(l);for(const h of l)s=h._apply(s);return s}class Ep extends af{constructor(e,t,l){super(),this._field=e,this._op=t,this._value=l,this.type="where"}static _create(e,t,l){return new Ep(e,t,l)}_apply(e){const t=this._parse(e);return xy(e._query,t),new uo(e.firestore,e.converter,bt(e._query,t))}_parse(e){const t=dc(e.firestore);return function(h,g,E,k,Y,se,Se){let tt;if(Y.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new hn(Vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){u_(Se,se);const kt=[];for(const Zt of Se)kt.push(Ry(k,h,Zt));tt={arrayValue:{values:kt}}}else tt=Ry(k,h,Se)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||u_(Se,se),tt=n_(E,"where",Se,"in"===se||"not-in"===se);return wi.create(Y,se,tt)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function y0(s,e,t){const l=e,h=Jd("where",s);return Ep._create(h,l,t)}class pc extends _p{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pc(e,t)}_parse(e){const t=this._queryConstraints.map(l=>l._parse(e)).filter(l=>l.getFilters().length>0);return 1===t.length?t[0]:ns.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(l,h){let g=l;const E=h.getFlattenedFilters();for(const k of E)xy(g,k),g=bt(g,k)}(e._query,t),new uo(e.firestore,e.converter,bt(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Kg extends af{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Kg(e,t)}_apply(e){const t=function(l,h,g){if(null!==l.startAt)throw new hn(Vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new hn(Vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Fa(h,g);return function(k,Y){if(null===_(k)){const se=I(k);null!==se&&Qg(0,se,Y.field)}}(l,E),E}(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,function(l,h){const g=l.explicitOrderBy.concat([h]);return new sl(l.path,l.collectionGroup,g,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,t))}}function Ty(s,e="asc"){const t=e,l=Jd("orderBy",s);return Kg._create(l,t)}class wp extends af{constructor(e,t,l){super(),this.type=e,this._limit=t,this._limitType=l}static _create(e,t,l){return new wp(e,t,l)}_apply(e){return new uo(e.firestore,e.converter,Ht(e._query,this._limit,this._limitType))}}function Ay(s){return pp("limit",s),wp._create("limit",s,"F")}function qg(s){return pp("limitToLast",s),wp._create("limitToLast",s,"L")}class Yg extends af{constructor(e,t,l){super(),this.type=e,this._docOrFields=t,this._inclusive=l}static _create(e,t,l){return new Yg(e,t,l)}_apply(e){const t=My(e,this.type,this._docOrFields,this._inclusive);return new uo(e.firestore,e.converter,(h=t,new sl((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,h,l.endAt)));var l,h}}function o_(...s){return Yg._create("startAt",s,!0)}function v0(...s){return Yg._create("startAfter",s,!1)}class Zg extends af{constructor(e,t,l){super(),this.type=e,this._docOrFields=t,this._inclusive=l}static _create(e,t,l){return new Zg(e,t,l)}_apply(e){const t=My(e,this.type,this._docOrFields,this._inclusive);return new uo(e.firestore,e.converter,(h=t,new sl((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,h)));var l,h}}function a_(...s){return Zg._create("endBefore",s,!1)}function l_(...s){return Zg._create("endAt",s,!0)}function My(s,e,t,l){if(t[0]=(0,De.m9)(t[0]),t[0]instanceof fc)return function(h,g,E,k,Y){if(!k)throw new hn(Vt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const se=[];for(const Se of ae(h))if(Se.field.isKeyField())se.push(Cl(g,k.key));else{const tt=k.data.field(Se.field);if(cd(tt))throw new hn(Vt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===tt){const kt=Se.field.canonicalString();throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${kt}' (used as the orderBy) does not exist.`)}se.push(tt)}return new rl(se,Y)}(s._query,s.firestore._databaseId,e,t[0]._document,l);{const h=dc(s.firestore);return function(g,E,k,Y,se,Se){const tt=g.explicitOrderBy;if(se.length>tt.length)throw new hn(Vt.INVALID_ARGUMENT,`Too many arguments provided to ${Y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const kt=[];for(let Zt=0;Zt<se.length;Zt++){const Cn=se[Zt];if(tt[Zt].field.isKeyField()){if("string"!=typeof Cn)throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Y}(), but got a ${typeof Cn}`);if(!O(g)&&-1!==Cn.indexOf("/"))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Y}() must be a plain document ID, but '${Cn}' contains a slash.`);const Hn=g.path.child(ni.fromString(Cn));if(!Mn.isDocumentKey(Hn))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Y}() must result in a valid document path, but '${Hn}' is not because it contains an odd number of segments.`);const Kn=new Mn(Hn);kt.push(Cl(E,Kn))}else{const Hn=n_(k,Y,Cn);kt.push(Hn)}}return new rl(kt,Se)}(s._query,s.firestore._databaseId,h,e,t,l)}}function Ry(s,e,t){if("string"==typeof(t=(0,De.m9)(t))){if(""===t)throw new hn(Vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O(e)&&-1!==t.indexOf("/"))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const l=e.path.child(ni.fromString(t));if(!Mn.isDocumentKey(l))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return Cl(s,new Mn(l))}if(t instanceof Is)return Cl(s,t._key);throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${No(t)}.`)}function u_(s,e){if(!Array.isArray(s)||0===s.length)throw new hn(Vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xy(s,e){if(e.isInequality()){const l=I(s),h=e.field;if(null!==l&&!l.isEqual(h))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${l.toString()}' and '${h.toString()}'`);const g=_(s);null!==g&&Qg(0,h,g)}const t=function(l,h){for(const g of l)for(const E of g.getFlattenedFilters())if(h.indexOf(E.op)>=0)return E.op;return null}(s.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new hn(Vt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qg(s,e,t){if(!t.isEqual(e))throw new hn(Vt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Jg{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const l={};return xa(e,(h,g)=>{l[h]=this.convertValue(g,t)}),l}convertGeoPoint(e){return new Uu(qi(e.latitude),qi(e.longitude))}convertArray(e,t){return(e.values||[]).map(l=>this.convertValue(l,t))}convertServerTimestamp(e,t){switch(t){case"previous":const l=wl(e);return null==l?null:this.convertValue(l,t);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const t=Po(e);return new Ji(t.seconds,t.nanos)}convertDocumentKey(e,t){const l=ni.fromString(e);Zn(nc(l));const h=new Na(l.get(1),l.get(3)),g=new Mn(l.popFirst(5));return h.isEqual(t)||Yr(`Document ${g} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function lf(s,e,t){let l;return l=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,l}class _0 extends Jg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Is(this.firestore,null,t)}}class gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ea extends fc{constructor(e,t,l,h,g,E){super(e,t,l,h,E),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const l=this._document.data.field(Jd("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,t.serverTimestamps)}}}class gl extends ea{data(e={}){return super.data(e)}}class od{constructor(e,t,l,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new gc(h.hasPendingWrites,h.fromCache),this.query=l}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(l=>{e.call(t,new gl(this._firestore,this._userDataWriter,l.key,l,new gc(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hn(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let g=0;return l._snapshot.docChanges.map(E=>({type:"added",doc:new gl(l._firestore,l._userDataWriter,E.doc.key,E.doc,new gc(l._snapshot.mutatedKeys.has(E.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:g++}))}{let g=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(E=>h||3!==E.type).map(E=>{const k=new gl(l._firestore,l._userDataWriter,E.doc.key,E.doc,new gc(l._snapshot.mutatedKeys.has(E.doc.key),l._snapshot.fromCache),l.query.converter);let Y=-1,se=-1;return 0!==E.type&&(Y=g.indexOf(E.doc.key),g=g.delete(E.doc.key)),1!==E.type&&(g=g.add(E.doc),se=g.indexOf(E.doc.key)),{type:w0(E.type),doc:k,oldIndex:Y,newIndex:se}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function w0(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pn()}}function Py(s,e){return s instanceof ea&&e instanceof ea?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof od&&e instanceof od&&s._firestore===e._firestore&&Al(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function eh(s){s=di(s,Is);const e=di(s.firestore,ys);return yy(co(e),s._key).then(t=>Ip(e,s,t))}class ju extends Jg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Is(this.firestore,null,t)}}function I0(s){s=di(s,Is);const e=di(s.firestore,ys),t=co(e),l=new ju(e);return function d0(s,e){const t=new vi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(l=(0,y.Z)(function*(h,g,E){try{const k=yield function(Y,se){const Se=en(Y);return Se.persistence.runTransaction("read document","readonly",tt=>Se.localDocuments.getDocument(tt,se))}(h,g);k.isFoundDocument()?E.resolve(k):k.isNoDocument()?E.resolve(null):E.reject(new hn(Vt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const Y=sp(k,`Failed to get document '${g} from cache`);E.reject(Y)}}),function(h,g,E){return l.apply(this,arguments)})(yield Xh(s),e,t);var l})),t.promise}(t,s._key).then(h=>new ea(e,l,s._key,h,new gc(null!==h&&h.hasLocalMutations,!0),s.converter))}function Oy(s){s=di(s,Is);const e=di(s.firestore,ys);return yy(co(e),s._key,{source:"server"}).then(t=>Ip(e,s,t))}function C0(s){s=di(s,uo);const e=di(s.firestore,ys),t=co(e),l=new ju(e);return vp(s._query),Wv(t,s._query).then(h=>new od(e,l,s,h))}function Ny(s){s=di(s,uo);const e=di(s.firestore,ys),t=co(e),l=new ju(e);return function Gv(s,e){const t=new vi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(l=(0,y.Z)(function*(h,g,E){try{const k=yield Yf(h,g,!0),Y=new Cg(g,k.ir),se=Y.sc(k.documents),Se=Y.applyChanges(se,!1);E.resolve(Se.snapshot)}catch(k){const Y=sp(k,`Failed to execute query '${g} against cache`);E.reject(Y)}}),function(h,g,E){return l.apply(this,arguments)})(yield Xh(s),e,t);var l})),t.promise}(t,s._query).then(h=>new od(e,l,s,h))}function b0(s){s=di(s,uo);const e=di(s.firestore,ys),t=co(e),l=new ju(e);return Wv(t,s._query,{source:"server"}).then(h=>new od(e,l,s,h))}function D0(s,e,t){s=di(s,Is);const l=di(s.firestore,ys),h=lf(s.converter,e,t);return uf(l,[nf(dc(l),"setDoc",s._key,h,null!==s.converter,t).toMutation(s._key,ws.none())])}function h_(s,e,t,...l){s=di(s,Is);const h=di(s.firestore,ys),g=dc(h);let E;return E="string"==typeof(e=(0,De.m9)(e))||e instanceof su?zg(g,"updateDoc",s._key,e,t,l):by(g,"updateDoc",s._key,e),uf(h,[E.toMutation(s._key,ws.exists(!0))])}function S0(s){return uf(di(s.firestore,ys),[new Ea(s._key,ws.none())])}function Wo(s,e){const t=di(s.firestore,ys),l=$u(s),h=lf(s.converter,e);return uf(t,[nf(dc(s.firestore),"addDoc",l._key,h,null!==s.converter,{}).toMutation(l._key,ws.exists(!1))]).then(()=>l)}function T0(s,...e){var t,l,h;s=(0,De.m9)(s);let g={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||$g(e[E])||(g=e[E],E++);const k={includeMetadataChanges:g.includeMetadataChanges};if($g(e[E])){const tt=e[E];e[E]=null===(t=tt.next)||void 0===t?void 0:t.bind(tt),e[E+1]=null===(l=tt.error)||void 0===l?void 0:l.bind(tt),e[E+2]=null===(h=tt.complete)||void 0===h?void 0:h.bind(tt)}let Y,se,Se;if(s instanceof Is)se=di(s.firestore,ys),Se=Zu(s._key.path),Y={next:tt=>{e[E]&&e[E](Ip(se,s,tt))},error:e[E+1],complete:e[E+2]};else{const tt=di(s,uo);se=di(tt.firestore,ys),Se=tt._query;const kt=new ju(se);Y={next:Zt=>{e[E]&&e[E](new od(se,kt,tt,Zt))},error:e[E+1],complete:e[E+2]},vp(s._query)}return function(tt,kt,Zt,Cn){const Hn=new Bu(Cn),Kn=new Xm(kt,Hn,Zt);return tt.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return _g(yield Yd(tt),Kn)})),()=>{Hn.Dc(),tt.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return wg(yield Yd(tt),Kn)}))}}(co(se),Se,k,Y)}function A0(s,e){return function EE(s,e){const t=new Bu(e);return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return l=yield Yd(s),h=t,en(l).ku.add(h),void h.next();var l,h})),()=>{t.Dc(),s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return l=yield Yd(s),h=t,void en(l).ku.delete(h);var l,h}))}}(co(s=di(s,ys)),$g(e)?e:{next:e})}function uf(s,e){return function(t,l){const h=new vi;return t.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function s0(s,e,t){return ty.apply(this,arguments)}(yield kg(t),l,h)})),h.promise}(co(s),e)}function Ip(s,e,t){const l=t.docs.get(e._key),h=new ju(s);return new ea(s,h,e._key,l,new gc(t.hasPendingWrites,t.fromCache),e.converter)}const AE={maxAttempts:5};class xl{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,t,l){this._verifyNotCommitted();const h=ho(e,this._firestore),g=lf(h.converter,t,l),E=nf(this._dataReader,"WriteBatch.set",h._key,g,null!==h.converter,l);return this._mutations.push(E.toMutation(h._key,ws.none())),this}update(e,t,l,...h){this._verifyNotCommitted();const g=ho(e,this._firestore);let E;return E="string"==typeof(t=(0,De.m9)(t))||t instanceof su?zg(this._dataReader,"WriteBatch.update",g._key,t,l,h):by(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(E.toMutation(g._key,ws.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ho(e,this._firestore);return this._mutations=this._mutations.concat(new Ea(t._key,ws.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hn(Vt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ho(s,e){if((s=(0,De.m9)(s)).firestore!==e)throw new hn(Vt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Pl extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dc(e)}get(e){const t=ho(e,this._firestore),l=new _0(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return Pn();const g=h[0];if(g.isFoundDocument())return new fc(this._firestore,l,g.key,g,t.converter);if(g.isNoDocument())return new fc(this._firestore,l,t._key,null,t.converter);throw Pn()})}set(e,t,l){const h=ho(e,this._firestore),g=lf(h.converter,t,l),E=nf(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,l);return this._transaction.set(h._key,E),this}update(e,t,l,...h){const g=ho(e,this._firestore);let E;return E="string"==typeof(t=(0,De.m9)(t))||t instanceof su?zg(this._dataReader,"Transaction.update",g._key,t,l,h):by(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,E),this}delete(e){const t=ho(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ho(e,this._firestore),l=new ju(this._firestore);return super.get(e).then(h=>new ea(this._firestore,l,t._key,h._document,new gc(!1,!1),t.converter))}}function tm(s,e,t){s=di(s,ys);const l=Object.assign(Object.assign({},AE),t);return function(h){if(h.maxAttempts<1)throw new hn(Vt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),function(h,g,E){const k=new vi;return h.asyncQueue.enqueueAndForget((0,y.Z)(function*(){const Y=yield function Ca(s){return qd(s).then(e=>e.datastore)}(h);new uc(h.asyncQueue,Y,E,g,k).run()})),k.promise}(co(s),h=>e(new Pl(s,h)),l)}function x0(){return new pl("deleteField")}function m_(){return new t_("serverTimestamp")}function P0(...s){return new g0("arrayUnion",s)}function O0(...s){return new au("arrayRemove",s)}function N0(s){return new Cy("increment",s)}!function(s,e=!0){Ar=m.SDK_VERSION,(0,m._registerComponent)(new le.wA("firestore",(t,{instanceIdentifier:l,options:h})=>{const g=t.getProvider("app").getImmediate(),E=new ys(new wc(t.getProvider("auth-internal")),new gf(t.getProvider("app-check-internal")),function(k,Y){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new hn(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(k.options.projectId,Y)}(g,l),g);return h=Object.assign({useFetchStreams:e},h),E._setSettings(h),E},"PUBLIC").setMultipleInstances(!0)),(0,m.registerVersion)(li,"3.12.0",s),(0,m.registerVersion)(li,"3.12.0","esm2017")}()},2090:(pn,dt,L)=>{"use strict";L.d(dt,{$s:()=>sn,BH:()=>ft,DV:()=>Ft,Dv:()=>ar,G6:()=>Ne,GJ:()=>Nt,L:()=>Be,LL:()=>Pt,P0:()=>at,Pz:()=>et,Sg:()=>vt,UG:()=>_t,UI:()=>sr,US:()=>Re,Wj:()=>Gn,Wl:()=>Ot,Yr:()=>We,ZB:()=>je,ZR:()=>Mt,aH:()=>ze,b$:()=>Et,cI:()=>Je,dS:()=>ci,eu:()=>He,g5:()=>le,gK:()=>Lr,gQ:()=>Nr,h$:()=>_e,hl:()=>Fe,hu:()=>m,jU:()=>nt,lb:()=>Rn,m9:()=>_r,ne:()=>Sn,p$:()=>we,pd:()=>Or,q4:()=>ct,r3:()=>In,ru:()=>pt,tV:()=>U,uI:()=>Le,ug:()=>Un,vZ:()=>yr,w1:()=>xe,w9:()=>Dn,xO:()=>dr,xb:()=>or,z$:()=>Ye,zI:()=>mt,zd:()=>rr});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(Qe,de){if(!Qe)throw le(de)},le=function(Qe){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Qe)},ve=function(Qe){const de=[];let K=0;for(let z=0;z<Qe.length;z++){let q=Qe.charCodeAt(z);q<128?de[K++]=q:q<2048?(de[K++]=q>>6|192,de[K++]=63&q|128):55296==(64512&q)&&z+1<Qe.length&&56320==(64512&Qe.charCodeAt(z+1))?(q=65536+((1023&q)<<10)+(1023&Qe.charCodeAt(++z)),de[K++]=q>>18|240,de[K++]=q>>12&63|128,de[K++]=q>>6&63|128,de[K++]=63&q|128):(de[K++]=q>>12|224,de[K++]=q>>6&63|128,de[K++]=63&q|128)}return de},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Qe,de){if(!Array.isArray(Qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=de?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let q=0;q<Qe.length;q+=3){const Pe=Qe[q],it=q+1<Qe.length,ke=it?Qe[q+1]:0,ht=q+2<Qe.length,Ct=ht?Qe[q+2]:0;let on=(15&ke)<<2|Ct>>6,fn=63&Ct;ht||(fn=64,it||(on=64)),z.push(K[Pe>>2],K[(3&Pe)<<4|ke>>4],K[on],K[fn])}return z.join("")},encodeString(Qe,de){return this.HAS_NATIVE_SUPPORT&&!de?btoa(Qe):this.encodeByteArray(ve(Qe),de)},decodeString(Qe,de){return this.HAS_NATIVE_SUPPORT&&!de?atob(Qe):function(Qe){const de=[];let K=0,z=0;for(;K<Qe.length;){const q=Qe[K++];if(q<128)de[z++]=String.fromCharCode(q);else if(q>191&&q<224){const Pe=Qe[K++];de[z++]=String.fromCharCode((31&q)<<6|63&Pe)}else if(q>239&&q<365){const ht=((7&q)<<18|(63&Qe[K++])<<12|(63&Qe[K++])<<6|63&Qe[K++])-65536;de[z++]=String.fromCharCode(55296+(ht>>10)),de[z++]=String.fromCharCode(56320+(1023&ht))}else{const Pe=Qe[K++],it=Qe[K++];de[z++]=String.fromCharCode((15&q)<<12|(63&Pe)<<6|63&it)}}return de.join("")}(this.decodeStringToByteArray(Qe,de))},decodeStringToByteArray(Qe,de){this.init_();const K=de?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let q=0;q<Qe.length;){const Pe=K[Qe.charAt(q++)],ke=q<Qe.length?K[Qe.charAt(q)]:0;++q;const Ct=q<Qe.length?K[Qe.charAt(q)]:64;++q;const Ut=q<Qe.length?K[Qe.charAt(q)]:64;if(++q,null==Pe||null==ke||null==Ct||null==Ut)throw new he;z.push(Pe<<2|ke>>4),64!==Ct&&(z.push(ke<<4&240|Ct>>2),64!==Ut&&z.push(Ct<<6&192|Ut))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Qe=0;Qe<this.ENCODED_VALS.length;Qe++)this.byteToCharMap_[Qe]=this.ENCODED_VALS.charAt(Qe),this.charToByteMap_[this.byteToCharMap_[Qe]]=Qe,this.byteToCharMapWebSafe_[Qe]=this.ENCODED_VALS_WEBSAFE.charAt(Qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Qe]]=Qe,Qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Qe)]=Qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Qe)]=Qe)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(Qe){const de=ve(Qe);return Re.encodeByteArray(de,!0)},Be=function(Qe){return _e(Qe).replace(/\./g,"")},U=function(Qe){try{return Re.decodeString(Qe,!0)}catch(de){console.error("base64Decode failed: ",de)}return null};function we(Qe){return je(void 0,Qe)}function je(Qe,de){if(!(de instanceof Object))return de;switch(de.constructor){case Date:return new Date(de.getTime());case Object:void 0===Qe&&(Qe={});break;case Array:Qe=[];break;default:return de}for(const K in de)!de.hasOwnProperty(K)||!ge(K)||(Qe[K]=je(Qe[K],de[K]));return Qe}function ge(Qe){return"__proto__"!==Qe}const Ce=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Qe=process.env.__FIREBASE_DEFAULTS__;return Qe?JSON.parse(Qe):void 0})()||(()=>{if(typeof document>"u")return;let Qe;try{Qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const de=Qe&&U(Qe[1]);return de&&JSON.parse(de)})()}catch(Qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Qe}`)}},ct=Qe=>{var de,K;return null===(K=null===(de=Ce())||void 0===de?void 0:de.emulatorHosts)||void 0===K?void 0:K[Qe]},at=Qe=>{const de=ct(Qe);if(!de)return;const K=de.lastIndexOf(":");if(K<=0||K+1===de.length)throw new Error(`Invalid host ${de} with no separate hostname and port!`);const z=parseInt(de.substring(K+1),10);return"["===de[0]?[de.substring(1,K-1),z]:[de.substring(0,K),z]},ze=()=>{var Qe;return null===(Qe=Ce())||void 0===Qe?void 0:Qe.config},et=Qe=>{var de;return null===(de=Ce())||void 0===de?void 0:de[`_${Qe}`]};class ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((de,K)=>{this.resolve=de,this.reject=K})}wrapCallback(de){return(K,z)=>{K?this.reject(K):this.resolve(z),"function"==typeof de&&(this.promise.catch(()=>{}),1===de.length?de(K):de(K,z))}}}function vt(Qe,de){if(Qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=de||"demo-project",q=Qe.iat||0,Pe=Qe.sub||Qe.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const it=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:q,exp:q+3600,auth_time:q,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},Qe);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(it)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function _t(){var Qe;const de=null===(Qe=Ce())||void 0===Qe?void 0:Qe.forceEnvironment;if("node"===de)return!0;if("browser"===de)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function pt(){const Qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Qe&&void 0!==Qe.id}function Et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){const Qe=Ye();return Qe.indexOf("MSIE ")>=0||Qe.indexOf("Trident/")>=0}function We(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Ne(){return!_t()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((Qe,de)=>{try{let K=!0;const z="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(z);q.onsuccess=()=>{q.result.close(),K||self.indexedDB.deleteDatabase(z),Qe(!0)},q.onupgradeneeded=()=>{K=!1},q.onerror=()=>{var Pe;de((null===(Pe=q.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(K){de(K)}})}function mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Mt extends Error{constructor(de,K,z){super(K),this.code=de,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,Mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pt.prototype.create)}}class Pt{constructor(de,K,z){this.service=de,this.serviceName=K,this.errors=z}create(de,...K){const z=K[0]||{},q=`${this.service}/${de}`,Pe=this.errors[de],it=Pe?function un(Qe,de){return Qe.replace(Tt,(K,z)=>{const q=de[z];return null!=q?String(q):`<${z}?>`})}(Pe,z):"Error";return new Mt(q,`${this.serviceName}: ${it} (${q}).`,z)}}const Tt=/\{\$([^}]+)}/g;function Je(Qe){return JSON.parse(Qe)}function Ot(Qe){return JSON.stringify(Qe)}const Qt=function(Qe){let de={},K={},z={},q="";try{const Pe=Qe.split(".");de=Je(U(Pe[0])||""),K=Je(U(Pe[1])||""),q=Pe[2],z=K.d||{},delete K.d}catch{}return{header:de,claims:K,data:z,signature:q}},Dn=function(Qe){const K=Qt(Qe).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Nt=function(Qe){const de=Qt(Qe).claims;return"object"==typeof de&&!0===de.admin};function In(Qe,de){return Object.prototype.hasOwnProperty.call(Qe,de)}function Ft(Qe,de){if(Object.prototype.hasOwnProperty.call(Qe,de))return Qe[de]}function or(Qe){for(const de in Qe)if(Object.prototype.hasOwnProperty.call(Qe,de))return!1;return!0}function sr(Qe,de,K){const z={};for(const q in Qe)Object.prototype.hasOwnProperty.call(Qe,q)&&(z[q]=de.call(K,Qe[q],q,Qe));return z}function yr(Qe,de){if(Qe===de)return!0;const K=Object.keys(Qe),z=Object.keys(de);for(const q of K){if(!z.includes(q))return!1;const Pe=Qe[q],it=de[q];if(tn(Pe)&&tn(it)){if(!yr(Pe,it))return!1}else if(Pe!==it)return!1}for(const q of z)if(!K.includes(q))return!1;return!0}function tn(Qe){return null!==Qe&&"object"==typeof Qe}function dr(Qe){const de=[];for(const[K,z]of Object.entries(Qe))Array.isArray(z)?z.forEach(q=>{de.push(encodeURIComponent(K)+"="+encodeURIComponent(q))}):de.push(encodeURIComponent(K)+"="+encodeURIComponent(z));return de.length?"&"+de.join("&"):""}function rr(Qe){const de={};return Qe.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[q,Pe]=z.split("=");de[decodeURIComponent(q)]=decodeURIComponent(Pe)}}),de}function Or(Qe){const de=Qe.indexOf("?");if(!de)return"";const K=Qe.indexOf("#",de);return Qe.substring(de,K>0?K:void 0)}class Nr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let de=1;de<this.blockSize;++de)this.pad_[de]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(de,K){K||(K=0);const z=this.W_;if("string"==typeof de)for(let Ut=0;Ut<16;Ut++)z[Ut]=de.charCodeAt(K)<<24|de.charCodeAt(K+1)<<16|de.charCodeAt(K+2)<<8|de.charCodeAt(K+3),K+=4;else for(let Ut=0;Ut<16;Ut++)z[Ut]=de[K]<<24|de[K+1]<<16|de[K+2]<<8|de[K+3],K+=4;for(let Ut=16;Ut<80;Ut++){const on=z[Ut-3]^z[Ut-8]^z[Ut-14]^z[Ut-16];z[Ut]=4294967295&(on<<1|on>>>31)}let Ct,jt,q=this.chain_[0],Pe=this.chain_[1],it=this.chain_[2],ke=this.chain_[3],ht=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(Ct=ke^Pe&(it^ke),jt=1518500249):(Ct=Pe^it^ke,jt=1859775393):Ut<60?(Ct=Pe&it|ke&(Pe|it),jt=2400959708):(Ct=Pe^it^ke,jt=3395469782);const on=(q<<5|q>>>27)+Ct+ht+jt+z[Ut]&4294967295;ht=ke,ke=it,it=4294967295&(Pe<<30|Pe>>>2),Pe=q,q=on}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+it&4294967295,this.chain_[3]=this.chain_[3]+ke&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(de,K){if(null==de)return;void 0===K&&(K=de.length);const z=K-this.blockSize;let q=0;const Pe=this.buf_;let it=this.inbuf_;for(;q<K;){if(0===it)for(;q<=z;)this.compress_(de,q),q+=this.blockSize;if("string"==typeof de){for(;q<K;)if(Pe[it]=de.charCodeAt(q),++it,++q,it===this.blockSize){this.compress_(Pe),it=0;break}}else for(;q<K;)if(Pe[it]=de[q],++it,++q,it===this.blockSize){this.compress_(Pe),it=0;break}}this.inbuf_=it,this.total_+=K}digest(){const de=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&K,K/=256;this.compress_(this.buf_);let z=0;for(let q=0;q<5;q++)for(let Pe=24;Pe>=0;Pe-=8)de[z]=this.chain_[q]>>Pe&255,++z;return de}}function Sn(Qe,de){const K=new vn(Qe,de);return K.subscribe.bind(K)}class vn{constructor(de,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{de(this)}).catch(z=>{this.error(z)})}next(de){this.forEachObserver(K=>{K.next(de)})}error(de){this.forEachObserver(K=>{K.error(de)}),this.close(de)}complete(){this.forEachObserver(de=>{de.complete()}),this.close()}subscribe(de,K,z){let q;if(void 0===de&&void 0===K&&void 0===z)throw new Error("Missing Observer.");q=function Ir(Qe,de){if("object"!=typeof Qe||null===Qe)return!1;for(const K of de)if(K in Qe&&"function"==typeof Qe[K])return!0;return!1}(de,["next","error","complete"])?de:{next:de,error:K,complete:z},void 0===q.next&&(q.next=vr),void 0===q.error&&(q.error=vr),void 0===q.complete&&(q.complete=vr);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Pe}unsubscribeOne(de){void 0===this.observers||void 0===this.observers[de]||(delete this.observers[de],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(de){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,de)}sendOne(de,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[de])try{K(this.observers[de])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(de){this.finalized||(this.finalized=!0,void 0!==de&&(this.finalError=de),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vr(){}const ar=function(Qe,de,K,z){let q;if(z<de?q="at least "+de:z>K&&(q=0===K?"none":"no more than "+K),q)throw new Error(Qe+" failed: Was called with "+z+(1===z?" argument.":" arguments.")+" Expects "+q+".")};function Lr(Qe,de){return`${Qe} failed: ${de} argument `}function Gn(Qe,de,K,z){if((!z||K)&&"function"!=typeof K)throw new Error(Lr(Qe,de)+"must be a valid function.")}function Rn(Qe,de,K,z){if((!z||K)&&("object"!=typeof K||null===K))throw new Error(Lr(Qe,de)+"must be a valid context object.")}const ci=function(Qe){const de=[];let K=0;for(let z=0;z<Qe.length;z++){let q=Qe.charCodeAt(z);if(q>=55296&&q<=56319){const Pe=q-55296;z++,m(z<Qe.length,"Surrogate pair missing trail surrogate."),q=65536+(Pe<<10)+(Qe.charCodeAt(z)-56320)}q<128?de[K++]=q:q<2048?(de[K++]=q>>6|192,de[K++]=63&q|128):q<65536?(de[K++]=q>>12|224,de[K++]=q>>6&63|128,de[K++]=63&q|128):(de[K++]=q>>18|240,de[K++]=q>>12&63|128,de[K++]=q>>6&63|128,de[K++]=63&q|128)}return de},Un=function(Qe){let de=0;for(let K=0;K<Qe.length;K++){const z=Qe.charCodeAt(K);z<128?de++:z<2048?de+=2:z>=55296&&z<=56319?(de+=4,K++):de+=3}return de},me=1e3,Ge=2,At=144e5,Xt=.5;function sn(Qe,de=me,K=Ge){const z=de*Math.pow(K,Qe),q=Math.round(Xt*z*(Math.random()-.5)*2);return Math.min(At,z+q)}function _r(Qe){return Qe&&Qe._delegate?Qe._delegate:Qe}},8261:(pn,dt,L)=>{"use strict";L.d(dt,{KY:()=>vt,DM:()=>Ye,J2:()=>pt,Iq:()=>Et});var m=L(9751),le=L(4968),ve={error:"cordova_not_available"},De={error:"plugin_not_installed"};function Re(ce){if(typeof window<"u"&&window.angular){var Ve=window.document,We=window.angular.element(Ve.querySelector("[ng-app]")||Ve.body).injector();if(We)return We.get("$q")(function(Fe,He){ce(Fe,He)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(Fe,He){ce(Fe,He)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function we(ce,xe,Ve){var We,Ne,Fe;return"string"==typeof ce?We=ce:(We=ce.constructor.getPluginRef(),Ve=ce.constructor.getPluginName(),Fe=ce.constructor.getPluginInstallName()),!(!(Ne=It(We))||xe&&typeof Ne[xe]>"u")||(typeof window>"u"||!window.cordova?(function ct(ce,xe){typeof process>"u"&&console.warn(xe?"Native: tried calling "+ce+"."+xe+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+ce+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(Ve,xe),ve):(function Ce(ce,xe,Ve){console.warn(Ve?"Native: tried calling "+ce+"."+Ve+", but the "+ce+" plugin is not installed.":"Native: tried accessing the "+ce+" plugin but it's not installed."),xe&&console.warn("Install the "+ce+" plugin: 'ionic cordova plugin add "+xe+"'")}(Ve,Fe,xe),De))}function Ue(ce,xe,Ve,We,Ne,Fe){void 0===We&&(We={}),Ve=function ge(ce,xe,Ve,We){if(void 0===xe&&(xe={}),xe.sync)return ce;if("reverse"===xe.callbackOrder)ce.unshift(We),ce.unshift(Ve);else if("node"===xe.callbackStyle)ce.push(function(mt,lt){mt?We(mt):Ve(lt)});else if("object"===xe.callbackStyle&&xe.successName&&xe.errorName){var Ne={};Ne[xe.successName]=Ve,Ne[xe.errorName]=We,ce.push(Ne)}else if(typeof xe.successIndex<"u"||typeof xe.errorIndex<"u"){var Fe=function(){xe.successIndex>ce.length?ce[xe.successIndex]=Ve:ce.splice(xe.successIndex,0,Ve)},He=function(){xe.errorIndex>ce.length?ce[xe.errorIndex]=We:ce.splice(xe.errorIndex,0,We)};xe.successIndex>xe.errorIndex?(He(),Fe()):(Fe(),He())}else ce.push(Ve),ce.push(We);return ce}(Ve,We,Ne,Fe);var He=we(ce,xe);if(!0===He){var mt=It(ce.constructor.getPluginRef());return mt[xe].apply(mt,Ve)}return He}function It(ce){return typeof window<"u"?Ae(window,ce):null}function Ae(ce,xe){for(var Ve=xe.split("."),We=ce,Ne=0;Ne<Ve.length;Ne++){if(!We)return null;We=We[Ve[Ne]]}return We}var at=function(ce,xe,Ve){return void 0===Ve&&(Ve={}),function(){for(var We=[],Ne=0;Ne<arguments.length;Ne++)We[Ne]=arguments[Ne];return Ve.sync?Ue(ce,xe,We,Ve):Ve.observable?function Be(ce,xe,Ve,We){return void 0===We&&(We={}),new m.y(function(Ne){var Fe;return Fe=We.destruct?Ue(ce,xe,Ve,We,function(){for(var He=[],mt=0;mt<arguments.length;mt++)He[mt]=arguments[mt];return Ne.next(He)},function(){for(var He=[],mt=0;mt<arguments.length;mt++)He[mt]=arguments[mt];return Ne.error(He)}):Ue(ce,xe,Ve,We,Ne.next.bind(Ne),Ne.error.bind(Ne)),Fe&&Fe.error&&(Ne.error(Fe.error),Ne.complete()),function(){try{if(We.clearFunction)return We.clearWithArgs?Ue(ce,We.clearFunction,Ve,We,Ne.next.bind(Ne),Ne.error.bind(Ne)):Ue(ce,We.clearFunction,[])}catch(He){console.warn("Unable to clear the previous observable watch for",ce.constructor.getPluginName(),xe),console.warn(He)}}})}(ce,xe,We,Ve):Ve.eventObservable&&Ve.event?function U(ce,xe){return xe=typeof window<"u"&&xe?Ae(window,xe):xe||(typeof window<"u"?window:{}),(0,le.R)(xe,ce)}(Ve.event,Ve.element):Ve.otherPromise?function _e(ce,xe,Ve,We){return void 0===We&&(We={}),Re(function(Ne,Fe){var He=Ue(ce,xe,Ve,We);He?He.error?Fe(He.error):He.then&&He.then(Ne).catch(Fe):Fe({error:"unexpected_error"})})}(ce,xe,We,Ve):function he(ce,xe,Ve,We){void 0===We&&(We={});var Ne,Fe,He=Re(function(mt,lt){Ne=We.destruct?Ue(ce,xe,Ve,We,function(){for(var Mt=[],Pt=0;Pt<arguments.length;Pt++)Mt[Pt]=arguments[Pt];return mt(Mt)},function(){for(var Mt=[],Pt=0;Pt<arguments.length;Pt++)Mt[Pt]=arguments[Pt];return lt(Mt)}):Ue(ce,xe,Ve,We,mt,lt),Fe=lt});return Ne&&Ne.error&&(He.catch(function(){}),"function"==typeof Fe&&Fe(Ne.error)),He}(ce,xe,We,Ve)}},vt=function(){function ce(){}return ce.installed=function(){return!0===we(this.pluginRef)},ce.getPlugin=function(){return typeof window<"u"?function et(ce,xe){for(var Ve=xe.split("."),We=ce,Ne=0;Ne<Ve.length;Ne++){if(!We)return null;We=We[Ve[Ne]]}return We}(window,this.pluginRef):null},ce.getPluginName=function(){return this.pluginName},ce.getPluginRef=function(){return this.pluginRef},ce.getPluginInstallName=function(){return this.plugin},ce.getSupportedPlatforms=function(){return this.platforms},ce.pluginName="",ce.pluginRef="",ce.plugin="",ce.repo="",ce.platforms=[],ce.install="",ce}();function Ye(ce,xe,Ve,We){return at(ce,xe,Ve).apply(this,We)}function pt(ce,xe){return!0===we(ce,xe)?It(ce.constructor.getPluginRef())[xe]:null}function Et(ce,xe,Ve){!0===we(ce,xe)&&(It(ce.constructor.getPluginRef())[xe]=Ve)}!function y(){if(typeof process>"u"){var ce=typeof window<"u"?window:{},Ve=Date.now(),We=!1;ce.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-Ve)+" ms"),We=!0}),setTimeout(function(){!We&&ce.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}()},9613:(pn,dt,L)=>{"use strict";L.d(dt,{c:()=>It});var y=L(3577),m=L(3457);let le;const De=Ae=>Ae.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Re=Ae=>(void 0===le&&(le=void 0===Ae.style.animationName&&void 0!==Ae.style.webkitAnimationName?"-webkit-":""),le),he=(Ae,Ce,ct)=>{const at=Ce.startsWith("animation")?Re(Ae):"";Ae.style.setProperty(at+Ce,ct)},_e=(Ae,Ce)=>{const ct=Ce.startsWith("animation")?Re(Ae):"";Ae.style.removeProperty(ct+Ce)},we=[],qe=(Ae=[],Ce)=>{if(void 0!==Ce){const ct=Array.isArray(Ce)?Ce:[Ce];return[...Ae,...ct]}return Ae},It=Ae=>{let Ce,ct,at,ze,et,ft,nt,Fe,He,mt,lt,Tt,Je,vt=[],Ye=[],Le=[],_t=!1,pt={},Et=[],ce=[],xe={},Ve=0,We=!1,Ne=!1,Mt=!0,Pt=!1,un=!0,Ot=!1;const Qt=Ae,yn=[],Tn=[],Dn=[],Nt=[],In=[],Ft=[],or=[],sr=[],yr=[],tn=[],xr="function"==typeof AnimationEffect||void 0!==m.w&&"function"==typeof m.w.AnimationEffect,dr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&xr,Or=()=>tn,Ir=(oe,G)=>((null!=G&&G.oneTimeCallback?Tn:yn).push({c:oe,o:G}),Je),ar=()=>{if(dr)tn.forEach(oe=>{oe.cancel()}),tn.length=0;else{const oe=Dn.slice();(0,y.r)(()=>{oe.forEach(G=>{_e(G,"animation-name"),_e(G,"animation-duration"),_e(G,"animation-timing-function"),_e(G,"animation-iteration-count"),_e(G,"animation-delay"),_e(G,"animation-play-state"),_e(G,"animation-fill-mode"),_e(G,"animation-direction")})})}},Lr=()=>{In.forEach(oe=>{null!=oe&&oe.parentNode&&oe.parentNode.removeChild(oe)}),In.length=0},On=()=>void 0!==et?et:nt?nt.getFill():"both",_r=()=>void 0!==He?He:void 0!==ft?ft:nt?nt.getDirection():"normal",Qe=()=>We?"linear":void 0!==at?at:nt?nt.getEasing():"linear",de=()=>Ne?0:void 0!==mt?mt:void 0!==ct?ct:nt?nt.getDuration():0,K=()=>void 0!==ze?ze:nt?nt.getIterations():1,z=()=>void 0!==lt?lt:void 0!==Ce?Ce:nt?nt.getDelay():0,zt=()=>{0!==Ve&&(Ve--,0===Ve&&((()=>{Bs(),sr.forEach(Xe=>Xe()),yr.forEach(Xe=>Xe());const oe=Mt?1:0,G=Et,ie=ce,$e=xe;Dn.forEach(Xe=>{const ut=Xe.classList;G.forEach(Rt=>ut.add(Rt)),ie.forEach(Rt=>ut.remove(Rt));for(const Rt in $e)$e.hasOwnProperty(Rt)&&he(Xe,Rt,$e[Rt])}),yn.forEach(Xe=>Xe.c(oe,Je)),Tn.forEach(Xe=>Xe.c(oe,Je)),Tn.length=0,un=!0,Mt&&(Pt=!0),Mt=!0})(),nt&&nt.animationFinish()))},_n=(oe=!0)=>{Lr();const G=(Ae=>(Ae.forEach(Ce=>{for(const ct in Ce)if(Ce.hasOwnProperty(ct)){const at=Ce[ct];if("easing"===ct)Ce["animation-timing-function"]=at,delete Ce[ct];else{const ze=De(ct);ze!==ct&&(Ce[ze]=at,delete Ce[ct])}}}),Ae))(vt);Dn.forEach(ie=>{if(G.length>0){const $e=((Ae=[])=>Ae.map(Ce=>{const ct=Ce.offset,at=[];for(const ze in Ce)Ce.hasOwnProperty(ze)&&"offset"!==ze&&at.push(`${ze}: ${Ce[ze]};`);return`${100*ct}% { ${at.join(" ")} }`}).join(" "))(G);Tt=void 0!==Ae?Ae:(Ae=>{let Ce=we.indexOf(Ae);return Ce<0&&(Ce=we.push(Ae)-1),`ion-animation-${Ce}`})($e);const Xe=((Ae,Ce,ct)=>{var at;const ze=(Ae=>{const Ce=void 0!==Ae.getRootNode?Ae.getRootNode():Ae;return Ce.head||Ce})(ct),et=Re(ct),ft=ze.querySelector("#"+Ae);if(ft)return ft;const vt=(null!==(at=ct.ownerDocument)&&void 0!==at?at:document).createElement("style");return vt.id=Ae,vt.textContent=`@${et}keyframes ${Ae} { ${Ce} } @${et}keyframes ${Ae}-alt { ${Ce} }`,ze.appendChild(vt),vt})(Tt,$e,ie);In.push(Xe),he(ie,"animation-duration",`${de()}ms`),he(ie,"animation-timing-function",Qe()),he(ie,"animation-delay",`${z()}ms`),he(ie,"animation-fill-mode",On()),he(ie,"animation-direction",_r());const ut=K()===1/0?"infinite":K().toString();he(ie,"animation-iteration-count",ut),he(ie,"animation-play-state","paused"),oe&&he(ie,"animation-name",`${Xe.id}-alt`),(0,y.r)(()=>{he(ie,"animation-name",Xe.id||null)})}})},Xn=(oe=!0)=>{(()=>{Ft.forEach($e=>$e()),or.forEach($e=>$e());const oe=Ye,G=Le,ie=pt;Dn.forEach($e=>{const Xe=$e.classList;oe.forEach(ut=>Xe.add(ut)),G.forEach(ut=>Xe.remove(ut));for(const ut in ie)ie.hasOwnProperty(ut)&&he($e,ut,ie[ut])})})(),vt.length>0&&(dr?(Dn.forEach(oe=>{const G=oe.animate(vt,{id:Qt,delay:z(),duration:de(),easing:Qe(),iterations:K(),fill:On(),direction:_r()});G.pause(),tn.push(G)}),tn.length>0&&(tn[0].onfinish=()=>{zt()})):_n(oe)),_t=!0},nr=oe=>{if(oe=Math.min(Math.max(oe,0),.9999),dr)tn.forEach(G=>{G.currentTime=G.effect.getComputedTiming().delay+de()*oe,G.pause()});else{const G=`-${de()*oe}ms`;Dn.forEach(ie=>{vt.length>0&&(he(ie,"animation-delay",G),he(ie,"animation-play-state","paused"))})}},Jr=oe=>{tn.forEach(G=>{G.effect.updateTiming({delay:z(),duration:de(),easing:Qe(),iterations:K(),fill:On(),direction:_r()})}),void 0!==oe&&nr(oe)},Tr=(oe=!0,G)=>{(0,y.r)(()=>{Dn.forEach(ie=>{he(ie,"animation-name",Tt||null),he(ie,"animation-duration",`${de()}ms`),he(ie,"animation-timing-function",Qe()),he(ie,"animation-delay",void 0!==G?`-${G*de()}ms`:`${z()}ms`),he(ie,"animation-fill-mode",On()||null),he(ie,"animation-direction",_r()||null);const $e=K()===1/0?"infinite":K().toString();he(ie,"animation-iteration-count",$e),oe&&he(ie,"animation-name",`${Tt}-alt`),(0,y.r)(()=>{he(ie,"animation-name",Tt||null)})})})},Qn=(oe=!1,G=!0,ie)=>(oe&&Nt.forEach($e=>{$e.update(oe,G,ie)}),dr?Jr(ie):Tr(G,ie),Je),rs=()=>{_t&&(dr?tn.forEach(oe=>{oe.pause()}):Dn.forEach(oe=>{he(oe,"animation-play-state","paused")}),Ot=!0)},pi=()=>{Fe=void 0,zt()},Bs=()=>{Fe&&clearTimeout(Fe)},_s=oe=>new Promise(G=>{null!=oe&&oe.sync&&(Ne=!0,Ir(()=>Ne=!1,{oneTimeCallback:!0})),_t||Xn(),Pt&&(dr?(nr(0),Jr()):Tr(),Pt=!1),un&&(Ve=Nt.length+1,un=!1),Ir(()=>G(),{oneTimeCallback:!0}),Nt.forEach(ie=>{ie.play()}),dr?(tn.forEach(oe=>{oe.play()}),(0===vt.length||0===Dn.length)&&zt()):(()=>{if(Bs(),(0,y.r)(()=>{Dn.forEach(oe=>{vt.length>0&&he(oe,"animation-play-state","running")})}),0===vt.length||0===Dn.length)zt();else{const oe=z()||0,G=de()||0,ie=K()||1;isFinite(ie)&&(Fe=setTimeout(pi,oe+G*ie+100)),((Ae,Ce)=>{let ct;const at={passive:!0},et=ft=>{Ae===ft.target&&(ct&&ct(),Bs(),(0,y.r)(()=>{Dn.forEach(oe=>{_e(oe,"animation-duration"),_e(oe,"animation-delay"),_e(oe,"animation-play-state")}),(0,y.r)(zt)}))};Ae&&(Ae.addEventListener("webkitAnimationEnd",et,at),Ae.addEventListener("animationend",et,at),ct=()=>{Ae.removeEventListener("webkitAnimationEnd",et,at),Ae.removeEventListener("animationend",et,at)})})(Dn[0])}})(),Ot=!1}),W=(oe,G)=>{const ie=vt[0];return void 0===ie||void 0!==ie.offset&&0!==ie.offset?vt=[{offset:0,[oe]:G},...vt]:ie[oe]=G,Je};return Je={parentAnimation:nt,elements:Dn,childAnimations:Nt,id:Qt,animationFinish:zt,from:W,to:(oe,G)=>{const ie=vt[vt.length-1];return void 0===ie||void 0!==ie.offset&&1!==ie.offset?vt=[...vt,{offset:1,[oe]:G}]:ie[oe]=G,Je},fromTo:(oe,G,ie)=>W(oe,G).to(oe,ie),parent:oe=>(nt=oe,Je),play:_s,pause:()=>(Nt.forEach(oe=>{oe.pause()}),rs(),Je),stop:()=>{Nt.forEach(oe=>{oe.stop()}),_t&&(ar(),_t=!1),We=!1,Ne=!1,un=!0,He=void 0,mt=void 0,lt=void 0,Ve=0,Pt=!1,Mt=!0,Ot=!1},destroy:oe=>(Nt.forEach(G=>{G.destroy(oe)}),(oe=>{ar(),oe&&Lr()})(oe),Dn.length=0,Nt.length=0,vt.length=0,yn.length=0,Tn.length=0,_t=!1,un=!0,Je),keyframes:oe=>{const G=vt!==oe;return vt=oe,G&&(oe=>{dr?Or().forEach(G=>{if(G.effect.setKeyframes)G.effect.setKeyframes(oe);else{const ie=new KeyframeEffect(G.effect.target,oe,G.effect.getTiming());G.effect=ie}}):_n()})(vt),Je},addAnimation:oe=>{if(null!=oe)if(Array.isArray(oe))for(const G of oe)G.parent(Je),Nt.push(G);else oe.parent(Je),Nt.push(oe);return Je},addElement:oe=>{if(null!=oe)if(1===oe.nodeType)Dn.push(oe);else if(oe.length>=0)for(let G=0;G<oe.length;G++)Dn.push(oe[G]);else console.error("Invalid addElement value");return Je},update:Qn,fill:oe=>(et=oe,Qn(!0),Je),direction:oe=>(ft=oe,Qn(!0),Je),iterations:oe=>(ze=oe,Qn(!0),Je),duration:oe=>(!dr&&0===oe&&(oe=1),ct=oe,Qn(!0),Je),easing:oe=>(at=oe,Qn(!0),Je),delay:oe=>(Ce=oe,Qn(!0),Je),getWebAnimations:Or,getKeyframes:()=>vt,getFill:On,getDirection:_r,getDelay:z,getIterations:K,getEasing:Qe,getDuration:de,afterAddRead:oe=>(sr.push(oe),Je),afterAddWrite:oe=>(yr.push(oe),Je),afterClearStyles:(oe=[])=>{for(const G of oe)xe[G]="";return Je},afterStyles:(oe={})=>(xe=oe,Je),afterRemoveClass:oe=>(ce=qe(ce,oe),Je),afterAddClass:oe=>(Et=qe(Et,oe),Je),beforeAddRead:oe=>(Ft.push(oe),Je),beforeAddWrite:oe=>(or.push(oe),Je),beforeClearStyles:(oe=[])=>{for(const G of oe)pt[G]="";return Je},beforeStyles:(oe={})=>(pt=oe,Je),beforeRemoveClass:oe=>(Le=qe(Le,oe),Je),beforeAddClass:oe=>(Ye=qe(Ye,oe),Je),onFinish:Ir,isRunning:()=>0!==Ve&&!Ot,progressStart:(oe=!1,G)=>(Nt.forEach(ie=>{ie.progressStart(oe,G)}),rs(),We=oe,_t||Xn(),Qn(!1,!0,G),Je),progressStep:oe=>(Nt.forEach(G=>{G.progressStep(oe)}),nr(oe),Je),progressEnd:(oe,G,ie)=>(We=!1,Nt.forEach($e=>{$e.progressEnd(oe,G,ie)}),void 0!==ie&&(mt=ie),Pt=!1,Mt=!0,0===oe?(He="reverse"===_r()?"normal":"reverse","reverse"===He&&(Mt=!1),dr?(Qn(),nr(1-G)):(lt=(1-G)*de()*-1,Qn(!1,!1))):1===oe&&(dr?(Qn(),nr(G)):(lt=G*de()*-1,Qn(!1,!1))),void 0!==oe&&(Ir(()=>{mt=void 0,He=void 0,lt=void 0},{oneTimeCallback:!0}),nt||_s()),Je)}}},3982:(pn,dt,L)=>{"use strict";L.d(dt,{E:()=>U,a:()=>y,s:()=>_e});const y=we=>{try{if(we instanceof he)return we.value;if(!ve()||"string"!=typeof we||""===we)return we;if(we.includes("onload="))return"";const je=document.createDocumentFragment(),ge=document.createElement("div");je.appendChild(ge),ge.innerHTML=we,Re.forEach(Ae=>{const Ce=je.querySelectorAll(Ae);for(let ct=Ce.length-1;ct>=0;ct--){const at=Ce[ct];at.parentNode?at.parentNode.removeChild(at):je.removeChild(at);const ze=le(at);for(let et=0;et<ze.length;et++)m(ze[et])}});const Ue=le(je);for(let Ae=0;Ae<Ue.length;Ae++)m(Ue[Ae]);const qe=document.createElement("div");qe.appendChild(je);const It=qe.querySelector("div");return null!==It?It.innerHTML:qe.innerHTML}catch(je){return console.error(je),""}},m=we=>{if(we.nodeType&&1!==we.nodeType)return;if(typeof NamedNodeMap<"u"&&!(we.attributes instanceof NamedNodeMap))return void we.remove();for(let ge=we.attributes.length-1;ge>=0;ge--){const Ue=we.attributes.item(ge),qe=Ue.name;if(!De.includes(qe.toLowerCase())){we.removeAttribute(qe);continue}const It=Ue.value,Ae=we[qe];(null!=It&&It.toLowerCase().includes("javascript:")||null!=Ae&&Ae.toLowerCase().includes("javascript:"))&&we.removeAttribute(qe)}const je=le(we);for(let ge=0;ge<je.length;ge++)m(je[ge])},le=we=>null!=we.children?we.children:we.childNodes,ve=()=>{var we;const je=window,ge=null===(we=null==je?void 0:je.Ionic)||void 0===we?void 0:we.config;return!ge||(ge.get?ge.get("sanitizerEnabled",!0):!0===ge.sanitizerEnabled||void 0===ge.sanitizerEnabled)},De=["class","id","href","src","name","slot"],Re=["script","style","iframe","meta","link","object","embed"];class he{constructor(je){this.value=je}}const _e=we=>{const je=window,ge=je.Ionic;if(!ge||!ge.config||"Object"===ge.config.constructor.name)return je.Ionic=je.Ionic||{},je.Ionic.config=Object.assign(Object.assign({},je.Ionic.config),we),je.Ionic.config},U=!1},6782:(pn,dt,L)=>{"use strict";L.d(dt,{C:()=>De,a:()=>le,d:()=>ve});var y=L(5861),m=L(3577);const le=function(){var Re=(0,y.Z)(function*(he,_e,Be,U,we,je){var ge;if(he)return he.attachViewToDom(_e,Be,we,U);if(!(je||"string"==typeof Be||Be instanceof HTMLElement))throw new Error("framework delegate is missing");const Ue="string"==typeof Be?null===(ge=_e.ownerDocument)||void 0===ge?void 0:ge.createElement(Be):Be;return U&&U.forEach(qe=>Ue.classList.add(qe)),we&&Object.assign(Ue,we),_e.appendChild(Ue),yield new Promise(qe=>(0,m.c)(Ue,qe)),Ue});return function(_e,Be,U,we,je,ge){return Re.apply(this,arguments)}}(),ve=(Re,he)=>{if(he){if(Re)return Re.removeViewFromDom(he.parentElement,he);he.remove()}return Promise.resolve()},De=()=>{let Re,he;return{attachViewToDom:function(){var U=(0,y.Z)(function*(we,je,ge={},Ue=[]){var qe,It;if(Re=we,je){const Ce="string"==typeof je?null===(qe=Re.ownerDocument)||void 0===qe?void 0:qe.createElement(je):je;Ue.forEach(ct=>Ce.classList.add(ct)),Object.assign(Ce,ge),Re.appendChild(Ce),yield new Promise(ct=>(0,m.c)(Ce,ct))}else if(Re.children.length>0&&("ION-MODAL"===Re.tagName||"ION-POPOVER"===Re.tagName)&&!Re.children[0].classList.contains("ion-delegate-host")){const ct=null===(It=Re.ownerDocument)||void 0===It?void 0:It.createElement("div");ct.classList.add("ion-delegate-host"),Ue.forEach(at=>ct.classList.add(at)),ct.append(...Re.children),Re.appendChild(ct)}const Ae=document.querySelector("ion-app")||document.body;return he=document.createComment("ionic teleport"),Re.parentNode.insertBefore(he,Re),Ae.appendChild(Re),Re});return function(je,ge){return U.apply(this,arguments)}}(),removeViewFromDom:()=>(Re&&he&&(he.parentNode.insertBefore(Re,he),he.remove()),Promise.resolve())}}},4349:(pn,dt,L)=>{"use strict";L.d(dt,{G:()=>De});class m{constructor(he,_e,Be,U,we){this.id=_e,this.name=Be,this.disableScroll=we,this.priority=1e6*U+_e,this.ctrl=he}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const he=this.ctrl.capture(this.name,this.id,this.priority);return he&&this.disableScroll&&this.ctrl.disableScroll(this.id),he}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class le{constructor(he,_e,Be,U){this.id=_e,this.disable=Be,this.disableScroll=U,this.ctrl=he}block(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.disableGesture(he,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.enableGesture(he,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ve="backdrop-no-scroll",De=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(he){var _e;return new m(this,this.newID(),he.name,null!==(_e=he.priority)&&void 0!==_e?_e:0,!!he.disableScroll)}createBlocker(he={}){return new le(this,this.newID(),he.disable,!!he.disableScroll)}start(he,_e,Be){return this.canStart(he)?(this.requestedStart.set(_e,Be),!0):(this.requestedStart.delete(_e),!1)}capture(he,_e,Be){if(!this.start(he,_e,Be))return!1;const U=this.requestedStart;let we=-1e4;if(U.forEach(je=>{we=Math.max(we,je)}),we===Be){this.capturedId=_e,U.clear();const je=new CustomEvent("ionGestureCaptured",{detail:{gestureName:he}});return document.dispatchEvent(je),!0}return U.delete(_e),!1}release(he){this.requestedStart.delete(he),this.capturedId===he&&(this.capturedId=void 0)}disableGesture(he,_e){let Be=this.disabledGestures.get(he);void 0===Be&&(Be=new Set,this.disabledGestures.set(he,Be)),Be.add(_e)}enableGesture(he,_e){const Be=this.disabledGestures.get(he);void 0!==Be&&Be.delete(_e)}disableScroll(he){this.disabledScroll.add(he),1===this.disabledScroll.size&&document.body.classList.add(ve)}enableScroll(he){this.disabledScroll.delete(he),0===this.disabledScroll.size&&document.body.classList.remove(ve)}canStart(he){return!(void 0!==this.capturedId||this.isDisabled(he))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(he){const _e=this.disabledGestures.get(he);return!!(_e&&_e.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(pn,dt,L)=>{"use strict";L.r(dt),L.d(dt,{MENU_BACK_BUTTON_PRIORITY:()=>De,OVERLAY_BACK_BUTTON_PRIORITY:()=>ve,blockHardwareBackButton:()=>m,startHardwareBackButton:()=>le});var y=L(5861);const m=()=>{document.addEventListener("backbutton",()=>{})},le=()=>{const Re=document;let he=!1;Re.addEventListener("backbutton",()=>{if(he)return;let _e=0,Be=[];const U=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ge,Ue){Be.push({priority:ge,handler:Ue,id:_e++})}}});Re.dispatchEvent(U);const we=function(){var ge=(0,y.Z)(function*(Ue){try{if(null!=Ue&&Ue.handler){const qe=Ue.handler(je);null!=qe&&(yield qe)}}catch(qe){console.error(qe)}});return function(qe){return ge.apply(this,arguments)}}(),je=()=>{if(Be.length>0){let ge={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Be.forEach(Ue=>{Ue.priority>=ge.priority&&(ge=Ue)}),he=!0,Be=Be.filter(Ue=>Ue.id!==ge.id),we(ge).then(()=>he=!1)}};je()})},ve=100,De=99},3577:(pn,dt,L)=>{"use strict";L.d(dt,{a:()=>_e,b:()=>Be,c:()=>le,d:()=>It,e:()=>qe,f:()=>Ue,g:()=>U,h:()=>ge,i:()=>he,j:()=>et,k:()=>De,l:()=>Ae,m:()=>ve,n:()=>je,o:()=>Ce,p:()=>at,q:()=>ze,r:()=>we,s:()=>vt,t:()=>y,u:()=>ft,v:()=>ct});const y=(Ye,Le=0)=>new Promise(_t=>{m(Ye,Le,_t)}),m=(Ye,Le=0,_t)=>{let nt,pt;const Et={passive:!0},xe=()=>{nt&&nt()},Ve=We=>{(void 0===We||Ye===We.target)&&(xe(),_t(We))};return Ye&&(Ye.addEventListener("webkitTransitionEnd",Ve,Et),Ye.addEventListener("transitionend",Ve,Et),pt=setTimeout(Ve,Le+500),nt=()=>{pt&&(clearTimeout(pt),pt=void 0),Ye.removeEventListener("webkitTransitionEnd",Ve,Et),Ye.removeEventListener("transitionend",Ve,Et)}),xe},le=(Ye,Le)=>{Ye.componentOnReady?Ye.componentOnReady().then(_t=>Le(_t)):we(()=>Le(Ye))},ve=Ye=>void 0!==Ye.componentOnReady,De=(Ye,Le=[])=>{const _t={};return Le.forEach(nt=>{Ye.hasAttribute(nt)&&(null!==Ye.getAttribute(nt)&&(_t[nt]=Ye.getAttribute(nt)),Ye.removeAttribute(nt))}),_t},Re=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],he=(Ye,Le)=>{let _t=Re;return Le&&Le.length>0&&(_t=_t.filter(nt=>!Le.includes(nt))),De(Ye,_t)},_e=(Ye,Le,_t,nt)=>{var pt;if(typeof window<"u"){const Et=window,ce=null===(pt=null==Et?void 0:Et.Ionic)||void 0===pt?void 0:pt.config;if(ce){const xe=ce.get("_ael");if(xe)return xe(Ye,Le,_t,nt);if(ce._ael)return ce._ael(Ye,Le,_t,nt)}}return Ye.addEventListener(Le,_t,nt)},Be=(Ye,Le,_t,nt)=>{var pt;if(typeof window<"u"){const Et=window,ce=null===(pt=null==Et?void 0:Et.Ionic)||void 0===pt?void 0:pt.config;if(ce){const xe=ce.get("_rel");if(xe)return xe(Ye,Le,_t,nt);if(ce._rel)return ce._rel(Ye,Le,_t,nt)}}return Ye.removeEventListener(Le,_t,nt)},U=(Ye,Le=Ye)=>Ye.shadowRoot||Le,we=Ye=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ye):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ye):setTimeout(Ye),je=Ye=>!!Ye.shadowRoot&&!!Ye.attachShadow,ge=Ye=>{const Le=Ye.closest("ion-item");return Le?Le.querySelector("ion-label"):null},Ue=Ye=>{if(Ye.focus(),Ye.classList.contains("ion-focusable")){const Le=Ye.closest("ion-app");Le&&Le.setFocus([Ye])}},qe=(Ye,Le)=>{let _t;const nt=Ye.getAttribute("aria-labelledby"),pt=Ye.id;let Et=null!==nt&&""!==nt.trim()?nt:Le+"-lbl",ce=null!==nt&&""!==nt.trim()?document.getElementById(nt):ge(Ye);return ce?(null===nt&&(ce.id=Et),_t=ce.textContent,ce.setAttribute("aria-hidden","true")):""!==pt.trim()&&(ce=document.querySelector(`label[for="${pt}"]`),ce&&(""!==ce.id?Et=ce.id:ce.id=Et=`${pt}-lbl`,_t=ce.textContent)),{label:ce,labelId:Et,labelText:_t}},It=(Ye,Le,_t,nt,pt)=>{if(Ye||je(Le)){let Et=Le.querySelector("input.aux-input");Et||(Et=Le.ownerDocument.createElement("input"),Et.type="hidden",Et.classList.add("aux-input"),Le.appendChild(Et)),Et.disabled=pt,Et.name=_t,Et.value=nt||""}},Ae=(Ye,Le,_t)=>Math.max(Ye,Math.min(Le,_t)),Ce=(Ye,Le)=>{if(!Ye){const _t="ASSERT: "+Le;throw console.error(_t),new Error(_t)}},ct=Ye=>Ye.timeStamp||Date.now(),at=Ye=>{if(Ye){const Le=Ye.changedTouches;if(Le&&Le.length>0){const _t=Le[0];return{x:_t.clientX,y:_t.clientY}}if(void 0!==Ye.pageX)return{x:Ye.pageX,y:Ye.pageY}}return{x:0,y:0}},ze=Ye=>{const Le="rtl"===document.dir;switch(Ye){case"start":return Le;case"end":return!Le;default:throw new Error(`"${Ye}" is not a valid value for [side]. Use "start" or "end" instead.`)}},et=(Ye,Le)=>{const _t=Ye._original||Ye;return{_original:Ye,emit:ft(_t.emit.bind(_t),Le)}},ft=(Ye,Le=0)=>{let _t;return(...nt)=>{clearTimeout(_t),_t=setTimeout(Ye,Le,...nt)}},vt=(Ye,Le)=>{if(null!=Ye||(Ye={}),null!=Le||(Le={}),Ye===Le)return!0;const _t=Object.keys(Ye);if(_t.length!==Object.keys(Le).length)return!1;for(const nt of _t)if(!(nt in Le)||Ye[nt]!==Le[nt])return!1;return!0}},3457:(pn,dt,L)=>{"use strict";L.d(dt,{w:()=>y});const y=typeof window<"u"?window:void 0},1898:(pn,dt,L)=>{"use strict";L.r(dt),L.d(dt,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>Be});var y=L(4349);const m=(ge,Ue,qe,It)=>{const Ae=le(ge)?{capture:!!It.capture,passive:!!It.passive}:!!It.capture;let Ce,ct;return ge.__zone_symbol__addEventListener?(Ce="__zone_symbol__addEventListener",ct="__zone_symbol__removeEventListener"):(Ce="addEventListener",ct="removeEventListener"),ge[Ce](Ue,qe,Ae),()=>{ge[ct](Ue,qe,Ae)}},le=ge=>{if(void 0===ve)try{const Ue=Object.defineProperty({},"passive",{get:()=>{ve=!0}});ge.addEventListener("optsTest",()=>{},Ue)}catch{ve=!1}return!!ve};let ve;const he=ge=>ge instanceof Document?ge:ge.ownerDocument,Be=ge=>{let Ue=!1,qe=!1,It=!0,Ae=!1;const Ce=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ge),ct=Ce.canStart,at=Ce.onWillStart,ze=Ce.onStart,et=Ce.onEnd,ft=Ce.notCaptured,vt=Ce.onMove,Ye=Ce.threshold,Le=Ce.passive,_t=Ce.blurOnStart,nt={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},pt=((ge,Ue,qe)=>{const It=qe*(Math.PI/180),Ae="x"===ge,Ce=Math.cos(It),ct=Ue*Ue;let at=0,ze=0,et=!1,ft=0;return{start(vt,Ye){at=vt,ze=Ye,ft=0,et=!0},detect(vt,Ye){if(!et)return!1;const Le=vt-at,_t=Ye-ze,nt=Le*Le+_t*_t;if(nt<ct)return!1;const pt=Math.sqrt(nt),Et=(Ae?Le:_t)/pt;return ft=Et>Ce?1:Et<-Ce?-1:0,et=!1,!0},isGesture:()=>0!==ft,getDirection:()=>ft}})(Ce.direction,Ce.threshold,Ce.maxAngle),Et=y.G.createGesture({name:ge.gestureName,priority:ge.gesturePriority,disableScroll:ge.disableScroll}),Ve=()=>{Ue&&(Ae=!1,vt&&vt(nt))},We=()=>!!Et.capture()&&(Ue=!0,It=!1,nt.startX=nt.currentX,nt.startY=nt.currentY,nt.startTime=nt.currentTime,at?at(nt).then(Fe):Fe(),!0),Fe=()=>{_t&&(()=>{if(typeof document<"u"){const Pt=document.activeElement;null!=Pt&&Pt.blur&&Pt.blur()}})(),ze&&ze(nt),It=!0},He=()=>{Ue=!1,qe=!1,Ae=!1,It=!0,Et.release()},mt=Pt=>{const un=Ue,Tt=It;if(He(),Tt){if(U(nt,Pt),un)return void(et&&et(nt));ft&&ft(nt)}},lt=((ge,Ue,qe,It,Ae)=>{let Ce,ct,at,ze,et,ft,vt,Ye=0;const Le=Ne=>{Ye=Date.now()+2e3,Ue(Ne)&&(!ct&&qe&&(ct=m(ge,"touchmove",qe,Ae)),at||(at=m(Ne.target,"touchend",nt,Ae)),ze||(ze=m(Ne.target,"touchcancel",nt,Ae)))},_t=Ne=>{Ye>Date.now()||Ue(Ne)&&(!ft&&qe&&(ft=m(he(ge),"mousemove",qe,Ae)),vt||(vt=m(he(ge),"mouseup",pt,Ae)))},nt=Ne=>{Et(),It&&It(Ne)},pt=Ne=>{ce(),It&&It(Ne)},Et=()=>{ct&&ct(),at&&at(),ze&&ze(),ct=at=ze=void 0},ce=()=>{ft&&ft(),vt&&vt(),ft=vt=void 0},xe=()=>{Et(),ce()},Ve=(Ne=!0)=>{Ne?(Ce||(Ce=m(ge,"touchstart",Le,Ae)),et||(et=m(ge,"mousedown",_t,Ae))):(Ce&&Ce(),et&&et(),Ce=et=void 0,xe())};return{enable:Ve,stop:xe,destroy:()=>{Ve(!1),It=qe=Ue=void 0}}})(Ce.el,Pt=>{const un=je(Pt);return!(qe||!It||(we(Pt,nt),nt.startX=nt.currentX,nt.startY=nt.currentY,nt.startTime=nt.currentTime=un,nt.velocityX=nt.velocityY=nt.deltaX=nt.deltaY=0,nt.event=Pt,ct&&!1===ct(nt))||(Et.release(),!Et.start()))&&(qe=!0,0===Ye?We():(pt.start(nt.startX,nt.startY),!0))},Pt=>{Ue?!Ae&&It&&(Ae=!0,U(nt,Pt),requestAnimationFrame(Ve)):(U(nt,Pt),pt.detect(nt.currentX,nt.currentY)&&(!pt.isGesture()||!We())&&Mt())},mt,{capture:!1,passive:Le}),Mt=()=>{He(),lt.stop(),ft&&ft(nt)};return{enable(Pt=!0){Pt||(Ue&&mt(void 0),He()),lt.enable(Pt)},destroy(){Et.destroy(),lt.destroy()}}},U=(ge,Ue)=>{if(!Ue)return;const qe=ge.currentX,It=ge.currentY,Ae=ge.currentTime;we(Ue,ge);const Ce=ge.currentX,ct=ge.currentY,ze=(ge.currentTime=je(Ue))-Ae;if(ze>0&&ze<100){const ft=(ct-It)/ze;ge.velocityX=(Ce-qe)/ze*.7+.3*ge.velocityX,ge.velocityY=.7*ft+.3*ge.velocityY}ge.deltaX=Ce-ge.startX,ge.deltaY=ct-ge.startY,ge.event=Ue},we=(ge,Ue)=>{let qe=0,It=0;if(ge){const Ae=ge.changedTouches;if(Ae&&Ae.length>0){const Ce=Ae[0];qe=Ce.clientX,It=Ce.clientY}else void 0!==ge.pageX&&(qe=ge.pageX,It=ge.pageY)}Ue.currentX=qe,Ue.currentY=It},je=ge=>ge.timeStamp||Date.now()},4083:(pn,dt,L)=>{"use strict";L.d(dt,{B:()=>we,H:()=>xe,a:()=>fi,b:()=>ht,c:()=>Pt,d:()=>Ot,e:()=>_s,f:()=>Je,g:()=>un,h:()=>Et,i:()=>sn,j:()=>je,p:()=>rs,r:()=>Dt,w:()=>Qs});var y=L(5861);let le,ve,De,Re=!1,he=!1,_e=!1,Be=!1,U=!1;const we={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},je=W=>{const ne=new URL(W,Jn.$resourcesUrl$);return ne.origin!==Tr.location.origin?ne.href:ne.pathname},ct="s-id",at="sty-id",ft="http://www.w3.org/1999/xlink",vt={},nt=W=>"object"==(W=typeof W)||"function"===W;function pt(W){var ne,Ee,oe;return null!==(oe=null===(Ee=null===(ne=W.head)||void 0===ne?void 0:ne.querySelector('meta[name="csp-nonce"]'))||void 0===Ee?void 0:Ee.getAttribute("content"))&&void 0!==oe?oe:void 0}const Et=(W,ne,...Ee)=>{let oe=null,G=null,ie=null,$e=!1,Xe=!1;const ut=[],Rt=gn=>{for(let zn=0;zn<gn.length;zn++)oe=gn[zn],Array.isArray(oe)?Rt(oe):null!=oe&&"boolean"!=typeof oe&&(($e="function"!=typeof W&&!nt(oe))&&(oe=String(oe)),$e&&Xe?ut[ut.length-1].$text$+=oe:ut.push($e?ce(null,oe):oe),Xe=$e)};if(Rt(Ee),ne){ne.key&&(G=ne.key),ne.name&&(ie=ne.name);{const gn=ne.className||ne.class;gn&&(ne.class="object"!=typeof gn?gn:Object.keys(gn).filter(zn=>gn[zn]).join(" "))}}if("function"==typeof W)return W(null===ne?{}:ne,ut,We);const cn=ce(W,null);return cn.$attrs$=ne,ut.length>0&&(cn.$children$=ut),cn.$key$=G,cn.$name$=ie,cn},ce=(W,ne)=>({$flags$:0,$tag$:W,$text$:ne,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),xe={},We={forEach:(W,ne)=>W.map(Ne).forEach(ne),map:(W,ne)=>W.map(Ne).map(ne).map(Fe)},Ne=W=>({vattrs:W.$attrs$,vchildren:W.$children$,vkey:W.$key$,vname:W.$name$,vtag:W.$tag$,vtext:W.$text$}),Fe=W=>{if("function"==typeof W.vtag){const Ee=Object.assign({},W.vattrs);return W.vkey&&(Ee.key=W.vkey),W.vname&&(Ee.name=W.vname),Et(W.vtag,Ee,...W.vchildren||[])}const ne=ce(W.vtag,W.vtext);return ne.$attrs$=W.vattrs,ne.$children$=W.vchildren,ne.$key$=W.vkey,ne.$name$=W.vname,ne},mt=(W,ne,Ee,oe,G,ie,$e)=>{let Xe,ut,Rt,cn;if(1===ie.nodeType){for(Xe=ie.getAttribute("c-id"),Xe&&(ut=Xe.split("."),(ut[0]===$e||"0"===ut[0])&&(Rt={$flags$:0,$hostId$:ut[0],$nodeId$:ut[1],$depth$:ut[2],$index$:ut[3],$tag$:ie.tagName.toLowerCase(),$elm$:ie,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ne.push(Rt),ie.removeAttribute("c-id"),W.$children$||(W.$children$=[]),W.$children$[Rt.$index$]=Rt,W=Rt,oe&&"0"===Rt.$depth$&&(oe[Rt.$index$]=Rt.$elm$))),cn=ie.childNodes.length-1;cn>=0;cn--)mt(W,ne,Ee,oe,G,ie.childNodes[cn],$e);if(ie.shadowRoot)for(cn=ie.shadowRoot.childNodes.length-1;cn>=0;cn--)mt(W,ne,Ee,oe,G,ie.shadowRoot.childNodes[cn],$e)}else if(8===ie.nodeType)ut=ie.nodeValue.split("."),(ut[1]===$e||"0"===ut[1])&&(Xe=ut[0],Rt={$flags$:0,$hostId$:ut[1],$nodeId$:ut[2],$depth$:ut[3],$index$:ut[4],$elm$:ie,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Xe?(Rt.$elm$=ie.nextSibling,Rt.$elm$&&3===Rt.$elm$.nodeType&&(Rt.$text$=Rt.$elm$.textContent,ne.push(Rt),ie.remove(),W.$children$||(W.$children$=[]),W.$children$[Rt.$index$]=Rt,oe&&"0"===Rt.$depth$&&(oe[Rt.$index$]=Rt.$elm$))):Rt.$hostId$===$e&&("s"===Xe?(Rt.$tag$="slot",ie["s-sn"]=ut[5]?Rt.$name$=ut[5]:"",ie["s-sr"]=!0,oe&&(Rt.$elm$=Qn.createElement(Rt.$tag$),Rt.$name$&&Rt.$elm$.setAttribute("name",Rt.$name$),ie.parentNode.insertBefore(Rt.$elm$,ie),ie.remove(),"0"===Rt.$depth$&&(oe[Rt.$index$]=Rt.$elm$)),Ee.push(Rt),W.$children$||(W.$children$=[]),W.$children$[Rt.$index$]=Rt):"r"===Xe&&(oe?ie.remove():(G["s-cr"]=ie,ie["s-cn"]=!0))));else if(W&&"style"===W.$tag$){const gn=ce(null,ie.textContent);gn.$elm$=ie,gn.$index$="0",W.$children$=[gn]}},lt=(W,ne)=>{if(1===W.nodeType){let Ee=0;for(;Ee<W.childNodes.length;Ee++)lt(W.childNodes[Ee],ne);if(W.shadowRoot)for(Ee=0;Ee<W.shadowRoot.childNodes.length;Ee++)lt(W.shadowRoot.childNodes[Ee],ne)}else if(8===W.nodeType){const Ee=W.nodeValue.split(".");"o"===Ee[0]&&(ne.set(Ee[1]+"."+Ee[2],W),W.nodeValue="",W["s-en"]=Ee[3])}},Pt=W=>Jr.push(W),un=W=>kn(W).$modeName$,Je=W=>kn(W).$hostElement$,Ot=(W,ne,Ee)=>{const oe=Je(W);return{emit:G=>Qt(oe,ne,{bubbles:!!(4&Ee),composed:!!(2&Ee),cancelable:!!(1&Ee),detail:G})}},Qt=(W,ne,Ee)=>{const oe=Jn.ce(ne,Ee);return W.dispatchEvent(oe),oe},yn=new WeakMap,Tn=(W,ne,Ee)=>{let oe=nr.get(W);ki&&Ee?(oe=oe||new CSSStyleSheet,"string"==typeof oe?oe=ne:oe.replaceSync(ne)):oe=ne,nr.set(W,oe)},Dn=(W,ne,Ee,oe)=>{var G;let ie=In(ne,Ee);const $e=nr.get(ie);if(W=11===W.nodeType?W:Qn,$e)if("string"==typeof $e){let ut,Xe=yn.get(W=W.head||W);if(Xe||yn.set(W,Xe=new Set),!Xe.has(ie)){if(W.host&&(ut=W.querySelector(`[${at}="${ie}"]`)))ut.innerHTML=$e;else{ut=Qn.createElement("style"),ut.innerHTML=$e;const Rt=null!==(G=Jn.$nonce$)&&void 0!==G?G:pt(Qn);null!=Rt&&ut.setAttribute("nonce",Rt),W.insertBefore(ut,W.querySelector("link"))}Xe&&Xe.add(ie)}}else W.adoptedStyleSheets.includes($e)||(W.adoptedStyleSheets=[...W.adoptedStyleSheets,$e]);return ie},In=(W,ne)=>"sc-"+(ne&&32&W.$flags$?W.$tagName$+"-"+ne:W.$tagName$),Ft=W=>W.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),or=(W,ne,Ee,oe,G,ie)=>{if(Ee!==oe){let $e=zt(W,ne),Xe=ne.toLowerCase();if("class"===ne){const ut=W.classList,Rt=yr(Ee),cn=yr(oe);ut.remove(...Rt.filter(gn=>gn&&!cn.includes(gn))),ut.add(...cn.filter(gn=>gn&&!Rt.includes(gn)))}else if("style"===ne){for(const ut in Ee)(!oe||null==oe[ut])&&(ut.includes("-")?W.style.removeProperty(ut):W.style[ut]="");for(const ut in oe)(!Ee||oe[ut]!==Ee[ut])&&(ut.includes("-")?W.style.setProperty(ut,oe[ut]):W.style[ut]=oe[ut])}else if("key"!==ne)if("ref"===ne)oe&&oe(W);else if($e||"o"!==ne[0]||"n"!==ne[1]){const ut=nt(oe);if(($e||ut&&null!==oe)&&!G)try{if(W.tagName.includes("-"))W[ne]=oe;else{const cn=null==oe?"":oe;"list"===ne?$e=!1:(null==Ee||W[ne]!=cn)&&(W[ne]=cn)}}catch{}let Rt=!1;Xe!==(Xe=Xe.replace(/^xlink\:?/,""))&&(ne=Xe,Rt=!0),null==oe||!1===oe?(!1!==oe||""===W.getAttribute(ne))&&(Rt?W.removeAttributeNS(ft,ne):W.removeAttribute(ne)):(!$e||4&ie||G)&&!ut&&(oe=!0===oe?"":oe,Rt?W.setAttributeNS(ft,ne,oe):W.setAttribute(ne,oe))}else ne="-"===ne[2]?ne.slice(3):zt(Tr,Xe)?Xe.slice(2):Xe[2]+ne.slice(3),Ee&&Jn.rel(W,ne,Ee,!1),oe&&Jn.ael(W,ne,oe,!1)}},sr=/\s/,yr=W=>W?W.split(sr):[],tn=(W,ne,Ee,oe)=>{const G=11===ne.$elm$.nodeType&&ne.$elm$.host?ne.$elm$.host:ne.$elm$,ie=W&&W.$attrs$||vt,$e=ne.$attrs$||vt;for(oe in ie)oe in $e||or(G,oe,ie[oe],void 0,Ee,ne.$flags$);for(oe in $e)or(G,oe,ie[oe],$e[oe],Ee,ne.$flags$)},xr=(W,ne,Ee,oe)=>{const G=ne.$children$[Ee];let $e,Xe,ut,ie=0;if(Re||(_e=!0,"slot"===G.$tag$&&(le&&oe.classList.add(le+"-s"),G.$flags$|=G.$children$?2:1)),null!==G.$text$)$e=G.$elm$=Qn.createTextNode(G.$text$);else if(1&G.$flags$)$e=G.$elm$=Qn.createTextNode("");else{if(Be||(Be="svg"===G.$tag$),$e=G.$elm$=Qn.createElementNS(Be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&G.$flags$?"slot-fb":G.$tag$),Be&&"foreignObject"===G.$tag$&&(Be=!1),tn(null,G,Be),(W=>null!=W)(le)&&$e["s-si"]!==le&&$e.classList.add($e["s-si"]=le),G.$children$)for(ie=0;ie<G.$children$.length;++ie)Xe=xr(W,G,ie,$e),Xe&&$e.appendChild(Xe);"svg"===G.$tag$?Be=!1:"foreignObject"===$e.tagName&&(Be=!0)}return $e["s-hn"]=De,3&G.$flags$&&($e["s-sr"]=!0,$e["s-cr"]=ve,$e["s-sn"]=G.$name$||"",ut=W&&W.$children$&&W.$children$[Ee],ut&&ut.$tag$===G.$tag$&&W.$elm$&&dr(W.$elm$,!1)),$e},dr=(W,ne)=>{Jn.$flags$|=1;const Ee=W.childNodes;for(let oe=Ee.length-1;oe>=0;oe--){const G=Ee[oe];G["s-hn"]!==De&&G["s-ol"]&&($n(G).insertBefore(G,vn(G)),G["s-ol"].remove(),G["s-ol"]=void 0,_e=!0),ne&&dr(G,ne)}Jn.$flags$&=-2},rr=(W,ne,Ee,oe,G,ie)=>{let Xe,$e=W["s-cr"]&&W["s-cr"].parentNode||W;for($e.shadowRoot&&$e.tagName===De&&($e=$e.shadowRoot);G<=ie;++G)oe[G]&&(Xe=xr(null,Ee,G,W),Xe&&(oe[G].$elm$=Xe,$e.insertBefore(Xe,vn(ne))))},Or=(W,ne,Ee)=>{for(let oe=ne;oe<=Ee;++oe){const G=W[oe];if(G){const ie=G.$elm$;Gn(G),ie&&(he=!0,ie["s-ol"]?ie["s-ol"].remove():dr(ie,!0),ie.remove())}}},Sn=(W,ne)=>W.$tag$===ne.$tag$&&("slot"===W.$tag$?W.$name$===ne.$name$:W.$key$===ne.$key$),vn=W=>W&&W["s-ol"]||W,$n=W=>(W["s-ol"]?W["s-ol"]:W).parentNode,Ir=(W,ne)=>{const Ee=ne.$elm$=W.$elm$,oe=W.$children$,G=ne.$children$,ie=ne.$tag$,$e=ne.$text$;let Xe;null===$e?(Be="svg"===ie||"foreignObject"!==ie&&Be,"slot"===ie||tn(W,ne,Be),null!==oe&&null!==G?((W,ne,Ee,oe)=>{let Ri,Fi,G=0,ie=0,$e=0,Xe=0,ut=ne.length-1,Rt=ne[0],cn=ne[ut],gn=oe.length-1,zn=oe[0],ur=oe[gn];for(;G<=ut&&ie<=gn;)if(null==Rt)Rt=ne[++G];else if(null==cn)cn=ne[--ut];else if(null==zn)zn=oe[++ie];else if(null==ur)ur=oe[--gn];else if(Sn(Rt,zn))Ir(Rt,zn),Rt=ne[++G],zn=oe[++ie];else if(Sn(cn,ur))Ir(cn,ur),cn=ne[--ut],ur=oe[--gn];else if(Sn(Rt,ur))("slot"===Rt.$tag$||"slot"===ur.$tag$)&&dr(Rt.$elm$.parentNode,!1),Ir(Rt,ur),W.insertBefore(Rt.$elm$,cn.$elm$.nextSibling),Rt=ne[++G],ur=oe[--gn];else if(Sn(cn,zn))("slot"===Rt.$tag$||"slot"===ur.$tag$)&&dr(cn.$elm$.parentNode,!1),Ir(cn,zn),W.insertBefore(cn.$elm$,Rt.$elm$),cn=ne[--ut],zn=oe[++ie];else{for($e=-1,Xe=G;Xe<=ut;++Xe)if(ne[Xe]&&null!==ne[Xe].$key$&&ne[Xe].$key$===zn.$key$){$e=Xe;break}$e>=0?(Fi=ne[$e],Fi.$tag$!==zn.$tag$?Ri=xr(ne&&ne[ie],Ee,$e,W):(Ir(Fi,zn),ne[$e]=void 0,Ri=Fi.$elm$),zn=oe[++ie]):(Ri=xr(ne&&ne[ie],Ee,ie,W),zn=oe[++ie]),Ri&&$n(Rt.$elm$).insertBefore(Ri,vn(Rt.$elm$))}G>ut?rr(W,null==oe[gn+1]?null:oe[gn+1].$elm$,Ee,oe,ie,gn):ie>gn&&Or(ne,G,ut)})(Ee,oe,ne,G):null!==G?(null!==W.$text$&&(Ee.textContent=""),rr(Ee,null,ne,G,0,G.length-1)):null!==oe&&Or(oe,0,oe.length-1),Be&&"svg"===ie&&(Be=!1)):(Xe=Ee["s-cr"])?Xe.parentNode.textContent=$e:W.$text$!==$e&&(Ee.data=$e)},vr=W=>{const ne=W.childNodes;let Ee,oe,G,ie,$e,Xe;for(oe=0,G=ne.length;oe<G;oe++)if(Ee=ne[oe],1===Ee.nodeType){if(Ee["s-sr"])for($e=Ee["s-sn"],Ee.hidden=!1,ie=0;ie<G;ie++)if(Xe=ne[ie].nodeType,ne[ie]["s-hn"]!==Ee["s-hn"]||""!==$e){if(1===Xe&&$e===ne[ie].getAttribute("slot")){Ee.hidden=!0;break}}else if(1===Xe||3===Xe&&""!==ne[ie].textContent.trim()){Ee.hidden=!0;break}vr(Ee)}},ar=[],Lr=W=>{let ne,Ee,oe,G,ie,$e,Xe=0;const ut=W.childNodes,Rt=ut.length;for(;Xe<Rt;Xe++){if(ne=ut[Xe],ne["s-sr"]&&(Ee=ne["s-cr"])&&Ee.parentNode)for(oe=Ee.parentNode.childNodes,G=ne["s-sn"],$e=oe.length-1;$e>=0;$e--)Ee=oe[$e],!Ee["s-cn"]&&!Ee["s-nr"]&&Ee["s-hn"]!==ne["s-hn"]&&(Mr(Ee,G)?(ie=ar.find(cn=>cn.$nodeToRelocate$===Ee),he=!0,Ee["s-sn"]=Ee["s-sn"]||G,ie?ie.$slotRefNode$=ne:ar.push({$slotRefNode$:ne,$nodeToRelocate$:Ee}),Ee["s-sr"]&&ar.map(cn=>{Mr(cn.$nodeToRelocate$,Ee["s-sn"])&&(ie=ar.find(gn=>gn.$nodeToRelocate$===Ee),ie&&!cn.$slotRefNode$&&(cn.$slotRefNode$=ie.$slotRefNode$))})):ar.some(cn=>cn.$nodeToRelocate$===Ee)||ar.push({$nodeToRelocate$:Ee}));1===ne.nodeType&&Lr(ne)}},Mr=(W,ne)=>1===W.nodeType?null===W.getAttribute("slot")&&""===ne||W.getAttribute("slot")===ne:W["s-sn"]===ne||""===ne,Gn=W=>{W.$attrs$&&W.$attrs$.ref&&W.$attrs$.ref(null),W.$children$&&W.$children$.map(Gn)},ci=(W,ne)=>{ne&&!W.$onRenderResolve$&&ne["s-p"]&&ne["s-p"].push(new Promise(Ee=>W.$onRenderResolve$=Ee))},Un=(W,ne)=>{if(W.$flags$|=16,!(4&W.$flags$))return ci(W,W.$ancestorComponent$),Qs(()=>qt(W,ne));W.$flags$|=512},qt=(W,ne)=>{const oe=W.$lazyInstance$;let G;return ne&&(W.$flags$|=256,W.$queuedListeners$&&(W.$queuedListeners$.map(([ie,$e])=>On(oe,ie,$e)),W.$queuedListeners$=null),G=On(oe,"componentWillLoad")),G=me(G,()=>On(oe,"componentWillRender")),me(G,()=>Ge(W,oe,ne))},me=(W,ne)=>W instanceof Promise?W.then(ne):ne(),Ge=function(){var W=(0,y.Z)(function*(ne,Ee,oe){const G=ne.$hostElement$,$e=G["s-rc"];oe&&(W=>{const ne=W.$cmpMeta$,Ee=W.$hostElement$,oe=ne.$flags$,ie=Dn(Ee.shadowRoot?Ee.shadowRoot:Ee.getRootNode(),ne,W.$modeName$);10&oe&&(Ee["s-sc"]=ie,Ee.classList.add(ie+"-h"),2&oe&&Ee.classList.add(ie+"-s"))})(ne);At(ne,Ee),$e&&($e.map(ut=>ut()),G["s-rc"]=void 0);{const ut=G["s-p"],Rt=()=>Xt(ne);0===ut.length?Rt():(Promise.all(ut).then(Rt),ne.$flags$|=4,ut.length=0)}});return function(Ee,oe,G){return W.apply(this,arguments)}}(),At=(W,ne,Ee)=>{try{ne=ne.render&&ne.render(),W.$flags$&=-17,W.$flags$|=2,((W,ne)=>{const Ee=W.$hostElement$,oe=W.$cmpMeta$,G=W.$vnode$||ce(null,null),ie=(W=>W&&W.$tag$===xe)(ne)?ne:Et(null,null,ne);if(De=Ee.tagName,oe.$attrsToReflect$&&(ie.$attrs$=ie.$attrs$||{},oe.$attrsToReflect$.map(([$e,Xe])=>ie.$attrs$[Xe]=Ee[$e])),ie.$tag$=null,ie.$flags$|=4,W.$vnode$=ie,ie.$elm$=G.$elm$=Ee.shadowRoot||Ee,le=Ee["s-sc"],ve=Ee["s-cr"],Re=0!=(1&oe.$flags$),he=!1,Ir(G,ie),Jn.$flags$|=1,_e){Lr(ie.$elm$);let $e,Xe,ut,Rt,cn,gn,zn=0;for(;zn<ar.length;zn++)$e=ar[zn],Xe=$e.$nodeToRelocate$,Xe["s-ol"]||(ut=Qn.createTextNode(""),ut["s-nr"]=Xe,Xe.parentNode.insertBefore(Xe["s-ol"]=ut,Xe));for(zn=0;zn<ar.length;zn++)if($e=ar[zn],Xe=$e.$nodeToRelocate$,$e.$slotRefNode$){for(Rt=$e.$slotRefNode$.parentNode,cn=$e.$slotRefNode$.nextSibling,ut=Xe["s-ol"];ut=ut.previousSibling;)if(gn=ut["s-nr"],gn&&gn["s-sn"]===Xe["s-sn"]&&Rt===gn.parentNode&&(gn=gn.nextSibling,!gn||!gn["s-nr"])){cn=gn;break}(!cn&&Rt!==Xe.parentNode||Xe.nextSibling!==cn)&&Xe!==cn&&(!Xe["s-hn"]&&Xe["s-ol"]&&(Xe["s-hn"]=Xe["s-ol"].parentNode.nodeName),Rt.insertBefore(Xe,cn))}else 1===Xe.nodeType&&(Xe.hidden=!0)}he&&vr(ie.$elm$),Jn.$flags$&=-2,ar.length=0})(W,ne)}catch(oe){_n(oe,W.$hostElement$)}return null},Xt=W=>{const Ee=W.$hostElement$,G=W.$lazyInstance$,ie=W.$ancestorComponent$;On(G,"componentDidRender"),64&W.$flags$?On(G,"componentDidUpdate"):(W.$flags$|=64,_r(Ee),On(G,"componentDidLoad"),W.$onReadyResolve$(Ee),ie||lr()),W.$onInstanceResolve$(Ee),W.$onRenderResolve$&&(W.$onRenderResolve$(),W.$onRenderResolve$=void 0),512&W.$flags$&&ps(()=>Un(W,!1)),W.$flags$&=-517},sn=W=>{{const ne=kn(W),Ee=ne.$hostElement$.isConnected;return Ee&&2==(18&ne.$flags$)&&Un(ne,!1),Ee}},lr=W=>{_r(Qn.documentElement),ps(()=>Qt(Tr,"appload",{detail:{namespace:"ionic"}}))},On=(W,ne,Ee)=>{if(W&&W[ne])try{return W[ne](Ee)}catch(oe){_n(oe)}},_r=W=>W.classList.add("hydrated"),K=(W,ne,Ee)=>{if(ne.$members$){W.watchers&&(ne.$watchers$=W.watchers);const oe=Object.entries(ne.$members$),G=W.prototype;if(oe.map(([ie,[$e]])=>{31&$e||2&Ee&&32&$e?Object.defineProperty(G,ie,{get(){return((W,ne)=>kn(this).$instanceValues$.get(ne))(0,ie)},set(Xe){((W,ne,Ee,oe)=>{const G=kn(W),ie=G.$hostElement$,$e=G.$instanceValues$.get(ne),Xe=G.$flags$,ut=G.$lazyInstance$;Ee=((W,ne)=>null==W||nt(W)?W:4&ne?"false"!==W&&(""===W||!!W):2&ne?parseFloat(W):1&ne?String(W):W)(Ee,oe.$members$[ne][0]);const Rt=Number.isNaN($e)&&Number.isNaN(Ee);if((!(8&Xe)||void 0===$e)&&Ee!==$e&&!Rt&&(G.$instanceValues$.set(ne,Ee),ut)){if(oe.$watchers$&&128&Xe){const gn=oe.$watchers$[ne];gn&&gn.map(zn=>{try{ut[zn](Ee,$e,ne)}catch(ur){_n(ur,ie)}})}2==(18&Xe)&&Un(G,!1)}})(this,ie,Xe,ne)},configurable:!0,enumerable:!0}):1&Ee&&64&$e&&Object.defineProperty(G,ie,{value(...Xe){const ut=kn(this);return ut.$onInstancePromise$.then(()=>ut.$lazyInstance$[ie](...Xe))}})}),1&Ee){const ie=new Map;G.attributeChangedCallback=function($e,Xe,ut){Jn.jmp(()=>{const Rt=ie.get($e);if(this.hasOwnProperty(Rt))ut=this[Rt],delete this[Rt];else if(G.hasOwnProperty(Rt)&&"number"==typeof this[Rt]&&this[Rt]==ut)return;this[Rt]=(null!==ut||"boolean"!=typeof this[Rt])&&ut})},W.observedAttributes=oe.filter(([$e,Xe])=>15&Xe[0]).map(([$e,Xe])=>{const ut=Xe[1]||$e;return ie.set(ut,$e),512&Xe[0]&&ne.$attrsToReflect$.push([$e,ut]),ut})}}return W},z=function(){var W=(0,y.Z)(function*(ne,Ee,oe,G,ie){if(!(32&Ee.$flags$)){Ee.$flags$|=32;{if((ie=Xn(oe)).then){const Rt=()=>{};ie=yield ie,Rt()}ie.isProxied||(oe.$watchers$=ie.watchers,K(ie,oe,2),ie.isProxied=!0);const ut=()=>{};Ee.$flags$|=8;try{new ie(Ee)}catch(Rt){_n(Rt)}Ee.$flags$&=-9,Ee.$flags$|=128,ut(),q(Ee.$lazyInstance$)}if(ie.style){let ut=ie.style;"string"!=typeof ut&&(ut=ut[Ee.$modeName$=(W=>Jr.map(ne=>ne(W)).find(ne=>!!ne))(ne)]);const Rt=In(oe,Ee.$modeName$);if(!nr.has(Rt)){const cn=()=>{};Tn(Rt,ut,!!(1&oe.$flags$)),cn()}}}const $e=Ee.$ancestorComponent$,Xe=()=>Un(Ee,!0);$e&&$e["s-rc"]?$e["s-rc"].push(Xe):Xe()});return function(Ee,oe,G,ie,$e){return W.apply(this,arguments)}}(),q=W=>{On(W,"connectedCallback")},it=W=>{const ne=W["s-cr"]=Qn.createComment("");ne["s-cn"]=!0,W.insertBefore(ne,W.firstChild)},ht=(W,ne={})=>{var Ee;const G=[],ie=ne.exclude||[],$e=Tr.customElements,Xe=Qn.head,ut=Xe.querySelector("meta[charset]"),Rt=Qn.createElement("style"),cn=[],gn=Qn.querySelectorAll(`[${at}]`);let zn,ur=!0,Ri=0;for(Object.assign(Jn,ne),Jn.$resourcesUrl$=new URL(ne.resourcesUrl||"./",Qn.baseURI).href,Jn.$flags$|=2;Ri<gn.length;Ri++)Tn(gn[Ri].getAttribute(at),Ft(gn[Ri].innerHTML),!0);W.map(Fi=>{Fi[1].map(is=>{const Gr={$flags$:is[0],$tagName$:is[1],$members$:is[2],$listeners$:is[3]};Gr.$members$=is[2],Gr.$listeners$=is[3],Gr.$attrsToReflect$=[],Gr.$watchers$={};const En=Gr.$tagName$,hr=class extends HTMLElement{constructor(Kr){super(Kr),wt(Kr=this,Gr),1&Gr.$flags$&&Kr.attachShadow({mode:"open",delegatesFocus:!!(16&Gr.$flags$)})}connectedCallback(){zn&&(clearTimeout(zn),zn=null),ur?cn.push(this):Jn.jmp(()=>(W=>{if(!(1&Jn.$flags$)){const ne=kn(W),Ee=ne.$cmpMeta$,oe=()=>{};if(1&ne.$flags$)Ct(W,ne,Ee.$listeners$),q(ne.$lazyInstance$);else{let G;if(ne.$flags$|=1,G=W.getAttribute(ct),G){if(1&Ee.$flags$){const ie=Dn(W.shadowRoot,Ee,W.getAttribute("s-mode"));W.classList.remove(ie+"-h",ie+"-s")}((W,ne,Ee,oe)=>{const ie=W.shadowRoot,$e=[],ut=ie?[]:null,Rt=oe.$vnode$=ce(ne,null);Jn.$orgLocNodes$||lt(Qn.body,Jn.$orgLocNodes$=new Map),W[ct]=Ee,W.removeAttribute(ct),mt(Rt,$e,[],ut,W,W,Ee),$e.map(cn=>{const gn=cn.$hostId$+"."+cn.$nodeId$,zn=Jn.$orgLocNodes$.get(gn),ur=cn.$elm$;zn&&Ls&&""===zn["s-en"]&&zn.parentNode.insertBefore(ur,zn.nextSibling),ie||(ur["s-hn"]=ne,zn&&(ur["s-ol"]=zn,ur["s-ol"]["s-nr"]=ur)),Jn.$orgLocNodes$.delete(gn)}),ie&&ut.map(cn=>{cn&&ie.appendChild(cn)})})(W,Ee.$tagName$,G,ne)}G||12&Ee.$flags$&&it(W);{let ie=W;for(;ie=ie.parentNode||ie.host;)if(1===ie.nodeType&&ie.hasAttribute("s-id")&&ie["s-p"]||ie["s-p"]){ci(ne,ne.$ancestorComponent$=ie);break}}Ee.$members$&&Object.entries(Ee.$members$).map(([ie,[$e]])=>{if(31&$e&&W.hasOwnProperty(ie)){const Xe=W[ie];delete W[ie],W[ie]=Xe}}),z(W,ne,Ee)}oe()}})(this))}disconnectedCallback(){Jn.jmp(()=>(W=>{if(!(1&Jn.$flags$)){const ne=kn(this),Ee=ne.$lazyInstance$;ne.$rmListeners$&&(ne.$rmListeners$.map(oe=>oe()),ne.$rmListeners$=void 0),On(Ee,"disconnectedCallback")}})())}componentOnReady(){return kn(this).$onReadyPromise$}};Gr.$lazyBundleId$=Fi[0],!ie.includes(En)&&!$e.get(En)&&(G.push(En),$e.define(En,K(hr,Gr,1)))})});{Rt.innerHTML=G+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.setAttribute("data-styles","");const Fi=null!==(Ee=Jn.$nonce$)&&void 0!==Ee?Ee:pt(Qn);null!=Fi&&Rt.setAttribute("nonce",Fi),Xe.insertBefore(Rt,ut?ut.nextSibling:Xe.firstChild)}ur=!1,cn.length?cn.map(Fi=>Fi.connectedCallback()):Jn.jmp(()=>zn=setTimeout(lr,30))},Ct=(W,ne,Ee,oe)=>{Ee&&Ee.map(([G,ie,$e])=>{const Xe=Ut(W,G),ut=jt(ne,$e),Rt=on(G);Jn.ael(Xe,ie,ut,Rt),(ne.$rmListeners$=ne.$rmListeners$||[]).push(()=>Jn.rel(Xe,ie,ut,Rt))})},jt=(W,ne)=>Ee=>{try{256&W.$flags$?W.$lazyInstance$[ne](Ee):(W.$queuedListeners$=W.$queuedListeners$||[]).push([ne,Ee])}catch(oe){_n(oe)}},Ut=(W,ne)=>4&ne?Qn:8&ne?Tr:16&ne?Qn.body:W,on=W=>0!=(2&W),Wn=new WeakMap,kn=W=>Wn.get(W),Dt=(W,ne)=>Wn.set(ne.$lazyInstance$=W,ne),wt=(W,ne)=>{const Ee={$flags$:0,$hostElement$:W,$cmpMeta$:ne,$instanceValues$:new Map};return Ee.$onInstancePromise$=new Promise(oe=>Ee.$onInstanceResolve$=oe),Ee.$onReadyPromise$=new Promise(oe=>Ee.$onReadyResolve$=oe),W["s-p"]=[],W["s-rc"]=[],Ct(W,Ee,ne.$listeners$),Wn.set(W,Ee)},zt=(W,ne)=>ne in W,_n=(W,ne)=>(0,console.error)(W,ne),Nn=new Map,Xn=(W,ne,Ee)=>{const oe=W.$tagName$.replace(/-/g,"_"),G=W.$lazyBundleId$,ie=Nn.get(G);return ie?ie[oe]:L(863)(`./${G}.entry.js`).then($e=>(Nn.set(G,$e),$e[oe]),_n)},nr=new Map,Jr=[],Tr=typeof window<"u"?window:{},Qn=Tr.document||{head:{}},Jn={$flags$:0,$resourcesUrl$:"",jmp:W=>W(),raf:W=>requestAnimationFrame(W),ael:(W,ne,Ee,oe)=>W.addEventListener(ne,Ee,oe),rel:(W,ne,Ee,oe)=>W.removeEventListener(ne,Ee,oe),ce:(W,ne)=>new CustomEvent(W,ne)},fi=W=>{Object.assign(Jn,W)},Ls=!0,rs=W=>Promise.resolve(W),ki=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),pi=[],Bs=[],Si=(W,ne)=>Ee=>{W.push(Ee),U||(U=!0,ne&&4&Jn.$flags$?ps(vs):Jn.raf(vs))},ei=W=>{for(let ne=0;ne<W.length;ne++)try{W[ne](performance.now())}catch(Ee){_n(Ee)}W.length=0},vs=()=>{ei(pi),ei(Bs),(U=pi.length>0)&&Jn.raf(vs)},ps=W=>rs().then(W),_s=Si(pi,!1),Qs=Si(Bs,!0)},8126:(pn,dt,L)=>{"use strict";L.d(dt,{m:()=>we});var y=L(5861),m=L(7593),le=L(3577),ve=L(5273),De=L(9613);const Re=je=>(0,De.c)().duration(je?400:300),he=je=>{let ge,Ue;const qe=je.width+8,It=(0,De.c)(),Ae=(0,De.c)();je.isEndSide?(ge=qe+"px",Ue="0px"):(ge=-qe+"px",Ue="0px"),It.addElement(je.menuInnerEl).fromTo("transform",`translateX(${ge})`,`translateX(${Ue})`);const ct="ios"===(0,ve.b)(je),at=ct?.2:.25;return Ae.addElement(je.backdropEl).fromTo("opacity",.01,at),Re(ct).addAnimation([It,Ae])},_e=je=>{let ge,Ue;const qe=(0,ve.b)(je),It=je.width;je.isEndSide?(ge=-It+"px",Ue=It+"px"):(ge=It+"px",Ue=-It+"px");const Ae=(0,De.c)().addElement(je.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),Ce=(0,De.c)().addElement(je.contentEl).fromTo("transform","translateX(0px)",`translateX(${ge})`),ct=(0,De.c)().addElement(je.backdropEl).fromTo("opacity",.01,.32);return Re("ios"===qe).addAnimation([Ae,Ce,ct])},Be=je=>{const ge=(0,ve.b)(je),Ue=je.width*(je.isEndSide?-1:1)+"px",qe=(0,De.c)().addElement(je.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return Re("ios"===ge).addAnimation(qe)},we=(()=>{const je=new Map,ge=[],Ue=function(){var Fe=(0,y.Z)(function*(He){const mt=yield ze(He);return!!mt&&mt.open()});return function(mt){return Fe.apply(this,arguments)}}(),qe=function(){var Fe=(0,y.Z)(function*(He){const mt=yield void 0!==He?ze(He):et();return void 0!==mt&&mt.close()});return function(mt){return Fe.apply(this,arguments)}}(),It=function(){var Fe=(0,y.Z)(function*(He){const mt=yield ze(He);return!!mt&&mt.toggle()});return function(mt){return Fe.apply(this,arguments)}}(),Ae=function(){var Fe=(0,y.Z)(function*(He,mt){const lt=yield ze(mt);return lt&&(lt.disabled=!He),lt});return function(mt,lt){return Fe.apply(this,arguments)}}(),Ce=function(){var Fe=(0,y.Z)(function*(He,mt){const lt=yield ze(mt);return lt&&(lt.swipeGesture=He),lt});return function(mt,lt){return Fe.apply(this,arguments)}}(),ct=function(){var Fe=(0,y.Z)(function*(He){if(null!=He){const mt=yield ze(He);return void 0!==mt&&mt.isOpen()}return void 0!==(yield et())});return function(mt){return Fe.apply(this,arguments)}}(),at=function(){var Fe=(0,y.Z)(function*(He){const mt=yield ze(He);return!!mt&&!mt.disabled});return function(mt){return Fe.apply(this,arguments)}}(),ze=function(){var Fe=(0,y.Z)(function*(He){return yield Ne(),"start"===He||"end"===He?We(Mt=>Mt.side===He&&!Mt.disabled)||We(Mt=>Mt.side===He):null!=He?We(lt=>lt.menuId===He):We(lt=>!lt.disabled)||(ge.length>0?ge[0].el:void 0)});return function(mt){return Fe.apply(this,arguments)}}(),et=function(){var Fe=(0,y.Z)(function*(){return yield Ne(),ce()});return function(){return Fe.apply(this,arguments)}}(),ft=function(){var Fe=(0,y.Z)(function*(){return yield Ne(),xe()});return function(){return Fe.apply(this,arguments)}}(),vt=function(){var Fe=(0,y.Z)(function*(){return yield Ne(),Ve()});return function(){return Fe.apply(this,arguments)}}(),Ye=(Fe,He)=>{je.set(Fe,He)},nt=Fe=>{const He=Fe.side;ge.filter(mt=>mt.side===He&&mt!==Fe).forEach(mt=>mt.disabled=!0)},pt=function(){var Fe=(0,y.Z)(function*(He,mt,lt){if(Ve())return!1;if(mt){const Mt=yield et();Mt&&He.el!==Mt&&(yield Mt.setOpen(!1,!1))}return He._setOpen(mt,lt)});return function(mt,lt,Mt){return Fe.apply(this,arguments)}}(),ce=()=>We(Fe=>Fe._isOpen),xe=()=>ge.map(Fe=>Fe.el),Ve=()=>ge.some(Fe=>Fe.isAnimating),We=Fe=>{const He=ge.find(Fe);if(void 0!==He)return He.el},Ne=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Fe=>new Promise(He=>(0,le.c)(Fe,He))));return Ye("reveal",Be),Ye("push",_e),Ye("overlay",he),typeof document<"u"&&document.addEventListener("ionBackButton",Fe=>{const He=ce();He&&Fe.detail.register(m.MENU_BACK_BUTTON_PRIORITY,()=>He.close())}),{registerAnimation:Ye,get:ze,getMenus:ft,getOpen:et,isEnabled:at,swipeGesture:Ce,isAnimating:vt,isOpen:ct,enable:Ae,toggle:It,close:qe,open:Ue,_getOpenSync:ce,_createAnimation:(Fe,He)=>{const mt=je.get(Fe);if(!mt)throw new Error("animation not registered");return mt(He)},_register:Fe=>{ge.indexOf(Fe)<0&&(Fe.disabled||nt(Fe),ge.push(Fe))},_unregister:Fe=>{const He=ge.indexOf(Fe);He>-1&&ge.splice(He,1)},_setOpen:pt,_setActiveMenu:nt}})()},1178:(pn,dt,L)=>{"use strict";L.d(dt,{a:()=>m,b:()=>le,p:()=>y});const y=(ve,...De)=>console.warn(`[Ionic Warning]: ${ve}`,...De),m=(ve,...De)=>console.error(`[Ionic Error]: ${ve}`,...De),le=(ve,...De)=>console.error(`<${ve.tagName.toLowerCase()}> must be used inside ${De.join(" or ")}.`)},9866:(pn,dt,L)=>{"use strict";L.d(dt,{L:()=>ve,a:()=>De,b:()=>Re,c:()=>he,d:()=>_e,e:()=>vt,g:()=>_t,l:()=>ft,s:()=>Ye,t:()=>we});var y=L(5861),m=L(4083),le=L(3577);const ve="ionViewWillEnter",De="ionViewDidEnter",Re="ionViewWillLeave",he="ionViewDidLeave",_e="ionViewWillUnload",we=nt=>new Promise((pt,Et)=>{(0,m.w)(()=>{je(nt),ge(nt).then(ce=>{ce.animation&&ce.animation.destroy(),Ue(nt),pt(ce)},ce=>{Ue(nt),Et(ce)})})}),je=nt=>{const pt=nt.enteringEl,Et=nt.leavingEl;Le(pt,Et,nt.direction),nt.showGoBack?pt.classList.add("can-go-back"):pt.classList.remove("can-go-back"),Ye(pt,!1),pt.style.setProperty("pointer-events","none"),Et&&(Ye(Et,!1),Et.style.setProperty("pointer-events","none"))},ge=function(){var nt=(0,y.Z)(function*(pt){const Et=yield qe(pt);return Et&&m.B.isBrowser?It(Et,pt):Ae(pt)});return function(Et){return nt.apply(this,arguments)}}(),Ue=nt=>{const pt=nt.enteringEl,Et=nt.leavingEl;pt.classList.remove("ion-page-invisible"),pt.style.removeProperty("pointer-events"),void 0!==Et&&(Et.classList.remove("ion-page-invisible"),Et.style.removeProperty("pointer-events"))},qe=function(){var nt=(0,y.Z)(function*(pt){return pt.leavingEl&&pt.animated&&0!==pt.duration?pt.animationBuilder?pt.animationBuilder:"ios"===pt.mode?(yield Promise.resolve().then(L.bind(L,3551))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,1138))).mdTransitionAnimation:void 0});return function(Et){return nt.apply(this,arguments)}}(),It=function(){var nt=(0,y.Z)(function*(pt,Et){yield Ce(Et,!0);const ce=pt(Et.baseEl,Et);ze(Et.enteringEl,Et.leavingEl);const xe=yield at(ce,Et);return Et.progressCallback&&Et.progressCallback(void 0),xe&&et(Et.enteringEl,Et.leavingEl),{hasCompleted:xe,animation:ce}});return function(Et,ce){return nt.apply(this,arguments)}}(),Ae=function(){var nt=(0,y.Z)(function*(pt){const Et=pt.enteringEl,ce=pt.leavingEl;return yield Ce(pt,!1),ze(Et,ce),et(Et,ce),{hasCompleted:!0}});return function(Et){return nt.apply(this,arguments)}}(),Ce=function(){var nt=(0,y.Z)(function*(pt,Et){(void 0!==pt.deepWait?pt.deepWait:Et)&&(yield Promise.all([vt(pt.enteringEl),vt(pt.leavingEl)])),yield ct(pt.viewIsReady,pt.enteringEl)});return function(Et,ce){return nt.apply(this,arguments)}}(),ct=function(){var nt=(0,y.Z)(function*(pt,Et){pt&&(yield pt(Et))});return function(Et,ce){return nt.apply(this,arguments)}}(),at=(nt,pt)=>{const Et=pt.progressCallback,ce=new Promise(xe=>{nt.onFinish(Ve=>xe(1===Ve))});return Et?(nt.progressStart(!0),Et(nt)):nt.play(),ce},ze=(nt,pt)=>{ft(pt,Re),ft(nt,ve)},et=(nt,pt)=>{ft(nt,De),ft(pt,he)},ft=(nt,pt)=>{if(nt){const Et=new CustomEvent(pt,{bubbles:!1,cancelable:!1});nt.dispatchEvent(Et)}},vt=function(){var nt=(0,y.Z)(function*(pt){const Et=pt;if(Et){if(null!=Et.componentOnReady){if(null!=(yield Et.componentOnReady()))return}else if(null!=Et.__registerHost)return void(yield new Promise(xe=>(0,le.r)(xe)));yield Promise.all(Array.from(Et.children).map(vt))}});return function(Et){return nt.apply(this,arguments)}}(),Ye=(nt,pt)=>{pt?(nt.setAttribute("aria-hidden","true"),nt.classList.add("ion-page-hidden")):(nt.hidden=!1,nt.removeAttribute("aria-hidden"),nt.classList.remove("ion-page-hidden"))},Le=(nt,pt,Et)=>{void 0!==nt&&(nt.style.zIndex="back"===Et?"99":"101"),void 0!==pt&&(pt.style.zIndex="100")},_t=nt=>nt.classList.contains("ion-page")?nt:nt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||nt},5273:(pn,dt,L)=>{"use strict";L.d(dt,{a:()=>we,b:()=>Ve,c:()=>le,g:()=>U,i:()=>We});var y=L(4083);class m{constructor(){this.m=new Map}reset(Fe){this.m=new Map(Object.entries(Fe))}get(Fe,He){const mt=this.m.get(Fe);return void 0!==mt?mt:He}getBoolean(Fe,He=!1){const mt=this.m.get(Fe);return void 0===mt?He:"string"==typeof mt?"true"===mt:!!mt}getNumber(Fe,He){const mt=parseFloat(this.m.get(Fe));return isNaN(mt)?void 0!==He?He:NaN:mt}set(Fe,He){this.m.set(Fe,He)}}const le=new m,Be="ionic-persist-config",U=Ne=>je(Ne),we=(Ne,Fe)=>("string"==typeof Ne&&(Fe=Ne,Ne=void 0),U(Ne).includes(Fe)),je=(Ne=window)=>{if(typeof Ne>"u")return[];Ne.Ionic=Ne.Ionic||{};let Fe=Ne.Ionic.platforms;return null==Fe&&(Fe=Ne.Ionic.platforms=ge(Ne),Fe.forEach(He=>Ne.document.documentElement.classList.add(`plt-${He}`))),Fe},ge=Ne=>{const Fe=le.get("platform");return Object.keys(ce).filter(He=>{const mt=null==Fe?void 0:Fe[He];return"function"==typeof mt?mt(Ne):ce[He](Ne)})},qe=Ne=>!!(pt(Ne,/iPad/i)||pt(Ne,/Macintosh/i)&&et(Ne)),Ce=Ne=>pt(Ne,/android|sink/i),et=Ne=>Et(Ne,"(any-pointer:coarse)"),vt=Ne=>Ye(Ne)||Le(Ne),Ye=Ne=>!!(Ne.cordova||Ne.phonegap||Ne.PhoneGap),Le=Ne=>{const Fe=Ne.Capacitor;return!(null==Fe||!Fe.isNative)},pt=(Ne,Fe)=>Fe.test(Ne.navigator.userAgent),Et=(Ne,Fe)=>{var He;return null===(He=Ne.matchMedia)||void 0===He?void 0:He.call(Ne,Fe).matches},ce={ipad:qe,iphone:Ne=>pt(Ne,/iPhone/i),ios:Ne=>pt(Ne,/iPhone|iPod/i)||qe(Ne),android:Ce,phablet:Ne=>{const Fe=Ne.innerWidth,He=Ne.innerHeight,mt=Math.min(Fe,He),lt=Math.max(Fe,He);return mt>390&&mt<520&&lt>620&&lt<800},tablet:Ne=>{const Fe=Ne.innerWidth,He=Ne.innerHeight,mt=Math.min(Fe,He),lt=Math.max(Fe,He);return qe(Ne)||(Ne=>Ce(Ne)&&!pt(Ne,/mobile/i))(Ne)||mt>460&&mt<820&&lt>780&&lt<1400},cordova:Ye,capacitor:Le,electron:Ne=>pt(Ne,/electron/i),pwa:Ne=>{var Fe;return!!(null!==(Fe=Ne.matchMedia)&&void 0!==Fe&&Fe.call(Ne,"(display-mode: standalone)").matches||Ne.navigator.standalone)},mobile:et,mobileweb:Ne=>et(Ne)&&!vt(Ne),desktop:Ne=>!et(Ne),hybrid:vt};let xe;const Ve=Ne=>Ne&&(0,y.g)(Ne)||xe,We=(Ne={})=>{if(typeof window>"u")return;const Fe=window.document,He=window,mt=He.Ionic=He.Ionic||{},lt={};Ne._ael&&(lt.ael=Ne._ael),Ne._rel&&(lt.rel=Ne._rel),Ne._ce&&(lt.ce=Ne._ce),(0,y.a)(lt);const Mt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ne=>{try{const Fe=Ne.sessionStorage.getItem(Be);return null!==Fe?JSON.parse(Fe):{}}catch{return{}}})(He)),{persistConfig:!1}),mt.config),(Ne=>{const Fe={};return Ne.location.search.slice(1).split("&").map(He=>He.split("=")).map(([He,mt])=>[decodeURIComponent(He),decodeURIComponent(mt)]).filter(([He])=>((Ne,Fe)=>Ne.substr(0,Fe.length)===Fe)(He,"ionic:")).map(([He,mt])=>[He.slice(6),mt]).forEach(([He,mt])=>{Fe[He]=mt}),Fe})(He)),Ne);le.reset(Mt),le.getBoolean("persistConfig")&&((Ne,Fe)=>{try{Ne.sessionStorage.setItem(Be,JSON.stringify(Fe))}catch{return}})(He,Mt),je(He),mt.config=le,mt.mode=xe=le.get("mode",Fe.documentElement.getAttribute("mode")||(we(He,"ios")?"ios":"md")),le.set("mode",xe),Fe.documentElement.setAttribute("mode",xe),Fe.documentElement.classList.add(xe),le.getBoolean("_testing")&&le.set("animated",!1);const Pt=Tt=>{var Je;return null===(Je=Tt.tagName)||void 0===Je?void 0:Je.startsWith("ION-")},un=Tt=>["ios","md"].includes(Tt);(0,y.c)(Tt=>{for(;Tt;){const Je=Tt.mode||Tt.getAttribute("mode");if(Je){if(un(Je))return Je;Pt(Tt)&&console.warn('Invalid ionic mode: "'+Je+'", expected: "ios" or "md"')}Tt=Tt.parentElement}return xe})}},3551:(pn,dt,L)=>{"use strict";L.r(dt),L.d(dt,{iosTransitionAnimation:()=>ge,shadow:()=>he});var y=L(9613),m=L(9866);L(3457),L(4083);const Re=Ue=>document.querySelector(`${Ue}.ion-cloned-element`),he=Ue=>Ue.shadowRoot||Ue,_e=Ue=>{const qe="ION-TABS"===Ue.tagName?Ue:Ue.querySelector("ion-tabs"),It="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=qe){const Ae=qe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ae?Ae.querySelector(It):null}return Ue.querySelector(It)},Be=(Ue,qe)=>{const It="ION-TABS"===Ue.tagName?Ue:Ue.querySelector("ion-tabs");let Ae=[];if(null!=It){const Ce=It.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ce&&(Ae=Ce.querySelectorAll("ion-buttons"))}else Ae=Ue.querySelectorAll("ion-buttons");for(const Ce of Ae){const ct=Ce.closest("ion-header"),at=ct&&!ct.classList.contains("header-collapse-condense-inactive"),ze=Ce.querySelector("ion-back-button"),et=Ce.classList.contains("buttons-collapse");if(null!==ze&&("start"===Ce.slot||""===Ce.slot)&&(et&&at&&qe||!et))return ze}return null},we=(Ue,qe,It,Ae,Ce,ct)=>{const at=qe?`calc(100% - ${ct.right+4}px)`:ct.left-4+"px",ze=qe?"7px":"-7px",et=qe?"-4px":"4px",ft=qe?"-4px":"4px",vt=qe?"right":"left",Ye=qe?"left":"right",nt=It?[{offset:0,opacity:1,transform:`translate3d(${et}, ${ct.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${Ce.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ze}, ${Ce.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${ct.top-46}px, 0) scale(1)`}],ce=It?[{offset:0,opacity:1,transform:`translate3d(${ft}, ${ct.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${ft}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${ft}, ${ct.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${ft}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${ft}, ${ct.top-46}px, 0) scale(1)`}],xe=(0,y.c)(),Ve=(0,y.c)(),We=Re("ion-back-button"),Ne=he(We).querySelector(".button-text"),Fe=he(We).querySelector("ion-icon");We.text=Ae.text,We.mode=Ae.mode,We.icon=Ae.icon,We.color=Ae.color,We.disabled=Ae.disabled,We.style.setProperty("display","block"),We.style.setProperty("position","fixed"),Ve.addElement(Fe),xe.addElement(Ne),xe.beforeStyles({"transform-origin":`${vt} center`}).beforeAddWrite(()=>{Ae.style.setProperty("display","none"),We.style.setProperty(vt,at)}).afterAddWrite(()=>{Ae.style.setProperty("display",""),We.style.setProperty("display","none"),We.style.removeProperty(vt)}).keyframes(nt),Ve.beforeStyles({"transform-origin":`${Ye} center`}).keyframes(ce),Ue.addAnimation([xe,Ve])},je=(Ue,qe,It,Ae,Ce,ct)=>{const at=qe?`calc(100% - ${Ce.right}px)`:`${Ce.left}px`,ze=qe?"-18px":"18px",et=qe?"right":"left",Ye=It?[{offset:0,opacity:0,transform:`translate3d(${ze}, ${ct.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${ct.top-4}px, 0) scale(0.5)`}],Le=Re("ion-title"),_t=(0,y.c)();Le.innerText=Ae.innerText,Le.size=Ae.size,Le.color=Ae.color,_t.addElement(Le),_t.beforeStyles({"transform-origin":`${et} center`,height:"46px",display:"",position:"relative",[et]:at}).beforeAddWrite(()=>{Ae.style.setProperty("display","none")}).afterAddWrite(()=>{Ae.style.setProperty("display",""),Le.style.setProperty("display","none")}).keyframes(Ye),Ue.addAnimation(_t)},ge=(Ue,qe)=>{var It;try{const Ae="cubic-bezier(0.32,0.72,0,1)",Ce="opacity",ct="transform",at="0%",et="rtl"===Ue.ownerDocument.dir,ft=et?"-99.5%":"99.5%",vt=et?"33%":"-33%",Ye=qe.enteringEl,Le=qe.leavingEl,_t="back"===qe.direction,nt=Ye.querySelector(":scope > ion-content"),pt=Ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Et=Ye.querySelectorAll(":scope > ion-header > ion-toolbar"),ce=(0,y.c)(),xe=(0,y.c)();if(ce.addElement(Ye).duration((null!==(It=qe.duration)&&void 0!==It?It:0)||540).easing(qe.easing||Ae).fill("both").beforeRemoveClass("ion-page-invisible"),Le&&null!=Ue){const Fe=(0,y.c)();Fe.addElement(Ue),ce.addAnimation(Fe)}if(nt||0!==Et.length||0!==pt.length?(xe.addElement(nt),xe.addElement(pt)):xe.addElement(Ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ce.addAnimation(xe),_t?xe.beforeClearStyles([Ce]).fromTo("transform",`translateX(${vt})`,`translateX(${at})`).fromTo(Ce,.8,1):xe.beforeClearStyles([Ce]).fromTo("transform",`translateX(${ft})`,`translateX(${at})`),nt){const Fe=he(nt).querySelector(".transition-effect");if(Fe){const He=Fe.querySelector(".transition-cover"),mt=Fe.querySelector(".transition-shadow"),lt=(0,y.c)(),Mt=(0,y.c)(),Pt=(0,y.c)();lt.addElement(Fe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Mt.addElement(He).beforeClearStyles([Ce]).fromTo(Ce,0,.1),Pt.addElement(mt).beforeClearStyles([Ce]).fromTo(Ce,.03,.7),lt.addAnimation([Mt,Pt]),xe.addAnimation([lt])}}const Ve=Ye.querySelector("ion-header.header-collapse-condense"),{forward:We,backward:Ne}=((Ue,qe,It,Ae,Ce)=>{const ct=Be(Ae,It),at=_e(Ce),ze=_e(Ae),et=Be(Ce,It),ft=null!==ct&&null!==at&&!It,vt=null!==ze&&null!==et&&It;if(ft){const Ye=at.getBoundingClientRect(),Le=ct.getBoundingClientRect();je(Ue,qe,It,at,Ye,Le),we(Ue,qe,It,ct,Ye,Le)}else if(vt){const Ye=ze.getBoundingClientRect(),Le=et.getBoundingClientRect();je(Ue,qe,It,ze,Ye,Le),we(Ue,qe,It,et,Ye,Le)}return{forward:ft,backward:vt}})(ce,et,_t,Ye,Le);if(Et.forEach(Fe=>{const He=(0,y.c)();He.addElement(Fe),ce.addAnimation(He);const mt=(0,y.c)();mt.addElement(Fe.querySelector("ion-title"));const lt=(0,y.c)(),Mt=Array.from(Fe.querySelectorAll("ion-buttons,[menuToggle]")),Pt=Fe.closest("ion-header"),un=null==Pt?void 0:Pt.classList.contains("header-collapse-condense-inactive");let Tt;Tt=Mt.filter(_t?Tn=>{const Dn=Tn.classList.contains("buttons-collapse");return Dn&&!un||!Dn}:Tn=>!Tn.classList.contains("buttons-collapse")),lt.addElement(Tt);const Je=(0,y.c)();Je.addElement(Fe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ot=(0,y.c)();Ot.addElement(he(Fe).querySelector(".toolbar-background"));const Qt=(0,y.c)(),yn=Fe.querySelector("ion-back-button");if(yn&&Qt.addElement(yn),He.addAnimation([mt,lt,Je,Ot,Qt]),lt.fromTo(Ce,.01,1),Je.fromTo(Ce,.01,1),_t)un||mt.fromTo("transform",`translateX(${vt})`,`translateX(${at})`).fromTo(Ce,.01,1),Je.fromTo("transform",`translateX(${vt})`,`translateX(${at})`),Qt.fromTo(Ce,.01,1);else if(Ve||mt.fromTo("transform",`translateX(${ft})`,`translateX(${at})`).fromTo(Ce,.01,1),Je.fromTo("transform",`translateX(${ft})`,`translateX(${at})`),Ot.beforeClearStyles([Ce,"transform"]),(null==Pt?void 0:Pt.translucent)?Ot.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ot.fromTo(Ce,.01,"var(--opacity)"),We||Qt.fromTo(Ce,.01,1),yn&&!We){const Dn=(0,y.c)();Dn.addElement(he(yn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),He.addAnimation(Dn)}}),Le){const Fe=(0,y.c)(),He=Le.querySelector(":scope > ion-content"),mt=Le.querySelectorAll(":scope > ion-header > ion-toolbar"),lt=Le.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(He||0!==mt.length||0!==lt.length?(Fe.addElement(He),Fe.addElement(lt)):Fe.addElement(Le.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ce.addAnimation(Fe),_t){Fe.beforeClearStyles([Ce]).fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)");const Mt=(0,m.g)(Le);ce.afterAddWrite(()=>{"normal"===ce.getDirection()&&Mt.style.setProperty("display","none")})}else Fe.fromTo("transform",`translateX(${at})`,`translateX(${vt})`).fromTo(Ce,1,.8);if(He){const Mt=he(He).querySelector(".transition-effect");if(Mt){const Pt=Mt.querySelector(".transition-cover"),un=Mt.querySelector(".transition-shadow"),Tt=(0,y.c)(),Je=(0,y.c)(),Ot=(0,y.c)();Tt.addElement(Mt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Je.addElement(Pt).beforeClearStyles([Ce]).fromTo(Ce,.1,0),Ot.addElement(un).beforeClearStyles([Ce]).fromTo(Ce,.7,.03),Tt.addAnimation([Je,Ot]),Fe.addAnimation([Tt])}}mt.forEach(Mt=>{const Pt=(0,y.c)();Pt.addElement(Mt);const un=(0,y.c)();un.addElement(Mt.querySelector("ion-title"));const Tt=(0,y.c)(),Je=Mt.querySelectorAll("ion-buttons,[menuToggle]"),Ot=Mt.closest("ion-header"),Qt=null==Ot?void 0:Ot.classList.contains("header-collapse-condense-inactive"),yn=Array.from(Je).filter(or=>{const sr=or.classList.contains("buttons-collapse");return sr&&!Qt||!sr});Tt.addElement(yn);const Tn=(0,y.c)(),Dn=Mt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Dn.length>0&&Tn.addElement(Dn);const Nt=(0,y.c)();Nt.addElement(he(Mt).querySelector(".toolbar-background"));const In=(0,y.c)(),Ft=Mt.querySelector("ion-back-button");if(Ft&&In.addElement(Ft),Pt.addAnimation([un,Tt,Tn,In,Nt]),ce.addAnimation(Pt),In.fromTo(Ce,.99,0),Tt.fromTo(Ce,.99,0),Tn.fromTo(Ce,.99,0),_t){if(Qt||un.fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)").fromTo(Ce,.99,0),Tn.fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)"),Nt.beforeClearStyles([Ce,"transform"]),(null==Ot?void 0:Ot.translucent)?Nt.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):Nt.fromTo(Ce,"var(--opacity)",0),Ft&&!Ne){const sr=(0,y.c)();sr.addElement(he(Ft).querySelector(".button-text")).fromTo("transform",`translateX(${at})`,`translateX(${(et?-124:124)+"px"})`),Pt.addAnimation(sr)}}else Qt||un.fromTo("transform",`translateX(${at})`,`translateX(${vt})`).fromTo(Ce,.99,0).afterClearStyles([ct,Ce]),Tn.fromTo("transform",`translateX(${at})`,`translateX(${vt})`).afterClearStyles([ct,Ce]),In.afterClearStyles([Ce]),un.afterClearStyles([Ce]),Tt.afterClearStyles([Ce])})}return ce}catch(Ae){throw Ae}}},1138:(pn,dt,L)=>{"use strict";L.r(dt),L.d(dt,{mdTransitionAnimation:()=>De});var y=L(9613),m=L(9866);L(3457),L(4083);const De=(Re,he)=>{var _e,Be,U;const ge="back"===he.direction,qe=he.leavingEl,It=(0,m.g)(he.enteringEl),Ae=It.querySelector("ion-toolbar"),Ce=(0,y.c)();if(Ce.addElement(It).fill("both").beforeRemoveClass("ion-page-invisible"),ge?Ce.duration((null!==(_e=he.duration)&&void 0!==_e?_e:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ce.duration((null!==(Be=he.duration)&&void 0!==Be?Be:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ae){const ct=(0,y.c)();ct.addElement(Ae),Ce.addAnimation(ct)}if(qe&&ge){Ce.duration((null!==(U=he.duration)&&void 0!==U?U:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ct=(0,y.c)();ct.addElement((0,m.g)(qe)).onFinish(at=>{1===at&&ct.elements.length>0&&ct.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ce.addAnimation(ct)}return Ce}},2583:(pn,dt,L)=>{"use strict";L.d(dt,{B:()=>lt,G:()=>Mt,a:()=>U,b:()=>we,c:()=>qe,d:()=>Pt,e:()=>un,f:()=>pt,g:()=>ce,h:()=>We,i:()=>Fe,j:()=>Ae,k:()=>_e,m:()=>ge,n:()=>at,o:()=>_t,s:()=>mt});var y=L(5861),m=L(5273),le=L(6782),ve=L(7593),De=L(3577),Re=L(1178);let he=0;const _e=new WeakMap,Be=Tt=>({create:Je=>Ce(Tt,Je),dismiss:(Je,Ot,Qt)=>Ye(document,Je,Ot,Tt,Qt),getTop:()=>(0,y.Z)(function*(){return _t(document,Tt)})()}),U=Be("ion-alert"),we=Be("ion-action-sheet"),ge=Be("ion-modal"),qe=Be("ion-popover"),Ae=Tt=>{typeof document<"u"&&vt(document);const Je=he++;Tt.overlayIndex=Je,Tt.hasAttribute("id")||(Tt.id=`ion-overlay-${Je}`)},Ce=(Tt,Je)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Tt).then(()=>{const Ot=document.createElement(Tt);return Ot.classList.add("overlay-hidden"),Object.assign(Ot,Object.assign(Object.assign({},Je),{hasController:!0})),xe(document).appendChild(Ot),new Promise(Qt=>(0,De.c)(Ot,Qt))}):Promise.resolve(),ct='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',at=(Tt,Je)=>{let Ot=Tt.querySelector(ct);const Qt=null==Ot?void 0:Ot.shadowRoot;Qt&&(Ot=Qt.querySelector(ct)||Ot),Ot?(0,De.f)(Ot):Je.focus()},et=(Tt,Je)=>{const Ot=Array.from(Tt.querySelectorAll(ct));let Qt=Ot.length>0?Ot[Ot.length-1]:null;const yn=null==Qt?void 0:Qt.shadowRoot;yn&&(Qt=yn.querySelector(ct)||Qt),Qt?Qt.focus():Je.focus()},vt=Tt=>{0===he&&(he=1,Tt.addEventListener("focus",Je=>{((Tt,Je)=>{const Ot=_t(Je,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Qt=Tt.target;Ot&&Qt&&!Ot.classList.contains("ion-disable-focus-trap")&&(Ot.shadowRoot?(()=>{if(Ot.contains(Qt))Ot.lastFocus=Qt;else{const Dn=Ot.lastFocus;at(Ot,Ot),Dn===Je.activeElement&&et(Ot,Ot),Ot.lastFocus=Je.activeElement}})():(()=>{if(Ot===Qt)Ot.lastFocus=void 0;else{const Dn=(0,De.g)(Ot);if(!Dn.contains(Qt))return;const Nt=Dn.querySelector(".ion-overlay-wrapper");if(!Nt)return;if(Nt.contains(Qt))Ot.lastFocus=Qt;else{const In=Ot.lastFocus;at(Nt,Ot),In===Je.activeElement&&et(Nt,Ot),Ot.lastFocus=Je.activeElement}}})())})(Je,Tt)},!0),Tt.addEventListener("ionBackButton",Je=>{const Ot=_t(Tt);null!=Ot&&Ot.backdropDismiss&&Je.detail.register(ve.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ot.dismiss(void 0,lt))}),Tt.addEventListener("keydown",Je=>{if("Escape"===Je.key){const Ot=_t(Tt);null!=Ot&&Ot.backdropDismiss&&Ot.dismiss(void 0,lt)}}))},Ye=(Tt,Je,Ot,Qt,yn)=>{const Tn=_t(Tt,Qt,yn);return Tn?Tn.dismiss(Je,Ot):Promise.reject("overlay does not exist")},_t=(Tt,Je,Ot)=>{const Qt=((Tt,Je)=>(void 0===Je&&(Je="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Tt.querySelectorAll(Je)).filter(Ot=>Ot.overlayIndex>0)))(Tt,Je).filter(yn=>!(Tt=>Tt.classList.contains("overlay-hidden"))(yn));return void 0===Ot?Qt[Qt.length-1]:Qt.find(yn=>yn.id===Ot)},nt=(Tt=!1)=>{const Ot=xe(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ot&&(Tt?Ot.setAttribute("aria-hidden","true"):Ot.removeAttribute("aria-hidden"))},pt=function(){var Tt=(0,y.Z)(function*(Je,Ot,Qt,yn,Tn){var Dn,Nt;if(Je.presented)return;nt(!0),Je.presented=!0,Je.willPresent.emit(),null===(Dn=Je.willPresentShorthand)||void 0===Dn||Dn.emit();const In=(0,m.b)(Je),Ft=Je.enterAnimation?Je.enterAnimation:m.c.get(Ot,"ios"===In?Qt:yn);(yield Ve(Je,Ft,Je.el,Tn))&&(Je.didPresent.emit(),null===(Nt=Je.didPresentShorthand)||void 0===Nt||Nt.emit()),"ION-TOAST"!==Je.el.tagName&&Et(Je.el),Je.keyboardClose&&(null===document.activeElement||!Je.el.contains(document.activeElement))&&Je.el.focus()});return function(Ot,Qt,yn,Tn,Dn){return Tt.apply(this,arguments)}}(),Et=function(){var Tt=(0,y.Z)(function*(Je){let Ot=document.activeElement;if(!Ot)return;const Qt=null==Ot?void 0:Ot.shadowRoot;Qt&&(Ot=Qt.querySelector(ct)||Ot),yield Je.onDidDismiss(),Ot.focus()});return function(Ot){return Tt.apply(this,arguments)}}(),ce=function(){var Tt=(0,y.Z)(function*(Je,Ot,Qt,yn,Tn,Dn,Nt){var In,Ft;if(!Je.presented)return!1;nt(!1),Je.presented=!1;try{Je.el.style.setProperty("pointer-events","none"),Je.willDismiss.emit({data:Ot,role:Qt}),null===(In=Je.willDismissShorthand)||void 0===In||In.emit({data:Ot,role:Qt});const or=(0,m.b)(Je),sr=Je.leaveAnimation?Je.leaveAnimation:m.c.get(yn,"ios"===or?Tn:Dn);Qt!==Mt&&(yield Ve(Je,sr,Je.el,Nt)),Je.didDismiss.emit({data:Ot,role:Qt}),null===(Ft=Je.didDismissShorthand)||void 0===Ft||Ft.emit({data:Ot,role:Qt}),_e.delete(Je),Je.el.classList.add("overlay-hidden"),Je.el.style.removeProperty("pointer-events"),void 0!==Je.el.lastFocus&&(Je.el.lastFocus=void 0)}catch(or){console.error(or)}return Je.el.remove(),!0});return function(Ot,Qt,yn,Tn,Dn,Nt,In){return Tt.apply(this,arguments)}}(),xe=Tt=>Tt.querySelector("ion-app")||Tt.body,Ve=function(){var Tt=(0,y.Z)(function*(Je,Ot,Qt,yn){Qt.classList.remove("overlay-hidden");const Dn=Ot(Je.el,yn);(!Je.animated||!m.c.getBoolean("animated",!0))&&Dn.duration(0),Je.keyboardClose&&Dn.beforeAddWrite(()=>{const In=Qt.ownerDocument.activeElement;null!=In&&In.matches("input,ion-input, ion-textarea")&&In.blur()});const Nt=_e.get(Je)||[];return _e.set(Je,[...Nt,Dn]),yield Dn.play(),!0});return function(Ot,Qt,yn,Tn){return Tt.apply(this,arguments)}}(),We=(Tt,Je)=>{let Ot;const Qt=new Promise(yn=>Ot=yn);return Ne(Tt,Je,yn=>{Ot(yn.detail)}),Qt},Ne=(Tt,Je,Ot)=>{const Qt=yn=>{(0,De.b)(Tt,Je,Qt),Ot(yn)};(0,De.a)(Tt,Je,Qt)},Fe=Tt=>"cancel"===Tt||Tt===lt,He=Tt=>Tt(),mt=(Tt,Je)=>{if("function"==typeof Tt)return m.c.get("_zoneGate",He)(()=>{try{return Tt(Je)}catch(Qt){throw Qt}})},lt="backdrop",Mt="gesture",Pt=Tt=>{let Ot,Je=!1;const Qt=(0,le.C)(),yn=(Nt=!1)=>{if(Ot&&!Nt)return{delegate:Ot,inline:Je};const{el:In,hasController:Ft,delegate:or}=Tt;return Je=null!==In.parentNode&&!Ft,Ot=Je?or||Qt:or,{inline:Je,delegate:Ot}};return{attachViewToDom:function(){var Nt=(0,y.Z)(function*(In){const{delegate:Ft}=yn(!0);if(Ft)return yield Ft.attachViewToDom(Tt.el,In);const{hasController:or}=Tt;if(or&&void 0!==In)throw new Error("framework delegate is missing");return null});return function(Ft){return Nt.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Nt}=yn();Nt&&void 0!==Tt.el&&Nt.removeViewFromDom(Tt.el.parentElement,Tt.el)}}},un=()=>{let Tt;const Je=()=>{Tt&&(Tt(),Tt=void 0)};return{addClickListener:(Qt,yn)=>{Je();const Tn=void 0!==yn?document.getElementById(yn):null;Tn?Tt=((Nt,In)=>{const Ft=()=>{In.present()};return Nt.addEventListener("click",Ft),()=>{Nt.removeEventListener("click",Ft)}})(Tn,Qt):(0,Re.p)(`A trigger element with the ID "${yn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Qt)},removeClickListener:Je}}},7622:(pn,dt,L)=>{"use strict";L.d(dt,{e:()=>Re});var y=L(5861),m=L(9260);let le=(()=>{class he{}return he.email=_e=>{if(!(_e.endsWith("@admin.com")||_e.endsWith("@invitado.com")||_e.endsWith("@usuario.com")||_e.endsWith("@anonimo.com")||_e.endsWith("@tester.com")))throw new Error("Mal formato de datos.");return _e},he})();var ve=L(2223),De=L(3385);let Re=(()=>{class he{constructor(Be){var U=this;this.angularFireAuth=Be,this.signIn=function(){var we=(0,y.Z)(function*(je,ge){return yield U.angularFireAuth.signInWithEmailAndPassword(le.email(je),ge).then(Ue=>Ue).catch(Ue=>{throw"auth/user-disabled"===Ue.code?new Error("El usuario ha sido deshabilitado."):"auth/user-not-found"===Ue.code?new Error("No existe un usuario con estos datos."):new Error("Datos incorrectos.")})});return function(je,ge){return we.apply(this,arguments)}}(),this.signUp=function(){var we=(0,y.Z)(function*(je,ge){return yield U.angularFireAuth.createUserWithEmailAndPassword(le.email(je),ge).then(Ue=>Ue).catch(Ue=>{throw"auth/operation-not-allowed"===Ue.code?new Error("Lo siento, hubo un error interno. Vuelva a intentarlo mas tarde."):"auth/email-already-in-use"===Ue.code?new Error("El mail ingresado, ya pertenece a un usuario existente."):new Error("Mal formato de datos.")})});return function(je,ge){return we.apply(this,arguments)}}(),this.signOut=(0,y.Z)(function*(){yield U.angularFireAuth.signOut()}),this.signUpWithGoogle=(0,y.Z)(function*(){const we=new m.Z.auth.GoogleAuthProvider;return we.addScope("profile"),we.addScope("email"),yield U.signUpWithProvider(we)}),this.signUpWithProvider=function(){var we=(0,y.Z)(function*(je){return yield U.angularFireAuth.signInWithPopup(je).then(ge=>ge).catch(()=>{throw new Error("Operaci\xf3n cancelada.")})});return function(je){return we.apply(this,arguments)}}(),this.userData=Be.authState}getUser(){return"123456"}}return he.\u0275fac=function(Be){return new(Be||he)(ve.LFG(De.zQ))},he.\u0275prov=ve.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},3813:(pn,dt,L)=>{"use strict";var y=L(6550),m=L(2223),le=L(96),ve=L(9972),De=L(3324),Re=L(3692),he=L(259),_e=L(2313),Be=L(1389),U=L(2090),we=L(6881),je=L(1877),ge=L(4859);class qe{constructor(r){return r}}class It{constructor(){return(0,De.vb)("auth")}}const Ce=new m.OlP("angularfire2.auth-instances");function at(u){return(r,o)=>{const c=r.runOutsideAngular(()=>u(o));return new qe(c)}}const ze={provide:It,deps:[[new m.FiY,Ce]]},et={provide:qe,useFactory:function ct(u,r){const o=(0,De.JM)("auth",u,r);return o&&new qe(o)},deps:[[new m.FiY,Ce],Re.Ot]};let ft=(()=>{class u{constructor(){(0,he.KN)("angularfire",De.q4.full,"auth")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[et,ze]}),u})();function vt(u,...r){return{ngModule:ft,providers:[{provide:Ce,useFactory:at(u),multi:!0,deps:[m.R0b,m.zs3,De.HU,Re.z6,[new m.FiY,_e.nm],...r]}]}}const He=(0,De.u3)(Be.o,!0);var sn=L(2810),lr=L(9751),On=L(4004),_r={includeMetadataChanges:!1};function Dt(u,r){return void 0===r&&(r={}),function fn(u){return function Qe(u,r){return void 0===r&&(r=_r),new lr.y(function(o){return{unsubscribe:(0,sn.cf)(u,r,{next:o.next.bind(o),error:o.error.bind(o),complete:o.complete.bind(o)})}})}(u,{includeMetadataChanges:!0}).pipe((0,On.U)(function(r){return r.docs}))}(u).pipe((0,On.U)(function(o){return o.map(function(c){return function z(u,r){void 0===r&&(r={});var o=u.data();return!u.exists()||"object"!=typeof o||null===o||r.idField&&(o[r.idField]=u.id),o}(c,r)})}))}class wt{constructor(r){return r}}const zt="firestore",Xn=new m.OlP("angularfire2.firestore-instances");function Jr(u){return(r,o)=>{const c=r.runOutsideAngular(()=>u(o));return new wt(c)}}const Tr={provide:class _n{constructor(){return(0,De.vb)(zt)}},deps:[[new m.FiY,Xn]]},Qn={provide:wt,useFactory:function nr(u,r){const o=(0,De.JM)(zt,u,r);return o&&new wt(o)},deps:[[new m.FiY,Xn],Re.Ot]};let Jn=(()=>{class u{constructor(){(0,he.KN)("angularfire",De.q4.full,"fst")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[Qn,Tr]}),u})();function fi(u,...r){return{ngModule:Jn,providers:[{provide:Xn,useFactory:Jr(u),multi:!0,deps:[m.R0b,m.zs3,De.HU,Re.z6,[new m.FiY,It],[new m.FiY,_e.nm],...r]}]}}const Bs=(0,De.u3)(Dt,!0),Ee=(0,De.u3)(sn.hJ,!0),Hi=(0,De.u3)(sn.ad,!0);var Zi=L(655),yi=L(8261),qs=function(u){function r(){return null!==u&&u.apply(this,arguments)||this}return(0,Zi.ZT)(r,u),r.prototype.show=function(){return(0,yi.DM)(this,"show",{sync:!0},arguments)},r.prototype.hide=function(){return(0,yi.DM)(this,"hide",{sync:!0},arguments)},r.pluginName="SplashScreen",r.plugin="cordova-plugin-splashscreen",r.pluginRef="navigator.splashscreen",r.repo="https://github.com/apache/cordova-plugin-splashscreen",r.platforms=["Amazon Fire OS","Android","iOS","Windows"],r.decorators=[{type:m.GSi}],r}(yi.KY),Ps=function(u){function r(){return null!==u&&u.apply(this,arguments)||this}return(0,Zi.ZT)(r,u),r.prototype.overlaysWebView=function(o){return(0,yi.DM)(this,"overlaysWebView",{sync:!0},arguments)},r.prototype.styleDefault=function(){return(0,yi.DM)(this,"styleDefault",{sync:!0},arguments)},r.prototype.styleLightContent=function(){return(0,yi.DM)(this,"styleLightContent",{sync:!0},arguments)},r.prototype.styleBlackTranslucent=function(){return(0,yi.DM)(this,"styleBlackTranslucent",{sync:!0},arguments)},r.prototype.styleBlackOpaque=function(){return(0,yi.DM)(this,"styleBlackOpaque",{sync:!0},arguments)},r.prototype.backgroundColorByName=function(o){return(0,yi.DM)(this,"backgroundColorByName",{sync:!0},arguments)},r.prototype.backgroundColorByHexString=function(o){return(0,yi.DM)(this,"backgroundColorByHexString",{sync:!0},arguments)},r.prototype.hide=function(){return(0,yi.DM)(this,"hide",{sync:!0},arguments)},r.prototype.show=function(){return(0,yi.DM)(this,"show",{sync:!0},arguments)},Object.defineProperty(r.prototype,"isVisible",{get:function(){return(0,yi.J2)(this,"isVisible")},set:function(o){(0,yi.Iq)(this,"isVisible",o)},enumerable:!1,configurable:!0}),r.pluginName="StatusBar",r.plugin="cordova-plugin-statusbar",r.pluginRef="StatusBar",r.repo="https://github.com/apache/cordova-plugin-statusbar",r.platforms=["Android","iOS","Windows"],r.decorators=[{type:m.GSi}],r}(yi.KY),Ti=L(4755);function Ta(u,r){if(1&u&&(m.TgZ(0,"li",2),m._uU(1),m.qZA()),2&u){const o=r.$implicit;m.xp6(1),m.hij(" ",o.name," ")}}let os=(()=>{class u{constructor(o,c,p){this.platform=o,this.splashScreen=c,this.statusBar=p,this.firestore=(0,m.f3M)(wt);const w=Ee(this.firestore,"items");this.items$=Bs(w),this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{this.statusBar.styleDefault(),this.splashScreen.hide()})}}return u.\u0275fac=function(o){return new(o||u)(m.Y36(ve.t4),m.Y36(qs),m.Y36(Ps))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-root"]],decls:5,vars:3,consts:[["class","text",4,"ngFor","ngForOf"],["id","main-content"],[1,"text"]],template:function(o,c){1&o&&(m.TgZ(0,"ul"),m.YNc(1,Ta,2,1,"li",0),m.ALo(2,"async"),m.qZA(),m.TgZ(3,"ion-app"),m._UZ(4,"ion-router-outlet",1),m.qZA()),2&o&&(m.xp6(1),m.Q6J("ngForOf",m.lcZ(2,1,c.items$)))},dependencies:[Ti.sg,ve.dr,ve.jP,Ti.Ov],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]}),u})();const Gi=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"folder/:id",loadChildren:()=>L.e(1910).then(L.bind(L,1910)).then(u=>u.FolderPageModule)},{path:"admin",loadChildren:()=>L.e(3015).then(L.bind(L,3015)).then(u=>u.AdminPageModule)},{path:"home",loadChildren:()=>L.e(4851).then(L.bind(L,4851)).then(u=>u.HomePageModule)},{path:"login",loadChildren:()=>L.e(1821).then(L.bind(L,1821)).then(u=>u.LoginPageModule)},{path:"register",loadChildren:()=>L.e(7826).then(L.bind(L,7826)).then(u=>u.RegisterPageModule)},{path:"feas",loadChildren:()=>Promise.all([L.e(8592),L.e(6015)]).then(L.bind(L,6015)).then(u=>u.FeasPageModule)},{path:"lindas",loadChildren:()=>Promise.all([L.e(8592),L.e(311)]).then(L.bind(L,311)).then(u=>u.LindasPageModule)},{path:"lista-feas",loadChildren:()=>Promise.all([L.e(8592),L.e(2516)]).then(L.bind(L,2516)).then(u=>u.ListaFeasPageModule)},{path:"lista-lindas",loadChildren:()=>Promise.all([L.e(8592),L.e(5172)]).then(L.bind(L,5172)).then(u=>u.ListaLindasPageModule)},{path:"mis-fotos",loadChildren:()=>L.e(3562).then(L.bind(L,3562)).then(u=>u.MisFotosPageModule)},{path:"splash",loadChildren:()=>L.e(2068).then(L.bind(L,2068)).then(u=>u.SplashPageModule)}];let Lo=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({imports:[le.Bz.forRoot(Gi,{preloadingStrategy:le.wm}),le.Bz]}),u})();const Do_firebase={projectId:"reelevamientovisual2023",appId:"1:576178312697:web:4ff5e464f71303b41ad928",storageBucket:"reelevamientovisual2023.appspot.com",apiKey:"AIzaSyAvHCXlpbH63heUpkmTKTPxkyaOi1XuoLE",authDomain:"reelevamientovisual2023.firebaseapp.com",messagingSenderId:"576178312697"};var Qi=L(2011),Wi=L(3385),to=L(4986),So=L(9646),Cs=L(6451),Bo=L(3099),bs=L(3900),Bi=L(5026),To=L(1884),Es=L(4482),no=L(5403),Ao=L(8421),S=L(4671),J=L(5032),T=L(7669);L(9568);var Ln=L(3942),Yn=L(5861);const kr="@firebase/database";let Ki="";function $i(u){Ki=u}class gs{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,o){null==o?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,U.Wl)(o))}get(r){const o=this.domStorage_.getItem(this.prefixedName_(r));return null==o?null:(0,U.cI)(o)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class Vs{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,o){null==o?delete this.cache_[r]:this.cache_[r]=o}get(r){return(0,U.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const Mo=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const r=window[u];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new gs(r)}}catch{}return new Vs},Ds=Mo("localStorage"),Z=Mo("sessionStorage"),j=new je.Yd("@firebase/database"),C=function(){let u=1;return function(){return u++}}(),N=function(u){const r=(0,U.dS)(u),o=new U.gQ;o.update(r);const c=o.digest();return U.US.encodeByteArray(c)},fe=function(...u){let r="";for(let o=0;o<u.length;o++){const c=u[o];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?r+=fe.apply(null,c):r+="object"==typeof c?(0,U.Wl)(c):c,r+=" "}return r};let rt=null,Lt=!0;const nn=function(u,r){(0,U.hu)(!r||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(j.logLevel=je.in.VERBOSE,rt=j.log.bind(j),r&&Z.set("logging_enabled",!0)):"function"==typeof u?rt=u:(rt=null,Z.remove("logging_enabled"))},an=function(...u){if(!0===Lt&&(Lt=!1,null===rt&&!0===Z.get("logging_enabled")&&nn(!0)),rt){const r=fe.apply(null,u);rt(r)}},jr=function(u){return function(...r){an(u,...r)}},qr=function(...u){const r="FIREBASE INTERNAL ERROR: "+fe(...u);j.error(r)},Vr=function(...u){const r=`FIREBASE FATAL ERROR: ${fe(...u)}`;throw j.error(r),new Error(r)},wr=function(...u){const r="FIREBASE WARNING: "+fe(...u);j.warn(r)},go=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Xi="[MIN_NAME]",Us="[MAX_NAME]",ro=function(u,r){if(u===r)return 0;if(u===Xi||r===Us)return-1;if(r===Xi||u===Us)return 1;{const o=fu(u),c=fu(r);return null!==o?null!==c?o-c==0?u.length-r.length:o-c:-1:null!==c?1:u<r?-1:1}},as=function(u,r){return u===r?0:u<r?-1:1},Ys=function(u,r){if(r&&u in r)return r[u];throw new Error("Missing required key ("+u+") in object: "+(0,U.Wl)(r))},ma=function(u){if("object"!=typeof u||null===u)return(0,U.Wl)(u);const r=[];for(const c in u)r.push(c);r.sort();let o="{";for(let c=0;c<r.length;c++)0!==c&&(o+=","),o+=(0,U.Wl)(r[c]),o+=":",o+=ma(u[r[c]]);return o+="}",o},Ko=function(u,r){const o=u.length;if(o<=r)return[u];const c=[];for(let p=0;p<o;p+=r)c.push(u.substring(p,p+r>o?o:p+r));return c};function js(u,r){for(const o in u)u.hasOwnProperty(o)&&r(o,u[o])}const ya=function(u){(0,U.hu)(!go(u),"Invalid JSON number");const c=1023;let p,w,A,$,X;0===u?(w=0,A=0,p=1/u==-1/0?1:0):(p=u<0,(u=Math.abs(u))>=Math.pow(2,1-c)?($=Math.min(Math.floor(Math.log(u)/Math.LN2),c),w=$+c,A=Math.round(u*Math.pow(2,52-$)-Math.pow(2,52))):(w=0,A=Math.round(u/Math.pow(2,-1074))));const ue=[];for(X=52;X;X-=1)ue.push(A%2?1:0),A=Math.floor(A/2);for(X=11;X;X-=1)ue.push(w%2?1:0),w=Math.floor(w/2);ue.push(p?1:0),ue.reverse();const Ze=ue.join("");let st="";for(X=0;X<64;X+=8){let yt=parseInt(Ze.substr(X,8),2).toString(16);1===yt.length&&(yt="0"+yt),st+=yt}return st.toLowerCase()},Ll=new RegExp("^-?(0*)\\d{1,10}$"),fu=function(u){if(Ll.test(u)){const r=Number(u);if(r>=-2147483648&&r<=2147483647)return r}return null},Ss=function(u){try{u()}catch(r){setTimeout(()=>{throw wr("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},oa=function(u,r){const o=setTimeout(u,r);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class yl{constructor(r,o){this.appName_=r,this.appCheckProvider=o,this.appCheck=null==o?void 0:o.getImmediate({optional:!0}),this.appCheck||null==o||o.get().then(c=>this.appCheck=c)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((o,c)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(o,c):o(null)},0)})}addTokenChangeListener(r){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(c=>c.addTokenListener(r))}notifyForInvalidToken(){wr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Uo{constructor(r,o,c){this.appName_=r,this.firebaseOptions_=o,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(p=>this.auth_=p)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(o=>o&&"auth/token-not-initialized"===o.code?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,c)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(o,c):o(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(o=>o.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(o=>o.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wr(r)}}let Ka=(()=>{class u{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const vl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ud="websocket",pu="long_polling";class V{constructor(r,o,c,p,w=!1,A="",$=!1,X=!1){this.secure=o,this.namespace=c,this.webSocketOnly=p,this.nodeAdmin=w,this.persistenceKey=A,this.includeNamespaceInQueryParams=$,this.isUsingEmulator=X,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ds.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&Ds.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function H(u,r,o){let c;if((0,U.hu)("string"==typeof r,"typeof type must == string"),(0,U.hu)("object"==typeof o,"typeof params must == object"),r===ud)c=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(r!==pu)throw new Error("Unknown connection type: "+r);c=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function re(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(o.ns=u.namespace);const p=[];return js(o,(w,A)=>{p.push(w+"="+A)}),c+p.join("&")}class ye{constructor(){this.counters_={}}incrementCounter(r,o=1){(0,U.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=o}get(){return(0,U.p$)(this.counters_)}}const Ke={},Bt={};function Yt(u){const r=u.toString();return Ke[r]||(Ke[r]=new ye),Ke[r]}class An{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,o){this.closeAfterResponse=r,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,o){for(this.pendingResponses[r]=o;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let p=0;p<c.length;++p)c[p]&&Ss(()=>{this.onMessage_(c[p])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ya{constructor(r,o,c,p,w,A,$){this.connId=r,this.repoInfo=o,this.applicationId=c,this.appCheckToken=p,this.authToken=w,this.transportSessionId=A,this.lastSessionId=$,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jr(r),this.stats_=Yt(o),this.urlFn=X=>(this.appCheckToken&&(X.ac=this.appCheckToken),H(o,pu,X))}open(r,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new An(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,U.Yr)()||"complete"===document.readyState)u();else{let r=!1;const o=function(){document.body?r||(r=!0,u()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Za((...w)=>{const[A,$,X,ue,Ze]=w;if(this.incrementIncomingBytes_(w),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===A)this.id=$,this.password=X;else{if("close"!==A)throw new Error("Unrecognized command received: "+A);$?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter($,()=>{this.onClosed_()})):this.onClosed_()}},(...w)=>{const[A,$]=w;this.incrementIncomingBytes_(w),this.myPacketOrderer.handleResponse(A,$)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&vl.test(location.hostname)&&(c.r="f");const p=this.urlFn(c);this.log_("Connecting via long-poll to "+p),this.scriptTagHolder.addTag(p,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ya.forceAllow_=!0}static forceDisallow(){Ya.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!Ya.forceAllow_&&(Ya.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const o=(0,U.Wl)(r);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const c=(0,U.h$)(o),p=Ko(c,1840);for(let w=0;w<p.length;w++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,p.length,p[w]),this.curSegmentNum++}addDisconnectPingFrame(r,o){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=r,c.pw=o,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const o=(0,U.Wl)(r).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class Za{constructor(r,o,c,p){if(this.onDisconnect=c,this.urlFn=p,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=r,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=C(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=Za.createIFrame_();let w="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(w='<script>document.domain="'+document.domain+'";<\/script>');const A="<html><body>"+w+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(A),this.myIFrame.doc.close()}catch($){an("frame writing exception"),$.stack&&an($.stack),an($)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||an("No IE domain setting required")}catch{const c=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,o){for(this.myID=r,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let o=this.urlFn(r),c="",p=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const A=this.pendingSegs.shift();c=c+"&seg"+p+"="+A.seg+"&ts"+p+"="+A.ts+"&d"+p+"="+A.d,p++}return o+=c,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(r,o,c){this.pendingSegs.push({seg:r,ts:o,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(r,o){this.outstandingRequests.add(o);const c=()=>{this.outstandingRequests.delete(o),this.newRequest_()},p=setTimeout(c,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(p),c()})}addTag(r,o){(0,U.Yr)()?this.doNodeLongPoll(r,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=r,c.onload=c.onreadystatechange=function(){const p=c.readyState;(!p||"loaded"===p||"complete"===p)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),o())},c.onerror=()=>{an("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch{}},Math.floor(1))}}let gu=null;typeof MozWebSocket<"u"?gu=MozWebSocket:typeof WebSocket<"u"&&(gu=WebSocket);let _l=(()=>{class u{constructor(o,c,p,w,A,$,X){this.connId=o,this.applicationId=p,this.appCheckToken=w,this.authToken=A,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jr(this.connId),this.stats_=Yt(c),this.connURL=u.connectionURL_(c,$,X,w,p),this.nodeAdmin=c.nodeAdmin}static connectionURL_(o,c,p,w,A){const $={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&vl.test(location.hostname)&&($.r="f"),c&&($.s=c),p&&($.ls=p),w&&($.ac=w),A&&($.p=A),H(o,ud,$)}open(o,c){this.onDisconnect=c,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ds.set("previous_websocket_failure",!0);try{let p;if((0,U.Yr)()){p={headers:{"User-Agent":`Firebase/5/${Ki}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(p.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(p.headers["X-Firebase-AppCheck"]=this.appCheckToken);const A=process.env,$=0===this.connURL.indexOf("wss://")?A.HTTPS_PROXY||A.https_proxy:A.HTTP_PROXY||A.http_proxy;$&&(p.proxy={origin:$})}this.mySock=new gu(this.connURL,[],p)}catch(p){this.log_("Error instantiating WebSocket.");const w=p.message||p.data;return w&&this.log_(w),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=p=>{this.handleIncomingFrame(p)},this.mySock.onerror=p=>{this.log_("WebSocket error.  Closing connection.");const w=p.message||p.data;w&&this.log_(w),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const p=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);p&&p.length>1&&parseFloat(p[1])<4.4&&(o=!0)}return!o&&null!==gu&&!u.forceDisallow_}static previouslyFailed(){return Ds.isInMemoryStorage||!0===Ds.get("previous_websocket_failure")}markConnectionHealthy(){Ds.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const p=(0,U.cI)(c);this.onMessage(p)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const c=Number(o);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const c=o.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const p=this.extractFrameCount_(c);null!==p&&this.appendFrame_(p)}}send(o){this.resetKeepAlive();const c=(0,U.Wl)(o);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const p=Ko(c,16384);p.length>1&&this.sendString_(String(p.length));for(let w=0;w<p.length;w++)this.sendString_(p[w])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),$l=(()=>{class u{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[Ya,_l]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const c=_l&&_l.isAvailable();let p=c&&!_l.previouslyFailed();if(o.webSocketOnly&&(c||wr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[_l];else{const w=this.transports_=[];for(const A of u.ALL_TRANSPORTS)A&&A.isAvailable()&&w.push(A);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Ku{constructor(r,o,c,p,w,A,$,X,ue,Ze){this.id=r,this.repoInfo_=o,this.applicationId_=c,this.appCheckToken_=p,this.authToken_=w,this.onMessage_=A,this.onReady_=$,this.onDisconnect_=X,this.onKill_=ue,this.lastSessionId=Ze,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jr("c:"+this.id+":"),this.transportManager_=new $l(o),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,c)},Math.floor(0));const p=r.healthyTimeout||0;p>0&&(this.healthyTimeout_=oa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(p)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return o=>{r===this.conn_?this.onConnectionLost_(o):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return o=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(o):r===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const o=r.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const o=Ys("t",r),c=Ys("d",r);if("c"===o)this.onSecondaryControl_(c);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const o=Ys("t",r),c=Ys("d",r);"c"===o?this.onControl_(c):"d"===o&&this.onDataMessage_(c)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const o=Ys("t",r);if("d"in r){const c=r.d;if("h"===o){const p=Object.assign({},c);this.repoInfo_.isUsingEmulator&&(p.h=this.repoInfo_.host),this.onHandshake_(p)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let p=0;p<this.pendingDataMessages.length;++p)this.onDataMessage_(this.pendingDataMessages[p]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(c):"r"===o?this.onReset_(c):"e"===o?qr("Server Error: "+c):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qr("Unknown control packet command: "+o)}}onHandshake_(r){const o=r.ts,c=r.v,p=r.h;this.sessionId=r.s,this.repoInfo_.host=p,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==c&&wr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,c),oa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,o){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ds.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mu{put(r,o,c,p){}merge(r,o,c,p){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,o,c){}onDisconnectMerge(r,o,c){}onDisconnectCancel(r,o){}reportStats(r){}}class Ma{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,U.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...o){if(Array.isArray(this.listeners_[r])){const c=[...this.listeners_[r]];for(let p=0;p<c.length;p++)c[p].callback.apply(c[p].context,o)}}on(r,o,c){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:o,context:c});const p=this.getInitialEvent(r);p&&o.apply(c,p)}off(r,o,c){this.validateEventType_(r);const p=this.listeners_[r]||[];for(let w=0;w<p.length;w++)if(p[w].callback===o&&(!c||c===p[w].context))return void p.splice(w,1)}validateEventType_(r){(0,U.hu)(this.allowedEvents_.find(o=>o===r),"Unknown event: "+r)}}class yu extends Ma{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yu}getInitialEvent(r){return(0,U.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}class hi{constructor(r,o){if(void 0===o){this.pieces_=r.split("/");let c=0;for(let p=0;p<this.pieces_.length;p++)this.pieces_[p].length>0&&(this.pieces_[c]=this.pieces_[p],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=o}toString(){let r="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(r+="/"+this.pieces_[o]);return r||"/"}}function _i(){return new hi("")}function ri(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Zs(u){return u.pieces_.length-u.pieceNum_}function Wr(u){let r=u.pieceNum_;return r<u.pieces_.length&&r++,new hi(u.pieces_,r)}function Ra(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function aa(u,r=0){return u.pieces_.slice(u.pieceNum_+r)}function Cc(u){if(u.pieceNum_>=u.pieces_.length)return null;const r=[];for(let o=u.pieceNum_;o<u.pieces_.length-1;o++)r.push(u.pieces_[o]);return new hi(r,0)}function St(u,r){const o=[];for(let c=u.pieceNum_;c<u.pieces_.length;c++)o.push(u.pieces_[c]);if(r instanceof hi)for(let c=r.pieceNum_;c<r.pieces_.length;c++)o.push(r.pieces_[c]);else{const c=r.split("/");for(let p=0;p<c.length;p++)c[p].length>0&&o.push(c[p])}return new hi(o,0)}function Hr(u){return u.pieceNum_>=u.pieces_.length}function us(u,r){const o=ri(u),c=ri(r);if(null===o)return r;if(o===c)return us(Wr(u),Wr(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+u+")")}function yf(u,r){const o=aa(u,0),c=aa(r,0);for(let p=0;p<o.length&&p<c.length;p++){const w=ro(o[p],c[p]);if(0!==w)return w}return o.length===c.length?0:o.length<c.length?-1:1}function Xa(u,r){if(Zs(u)!==Zs(r))return!1;for(let o=u.pieceNum_,c=r.pieceNum_;o<=u.pieces_.length;o++,c++)if(u.pieces_[o]!==r.pieces_[c])return!1;return!0}function ts(u,r){let o=u.pieceNum_,c=r.pieceNum_;if(Zs(u)>Zs(r))return!1;for(;o<u.pieces_.length;){if(u.pieces_[o]!==r.pieces_[c])return!1;++o,++c}return!0}class Sp{constructor(r,o){this.errorPrefix_=o,this.parts_=aa(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,U.ug)(this.parts_[c]);P(this)}}function P(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+D(u))}function D(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class F extends Ma{constructor(){let r,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const c=!document[r];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new F}getInitialEvent(r){return(0,U.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const ee=1e3;let xo,Vn=(()=>{class u extends mu{constructor(o,c,p,w,A,$,X,ue){if(super(),this.repoInfo_=o,this.applicationId_=c,this.onDataUpdate_=p,this.onConnectStatus_=w,this.onServerInfoUpdate_=A,this.authTokenProvider_=$,this.appCheckTokenProvider_=X,this.authOverride_=ue,this.id=u.nextPersistentConnectionId_++,this.log_=jr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ee,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ue&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");F.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&yu.getInstance().on("online",this.onOnline_,this)}sendRequest(o,c,p){const w=++this.requestNumber_,A={r:w,a:o,b:c};this.log_((0,U.Wl)(A)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(A),p&&(this.requestCBHash_[w]=p)}get(o){this.initConnection_();const c=new U.BH,w={action:"g",request:{p:o._path.toString(),q:o._queryObject},onComplete:$=>{const X=$.d;"ok"===$.s?c.resolve(X):c.reject(X)}};return this.outstandingGets_.push(w),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),c.promise}listen(o,c,p,w){this.initConnection_();const A=o._queryIdentifier,$=o._path.toString();this.log_("Listen called for "+$+" "+A),this.listens.has($)||this.listens.set($,new Map),(0,U.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get($).has(A),"listen() called twice for same path/queryId.");const X={onComplete:w,hashFn:c,query:o,tag:p};this.listens.get($).set(A,X),this.connected_&&this.sendListen_(X)}sendGet_(o){const c=this.outstandingGets_[o];this.sendRequest("g",c.request,p=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(p)})}sendListen_(o){const c=o.query,p=c._path.toString(),w=c._queryIdentifier;this.log_("Listen on "+p+" for "+w);const A={p};o.tag&&(A.q=c._queryObject,A.t=o.tag),A.h=o.hashFn(),this.sendRequest("q",A,X=>{const ue=X.d,Ze=X.s;u.warnOnListenWarnings_(ue,c),(this.listens.get(p)&&this.listens.get(p).get(w))===o&&(this.log_("listen response",X),"ok"!==Ze&&this.removeListen_(p,w),o.onComplete&&o.onComplete(Ze,ue))})}static warnOnListenWarnings_(o,c){if(o&&"object"==typeof o&&(0,U.r3)(o,"w")){const p=(0,U.DV)(o,"w");if(Array.isArray(p)&&~p.indexOf("no_index")){const w='".indexOn": "'+c._queryParams.getIndex().toString()+'"',A=c._path.toString();wr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${w} at ${A} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,U.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,c=(0,U.w9)(o)?"auth":"gauth",p={cred:o};null===this.authOverride_?p.noauth=!0:"object"==typeof this.authOverride_&&(p.authvar=this.authOverride_),this.sendRequest(c,p,w=>{const A=w.s,$=w.d||"error";this.authToken_===o&&("ok"===A?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(A,$))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const c=o.s,p=o.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,p)})}unlisten(o,c){const p=o._path.toString(),w=o._queryIdentifier;this.log_("Unlisten called for "+p+" "+w),(0,U.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(p,w)&&this.connected_&&this.sendUnlisten_(p,w,o._queryObject,c)}sendUnlisten_(o,c,p,w){this.log_("Unlisten on "+o+" for "+c);const A={p:o};w&&(A.q=p,A.t=w),this.sendRequest("n",A)}onDisconnectPut(o,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,c,p):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:c,onComplete:p})}onDisconnectMerge(o,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,c,p):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:c,onComplete:p})}onDisconnectCancel(o,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,c):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(o,c,p,w){const A={p:c,d:p};this.log_("onDisconnect "+o,A),this.sendRequest(o,A,$=>{w&&setTimeout(()=>{w($.s,$.d)},Math.floor(0))})}put(o,c,p,w){this.putInternal("p",o,c,p,w)}merge(o,c,p,w){this.putInternal("m",o,c,p,w)}putInternal(o,c,p,w,A){this.initConnection_();const $={p:c,d:p};void 0!==A&&($.h=A),this.outstandingPuts_.push({action:o,request:$,onComplete:w}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(o){const c=this.outstandingPuts_[o].action,p=this.outstandingPuts_[o].request,w=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(c,p,A=>{this.log_(c+" response",A),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),w&&w(A.s,A.d)})}reportStats(o){if(this.connected_){const c={c:o};this.log_("reportStats",c),this.sendRequest("s",c,p=>{"ok"!==p.s&&this.log_("reportStats","Error sending stats: "+p.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,U.Wl)(o));const c=o.r,p=this.requestCBHash_[c];p&&(delete this.requestCBHash_[c],p(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,c){this.log_("handleServerMessage",o,c),"d"===o?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===o?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===o?this.onListenRevoked_(c.p,c.q):"ac"===o?this.onAuthRevoked_(c.s,c.d):"apc"===o?this.onAppCheckRevoked_(c.s,c.d):"sd"===o?this.onSecurityDebugPacket_(c):qr("Unrecognized action received from server: "+(0,U.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ee,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=ee,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ee),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-o);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,Yn.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const c=o.onDataMessage_.bind(o),p=o.onReady_.bind(o),w=o.onRealtimeDisconnect_.bind(o),A=o.id+":"+u.nextConnectionId_++,$=o.lastSessionId;let X=!1,ue=null;const Ze=function(){ue?ue.close():(X=!0,w())};o.realtime_={close:Ze,sendRequest:function($t){(0,U.hu)(ue,"sendRequest call when we're not connected not allowed."),ue.sendRequest($t)}};const yt=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[$t,Gt]=yield Promise.all([o.authTokenProvider_.getToken(yt),o.appCheckTokenProvider_.getToken(yt)]);X?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),o.authToken_=$t&&$t.accessToken,o.appCheckToken_=Gt&&Gt.token,ue=new Ku(A,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,c,p,w,ln=>{wr(ln+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},$))}catch($t){o.log_("Failed to get token: "+$t),X||(o.repoInfo_.nodeAdmin&&wr($t),Ze())}}})()}interrupt(o){an("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){an("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ee,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const c=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const c=this.outstandingPuts_[o];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,c){let p;p=c?c.map(A=>ma(A)).join("$"):"default";const w=this.removeListen_(o,p);w&&w.onComplete&&w.onComplete("permission_denied")}removeListen_(o,c){const p=new hi(o).toString();let w;if(this.listens.has(p)){const A=this.listens.get(p);w=A.get(c),A.delete(c),0===A.size&&this.listens.delete(p)}else w=void 0;return w}onAuthRevoked_(o,c){an("Auth token revoked: "+o+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,c){an("App check token revoked: "+o+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const c of o.values())this.sendListen_(c);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let c="js";(0,U.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+c+"."+Ki.replace(/\./g,"-")]=1,(0,U.uI)()?o["framework.cordova"]=1:(0,U.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=yu.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&o}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class ir{constructor(r,o){this.name=r,this.node=o}static Wrap(r,o){return new ir(r,o)}}class Os{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,o){const c=new ir(Xi,r),p=new ir(Xi,o);return 0!==this.compare(c,p)}minPost(){return ir.MIN}}class va extends Os{static get __EMPTY_NODE(){return xo}static set __EMPTY_NODE(r){xo=r}compare(r,o){return ro(r.name,o.name)}isDefinedOn(r){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,o){return!1}minPost(){return ir.MIN}maxPost(){return new ir(Us,xo)}makePost(r,o){return(0,U.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new ir(r,xo)}toString(){return".key"}}const qo=new va;class _a{constructor(r,o,c,p,w=null){this.isReverse_=p,this.resultGenerator_=w,this.nodeStack_=[];let A=1;for(;!r.isEmpty();)if(A=o?c(r.key,o):1,p&&(A*=-1),A<0)r=this.isReverse_?r.left:r.right;else{if(0===A){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,r=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let sh,na=(()=>{class u{constructor(o,c,p,w,A){this.key=o,this.value=c,this.color=null!=p?p:u.RED,this.left=null!=w?w:io.EMPTY_NODE,this.right=null!=A?A:io.EMPTY_NODE}copy(o,c,p,w,A){return new u(null!=o?o:this.key,null!=c?c:this.value,null!=p?p:this.color,null!=w?w:this.left,null!=A?A:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,c,p){let w=this;const A=p(o,w.key);return w=A<0?w.copy(null,null,null,w.left.insert(o,c,p),null):0===A?w.copy(null,c,null,null,null):w.copy(null,null,null,null,w.right.insert(o,c,p)),w.fixUp_()}removeMin_(){if(this.left.isEmpty())return io.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,c){let p,w;if(p=this,c(o,p.key)<0)!p.left.isEmpty()&&!p.left.isRed_()&&!p.left.left.isRed_()&&(p=p.moveRedLeft_()),p=p.copy(null,null,null,p.left.remove(o,c),null);else{if(p.left.isRed_()&&(p=p.rotateRight_()),!p.right.isEmpty()&&!p.right.isRed_()&&!p.right.left.isRed_()&&(p=p.moveRedRight_()),0===c(o,p.key)){if(p.right.isEmpty())return io.EMPTY_NODE;w=p.right.min_(),p=p.copy(w.key,w.value,null,null,p.right.removeMin_())}p=p.copy(null,null,null,null,p.right.remove(o,c))}return p.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,c)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class io{constructor(r,o=io.EMPTY_NODE){this.comparator_=r,this.root_=o}insert(r,o){return new io(this.comparator_,this.root_.insert(r,o,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(r){return new io(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,na.BLACK,null,null))}get(r){let o,c=this.root_;for(;!c.isEmpty();){if(o=this.comparator_(r,c.key),0===o)return c.value;o<0?c=c.left:o>0&&(c=c.right)}return null}getPredecessorKey(r){let o,c=this.root_,p=null;for(;!c.isEmpty();){if(o=this.comparator_(r,c.key),0===o){if(c.left.isEmpty())return p?p.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}o<0?c=c.left:o>0&&(p=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new _a(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,o){return new _a(this.root_,r,this.comparator_,!1,o)}getReverseIteratorFrom(r,o){return new _a(this.root_,r,this.comparator_,!0,o)}getReverseIterator(r){return new _a(this.root_,null,this.comparator_,!0,r)}}function Vl(u,r){return ro(u.name,r.name)}function Tp(u,r){return ro(u,r)}io.EMPTY_NODE=new class la{copy(r,o,c,p,w){return this}insert(r,o,c){return new na(r,o,null)}remove(r,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vf=function(u){return"number"==typeof u?"number:"+ya(u):"string:"+u},el=function(u){if(u.isLeafNode()){const r=u.val();(0,U.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,U.r3)(r,".sv"),"Priority must be a string or number.")}else(0,U.hu)(u===sh||u.isEmpty(),"priority of unexpected type.");(0,U.hu)(u===sh||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ap,ah,bc,tl=(()=>{class u{constructor(o,c=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=c,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),el(this.priorityNode_)}static set __childrenNodeConstructor(o){Ap=o}static get __childrenNodeConstructor(){return Ap}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new u(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return Hr(o)?this:".priority"===ri(o)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,c){return null}updateImmediateChild(o,c){return".priority"===o?this.updatePriority(c):c.isEmpty()&&".priority"!==o?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,c).updatePriority(this.priorityNode_)}updateChild(o,c){const p=ri(o);return null===p?c:c.isEmpty()&&".priority"!==p?this:((0,U.hu)(".priority"!==p||1===Zs(o),".priority must be the last token in a path"),this.updateImmediateChild(p,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wr(o),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,c){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+vf(this.priorityNode_.val())+":");const c=typeof this.value_;o+=c+":",o+="number"===c?ya(this.value_):this.value_,this.lazyHash_=N(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===u.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof u.__childrenNodeConstructor?-1:((0,U.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const c=typeof o.value_,p=typeof this.value_,w=u.VALUE_TYPE_ORDER.indexOf(c),A=u.VALUE_TYPE_ORDER.indexOf(p);return(0,U.hu)(w>=0,"Unknown leaf type: "+c),(0,U.hu)(A>=0,"Unknown leaf type: "+p),w===A?"object"===p?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:A-w}withIndex(){return this}isIndexed(){return!0}equals(o){return o===this||!!o.isLeafNode()&&(this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const cs=new class lh extends Os{compare(r,o){const c=r.node.getPriority(),p=o.node.getPriority(),w=c.compareTo(p);return 0===w?ro(r.name,o.name):w}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,o){return!r.getPriority().equals(o.getPriority())}minPost(){return ir.MIN}maxPost(){return new ir(Us,new tl("[PRIORITY-POST]",bc))}makePost(r,o){const c=ah(r);return new ir(o,new tl("[PRIORITY-POST]",c))}toString(){return".priority"}},_u=Math.log(2);class vo{constructor(r){this.count=parseInt(Math.log(r+1)/_u,10),this.current_=this.count-1;const p=(w=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&p}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const Sc=function(u,r,o,c){u.sort(r);const p=function(X,ue){const Ze=ue-X;let st,yt;if(0===Ze)return null;if(1===Ze)return st=u[X],yt=o?o(st):st,new na(yt,st.node,na.BLACK,null,null);{const $t=parseInt(Ze/2,10)+X,Gt=p(X,$t),ln=p($t+1,ue);return st=u[$t],yt=o?o(st):st,new na(yt,st.node,na.BLACK,Gt,ln)}},$=function(X){let ue=null,Ze=null,st=u.length;const yt=function(Gt,ln){const xn=st-Gt,Rr=st;st-=Gt;const Zr=p(xn+1,Rr),Di=u[xn],Mi=o?o(Di):Di;$t(new na(Mi,Di.node,ln,null,Zr))},$t=function(Gt){ue?(ue.left=Gt,ue=Gt):(Ze=Gt,ue=Gt)};for(let Gt=0;Gt<X.count;++Gt){const ln=X.nextBitIsOne(),xn=Math.pow(2,X.count-(Gt+1));ln?yt(xn,na.BLACK):(yt(xn,na.BLACK),yt(xn,na.RED))}return Ze}(new vo(u.length));return new io(c||r,$)};let xa;const Pa={};class ii{constructor(r,o){this.indexes_=r,this.indexSet_=o}static get Default(){return(0,U.hu)(Pa&&cs,"ChildrenNode.ts has not been loaded"),xa=xa||new ii({".priority":Pa},{".priority":cs}),xa}get(r){const o=(0,U.DV)(this.indexes_,r);if(!o)throw new Error("No index defined for "+r);return o instanceof io?o:null}hasIndex(r){return(0,U.r3)(this.indexSet_,r.toString())}addIndex(r,o){(0,U.hu)(r!==qo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let p=!1;const w=o.getIterator(ir.Wrap);let $,A=w.getNext();for(;A;)p=p||r.isDefinedOn(A.node),c.push(A),A=w.getNext();$=p?Sc(c,r.getCompare()):Pa;const X=r.toString(),ue=Object.assign({},this.indexSet_);ue[X]=r;const Ze=Object.assign({},this.indexes_);return Ze[X]=$,new ii(Ze,ue)}addToIndexes(r,o){const c=(0,U.UI)(this.indexes_,(p,w)=>{const A=(0,U.DV)(this.indexSet_,w);if((0,U.hu)(A,"Missing index implementation for "+w),p===Pa){if(A.isDefinedOn(r.node)){const $=[],X=o.getIterator(ir.Wrap);let ue=X.getNext();for(;ue;)ue.name!==r.name&&$.push(ue),ue=X.getNext();return $.push(r),Sc($,A.getCompare())}return Pa}{const $=o.get(r.name);let X=p;return $&&(X=X.remove(new ir(r.name,$))),X.insert(r,r.node)}});return new ii(c,this.indexSet_)}removeFromIndexes(r,o){const c=(0,U.UI)(this.indexes_,p=>{if(p===Pa)return p;{const w=o.get(r.name);return w?p.remove(new ir(r.name,w)):p}});return new ii(c,this.indexSet_)}}let Eu,pr=(()=>{class u{constructor(o,c,p){this.children_=o,this.priorityNode_=c,this.indexMap_=p,this.lazyHash_=null,this.priorityNode_&&el(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Eu||(Eu=new u(new io(Tp),null,ii.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Eu}updatePriority(o){return this.children_.isEmpty()?this:new u(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const c=this.children_.get(o);return null===c?Eu:c}}getChild(o){const c=ri(o);return null===c?this:this.getImmediateChild(c).getChild(Wr(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,c){if((0,U.hu)(c,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(c);{const p=new ir(o,c);let w,A;c.isEmpty()?(w=this.children_.remove(o),A=this.indexMap_.removeFromIndexes(p,this.children_)):(w=this.children_.insert(o,c),A=this.indexMap_.addToIndexes(p,this.children_));const $=w.isEmpty()?Eu:this.priorityNode_;return new u(w,$,A)}}updateChild(o,c){const p=ri(o);if(null===p)return c;{(0,U.hu)(".priority"!==ri(o)||1===Zs(o),".priority must be the last token in a path");const w=this.getImmediateChild(p).updateChild(Wr(o),c);return this.updateImmediateChild(p,w)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const c={};let p=0,w=0,A=!0;if(this.forEachChild(cs,($,X)=>{c[$]=X.val(o),p++,A&&u.INTEGER_REGEXP_.test($)?w=Math.max(w,Number($)):A=!1}),!o&&A&&w<2*p){const $=[];for(const X in c)$[X]=c[X];return $}return o&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+vf(this.getPriority().val())+":"),this.forEachChild(cs,(c,p)=>{const w=p.hash();""!==w&&(o+=":"+c+":"+w)}),this.lazyHash_=""===o?"":N(o)}return this.lazyHash_}getPredecessorChildName(o,c,p){const w=this.resolveIndex_(p);if(w){const A=w.getPredecessorKey(new ir(o,c));return A?A.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const c=this.resolveIndex_(o);if(c){const p=c.minKey();return p&&p.name}return this.children_.minKey()}getFirstChild(o){const c=this.getFirstChildName(o);return c?new ir(c,this.children_.get(c)):null}getLastChildName(o){const c=this.resolveIndex_(o);if(c){const p=c.maxKey();return p&&p.name}return this.children_.maxKey()}getLastChild(o){const c=this.getLastChildName(o);return c?new ir(c,this.children_.get(c)):null}forEachChild(o,c){const p=this.resolveIndex_(o);return p?p.inorderTraversal(w=>c(w.name,w.node)):this.children_.inorderTraversal(c)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,c){const p=this.resolveIndex_(c);if(p)return p.getIteratorFrom(o,w=>w);{const w=this.children_.getIteratorFrom(o.name,ir.Wrap);let A=w.peek();for(;null!=A&&c.compare(A,o)<0;)w.getNext(),A=w.peek();return w}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,c){const p=this.resolveIndex_(c);if(p)return p.getReverseIteratorFrom(o,w=>w);{const w=this.children_.getReverseIteratorFrom(o.name,ir.Wrap);let A=w.peek();for(;null!=A&&c.compare(A,o)>0;)w.getNext(),A=w.peek();return w}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===Oa?-1:0}withIndex(o){if(o===qo||this.indexMap_.hasIndex(o))return this;{const c=this.indexMap_.addIndex(o,this.children_);return new u(this.children_,this.priorityNode_,c)}}isIndexed(o){return o===qo||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const c=o;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const p=this.getIterator(cs),w=c.getIterator(cs);let A=p.getNext(),$=w.getNext();for(;A&&$;){if(A.name!==$.name||!A.node.equals($.node))return!1;A=p.getNext(),$=w.getNext()}return null===A&&null===$}return!1}return!1}}resolveIndex_(o){return o===qo?null:this.indexMap_.get(o.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Oa=new class ds extends pr{constructor(){super(new io(Tp),pr.EMPTY_NODE,ii.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return pr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ir,{MIN:{value:new ir(Xi,pr.EMPTY_NODE)},MAX:{value:new ir(Us,Oa)}}),va.__EMPTY_NODE=pr.EMPTY_NODE,tl.__childrenNodeConstructor=pr,function oh(u){sh=u}(Oa),function Dc(u){bc=u}(Oa);const Tc=!0;function Ei(u,r=null){if(null===u)return pr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(r=u[".priority"]),(0,U.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new tl(u,Ei(r));if(u instanceof Array||!Tc){let o=pr.EMPTY_NODE;return js(u,(c,p)=>{if((0,U.r3)(u,c)&&"."!==c.substring(0,1)){const w=Ei(p);(w.isLeafNode()||!w.isEmpty())&&(o=o.updateImmediateChild(c,w))}}),o.updatePriority(Ei(r))}{const o=[];let c=!1;if(js(u,(A,$)=>{if("."!==A.substring(0,1)){const X=Ei($);X.isEmpty()||(c=c||!X.getPriority().isEmpty(),o.push(new ir(A,X)))}}),0===o.length)return pr.EMPTY_NODE;const w=Sc(o,Vl,A=>A.name,Tp);if(c){const A=Sc(o,cs.getCompare());return new pr(w,Ei(r),new ii({".priority":A},{".priority":cs}))}return new pr(w,Ei(r),ii.Default)}}!function _f(u){ah=u}(Ei);class wu extends Os{constructor(r){super(),this.indexPath_=r,(0,U.hu)(!Hr(r)&&".priority"!==ri(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,o){const c=this.extractChild(r.node),p=this.extractChild(o.node),w=c.compareTo(p);return 0===w?ro(r.name,o.name):w}makePost(r,o){const c=Ei(r),p=pr.EMPTY_NODE.updateChild(this.indexPath_,c);return new ir(o,p)}maxPost(){const r=pr.EMPTY_NODE.updateChild(this.indexPath_,Oa);return new ir(Us,r)}toString(){return aa(this.indexPath_,0).join("/")}}const Gs=new class hm extends Os{compare(r,o){const c=r.node.compareTo(o.node);return 0===c?ro(r.name,o.name):c}isDefinedOn(r){return!0}indexedValueChanged(r,o){return!r.equals(o)}minPost(){return ir.MIN}maxPost(){return ir.MAX}makePost(r,o){const c=Ei(r);return new ir(o,c)}toString(){return".value"}};function Ac(u){return{type:"value",snapshotNode:u}}function Po(u,r){return{type:"child_added",snapshotNode:r,childName:u}}function qi(u,r){return{type:"child_removed",snapshotNode:r,childName:u}}function so(u,r,o){return{type:"child_changed",snapshotNode:r,childName:u,oldSnap:o}}class wl{constructor(r){this.index_=r}updateChild(r,o,c,p,w,A){(0,U.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const $=r.getImmediateChild(o);return $.getChild(p).equals(c.getChild(p))&&$.isEmpty()===c.isEmpty()||(null!=A&&(c.isEmpty()?r.hasChild(o)?A.trackChildChange(qi(o,$)):(0,U.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):$.isEmpty()?A.trackChildChange(Po(o,c)):A.trackChildChange(so(o,c,$))),r.isLeafNode()&&c.isEmpty())?r:r.updateImmediateChild(o,c).withIndex(this.index_)}updateFullNode(r,o,c){return null!=c&&(r.isLeafNode()||r.forEachChild(cs,(p,w)=>{o.hasChild(p)||c.trackChildChange(qi(p,w))}),o.isLeafNode()||o.forEachChild(cs,(p,w)=>{if(r.hasChild(p)){const A=r.getImmediateChild(p);A.equals(w)||c.trackChildChange(so(p,w,A))}else c.trackChildChange(Po(p,w))})),o.withIndex(this.index_)}updatePriority(r,o){return r.isEmpty()?pr.EMPTY_NODE:r.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Yo{constructor(r){this.indexedFilter_=new wl(r.getIndex()),this.index_=r.getIndex(),this.startPost_=Yo.getStartPost_(r),this.endPost_=Yo.getEndPost_(r),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),r)<=0:this.index_.compare(this.getStartPost(),r)<0,c=this.endIsInclusive_?this.index_.compare(r,this.getEndPost())<=0:this.index_.compare(r,this.getEndPost())<0;return o&&c}updateChild(r,o,c,p,w,A){return this.matches(new ir(o,c))||(c=pr.EMPTY_NODE),this.indexedFilter_.updateChild(r,o,c,p,w,A)}updateFullNode(r,o,c){o.isLeafNode()&&(o=pr.EMPTY_NODE);let p=o.withIndex(this.index_);p=p.updatePriority(pr.EMPTY_NODE);const w=this;return o.forEachChild(cs,(A,$)=>{w.matches(new ir(A,$))||(p=p.updateImmediateChild(A,pr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,p,c)}updatePriority(r,o){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const o=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),o)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const o=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),o)}return r.getIndex().maxPost()}}class Mp{constructor(r){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const c=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?c<=0:c<0},this.withinEndPost=o=>{const c=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?c<=0:c<0},this.rangedFilter_=new Yo(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft(),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}updateChild(r,o,c,p,w,A){return this.rangedFilter_.matches(new ir(o,c))||(c=pr.EMPTY_NODE),r.getImmediateChild(o).equals(c)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,o,c,p,w,A):this.fullLimitUpdateChild_(r,o,c,w,A)}updateFullNode(r,o,c){let p;if(o.isLeafNode()||o.isEmpty())p=pr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let w;p=pr.EMPTY_NODE.withIndex(this.index_),w=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let A=0;for(;w.hasNext()&&A<this.limit_;){const $=w.getNext();if(this.withinDirectionalStart($)){if(!this.withinDirectionalEnd($))break;p=p.updateImmediateChild($.name,$.node),A++}}}else{let w;p=o.withIndex(this.index_),p=p.updatePriority(pr.EMPTY_NODE),w=this.reverse_?p.getReverseIterator(this.index_):p.getIterator(this.index_);let A=0;for(;w.hasNext();){const $=w.getNext();A<this.limit_&&this.withinDirectionalStart($)&&this.withinDirectionalEnd($)?A++:p=p.updateImmediateChild($.name,pr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,p,c)}updatePriority(r,o){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,o,c,p,w){let A;if(this.reverse_){const st=this.index_.getCompare();A=(yt,$t)=>st($t,yt)}else A=this.index_.getCompare();const $=r;(0,U.hu)($.numChildren()===this.limit_,"");const X=new ir(o,c),ue=this.reverse_?$.getFirstChild(this.index_):$.getLastChild(this.index_),Ze=this.rangedFilter_.matches(X);if($.hasChild(o)){const st=$.getImmediateChild(o);let yt=p.getChildAfterChild(this.index_,ue,this.reverse_);for(;null!=yt&&(yt.name===o||$.hasChild(yt.name));)yt=p.getChildAfterChild(this.index_,yt,this.reverse_);const $t=null==yt?1:A(yt,X);if(Ze&&!c.isEmpty()&&$t>=0)return null!=w&&w.trackChildChange(so(o,c,st)),$.updateImmediateChild(o,c);{null!=w&&w.trackChildChange(qi(o,st));const ln=$.updateImmediateChild(o,pr.EMPTY_NODE);return null!=yt&&this.rangedFilter_.matches(yt)?(null!=w&&w.trackChildChange(Po(yt.name,yt.node)),ln.updateImmediateChild(yt.name,yt.node)):ln}}return c.isEmpty()?r:Ze&&A(ue,X)>=0?(null!=w&&(w.trackChildChange(qi(ue.name,ue.node)),w.trackChildChange(Po(o,c))),$.updateImmediateChild(o,c).updateImmediateChild(ue.name,pr.EMPTY_NODE)):r}}class Na{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cs}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cs}copy(){const r=new Na;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.startAfterSet_=this.startAfterSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.endBeforeSet_=this.endBeforeSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function ka(u,r,o){const c=u.copy();return c.startSet_=!0,void 0===r&&(r=null),c.indexStartValue_=r,null!=o?(c.startNameSet_=!0,c.indexStartName_=o):(c.startNameSet_=!1,c.indexStartName_=""),c}function jl(u,r,o){const c=u.copy();return c.endSet_=!0,void 0===r&&(r=null),c.indexEndValue_=r,void 0!==o?(c.endNameSet_=!0,c.indexEndName_=o):(c.endNameSet_=!1,c.indexEndName_=""),c}function Il(u,r){const o=u.copy();return o.index_=r,o}function wf(u){const r={};if(u.isDefault())return r;let o;if(u.index_===cs?o="$priority":u.index_===Gs?o="$value":u.index_===qo?o="$key":((0,U.hu)(u.index_ instanceof wu,"Unrecognized index type!"),o=u.index_.toString()),r.orderBy=(0,U.Wl)(o),u.startSet_){const c=u.startAfterSet_?"startAfter":"startAt";r[c]=(0,U.Wl)(u.indexStartValue_),u.startNameSet_&&(r[c]+=","+(0,U.Wl)(u.indexStartName_))}if(u.endSet_){const c=u.endBeforeSet_?"endBefore":"endAt";r[c]=(0,U.Wl)(u.indexEndValue_),u.endNameSet_&&(r[c]+=","+(0,U.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?r.limitToFirst=u.limit_:r.limitToLast=u.limit_),r}function Ns(u){const r={};if(u.startSet_&&(r.sp=u.indexStartValue_,u.startNameSet_&&(r.sn=u.indexStartName_),r.sin=!u.startAfterSet_),u.endSet_&&(r.ep=u.indexEndValue_,u.endNameSet_&&(r.en=u.indexEndName_),r.ein=!u.endBeforeSet_),u.limitSet_){r.l=u.limit_;let o=u.viewFrom_;""===o&&(o=u.isViewFromLeft()?"l":"r"),r.vf=o}return u.index_!==cs&&(r.i=u.index_.toString()),r}class Cl extends mu{constructor(r,o,c,p){super(),this.repoInfo_=r,this.onDataUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.log_=jr("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,o){return void 0!==o?"tag$"+o:((0,U.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,o,c,p){const w=r._path.toString();this.log_("Listen called for "+w+" "+r._queryIdentifier);const A=Cl.getListenId_(r,c),$={};this.listens_[A]=$;const X=wf(r._queryParams);this.restRequest_(w+".json",X,(ue,Ze)=>{let st=Ze;if(404===ue&&(st=null,ue=null),null===ue&&this.onDataUpdate_(w,st,!1,c),(0,U.DV)(this.listens_,A)===$){let yt;yt=ue?401===ue?"permission_denied":"rest_error:"+ue:"ok",p(yt,null)}})}unlisten(r,o){const c=Cl.getListenId_(r,o);delete this.listens_[c]}get(r){const o=wf(r._queryParams),c=r._path.toString(),p=new U.BH;return this.restRequest_(c+".json",o,(w,A)=>{let $=A;404===w&&($=null,w=null),null===w?(this.onDataUpdate_(c,$,!1,null),p.resolve($)):p.reject(new Error($))}),p.promise}refreshAuthToken(r){}restRequest_(r,o={},c){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([p,w])=>{p&&p.accessToken&&(o.auth=p.accessToken),w&&w.token&&(o.ac=w.token);const A=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,U.xO)(o);this.log_("Sending REST request for "+A);const $=new XMLHttpRequest;$.onreadystatechange=()=>{if(c&&4===$.readyState){this.log_("REST Response for "+A+" received. status:",$.status,"response:",$.responseText);let X=null;if($.status>=200&&$.status<300){try{X=(0,U.cI)($.responseText)}catch{wr("Failed to parse JSON response for "+A+": "+$.responseText)}c(null,X)}else 401!==$.status&&404!==$.status&&wr("Got unsuccessful REST response for "+A+" Status: "+$.status),c($.status);c=null}},$.open("GET",A,!0),$.send()})}}class Hl{constructor(){this.rootNode_=pr.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,o){this.rootNode_=this.rootNode_.updateChild(r,o)}}function Cu(){return{value:null,children:new Map}}function Oo(u,r,o){if(Hr(r))u.value=o,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(r,o);else{const c=ri(r);u.children.has(c)||u.children.set(c,Cu()),Oo(u.children.get(c),r=Wr(r),o)}}function zl(u,r){if(Hr(r))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const o=u.value;return u.value=null,o.forEachChild(cs,(c,p)=>{Oo(u,new hi(c),p)}),zl(u,r)}}if(u.children.size>0){const o=ri(r);return r=Wr(r),u.children.has(o)&&zl(u.children.get(o),r)&&u.children.delete(o),0===u.children.size}return!0}function Yu(u,r,o){null!==u.value?o(r,u.value):function nl(u,r){u.children.forEach((o,c)=>{r(c,o)})}(u,(c,p)=>{Yu(p,new hi(r.toString()+"/"+c),o)})}class Mc{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),o=Object.assign({},r);return this.last_&&js(this.last_,(c,p)=>{o[c]=o[c]-p}),this.last_=r,o}}class fm{constructor(r,o){this.server_=o,this.statsToReport_={},this.statsListener_=new Mc(r);const c=1e4+2e4*Math.random();oa(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const r=this.statsListener_.get(),o={};let c=!1;js(r,(p,w)=>{w>0&&(0,U.r3)(this.statsToReport_,p)&&(o[p]=w,c=!0)}),c&&this.server_.reportStats(o),oa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ur=(()=>((Ur=Ur||{})[Ur.OVERWRITE=0]="OVERWRITE",Ur[Ur.MERGE=1]="MERGE",Ur[Ur.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ur[Ur.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ur))();function rl(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class xc{constructor(r,o,c){this.path=r,this.affectedTree=o,this.revert=c,this.type=Ur.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(Hr(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new hi(r));return new xc(_i(),o,this.revert)}}return(0,U.hu)(ri(this.path)===r,"operationForChild called for unrelated child."),new xc(Wr(this.path),this.affectedTree,this.revert)}}class Pc{constructor(r,o){this.source=r,this.path=o,this.type=Ur.LISTEN_COMPLETE}operationForChild(r){return Hr(this.path)?new Pc(this.source,_i()):new Pc(this.source,Wr(this.path))}}class Fa{constructor(r,o,c){this.source=r,this.path=o,this.snap=c,this.type=Ur.OVERWRITE}operationForChild(r){return Hr(this.path)?new Fa(this.source,_i(),this.snap.getImmediateChild(r)):new Fa(this.source,Wr(this.path),this.snap)}}class Oc{constructor(r,o,c){this.source=r,this.path=o,this.children=c,this.type=Ur.MERGE}operationForChild(r){if(Hr(this.path)){const o=this.children.subtree(new hi(r));return o.isEmpty()?null:o.value?new Fa(this.source,_i(),o.value):new Oc(this.source,_i(),o)}return(0,U.hu)(ri(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new Oc(this.source,Wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gl{constructor(r,o,c){this.node_=r,this.fullyInitialized_=o,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(Hr(r))return this.isFullyInitialized()&&!this.filtered_;const o=ri(r);return this.isCompleteForChild(o)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class wi{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function La(u,r,o,c,p,w){const A=c.filter($=>$.type===o);A.sort(($,X)=>function If(u,r,o){if(null==r.childName||null==o.childName)throw(0,U.g5)("Should only compare child_ events.");const c=new ir(r.childName,r.snapshotNode),p=new ir(o.childName,o.snapshotNode);return u.index_.compare(c,p)}(u,$,X)),A.forEach($=>{const X=function Nc(u,r,o){return"value"===r.type||"child_removed"===r.type||(r.prevName=o.getPredecessorChildName(r.childName,r.snapshotNode,u.index_)),r}(u,$,w);p.forEach(ue=>{ue.respondsTo($.type)&&r.push(ue.createEvent(X,u.query_))})})}function bu(u,r){return{eventCache:u,serverCache:r}}function Wl(u,r,o,c){return bu(new Gl(r,o,c),u.serverCache)}function Du(u,r,o,c){return bu(u.eventCache,new Gl(r,o,c))}function hd(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function il(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let fd;class hs{constructor(r,o=(()=>(fd||(fd=new io(as)),fd))()){this.value=r,this.children=o}static fromObject(r){let o=new hs(null);return js(r,(c,p)=>{o=o.set(new hi(c),p)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,o){if(null!=this.value&&o(this.value))return{path:_i(),value:this.value};if(Hr(r))return null;{const c=ri(r),p=this.children.get(c);if(null!==p){const w=p.findRootMostMatchingPathAndValue(Wr(r),o);return null!=w?{path:St(new hi(c),w.path),value:w.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(Hr(r))return this;{const o=ri(r),c=this.children.get(o);return null!==c?c.subtree(Wr(r)):new hs(null)}}set(r,o){if(Hr(r))return new hs(o,this.children);{const c=ri(r),w=(this.children.get(c)||new hs(null)).set(Wr(r),o),A=this.children.insert(c,w);return new hs(this.value,A)}}remove(r){if(Hr(r))return this.children.isEmpty()?new hs(null):new hs(null,this.children);{const o=ri(r),c=this.children.get(o);if(c){const p=c.remove(Wr(r));let w;return w=p.isEmpty()?this.children.remove(o):this.children.insert(o,p),null===this.value&&w.isEmpty()?new hs(null):new hs(this.value,w)}return this}}get(r){if(Hr(r))return this.value;{const o=ri(r),c=this.children.get(o);return c?c.get(Wr(r)):null}}setTree(r,o){if(Hr(r))return o;{const c=ri(r),w=(this.children.get(c)||new hs(null)).setTree(Wr(r),o);let A;return A=w.isEmpty()?this.children.remove(c):this.children.insert(c,w),new hs(this.value,A)}}fold(r){return this.fold_(_i(),r)}fold_(r,o){const c={};return this.children.inorderTraversal((p,w)=>{c[p]=w.fold_(St(r,p),o)}),o(r,this.value,c)}findOnPath(r,o){return this.findOnPath_(r,_i(),o)}findOnPath_(r,o,c){const p=!!this.value&&c(o,this.value);if(p)return p;if(Hr(r))return null;{const w=ri(r),A=this.children.get(w);return A?A.findOnPath_(Wr(r),St(o,w),c):null}}foreachOnPath(r,o){return this.foreachOnPath_(r,_i(),o)}foreachOnPath_(r,o,c){if(Hr(r))return this;{this.value&&c(o,this.value);const p=ri(r),w=this.children.get(p);return w?w.foreachOnPath_(Wr(r),St(o,p),c):new hs(null)}}foreach(r){this.foreach_(_i(),r)}foreach_(r,o){this.children.inorderTraversal((c,p)=>{p.foreach_(St(r,c),o)}),this.value&&o(r,this.value)}foreachChild(r){this.children.inorderTraversal((o,c)=>{c.value&&r(o,c.value)})}}class ua{constructor(r){this.writeTree_=r}static empty(){return new ua(new hs(null))}}function gd(u,r,o){if(Hr(r))return new ua(new hs(o));{const c=u.writeTree_.findRootMostValueAndPath(r);if(null!=c){const p=c.path;let w=c.value;const A=us(p,r);return w=w.updateChild(A,o),new ua(u.writeTree_.set(p,w))}{const p=new hs(o),w=u.writeTree_.setTree(r,p);return new ua(w)}}}function Su(u,r,o){let c=u;return js(o,(p,w)=>{c=gd(c,St(r,p),w)}),c}function Tu(u,r){if(Hr(r))return ua.empty();{const o=u.writeTree_.setTree(r,new hs(null));return new ua(o)}}function uh(u,r){return null!=Kl(u,r)}function Kl(u,r){const o=u.writeTree_.findRootMostValueAndPath(r);return null!=o?u.writeTree_.get(o.path).getChild(us(o.path,r)):null}function kc(u){const r=[],o=u.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(cs,(c,p)=>{r.push(new ir(c,p))}):u.writeTree_.children.inorderTraversal((c,p)=>{null!=p.value&&r.push(new ir(c,p.value))}),r}function ra(u,r){if(Hr(r))return u;{const o=Kl(u,r);return new ua(null!=o?new hs(o):u.writeTree_.subtree(r))}}function Fc(u){return u.writeTree_.isEmpty()}function ql(u,r){return md(_i(),u.writeTree_,r)}function md(u,r,o){if(null!=r.value)return o.updateChild(u,r.value);{let c=null;return r.children.inorderTraversal((p,w)=>{".priority"===p?((0,U.hu)(null!==w.value,"Priority writes must always be leaf nodes"),c=w.value):o=md(St(u,p),w,o)}),!o.getChild(u).isEmpty()&&null!==c&&(o=o.updateChild(St(u,".priority"),c)),o}}function yd(u,r){return _d(r,u)}function R(u,r){if(u.snap)return ts(u.path,r);for(const o in u.children)if(u.children.hasOwnProperty(o)&&ts(St(u.path,o),r))return!0;return!1}function I(u){return u.visible}function O(u,r,o){let c=ua.empty();for(let p=0;p<u.length;++p){const w=u[p];if(r(w)){const A=w.path;let $;if(w.snap)ts(o,A)?($=us(o,A),c=gd(c,$,w.snap)):ts(A,o)&&($=us(A,o),c=gd(c,_i(),w.snap.getChild($)));else{if(!w.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(ts(o,A))$=us(o,A),c=Su(c,$,w.children);else if(ts(A,o))if($=us(A,o),Hr($))c=Su(c,_i(),w.children);else{const X=(0,U.DV)(w.children,ri($));if(X){const ue=X.getChild(Wr($));c=gd(c,_i(),ue)}}}}}return c}function ae(u,r,o,c,p){if(c||p){const w=ra(u.visibleWrites,r);return!p&&Fc(w)?o:p||null!=o||uh(w,_i())?ql(O(u.allWrites,function(ue){return(ue.visible||p)&&(!c||!~c.indexOf(ue.writeId))&&(ts(ue.path,r)||ts(r,ue.path))},r),o||pr.EMPTY_NODE):null}{const w=Kl(u.visibleWrites,r);if(null!=w)return w;{const A=ra(u.visibleWrites,r);return Fc(A)?o:null!=o||uh(A,_i())?ql(A,o||pr.EMPTY_NODE):null}}}function Xr(u,r,o,c){return ae(u.writeTree,u.treePath,r,o,c)}function Zo(u,r){return function be(u,r,o){let c=pr.EMPTY_NODE;const p=Kl(u.visibleWrites,r);if(p)return p.isLeafNode()||p.forEachChild(cs,(w,A)=>{c=c.updateImmediateChild(w,A)}),c;if(o){const w=ra(u.visibleWrites,r);return o.forEachChild(cs,(A,$)=>{const X=ql(ra(w,new hi(A)),$);c=c.updateImmediateChild(A,X)}),kc(w).forEach(A=>{c=c.updateImmediateChild(A.name,A.node)}),c}return kc(ra(u.visibleWrites,r)).forEach(A=>{c=c.updateImmediateChild(A.name,A.node)}),c}(u.writeTree,u.treePath,r)}function Yl(u,r,o,c){return function bt(u,r,o,c,p){(0,U.hu)(c||p,"Either existingEventSnap or existingServerSnap must exist");const w=St(r,o);if(uh(u.visibleWrites,w))return null;{const A=ra(u.visibleWrites,w);return Fc(A)?p.getChild(o):ql(A,p.getChild(o))}}(u.writeTree,u.treePath,r,o,c)}function Qu(u,r){return function wn(u,r){return Kl(u.visibleWrites,r)}(u.writeTree,St(u.treePath,r))}function Xu(u,r,o){return function Ht(u,r,o,c){const p=St(r,o),w=Kl(u.visibleWrites,p);return null!=w?w:c.isCompleteForChild(o)?ql(ra(u.visibleWrites,p),c.getNode().getImmediateChild(o)):null}(u.writeTree,u.treePath,r,o)}function Ho(u,r){return _d(St(u.treePath,r),u.writeTree)}function _d(u,r){return{treePath:u,writeTree:r}}class Au{constructor(){this.changeMap=new Map}trackChildChange(r){const o=r.type,c=r.childName;(0,U.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const p=this.changeMap.get(c);if(p){const w=p.type;if("child_added"===o&&"child_removed"===w)this.changeMap.set(c,so(c,r.snapshotNode,p.snapshotNode));else if("child_removed"===o&&"child_added"===w)this.changeMap.delete(c);else if("child_removed"===o&&"child_changed"===w)this.changeMap.set(c,qi(c,p.oldSnap));else if("child_changed"===o&&"child_added"===w)this.changeMap.set(c,Po(c,r.snapshotNode));else{if("child_changed"!==o||"child_changed"!==w)throw(0,U.g5)("Illegal combination of changes: "+r+" occurred after "+p);this.changeMap.set(c,so(c,r.snapshotNode,p.oldSnap))}}else this.changeMap.set(c,r)}getChanges(){return Array.from(this.changeMap.values())}}const Va=new class $a{getCompleteChild(r){return null}getChildAfterChild(r,o,c){return null}};class Lc{constructor(r,o,c=null){this.writes_=r,this.viewCache_=o,this.optCompleteServerCache_=c}getCompleteChild(r){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(r))return o.getNode().getImmediateChild(r);{const c=null!=this.optCompleteServerCache_?new Gl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xu(this.writes_,r,c)}}getChildAfterChild(r,o,c){const p=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:il(this.viewCache_),w=function Ba(u,r,o,c,p,w){return function jn(u,r,o,c,p,w,A){let $;const X=ra(u.visibleWrites,r),ue=Kl(X,_i());if(null!=ue)$=ue;else{if(null==o)return[];$=ql(X,o)}if($=$.withIndex(A),$.isEmpty()||$.isLeafNode())return[];{const Ze=[],st=A.getCompare(),yt=w?$.getReverseIteratorFrom(c,A):$.getIteratorFrom(c,A);let $t=yt.getNext();for(;$t&&Ze.length<p;)0!==st($t,c)&&Ze.push($t),$t=yt.getNext();return Ze}}(u.writeTree,u.treePath,r,o,c,p,w)}(this.writes_,p,o,1,c,r);return 0===w.length?null:w[0]}}function Yy(u,r,o,c,p,w){const A=r.eventCache;if(null!=Qu(c,o))return r;{let $,X;if(Hr(o))if((0,U.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const ue=il(r),st=Zo(c,ue instanceof pr?ue:pr.EMPTY_NODE);$=u.filter.updateFullNode(r.eventCache.getNode(),st,w)}else{const ue=Xr(c,il(r));$=u.filter.updateFullNode(r.eventCache.getNode(),ue,w)}else{const ue=ri(o);if(".priority"===ue){(0,U.hu)(1===Zs(o),"Can't have a priority with additional path components");const Ze=A.getNode();X=r.serverCache.getNode();const st=Yl(c,o,Ze,X);$=null!=st?u.filter.updatePriority(Ze,st):A.getNode()}else{const Ze=Wr(o);let st;if(A.isCompleteForChild(ue)){X=r.serverCache.getNode();const yt=Yl(c,o,A.getNode(),X);st=null!=yt?A.getNode().getImmediateChild(ue).updateChild(Ze,yt):A.getNode().getImmediateChild(ue)}else st=Xu(c,ue,r.serverCache);$=null!=st?u.filter.updateChild(A.getNode(),ue,st,Ze,p,w):A.getNode()}}return Wl(r,$,A.isFullyInitialized()||Hr(o),u.filter.filtersNodes())}}function ch(u,r,o,c,p,w,A,$){const X=r.serverCache;let ue;const Ze=A?u.filter:u.filter.getIndexedFilter();if(Hr(o))ue=Ze.updateFullNode(X.getNode(),c,null);else if(Ze.filtersNodes()&&!X.isFiltered()){const $t=X.getNode().updateChild(o,c);ue=Ze.updateFullNode(X.getNode(),$t,null)}else{const $t=ri(o);if(!X.isCompleteForPath(o)&&Zs(o)>1)return r;const Gt=Wr(o),xn=X.getNode().getImmediateChild($t).updateChild(Gt,c);ue=".priority"===$t?Ze.updatePriority(X.getNode(),xn):Ze.updateChild(X.getNode(),$t,xn,Gt,Va,null)}const st=Du(r,ue,X.isFullyInitialized()||Hr(o),Ze.filtersNodes());return Yy(u,st,o,p,new Lc(p,st,w),$)}function Cf(u,r,o,c,p,w,A){const $=r.eventCache;let X,ue;const Ze=new Lc(p,r,w);if(Hr(o))ue=u.filter.updateFullNode(r.eventCache.getNode(),c,A),X=Wl(r,ue,!0,u.filter.filtersNodes());else{const st=ri(o);if(".priority"===st)ue=u.filter.updatePriority(r.eventCache.getNode(),c),X=Wl(r,ue,$.isFullyInitialized(),$.isFiltered());else{const yt=Wr(o),$t=$.getNode().getImmediateChild(st);let Gt;if(Hr(yt))Gt=c;else{const ln=Ze.getCompleteChild(st);Gt=null!=ln?".priority"===Ra(yt)&&ln.getChild(Cc(yt)).isEmpty()?ln:ln.updateChild(yt,c):pr.EMPTY_NODE}X=$t.equals(Gt)?r:Wl(r,u.filter.updateChild($.getNode(),st,Gt,yt,Ze,A),$.isFullyInitialized(),u.filter.filtersNodes())}}return X}function pm(u,r){return u.eventCache.isCompleteForChild(r)}function Qo(u,r,o){return o.foreach((c,p)=>{r=r.updateChild(c,p)}),r}function bf(u,r,o,c,p,w,A,$){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let ue,X=r;ue=Hr(o)?c:new hs(null).setTree(o,c);const Ze=r.serverCache.getNode();return ue.children.inorderTraversal((st,yt)=>{if(Ze.hasChild(st)){const Gt=Qo(0,r.serverCache.getNode().getImmediateChild(st),yt);X=ch(u,X,new hi(st),Gt,p,w,A,$)}}),ue.children.inorderTraversal((st,yt)=>{const $t=!r.serverCache.isCompleteForChild(st)&&null===yt.value;if(!Ze.hasChild(st)&&!$t){const ln=Qo(0,r.serverCache.getNode().getImmediateChild(st),yt);X=ch(u,X,new hi(st),ln,p,w,A,$)}}),X}class Zl{constructor(r,o){this.query_=r,this.eventRegistrations_=[];const c=this.query_._queryParams,p=new wl(c.getIndex()),w=function Ul(u){return u.loadsAllData()?new wl(u.getIndex()):u.hasLimit()?new Mp(u):new Yo(u)}(c);this.processor_=function Bc(u){return{filter:u}}(w);const A=o.serverCache,$=o.eventCache,X=p.updateFullNode(pr.EMPTY_NODE,A.getNode(),null),ue=w.updateFullNode(pr.EMPTY_NODE,$.getNode(),null),Ze=new Gl(X,A.isFullyInitialized(),p.filtersNodes()),st=new Gl(ue,$.isFullyInitialized(),w.filtersNodes());this.viewCache_=bu(st,Ze),this.eventGenerator_=new wi(this.query_)}get query(){return this.query_}}function Xy(u,r){const o=il(u.viewCache_);return o&&(u.query._queryParams.loadsAllData()||!Hr(r)&&!o.getImmediateChild(ri(r)).isEmpty())?o.getChild(r):null}function Vc(u){return 0===u.eventRegistrations_.length}function kp(u,r,o){const c=[];if(o){(0,U.hu)(null==r,"A cancel should cancel all event registrations.");const p=u.query._path;u.eventRegistrations_.forEach(w=>{const A=w.createCancelEvent(o,p);A&&c.push(A)})}if(r){let p=[];for(let w=0;w<u.eventRegistrations_.length;++w){const A=u.eventRegistrations_[w];if(A.matches(r)){if(r.hasAnyCallback()){p=p.concat(u.eventRegistrations_.slice(w+1));break}}else p.push(A)}u.eventRegistrations_=p}else u.eventRegistrations_=[];return c}function dh(u,r,o,c){r.type===Ur.MERGE&&null!==r.source.queryId&&((0,U.hu)(il(u.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(hd(u.viewCache_),"Missing event cache, even though we have a server cache"));const p=u.viewCache_,w=function Ed(u,r,o,c,p){const w=new Au;let A,$;if(o.type===Ur.OVERWRITE){const ue=o;ue.source.fromUser?A=Cf(u,r,ue.path,ue.snap,c,p,w):((0,U.hu)(ue.source.fromServer,"Unknown source."),$=ue.source.tagged||r.serverCache.isFiltered()&&!Hr(ue.path),A=ch(u,r,ue.path,ue.snap,c,p,$,w))}else if(o.type===Ur.MERGE){const ue=o;ue.source.fromUser?A=function Zy(u,r,o,c,p,w,A){let $=r;return c.foreach((X,ue)=>{const Ze=St(o,X);pm(r,ri(Ze))&&($=Cf(u,$,Ze,ue,p,w,A))}),c.foreach((X,ue)=>{const Ze=St(o,X);pm(r,ri(Ze))||($=Cf(u,$,Ze,ue,p,w,A))}),$}(u,r,ue.path,ue.children,c,p,w):((0,U.hu)(ue.source.fromServer,"Unknown source."),$=ue.source.tagged||r.serverCache.isFiltered(),A=bf(u,r,ue.path,ue.children,c,p,$,w))}else if(o.type===Ur.ACK_USER_WRITE){const ue=o;A=ue.revert?function _o(u,r,o,c,p,w){let A;if(null!=Qu(c,o))return r;{const $=new Lc(c,r,p),X=r.eventCache.getNode();let ue;if(Hr(o)||".priority"===ri(o)){let Ze;if(r.serverCache.isFullyInitialized())Ze=Xr(c,il(r));else{const st=r.serverCache.getNode();(0,U.hu)(st instanceof pr,"serverChildren would be complete if leaf node"),Ze=Zo(c,st)}ue=u.filter.updateFullNode(X,Ze,w)}else{const Ze=ri(o);let st=Xu(c,Ze,r.serverCache);null==st&&r.serverCache.isCompleteForChild(Ze)&&(st=X.getImmediateChild(Ze)),ue=null!=st?u.filter.updateChild(X,Ze,st,Wr(o),$,w):r.eventCache.getNode().hasChild(Ze)?u.filter.updateChild(X,Ze,pr.EMPTY_NODE,Wr(o),$,w):X,ue.isEmpty()&&r.serverCache.isFullyInitialized()&&(A=Xr(c,il(r)),A.isLeafNode()&&(ue=u.filter.updateFullNode(ue,A,w)))}return A=r.serverCache.isFullyInitialized()||null!=Qu(c,_i()),Wl(r,ue,A,u.filter.filtersNodes())}}(u,r,ue.path,c,p,w):function Qy(u,r,o,c,p,w,A){if(null!=Qu(p,o))return r;const $=r.serverCache.isFiltered(),X=r.serverCache;if(null!=c.value){if(Hr(o)&&X.isFullyInitialized()||X.isCompleteForPath(o))return ch(u,r,o,X.getNode().getChild(o),p,w,$,A);if(Hr(o)){let ue=new hs(null);return X.getNode().forEachChild(qo,(Ze,st)=>{ue=ue.set(new hi(Ze),st)}),bf(u,r,o,ue,p,w,$,A)}return r}{let ue=new hs(null);return c.foreach((Ze,st)=>{const yt=St(o,Ze);X.isCompleteForPath(yt)&&(ue=ue.set(Ze,X.getNode().getChild(yt)))}),bf(u,r,o,ue,p,w,$,A)}}(u,r,ue.path,ue.affectedTree,c,p,w)}else{if(o.type!==Ur.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+o.type);A=function Np(u,r,o,c,p){const w=r.serverCache;return Yy(u,Du(r,w.getNode(),w.isFullyInitialized()||Hr(o),w.isFiltered()),o,c,Va,p)}(u,r,o.path,c,w)}const X=w.getChanges();return function si(u,r,o){const c=r.eventCache;if(c.isFullyInitialized()){const p=c.getNode().isLeafNode()||c.getNode().isEmpty(),w=hd(u);(o.length>0||!u.eventCache.isFullyInitialized()||p&&!c.getNode().equals(w)||!c.getNode().getPriority().equals(w.getPriority()))&&o.push(Ac(hd(r)))}}(r,A,X),{viewCache:A,changes:X}}(u.processor_,p,r,o,c);return function Op(u,r){(0,U.hu)(r.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(r.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,w.viewCache),(0,U.hu)(w.viewCache.serverCache.isFullyInitialized()||!p.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=w.viewCache,tv(u,w.changes,w.viewCache.eventCache.getNode(),null)}function tv(u,r,o,c){return function ns(u,r,o,c){const p=[],w=[];return r.forEach(A=>{"child_changed"===A.type&&u.index_.indexedValueChanged(A.oldSnap,A.snapshotNode)&&w.push(function cd(u,r){return{type:"child_moved",snapshotNode:r,childName:u}}(A.childName,A.snapshotNode))}),La(u,p,"child_removed",r,c,o),La(u,p,"child_added",r,c,o),La(u,p,"child_moved",w,c,o),La(u,p,"child_changed",r,c,o),La(u,p,"value",r,c,o),p}(u.eventGenerator_,r,o,c?[c]:u.eventRegistrations_)}let ws,ph;class wd{constructor(){this.views=new Map}}function Id(u,r,o,c){const p=r.source.queryId;if(null!==p){const w=u.views.get(p);return(0,U.hu)(null!=w,"SyncTree gave us an op for an invalid query."),dh(w,r,o,c)}{let w=[];for(const A of u.views.values())w=w.concat(dh(A,r,o,c));return w}}function rv(u,r,o,c,p){const A=u.views.get(r._queryIdentifier);if(!A){let $=Xr(o,p?c:null),X=!1;$?X=!0:c instanceof pr?($=Zo(o,c),X=!1):($=pr.EMPTY_NODE,X=!1);const ue=bu(new Gl($,X,!1),new Gl(c,p,!1));return new Zl(r,ue)}return A}function Ql(u){const r=[];for(const o of u.views.values())o.query._queryParams.loadsAllData()||r.push(o);return r}function Ua(u,r){let o=null;for(const c of u.views.values())o=o||Xy(c,r);return o}function fh(u,r){return r._queryParams.loadsAllData()?Ju(u):u.views.get(r._queryIdentifier)}function Lp(u,r){return null!=fh(u,r)}function Ea(u){return null!=Ju(u)}function Ju(u){for(const r of u.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let j_=1;class iv{constructor(r){this.listenProvider_=r,this.syncPointTree_=new hs(null),this.pendingWriteTree_=function gr(){return{visibleWrites:ua.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oo(u,r,o,c,p){return function vd(u,r,o,c,p){(0,U.hu)(c>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===p&&(p=!0),u.allWrites.push({path:r,snap:o,writeId:c,visible:p}),p&&(u.visibleWrites=gd(u.visibleWrites,r,o)),u.lastWriteId=c}(u.pendingWriteTree_,r,o,c,p),p?tc(u,new Fa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,o)):[]}function Xl(u,r,o=!1){const c=function Pp(u,r){for(let o=0;o<u.allWrites.length;o++){const c=u.allWrites[o];if(c.writeId===r)return c}return null}(u.pendingWriteTree_,r);if(function Zu(u,r){const o=u.allWrites.findIndex($=>$.writeId===r);(0,U.hu)(o>=0,"removeWrite called with nonexistent writeId.");const c=u.allWrites[o];u.allWrites.splice(o,1);let p=c.visible,w=!1,A=u.allWrites.length-1;for(;p&&A>=0;){const $=u.allWrites[A];$.visible&&(A>=o&&R($,c.path)?p=!1:ts(c.path,$.path)&&(w=!0)),A--}return!!p&&(w?(function _(u){u.visibleWrites=O(u.allWrites,I,_i()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(c.snap?u.visibleWrites=Tu(u.visibleWrites,c.path):js(c.children,X=>{u.visibleWrites=Tu(u.visibleWrites,St(c.path,X))}),!0))}(u.pendingWriteTree_,r)){let w=new hs(null);return null!=c.snap?w=w.set(_i(),!0):js(c.children,A=>{w=w.set(new hi(A),!0)}),tc(u,new xc(c.path,w,o))}return[]}function Cd(u,r,o){return tc(u,new Fa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}function gh(u,r,o,c,p=!1){const w=r._path,A=u.syncPointTree_.get(w);let $=[];if(A&&("default"===r._queryIdentifier||Lp(A,r))){const X=function Uc(u,r,o,c){const p=r._queryIdentifier,w=[];let A=[];const $=Ea(u);if("default"===p)for(const[X,ue]of u.views.entries())A=A.concat(kp(ue,o,c)),Vc(ue)&&(u.views.delete(X),ue.query._queryParams.loadsAllData()||w.push(ue.query));else{const X=u.views.get(p);X&&(A=A.concat(kp(X,o,c)),Vc(X)&&(u.views.delete(p),X.query._queryParams.loadsAllData()||w.push(X.query)))}return $&&!Ea(u)&&w.push(new(function nv(){return(0,U.hu)(ws,"Reference.ts has not been loaded"),ws}())(r._repo,r._path)),{removed:w,events:A}}(A,r,o,c);(function Df(u){return 0===u.views.size})(A)&&(u.syncPointTree_=u.syncPointTree_.remove(w));const ue=X.removed;if($=X.events,!p){const Ze=-1!==ue.findIndex(yt=>yt._queryParams.loadsAllData()),st=u.syncPointTree_.findOnPath(w,(yt,$t)=>Ea($t));if(Ze&&!st){const yt=u.syncPointTree_.subtree(w);if(!yt.isEmpty()){const $t=function Rf(u){return u.fold((r,o,c)=>{if(o&&Ea(o))return[Ju(o)];{let p=[];return o&&(p=Ql(o)),js(c,(w,A)=>{p=p.concat(A)}),p}})}(yt);for(let Gt=0;Gt<$t.length;++Gt){const ln=$t[Gt],xn=ln.query,Rr=Vp(u,ln);u.listenProvider_.startListening(_h(xn),bd(u,xn),Rr.hashFn,Rr.onComplete)}}}!st&&ue.length>0&&!c&&(Ze?u.listenProvider_.stopListening(_h(r),null):ue.forEach(yt=>{const $t=u.queryToTagMap.get(Af(yt));u.listenProvider_.stopListening(_h(yt),$t)}))}!function _m(u,r){for(let o=0;o<r.length;++o){const c=r[o];if(!c._queryParams.loadsAllData()){const p=Af(c),w=u.queryToTagMap.get(p);u.queryToTagMap.delete(p),u.tagToQueryMap.delete(w)}}}(u,ue)}return $}function $p(u,r,o,c){const p=yh(u,c);if(null!=p){const w=Mf(p),A=w.path,$=w.queryId,X=us(A,r);return vh(u,A,new Fa(rl($),X,o))}return[]}function mh(u,r,o,c=!1){const p=r._path;let w=null,A=!1;u.syncPointTree_.foreachOnPath(p,(yt,$t)=>{const Gt=us(yt,p);w=w||Ua($t,Gt),A=A||Ea($t)});let X,$=u.syncPointTree_.get(p);$?(A=A||Ea($),w=w||Ua($,_i())):($=new wd,u.syncPointTree_=u.syncPointTree_.set(p,$)),null!=w?X=!0:(X=!1,w=pr.EMPTY_NODE,u.syncPointTree_.subtree(p).foreachChild(($t,Gt)=>{const ln=Ua(Gt,_i());ln&&(w=w.updateImmediateChild($t,ln))}));const ue=Lp($,r);if(!ue&&!r._queryParams.loadsAllData()){const yt=Af(r);(0,U.hu)(!u.queryToTagMap.has(yt),"View does not exist, but we have a tag");const $t=function Eh(){return j_++}();u.queryToTagMap.set(yt,$t),u.tagToQueryMap.set($t,yt)}let st=function Fp(u,r,o,c,p,w){const A=rv(u,r,c,p,w);return u.views.has(r._queryIdentifier)||u.views.set(r._queryIdentifier,A),function Jy(u,r){u.eventRegistrations_.push(r)}(A,o),function ev(u,r){const o=u.viewCache_.eventCache,c=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(cs,(w,A)=>{c.push(Po(w,A))}),o.isFullyInitialized()&&c.push(Ac(o.getNode())),tv(u,c,o.getNode(),r)}(A,o)}($,r,o,yd(u.pendingWriteTree_,p),w,X);if(!ue&&!A&&!c){const yt=fh($,r);st=st.concat(function Dd(u,r,o){const c=r._path,p=bd(u,r),w=Vp(u,o),A=u.listenProvider_.startListening(_h(r),p,w.hashFn,w.onComplete),$=u.syncPointTree_.subtree(c);if(p)(0,U.hu)(!Ea($.value),"If we're adding a query, it shouldn't be shadowed");else{const X=$.fold((ue,Ze,st)=>{if(!Hr(ue)&&Ze&&Ea(Ze))return[Ju(Ze).query];{let yt=[];return Ze&&(yt=yt.concat(Ql(Ze).map($t=>$t.query))),js(st,($t,Gt)=>{yt=yt.concat(Gt)}),yt}});for(let ue=0;ue<X.length;++ue){const Ze=X[ue];u.listenProvider_.stopListening(_h(Ze),bd(u,Ze))}}return A}(u,r,yt))}return st}function ec(u,r,o){const p=u.pendingWriteTree_,w=u.syncPointTree_.findOnPath(r,(A,$)=>{const ue=Ua($,us(A,r));if(ue)return ue});return ae(p,r,w,o,!0)}function tc(u,r){return Hc(r,u.syncPointTree_,null,yd(u.pendingWriteTree_,_i()))}function Hc(u,r,o,c){if(Hr(u.path))return vm(u,r,o,c);{const p=r.get(_i());null==o&&null!=p&&(o=Ua(p,_i()));let w=[];const A=ri(u.path),$=u.operationForChild(A),X=r.children.get(A);if(X&&$){const ue=o?o.getImmediateChild(A):null,Ze=Ho(c,A);w=w.concat(Hc($,X,ue,Ze))}return p&&(w=w.concat(Id(p,u,c,o))),w}}function vm(u,r,o,c){const p=r.get(_i());null==o&&null!=p&&(o=Ua(p,_i()));let w=[];return r.children.inorderTraversal((A,$)=>{const X=o?o.getImmediateChild(A):null,ue=Ho(c,A),Ze=u.operationForChild(A);Ze&&(w=w.concat(vm(Ze,$,X,ue)))}),p&&(w=w.concat(Id(p,u,c,o))),w}function Vp(u,r){const o=r.query,c=bd(u,o);return{hashFn:()=>(function gm(u){return u.viewCache_.serverCache.getNode()}(r)||pr.EMPTY_NODE).hash(),onComplete:p=>{if("ok"===p)return c?function sv(u,r,o){const c=yh(u,o);if(c){const p=Mf(c),w=p.path,A=p.queryId,$=us(w,r);return vh(u,w,new Pc(rl(A),$))}return[]}(u,o._path,c):function Bp(u,r){return tc(u,new Pc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(u,o._path);{const w=function Vo(u,r){let o="Unknown Error";"too_big"===u?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?o="Client doesn't have permission to access the desired data.":"unavailable"===u&&(o="The service is unavailable");const c=new Error(u+" at "+r._path.toString()+": "+o);return c.code=u.toUpperCase(),c}(p,o);return gh(u,o,null,w)}}}}function bd(u,r){const o=Af(r);return u.queryToTagMap.get(o)}function Af(u){return u._path.toString()+"$"+u._queryIdentifier}function yh(u,r){return u.tagToQueryMap.get(r)}function Mf(u){const r=u.indexOf("$");return(0,U.hu)(-1!==r&&r<u.length-1,"Bad queryKey."),{queryId:u.substr(r+1),path:new hi(u.substr(0,r))}}function vh(u,r,o){const c=u.syncPointTree_.get(r);return(0,U.hu)(c,"Missing sync point for query tag that we're tracking"),Id(c,o,yd(u.pendingWriteTree_,r),null)}function _h(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function ym(){return(0,U.hu)(ph,"Reference.ts has not been loaded"),ph}())(u._repo,u._path):u}class wh{constructor(r){this.node_=r}getImmediateChild(r){const o=this.node_.getImmediateChild(r);return new wh(o)}node(){return this.node_}}class Sd{constructor(r,o){this.syncTree_=r,this.path_=o}getImmediateChild(r){const o=St(this.path_,r);return new Sd(this.syncTree_,o)}node(){return ec(this.syncTree_,this.path_)}}const Eo=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},xf=function(u,r,o){return u&&"object"==typeof u?((0,U.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?ov(u[".sv"],r,o):"object"==typeof u[".sv"]?Pf(u[".sv"],r):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},ov=function(u,r,o){if("timestamp"===u)return o.timestamp;(0,U.hu)(!1,"Unexpected server value: "+u)},Pf=function(u,r,o){u.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const c=u.increment;"number"!=typeof c&&(0,U.hu)(!1,"Unexpected increment value: "+c);const p=r.node();if((0,U.hu)(null!==p&&typeof p<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!p.isLeafNode())return c;const A=p.getValue();return"number"!=typeof A?c:A+c},Jl=function(u,r,o,c){return Of(r,new Sd(o,u),c)},Ih=function(u,r,o){return Of(u,new wh(r),o)};function Of(u,r,o){const c=u.getPriority().val(),p=xf(c,r.getImmediateChild(".priority"),o);let w;if(u.isLeafNode()){const A=u,$=xf(A.getValue(),r,o);return $!==A.getValue()||p!==A.getPriority().val()?new tl($,Ei(p)):u}{const A=u;return w=A,p!==A.getPriority().val()&&(w=w.updatePriority(new tl(p))),A.forEachChild(cs,($,X)=>{const ue=Of(X,r.getImmediateChild($),o);ue!==X&&(w=w.updateImmediateChild($,ue))}),w}}class Mu{constructor(r="",o=null,c={children:{},childCount:0}){this.name=r,this.parent=o,this.node=c}}function Td(u,r){let o=r instanceof hi?r:new hi(r),c=u,p=ri(o);for(;null!==p;){const w=(0,U.DV)(c.node.children,p)||{children:{},childCount:0};c=new Mu(p,c,w),o=Wr(o),p=ri(o)}return c}function ol(u){return u.node.value}function Up(u,r){u.node.value=r,Gc(u)}function av(u){return u.node.childCount>0}function zc(u,r){js(u.node.children,(o,c)=>{r(new Mu(o,u,c))})}function Ch(u,r,o,c){o&&!c&&r(u),zc(u,p=>{Ch(p,r,!0,c)}),o&&c&&r(u)}function Ru(u){return new hi(null===u.parent?u.name:Ru(u.parent)+"/"+u.name)}function Gc(u){null!==u.parent&&function jp(u,r,o){const c=function fE(u){return void 0===ol(u)&&!av(u)}(o),p=(0,U.r3)(u.node.children,r);c&&p?(delete u.node.children[r],u.node.childCount--,Gc(u)):!c&&!p&&(u.node.children[r]=o.node,u.node.childCount++,Gc(u))}(u.parent,u.name,u)}const lv=/[\[\].#$\/\u0000-\u001F\u007F]/,Em=/[\[\].#$\u0000-\u001F\u007F]/,Hp=10485760,Nf=function(u){return"string"==typeof u&&0!==u.length&&!lv.test(u)},uv=function(u){return"string"==typeof u&&0!==u.length&&!Em.test(u)},xu=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!go(u)||u&&"object"==typeof u&&(0,U.r3)(u,".sv")},eu=function(u,r,o,c){c&&void 0===r||kf((0,U.gK)(u,"value"),r,o)},kf=function(u,r,o){const c=o instanceof hi?new Sp(o,u):o;if(void 0===r)throw new Error(u+"contains undefined "+D(c));if("function"==typeof r)throw new Error(u+"contains a function "+D(c)+" with contents = "+r.toString());if(go(r))throw new Error(u+"contains "+r.toString()+" "+D(c));if("string"==typeof r&&r.length>Hp/3&&(0,U.ug)(r)>Hp)throw new Error(u+"contains a string greater than "+Hp+" utf8 bytes "+D(c)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let p=!1,w=!1;if(js(r,(A,$)=>{if(".value"===A)p=!0;else if(".priority"!==A&&".sv"!==A&&(w=!0,!Nf(A)))throw new Error(u+" contains an invalid key ("+A+") "+D(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ja(u,r){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(r),u.byteLength_+=(0,U.ug)(r),P(u)})(c,A),kf(u,$,c),function M(u){const r=u.parts_.pop();u.byteLength_-=(0,U.ug)(r),u.parts_.length>0&&(u.byteLength_-=1)}(c)}),p&&w)throw new Error(u+' contains ".value" child '+D(c)+" in addition to actual children.")}},ja=function(u,r,o,c){if(c&&void 0===r)return;const p=(0,U.gK)(u,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(p+" must be an object containing the children to replace.");const w=[];js(r,(A,$)=>{const X=new hi(A);if(kf(p,$,St(o,X)),".priority"===Ra(X)&&!xu($))throw new Error(p+"contains an invalid value for '"+X.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");w.push(X)}),function(u,r){let o,c;for(o=0;o<r.length;o++){c=r[o];const w=aa(c);for(let A=0;A<w.length;A++)if((".priority"!==w[A]||A!==w.length-1)&&!Nf(w[A]))throw new Error(u+"contains an invalid key ("+w[A]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(yf);let p=null;for(o=0;o<r.length;o++){if(c=r[o],null!==p&&ts(p,c))throw new Error(u+"contains a path "+p.toString()+" that is ancestor of another path "+c.toString());p=c}}(p,w)},zp=function(u,r,o){if(!o||void 0!==r){if(go(r))throw new Error((0,U.gK)(u,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xu(r))throw new Error((0,U.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gp=function(u,r,o,c){if(!(c&&void 0===o||Nf(o)))throw new Error((0,U.gK)(u,r)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ff=function(u,r,o,c){if(!(c&&void 0===o||uv(o)))throw new Error((0,U.gK)(u,r)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wm=function(u,r,o,c){o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Ff(u,r,o,c)},ia=function(u,r){if(".info"===ri(r))throw new Error(u+" failed = Can't modify data under /.info/")},Ad=function(u,r){const o=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!Nf(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==o.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),uv(u)}(o))throw new Error((0,U.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Kc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qc(u,r){let o=null;for(let c=0;c<r.length;c++){const p=r[c],w=p.getPath();null!==o&&!Xa(w,o.path)&&(u.eventLists_.push(o),o=null),null===o&&(o={events:[],path:w}),o.events.push(p)}o&&u.eventLists_.push(o)}function Im(u,r,o){qc(u,o),Wp(u,c=>Xa(c,r))}function wa(u,r,o){qc(u,o),Wp(u,c=>ts(c,r)||ts(r,c))}function Wp(u,r){u.recursionDepth_++;let o=!0;for(let c=0;c<u.eventLists_.length;c++){const p=u.eventLists_[c];p&&(r(p.path)?(Kp(u.eventLists_[c]),u.eventLists_[c]=null):o=!1)}o&&(u.eventLists_=[]),u.recursionDepth_--}function Kp(u){for(let r=0;r<u.events.length;r++){const o=u.events[r];if(null!==o){u.events[r]=null;const c=o.getEventRunner();rt&&an("event: "+o.toString()),Ss(c)}}}const tu="repo_interrupt",Lf=25;class Cm{constructor(r,o,c,p){this.repoInfo_=r,this.forceRestClient_=o,this.authTokenProvider_=c,this.appCheckProvider_=p,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cu(),this.transactionQueueTree_=new Mu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bh(u){const o=u.infoData_.getNode(new hi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Yc(u){return Eo({timestamp:bh(u)})}function Md(u,r,o,c,p){u.dataUpdateCount++;const w=new hi(r);o=u.interceptServerDataCallback_?u.interceptServerDataCallback_(r,o):o;let A=[];if(p)if(c){const X=(0,U.UI)(o,ue=>Ei(ue));A=function jc(u,r,o,c){const p=yh(u,c);if(p){const w=Mf(p),A=w.path,$=w.queryId,X=us(A,r),ue=hs.fromObject(o);return vh(u,A,new Oc(rl($),X,ue))}return[]}(u.serverSyncTree_,w,X,p)}else{const X=Ei(o);A=$p(u.serverSyncTree_,w,X,p)}else if(c){const X=(0,U.UI)(o,ue=>Ei(ue));A=function Sf(u,r,o){const c=hs.fromObject(o);return tc(u,new Oc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,c))}(u.serverSyncTree_,w,X)}else{const X=Ei(o);A=Cd(u.serverSyncTree_,w,X)}let $=w;A.length>0&&($=Th(u,w)),wa(u.eventQueue_,$,A)}function z_(u,r){Bf(u,"connected",r),!1===r&&function Qc(u){Xc(u,"onDisconnectEvents");const r=Yc(u),o=Cu();Yu(u.onDisconnect_,_i(),(p,w)=>{const A=Jl(p,w,u.serverSyncTree_,r);Oo(o,p,A)});let c=[];Yu(o,_i(),(p,w)=>{c=c.concat(Cd(u.serverSyncTree_,p,w));const A=ji(u,p);Th(u,A)}),u.onDisconnect_=Cu(),wa(u.eventQueue_,_i(),c)}(u)}function Bf(u,r,o){const c=new hi("/.info/"+r),p=Ei(o);u.infoData_.updateSnapshot(c,p);const w=Cd(u.infoSyncTree_,c,p);wa(u.eventQueue_,c,w)}function Dm(u){return u.nextWriteId_++}function Zc(u,r,o,c,p){Xc(u,"set",{path:r.toString(),value:o,priority:c});const w=Yc(u),A=Ei(o,c),$=ec(u.serverSyncTree_,r),X=Ih(A,$,w),ue=Dm(u),Ze=oo(u.serverSyncTree_,r,X,ue,!0);qc(u.eventQueue_,Ze),u.server_.put(r.toString(),A.val(!0),(yt,$t)=>{const Gt="ok"===yt;Gt||wr("set at "+r+" failed: "+yt);const ln=Xl(u.serverSyncTree_,ue,!Gt);wa(u.eventQueue_,r,ln),rc(0,p,yt,$t)});const st=ji(u,r);Th(u,st),wa(u.eventQueue_,st,[])}function cv(u,r,o){u.server_.onDisconnectCancel(r.toString(),(c,p)=>{"ok"===c&&zl(u.onDisconnect_,r),rc(0,o,c,p)})}function dv(u,r,o,c){const p=Ei(o);u.server_.onDisconnectPut(r.toString(),p.val(!0),(w,A)=>{"ok"===w&&Oo(u.onDisconnect_,r,p),rc(0,c,w,A)})}function xd(u,r,o){let c;c=".info"===ri(r._path)?gh(u.infoSyncTree_,r,o):gh(u.serverSyncTree_,r,o),Im(u.eventQueue_,r._path,c)}function Am(u){u.persistentConnection_&&u.persistentConnection_.interrupt(tu)}function Xc(u,...r){let o="";u.persistentConnection_&&(o=u.persistentConnection_.id+":"),an(o,...r)}function rc(u,r,o,c){r&&Ss(()=>{if("ok"===o)r(null);else{const p=(o||"error").toUpperCase();let w=p;c&&(w+=": "+c);const A=new Error(w);A.code=p,r(A)}})}function Zp(u,r,o){return ec(u.serverSyncTree_,r,o)||pr.EMPTY_NODE}function Sh(u,r=u.transactionQueueTree_){if(r||ic(u,r),ol(r)){const o=Xp(u,r);(0,U.hu)(o.length>0,"Sending zero length transaction queue"),o.every(p=>0===p.status)&&function Qp(u,r,o){const c=o.map(ue=>ue.currentWriteId),p=Zp(u,r,c);let w=p;const A=p.hash();for(let ue=0;ue<o.length;ue++){const Ze=o[ue];(0,U.hu)(0===Ze.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ze.status=1,Ze.retryCount++;const st=us(r,Ze.path);w=w.updateChild(st,Ze.currentOutputSnapshotRaw)}const $=w.val(!0),X=r;u.server_.put(X.toString(),$,ue=>{Xc(u,"transaction put response",{path:X.toString(),status:ue});let Ze=[];if("ok"===ue){const st=[];for(let yt=0;yt<o.length;yt++)o[yt].status=2,Ze=Ze.concat(Xl(u.serverSyncTree_,o[yt].currentWriteId)),o[yt].onComplete&&st.push(()=>o[yt].onComplete(null,!0,o[yt].currentOutputSnapshotResolved)),o[yt].unwatcher();ic(u,Td(u.transactionQueueTree_,r)),Sh(u,u.transactionQueueTree_),wa(u.eventQueue_,r,Ze);for(let yt=0;yt<st.length;yt++)Ss(st[yt])}else{if("datastale"===ue)for(let st=0;st<o.length;st++)o[st].status=3===o[st].status?4:0;else{wr("transaction at "+X.toString()+" failed: "+ue);for(let st=0;st<o.length;st++)o[st].status=4,o[st].abortReason=ue}Th(u,r)}},A)}(u,Ru(r),o)}else av(r)&&zc(r,o=>{Sh(u,o)})}function Th(u,r){const o=Pd(u,r),c=Ru(o);return function hv(u,r,o){if(0===r.length)return;const c=[];let p=[];const A=r.filter($=>0===$.status).map($=>$.currentWriteId);for(let $=0;$<r.length;$++){const X=r[$],ue=us(o,X.path);let st,Ze=!1;if((0,U.hu)(null!==ue,"rerunTransactionsUnderNode_: relativePath should not be null."),4===X.status)Ze=!0,st=X.abortReason,p=p.concat(Xl(u.serverSyncTree_,X.currentWriteId,!0));else if(0===X.status)if(X.retryCount>=Lf)Ze=!0,st="maxretry",p=p.concat(Xl(u.serverSyncTree_,X.currentWriteId,!0));else{const yt=Zp(u,X.path,A);X.currentInputSnapshot=yt;const $t=r[$].update(yt.val());if(void 0!==$t){kf("transaction failed: Data returned ",$t,X.path);let Gt=Ei($t);"object"==typeof $t&&null!=$t&&(0,U.r3)($t,".priority")||(Gt=Gt.updatePriority(yt.getPriority()));const xn=X.currentWriteId,Rr=Yc(u),Zr=Ih(Gt,yt,Rr);X.currentOutputSnapshotRaw=Gt,X.currentOutputSnapshotResolved=Zr,X.currentWriteId=Dm(u),A.splice(A.indexOf(xn),1),p=p.concat(oo(u.serverSyncTree_,X.path,Zr,X.currentWriteId,X.applyLocally)),p=p.concat(Xl(u.serverSyncTree_,xn,!0))}else Ze=!0,st="nodata",p=p.concat(Xl(u.serverSyncTree_,X.currentWriteId,!0))}wa(u.eventQueue_,o,p),p=[],Ze&&(r[$].status=2,setTimeout(r[$].unwatcher,Math.floor(0)),r[$].onComplete&&c.push("nodata"===st?()=>r[$].onComplete(null,!1,r[$].currentInputSnapshot):()=>r[$].onComplete(new Error(st),!1,null)))}ic(u,u.transactionQueueTree_);for(let $=0;$<c.length;$++)Ss(c[$]);Sh(u,u.transactionQueueTree_)}(u,Xp(u,o),c),c}function Pd(u,r){let o,c=u.transactionQueueTree_;for(o=ri(r);null!==o&&void 0===ol(c);)c=Td(c,o),o=ri(r=Wr(r));return c}function Xp(u,r){const o=[];return $f(u,r,o),o.sort((c,p)=>c.order-p.order),o}function $f(u,r,o){const c=ol(r);if(c)for(let p=0;p<c.length;p++)o.push(c[p]);zc(r,p=>{$f(u,p,o)})}function ic(u,r){const o=ol(r);if(o){let c=0;for(let p=0;p<o.length;p++)2!==o[p].status&&(o[c]=o[p],c++);o.length=c,Up(r,o.length>0?o:void 0)}zc(r,c=>{ic(u,c)})}function ji(u,r){const o=Ru(Pd(u,r)),c=Td(u.transactionQueueTree_,r);return function H_(u,r,o){let c=o?u:u.parent;for(;null!==c;){if(r(c))return!0;c=c.parent}}(c,p=>{lo(u,p)}),lo(u,c),Ch(c,p=>{lo(u,p)}),o}function lo(u,r){const o=ol(r);if(o){const c=[];let p=[],w=-1;for(let A=0;A<o.length;A++)3===o[A].status||(1===o[A].status?((0,U.hu)(w===A-1,"All SENT items should be at beginning of queue."),w=A,o[A].status=3,o[A].abortReason="set"):((0,U.hu)(0===o[A].status,"Unexpected transaction status in abort"),o[A].unwatcher(),p=p.concat(Xl(u.serverSyncTree_,o[A].currentWriteId,!0)),o[A].onComplete&&c.push(o[A].onComplete.bind(null,new Error("set"),!1,null))));-1===w?Up(r,void 0):o.length=w+1,wa(u.eventQueue_,Ru(r),p);for(let A=0;A<c.length;A++)Ss(c[A])}}const Od=function(u,r){const o=Rm(u),c=o.namespace;return"firebase.com"===o.domain&&Vr(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==o.domain&&Vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new V(o.host,o.secure,c,"ws"===o.scheme||"wss"===o.scheme,r,"",c!==o.subdomain),path:new hi(o.pathString)}},Rm=function(u){let r="",o="",c="",p="",w="",A=!0,$="https",X=443;if("string"==typeof u){let ue=u.indexOf("//");ue>=0&&($=u.substring(0,ue-1),u=u.substring(ue+2));let Ze=u.indexOf("/");-1===Ze&&(Ze=u.length);let st=u.indexOf("?");-1===st&&(st=u.length),r=u.substring(0,Math.min(Ze,st)),Ze<st&&(p=function Mm(u){let r="";const o=u.split("/");for(let c=0;c<o.length;c++)if(o[c].length>0){let p=o[c];try{p=decodeURIComponent(p.replace(/\+/g," "))}catch{}r+="/"+p}return r}(u.substring(Ze,st)));const yt=function Vf(u){const r={};"?"===u.charAt(0)&&(u=u.substring(1));for(const o of u.split("&")){if(0===o.length)continue;const c=o.split("=");2===c.length?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):wr(`Invalid query segment '${o}' in query '${u}'`)}return r}(u.substring(Math.min(u.length,st)));ue=r.indexOf(":"),ue>=0?(A="https"===$||"wss"===$,X=parseInt(r.substring(ue+1),10)):ue=r.length;const $t=r.slice(0,ue);if("localhost"===$t.toLowerCase())o="localhost";else if($t.split(".").length<=2)o=$t;else{const Gt=r.indexOf(".");c=r.substring(0,Gt).toLowerCase(),o=r.substring(Gt+1),w=c}"ns"in yt&&(w=yt.ns)}return{host:r,port:X,domain:o,subdomain:c,secure:A,scheme:$,pathString:p,namespace:w}},sc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nd=function(){let u=0;const r=[];return function(o){const c=o===u;let p;u=o;const w=new Array(8);for(p=7;p>=0;p--)w[p]=sc.charAt(o%64),o=Math.floor(o/64);(0,U.hu)(0===o,"Cannot push at time == 0");let A=w.join("");if(c){for(p=11;p>=0&&63===r[p];p--)r[p]=0;r[p]++}else for(p=0;p<12;p++)r[p]=Math.floor(64*Math.random());for(p=0;p<12;p++)A+=sc.charAt(r[p]);return(0,U.hu)(20===A.length,"nextPushId: Length should be 20."),A}}();class Jp{constructor(r,o,c,p){this.eventType=r,this.eventRegistration=o,this.snapshot=c,this.prevName=p}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class Pu{constructor(r,o,c){this.eventRegistration=r,this.error=o,this.path=c}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fv{constructor(r,o){this.snapshotCallback=r,this.cancelCallback=o}onValue(r,o){this.snapshotCallback.call(null,r,o)}onCancel(r){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class oc{constructor(r,o){this._repo=r,this._path=o}cancel(){const r=new U.BH;return cv(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){ia("OnDisconnect.remove",this._path);const r=new U.BH;return dv(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){ia("OnDisconnect.set",this._path),eu("OnDisconnect.set",r,this._path,!1);const o=new U.BH;return dv(this._repo,this._path,r,o.wrapCallback(()=>{})),o.promise}setWithPriority(r,o){ia("OnDisconnect.setWithPriority",this._path),eu("OnDisconnect.setWithPriority",r,this._path,!1),zp("OnDisconnect.setWithPriority",o,!1);const c=new U.BH;return function Sm(u,r,o,c,p){const w=Ei(o,c);u.server_.onDisconnectPut(r.toString(),w.val(!0),(A,$)=>{"ok"===A&&Oo(u.onDisconnect_,r,w),rc(0,p,A,$)})}(this._repo,this._path,r,o,c.wrapCallback(()=>{})),c.promise}update(r){ia("OnDisconnect.update",this._path),ja("OnDisconnect.update",r,this._path,!1);const o=new U.BH;return function Yp(u,r,o,c){if((0,U.xb)(o))return an("onDisconnect().update() called with empty data.  Don't do anything."),void rc(0,c,"ok",void 0);u.server_.onDisconnectMerge(r.toString(),o,(p,w)=>{"ok"===p&&js(o,(A,$)=>{const X=Ei($);Oo(u.onDisconnect_,St(r,A),X)}),rc(0,c,p,w)})}(this._repo,this._path,r,o.wrapCallback(()=>{})),o.promise}}class Ia{constructor(r,o,c,p){this._repo=r,this._path=o,this._queryParams=c,this._orderByCalled=p}get key(){return Hr(this._path)?null:Ra(this._path)}get ref(){return new zo(this._repo,this._path)}get _queryIdentifier(){const r=Ns(this._queryParams),o=ma(r);return"{}"===o?"default":o}get _queryObject(){return Ns(this._queryParams)}isEqual(r){if(!((r=(0,U.m9)(r))instanceof Ia))return!1;const o=this._repo===r._repo,c=Xa(this._path,r._path);return o&&c&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ms(u){let r="";for(let o=u.pieceNum_;o<u.pieces_.length;o++)""!==u.pieces_[o]&&(r+="/"+encodeURIComponent(String(u.pieces_[o])));return r||"/"}(this._path)}}function al(u,r){if(!0===u._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function Ou(u){let r=null,o=null;if(u.hasStart()&&(r=u.getIndexStartValue()),u.hasEnd()&&(o=u.getIndexEndValue()),u.getIndex()===qo){const c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",p="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Xi)throw new Error(c);if("string"!=typeof r)throw new Error(p)}if(u.hasEnd()){if(u.getIndexEndName()!==Us)throw new Error(c);if("string"!=typeof o)throw new Error(p)}}else if(u.getIndex()===cs){if(null!=r&&!xu(r)||null!=o&&!xu(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(u.getIndex()instanceof wu||u.getIndex()===Gs,"unknown index type."),null!=r&&"object"==typeof r||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Uf(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class zo extends Ia{constructor(r,o){super(r,o,new Na,!1)}get parent(){const r=Cc(this._path);return null===r?null:new zo(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class kd{constructor(r,o,c){this._node=r,this.ref=o,this._index=c}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const o=new hi(r),c=Nu(this.ref,r);return new kd(this._node.getChild(o),c,cs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(c,p)=>r(new kd(p,Nu(this.ref,c),cs)))}hasChild(r){const o=new hi(r);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jf(u,r){return(u=(0,U.m9)(u))._checkNotDeleted("ref"),void 0!==r?Nu(u._root,r):u._root}function Hf(u,r){(u=(0,U.m9)(u))._checkNotDeleted("refFromURL");const o=Od(r,u._repo.repoInfo_.nodeAdmin);Ad("refFromURL",o);const c=o.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&c.host!==u._repo.repoInfo_.host&&Vr("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+u._repo.repoInfo_.host+")"),jf(u,o.path.toString())}function Nu(u,r){return null===ri((u=(0,U.m9)(u))._path)?wm("child","path",r,!1):Ff("child","path",r,!1),new zo(u._repo,St(u._path,r))}function zf(u,r){u=(0,U.m9)(u),ia("set",u._path),eu("set",r,u._path,!1);const o=new U.BH;return Zc(u._repo,u._path,r,null,o.wrapCallback(()=>{})),o.promise}function Gf(u,r){ja("update",r,u._path,!1);const o=new U.BH;return function Rd(u,r,o,c){Xc(u,"update",{path:r.toString(),value:o});let p=!0;const w=Yc(u),A={};if(js(o,($,X)=>{p=!1,A[$]=Jl(St(r,$),Ei(X),u.serverSyncTree_,w)}),p)an("update() called with empty data.  Don't do anything."),rc(0,c,"ok",void 0);else{const $=Dm(u),X=function Pi(u,r,o,c){!function sl(u,r,o,c){(0,U.hu)(c>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:r,children:o,writeId:c,visible:!0}),u.visibleWrites=Su(u.visibleWrites,r,o),u.lastWriteId=c}(u.pendingWriteTree_,r,o,c);const p=hs.fromObject(o);return tc(u,new Oc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,p))}(u.serverSyncTree_,r,A,$);qc(u.eventQueue_,X),u.server_.merge(r.toString(),o,(ue,Ze)=>{const st="ok"===ue;st||wr("update at "+r+" failed: "+ue);const yt=Xl(u.serverSyncTree_,$,!st),$t=yt.length>0?Th(u,r):r;wa(u.eventQueue_,$t,yt),rc(0,c,ue,Ze)}),js(o,ue=>{const Ze=ji(u,St(r,ue));Th(u,Ze)}),wa(u.eventQueue_,r,[])}}(u._repo,u._path,r,o.wrapCallback(()=>{})),o.promise}function Pm(u){u=(0,U.m9)(u);const r=new fv(()=>{}),o=new nu(r);return function pE(u,r,o){const c=function Tf(u,r){const o=r._path;let c=null;u.syncPointTree_.foreachOnPath(o,(ue,Ze)=>{const st=us(ue,o);c=c||Ua(Ze,st)});let p=u.syncPointTree_.get(o);p?c=c||Ua(p,_i()):(p=new wd,u.syncPointTree_=u.syncPointTree_.set(o,p));const w=null!=c,A=w?new Gl(c,!0,!1):null;return function $c(u){return hd(u.viewCache_)}(rv(p,r,yd(u.pendingWriteTree_,r._path),w?A.getNode():pr.EMPTY_NODE,w))}(u.serverSyncTree_,r);return null!=c?Promise.resolve(c):u.server_.get(r).then(p=>{const w=Ei(p).withIndex(r._queryParams.getIndex());let A;if(mh(u.serverSyncTree_,r,o,!0),r._queryParams.loadsAllData())A=Cd(u.serverSyncTree_,r._path,w);else{const $=bd(u.serverSyncTree_,r);A=$p(u.serverSyncTree_,r._path,w,$)}return wa(u.eventQueue_,r._path,A),gh(u.serverSyncTree_,r,o,null,!0),w},p=>(Xc(u,"get for query "+(0,U.Wl)(r)+" failed: "+p),Promise.reject(new Error(p))))}(u._repo,u,o).then(c=>new kd(c,new zo(u._repo,u._path),u._queryParams.getIndex()))}class nu{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,o){const c=o._queryParams.getIndex();return new Jp("value",this,new kd(r.snapshotNode,new zo(o._repo,o._path),c))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,o){return this.callbackContext.hasCancelCallback?new Pu(this,r,o):null}matches(r){return r instanceof nu&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ng{constructor(r,o){this.eventType=r,this.callbackContext=o}respondsTo(r){let o="children_added"===r?"child_added":r;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(r,o){return this.callbackContext.hasCancelCallback?new Pu(this,r,o):null}createEvent(r,o){(0,U.hu)(null!=r.childName,"Child events should have a childName.");const c=Nu(new zo(o._repo,o._path),r.childName),p=o._queryParams.getIndex();return new Jp(r.type,this,new kd(r.snapshotNode,c,p),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof ng&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ah(u,r,o,c,p){let w;if("object"==typeof c&&(w=void 0,p=c),"function"==typeof c&&(w=c),p&&p.onlyOnce){const X=o,ue=(Ze,st)=>{xd(u._repo,u,$),X(Ze,st)};ue.userCallback=o.userCallback,ue.context=o.context,o=ue}const A=new fv(o,w||void 0),$="value"===r?new nu(A):new ng(r,A);return function Tm(u,r,o){let c;c=".info"===ri(r._path)?mh(u.infoSyncTree_,r,o):mh(u.serverSyncTree_,r,o),Im(u.eventQueue_,r._path,c)}(u._repo,u,$),()=>xd(u._repo,u,$)}function Om(u,r,o,c){return Ah(u,"value",r,o,c)}function rg(u,r,o,c){return Ah(u,"child_added",r,o,c)}function Wf(u,r,o,c){return Ah(u,"child_changed",r,o,c)}function Go(u,r,o,c){return Ah(u,"child_moved",r,o,c)}function Nm(u,r,o,c){return Ah(u,"child_removed",r,o,c)}function km(u,r,o){let c=null;const p=o?new fv(o):null;"value"===r?c=new nu(p):r&&(c=new ng(r,p)),xd(u._repo,u,c)}class ku{}class pv extends ku{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){eu("endAt",this._value,r._path,!0);const o=jl(r._queryParams,this._value,this._key);if(Uf(o),Ou(o),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ia(r._repo,r._path,o,r._orderByCalled)}}class G_ extends ku{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){eu("endBefore",this._value,r._path,!1);const o=function qu(u,r,o){let c;return c=jl(u,r,u.index_===qo||o?o:Xi),c.endBeforeSet_=!0,c}(r._queryParams,this._value,this._key);if(Uf(o),Ou(o),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ia(r._repo,r._path,o,r._orderByCalled)}}class Kf extends ku{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){eu("startAt",this._value,r._path,!0);const o=ka(r._queryParams,this._value,this._key);if(Uf(o),Ou(o),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ia(r._repo,r._path,o,r._orderByCalled)}}class W_ extends ku{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){eu("startAfter",this._value,r._path,!1);const o=function dd(u,r,o){let c;return c=ka(u,r,u.index_===qo||o?o:Us),c.startAfterSet_=!0,c}(r._queryParams,this._value,this._key);if(Uf(o),Ou(o),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ia(r._repo,r._path,o,r._orderByCalled)}}class Bm extends ku{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ia(r._repo,r._path,function Ef(u,r){const o=u.copy();return o.limitSet_=!0,o.limit_=r,o.viewFrom_="l",o}(r._queryParams,this._limit),r._orderByCalled)}}class Rh extends ku{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ia(r._repo,r._path,function Iu(u,r){const o=u.copy();return o.limitSet_=!0,o.limit_=r,o.viewFrom_="r",o}(r._queryParams,this._limit),r._orderByCalled)}}class xh extends ku{constructor(r){super(),this._path=r}_apply(r){al(r,"orderByChild");const o=new hi(this._path);if(Hr(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const c=new wu(o),p=Il(r._queryParams,c);return Ou(p),new Ia(r._repo,r._path,p,!0)}}class Ph extends ku{_apply(r){al(r,"orderByKey");const o=Il(r._queryParams,qo);return Ou(o),new Ia(r._repo,r._path,o,!0)}}class Nh extends ku{_apply(r){al(r,"orderByPriority");const o=Il(r._queryParams,cs);return Ou(o),new Ia(r._repo,r._path,o,!0)}}class sg extends ku{_apply(r){al(r,"orderByValue");const o=Il(r._queryParams,Gs);return Ou(o),new Ia(r._repo,r._path,o,!0)}}class mE extends ku{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){if(eu("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pv(this._value,this._key)._apply(new Kf(this._value,this._key)._apply(r))}}function ll(u,...r){let o=(0,U.m9)(u);for(const c of r)o=c._apply(o);return o}(function hh(u){(0,U.hu)(!ws,"__referenceConstructor has already been defined"),ws=u})(zo),function mm(u){(0,U.hu)(!ph,"__referenceConstructor has already been defined"),ph=u}(zo);const ed={};function lg(u,r,o,c,p){let w=c||u.options.databaseURL;void 0===w&&(u.options.projectId||Vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",u.options.projectId),w=`${u.options.projectId}-default-rtdb.firebaseio.com`);let X,ue,A=Od(w,p),$=A.repoInfo;typeof process<"u"&&process.env&&(ue=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ue?(X=!0,w=`http://${ue}?ns=${$.namespace}`,A=Od(w,p),$=A.repoInfo):X=!A.repoInfo.secure;const Ze=p&&X?new Ka(Ka.OWNER):new Uo(u.name,u.options,r);Ad("Invalid Firebase Database URL",A),Hr(A.path)||Vr("Database URL must point to the root of a Firebase Database (not including a child path).");const st=function mv(u,r,o,c){let p=ed[r.name];p||(p={},ed[r.name]=p);let w=p[u.toURLString()];return w&&Vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),w=new Cm(u,false,o,c),p[u.toURLString()]=w,w}($,u,Ze,new yl(u.name,o));return new $m(st,u)}class $m{constructor(r,o){this._repoInternal=r,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function bm(u,r,o){if(u.stats_=Yt(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Cl(u.repoInfo_,(c,p,w,A)=>{Md(u,c,p,w,A)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>z_(u,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(o)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}u.persistentConnection_=new Vn(u.repoInfo_,r,(c,p,w,A)=>{Md(u,c,p,w,A)},c=>{z_(u,c)},c=>{!function qp(u,r){js(r,(o,c)=>{Bf(u,o,c)})}(u,c)},u.authTokenProvider_,u.appCheckProvider_,o),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(c=>{u.server_.refreshAuthToken(c)}),u.appCheckProvider_.addTokenChangeListener(c=>{u.server_.refreshAppCheckToken(c.token)}),u.statsReporter_=function tr(u,r){const o=u.toString();return Bt[o]||(Bt[o]=r()),Bt[o]}(u.repoInfo_,()=>new fm(u.stats_,u.server_)),u.infoData_=new Hl,u.infoSyncTree_=new iv({startListening:(c,p,w,A)=>{let $=[];const X=u.infoData_.getNode(c._path);return X.isEmpty()||($=Cd(u.infoSyncTree_,c._path,X),setTimeout(()=>{A("ok")},0)),$},stopListening:()=>{}}),Bf(u,"connected",!1),u.serverSyncTree_=new iv({startListening:(c,p,w,A)=>(u.server_.listen(c,w,p,($,X)=>{const ue=A($,X);wa(u.eventQueue_,c._path,ue)}),[]),stopListening:(c,p)=>{u.server_.unlisten(c,p)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zo(this._repo,_i())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gv(u,r){const o=ed[r];(!o||o[u.key]!==u)&&Vr(`Database ${r}(${u.repoInfo_}) has already been deleted.`),Am(u),delete o[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&Vr("Cannot call "+r+" on a deleted database.")}}function ug(){$l.IS_TRANSPORT_INITIALIZED&&wr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Zf(){ug(),Ya.forceDisallow()}function yv(){ug(),_l.forceDisallow(),Ya.forceAllow()}function Xf(u,r){nn(u,r)}const cg={".sv":"timestamp"};class Jf{constructor(r,o){this.committed=r,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Vn.prototype.simpleListen=function(u,r){this.sendRequest("q",{p:u},r)},Vn.prototype.echo=function(u,r){this.sendRequest("echo",{d:u},r)},function Vm(u){$i(we.SDK_VERSION),(0,we._registerComponent)(new ge.wA("database",(r,{instanceIdentifier:o})=>lg(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)(kr,"0.14.4",u),(0,we.registerVersion)(kr,"0.14.4","esm2017")}();const ca=new je.Yd("@firebase/database-compat"),Cv=function(u){ca.warn("FIREBASE WARNING: "+u)};class Bh{constructor(r){this._delegate=r}cancel(r){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",r,!0);const o=this._delegate.cancel();return r&&o.then(()=>r(null),c=>r(c)),o}remove(r){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",r,!0);const o=this._delegate.remove();return r&&o.then(()=>r(null),c=>r(c)),o}set(r,o){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",o,!0);const c=this._delegate.set(r);return o&&c.then(()=>o(null),p=>o(p)),c}setWithPriority(r,o,c){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);const p=this._delegate.setWithPriority(r,o);return c&&p.then(()=>c(null),w=>c(w)),p}update(r,o){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const p={};for(let w=0;w<r.length;++w)p[""+w]=r[w];r=p,Cv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",o,!0);const c=this._delegate.update(r);return o&&c.then(()=>o(null),p=>o(p)),c}}class tp{constructor(r,o){this.committed=r,this.snapshot=o}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ul{constructor(r,o){this._database=r,this._delegate=o}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),Ff("DataSnapshot.child","path",r,!1),new ul(this._database,this._delegate.child(r))}hasChild(r){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ff("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(o=>r(new ul(this._database,o)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new bl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xo{constructor(r,o){this.database=r,this._delegate=o}on(r,o,c,p){var w;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",o,!1);const A=Xo.getCancelAndContextArgs_("Query.on",c,p),$=(ue,Ze)=>{o.call(A.context,new ul(this.database,ue),Ze)};$.userCallback=o,$.context=A.context;const X=null===(w=A.cancel)||void 0===w?void 0:w.bind(A.context);switch(r){case"value":return Om(this._delegate,$,X),o;case"child_added":return rg(this._delegate,$,X),o;case"child_removed":return Nm(this._delegate,$,X),o;case"child_changed":return Wf(this._delegate,$,X),o;case"child_moved":return Go(this._delegate,$,X),o;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,o,c){if((0,U.Dv)("Query.off",0,3,arguments.length),function(u,r,o){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,U.Wj)("Query.off","callback",o,!0),(0,U.lb)("Query.off","context",c,!0),o){const p=()=>{};p.userCallback=o,p.context=c,km(this._delegate,r,p)}else km(this._delegate,r)}get(){return Pm(this._delegate).then(r=>new ul(this.database,r))}once(r,o,c,p){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",o,!0);const w=Xo.getCancelAndContextArgs_("Query.once",c,p),A=new U.BH,$=(ue,Ze)=>{const st=new ul(this.database,ue);o&&o.call(w.context,st,Ze),A.resolve(st)};$.userCallback=o,$.context=w.context;const X=ue=>{w.cancel&&w.cancel.call(w.context,ue),A.reject(ue)};switch(r){case"value":Om(this._delegate,$,X,{onlyOnce:!0});break;case"child_added":rg(this._delegate,$,X,{onlyOnce:!0});break;case"child_removed":Nm(this._delegate,$,X,{onlyOnce:!0});break;case"child_changed":Wf(this._delegate,$,X,{onlyOnce:!0});break;case"child_moved":Go(this._delegate,$,X,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return A.promise}limitToFirst(r){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new Xo(this.database,ll(this._delegate,function Ld(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bm(u)}(r)))}limitToLast(r){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new Xo(this.database,ll(this._delegate,function Bd(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Rh(u)}(r)))}orderByChild(r){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new Xo(this.database,ll(this._delegate,function qf(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ff("orderByChild","path",u,!1),new xh(u)}(r)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new Xo(this.database,ll(this._delegate,function Oh(){return new Ph}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new Xo(this.database,ll(this._delegate,function ig(){return new Nh}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new Xo(this.database,ll(this._delegate,function kh(){return new sg}()))}startAt(r=null,o){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new Xo(this.database,ll(this._delegate,function gE(u=null,r){return Gp("startAt","key",r,!0),new Kf(u,r)}(r,o)))}startAfter(r=null,o){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new Xo(this.database,ll(this._delegate,function Mh(u,r){return Gp("startAfter","key",r,!0),new W_(u,r)}(r,o)))}endAt(r=null,o){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new Xo(this.database,ll(this._delegate,function Fm(u,r){return Gp("endAt","key",r,!0),new pv(u,r)}(r,o)))}endBefore(r=null,o){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new Xo(this.database,ll(this._delegate,function Lm(u,r){return Gp("endBefore","key",r,!0),new G_(u,r)}(r,o)))}equalTo(r,o){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new Xo(this.database,ll(this._delegate,function og(u,r){return Gp("equalTo","key",r,!0),new mE(u,r)}(r,o)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof Xo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,o,c){const p={cancel:void 0,context:void 0};if(o&&c)p.cancel=o,(0,U.Wj)(r,"cancel",p.cancel,!0),p.context=c,(0,U.lb)(r,"context",p.context,!0);else if(o)if("object"==typeof o&&null!==o)p.context=o;else{if("function"!=typeof o)throw new Error((0,U.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");p.cancel=o}return p}get ref(){return new bl(this.database,new zo(this._delegate._repo,this._delegate._path))}}class bl extends Xo{constructor(r,o){super(r,new Ia(o._repo,o._path,new Na,!1)),this.database=r,this._delegate=o}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new bl(this.database,Nu(this._delegate,r))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new bl(this.database,r):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new bl(this.database,this._delegate.root)}set(r,o){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",o,!0);const c=zf(this._delegate,r);return o&&c.then(()=>o(null),p=>o(p)),c}update(r,o){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const p={};for(let w=0;w<r.length;++w)p[""+w]=r[w];r=p,Cv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ia("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",o,!0);const c=Gf(this._delegate,r);return o&&c.then(()=>o(null),p=>o(p)),c}setWithPriority(r,o,c){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",c,!0);const p=function Fd(u,r,o){if(ia("setWithPriority",u._path),eu("setWithPriority",r,u._path,!1),zp("setWithPriority",o,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const c=new U.BH;return Zc(u._repo,u._path,r,o,c.wrapCallback(()=>{})),c.promise}(this._delegate,r,o);return c&&p.then(()=>c(null),w=>c(w)),p}remove(r){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",r,!0);const o=function Jc(u){return ia("remove",u._path),zf(u,null)}(this._delegate);return r&&o.then(()=>r(null),c=>r(c)),o}transaction(r,o,c){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,U.Wj)("Reference.transaction","onComplete",o,!0),function(u,r,o,c){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,c);const p=function wv(u,r,o){var c;if(u=(0,U.m9)(u),ia("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const p=null===(c=null==o?void 0:o.applyLocally)||void 0===c||c,w=new U.BH,$=Om(u,()=>{});return function Dh(u,r,o,c,p,w){Xc(u,"transaction on "+r);const A={path:r,update:o,onComplete:c,status:null,order:C(),applyLocally:w,retryCount:0,unwatcher:p,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},$=Zp(u,r,void 0);A.currentInputSnapshot=$;const X=A.update($.val());if(void 0===X)A.unwatcher(),A.currentOutputSnapshotRaw=null,A.currentOutputSnapshotResolved=null,A.onComplete&&A.onComplete(null,!1,A.currentInputSnapshot);else{kf("transaction failed: Data returned ",X,A.path),A.status=0;const ue=Td(u.transactionQueueTree_,r),Ze=ol(ue)||[];let st;Ze.push(A),Up(ue,Ze),"object"==typeof X&&null!==X&&(0,U.r3)(X,".priority")?(st=(0,U.DV)(X,".priority"),(0,U.hu)(xu(st),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):st=(ec(u.serverSyncTree_,r)||pr.EMPTY_NODE).getPriority().val();const yt=Yc(u),$t=Ei(X,st),Gt=Ih($t,$,yt);A.currentOutputSnapshotRaw=$t,A.currentOutputSnapshotResolved=Gt,A.currentWriteId=Dm(u);const ln=oo(u.serverSyncTree_,r,Gt,A.currentWriteId,A.applyLocally);wa(u.eventQueue_,r,ln),Sh(u,u.transactionQueueTree_)}}(u._repo,u._path,r,(X,ue,Ze)=>{let st=null;X?w.reject(X):(st=new kd(Ze,new zo(u._repo,u._path),cs),w.resolve(new Jf(ue,st)))},$,p),w.promise}(this._delegate,r,{applyLocally:c}).then(w=>new tp(w.committed,new ul(this.database,w.snapshot)));return o&&p.then(w=>o(null,w.committed,w.snapshot),w=>o(w,!1,null)),p}setPriority(r,o){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",o,!0);const c=function tg(u,r){u=(0,U.m9)(u),ia("setPriority",u._path),zp("setPriority",r,!1);const o=new U.BH;return Zc(u._repo,St(u._path,".priority"),r,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,r);return o&&c.then(()=>o(null),p=>o(p)),c}push(r,o){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",o,!0);const c=function eg(u,r){u=(0,U.m9)(u),ia("push",u._path),eu("push",r,u._path,!0);const o=bh(u._repo),c=Nd(o),p=Nu(u,c),w=Nu(u,c);let A;return A=null!=r?zf(w,r).then(()=>w):Promise.resolve(w),p.then=A.then.bind(A),p.catch=A.then.bind(A,void 0),p}(this._delegate,r),p=c.then(A=>new bl(this.database,A));o&&p.then(()=>o(null),A=>o(A));const w=new bl(this.database,c);return w.then=p.then.bind(p),w.catch=p.catch.bind(p,void 0),w}onDisconnect(){return ia("Reference.onDisconnect",this._delegate._path),new Bh(new oc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ud{constructor(r,o){this._delegate=r,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Zf,forceLongPolling:yv}}useEmulator(r,o,c={}){!function Fh(u,r,o,c={}){(u=(0,U.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Vr("Cannot call useEmulator() after instance has already been initialized.");const p=u._repoInternal;let w;if(p.repoInfo_.nodeAdmin)c.mockUserToken&&Vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),w=new Ka(Ka.OWNER);else if(c.mockUserToken){const A="string"==typeof c.mockUserToken?c.mockUserToken:(0,U.Sg)(c.mockUserToken,u.app.options.projectId);w=new Ka(A)}!function Yf(u,r,o,c){u.repoInfo_=new V(`${r}:${o}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),c&&(u.authTokenProvider_=c)}(p,r,o,w)}(this._delegate,r,o,c)}ref(r){if((0,U.Dv)("database.ref",0,1,arguments.length),r instanceof bl){const o=Hf(this._delegate,r.toString());return new bl(this,o)}{const o=jf(this._delegate,r);return new bl(this,o)}}refFromURL(r){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const c=Hf(this._delegate,r);return new bl(this,c)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function Vd(u){(u=(0,U.m9)(u))._checkNotDeleted("goOffline"),Am(u._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function Qf(u){(u=(0,U.m9)(u))._checkNotDeleted("goOnline"),function ao(u){u.persistentConnection_&&u.persistentConnection_.resume(tu)}(u._repo)}(this._delegate)}}Ud.ServerValue={TIMESTAMP:function _v(){return cg}(),increment:u=>function Ev(u){return{".sv":{increment:u}}}(u)};var nd=Object.freeze({__proto__:null,initStandalone:function $h({app:u,url:r,version:o,customAuthImpl:c,namespace:p,nodeAdmin:w=!1}){$i(o);const A=new ge.zt("auth-internal",new ge.H0("database-standalone"));return A.setComponent(new ge.wA("auth-internal",()=>c,"PRIVATE")),{instance:new Ud(lg(u,A,void 0,r,w),u),namespace:p}}});const Dv=Ud.ServerValue;!function dg(u){u.INTERNAL.registerComponent(new ge.wA("database-compat",(r,{instanceIdentifier:o})=>{const c=r.getProvider("app-compat").getImmediate(),p=r.getProvider("database").getImmediate({identifier:o});return new Ud(p,c)},"PUBLIC").setServiceProps({Reference:bl,Query:Xo,Database:Ud,DataSnapshot:ul,enableLogging:Xf,INTERNAL:nd,ServerValue:Dv}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Ln.Z);var Dl=L(9260);function fg(u){return null==u}function np(u){return"function"==typeof u.set}function Vh(u,r){return np(r)?r:u.ref(r)}function pg(u,r){if(function hg(u){return"string"==typeof u}(u))return r.stringCase();if(np(u))return r.firebaseCase();if(function jd(u){return"function"==typeof u.exportVal}(u))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Uh(u,r,o="on",c=to.z){return new lr.y(p=>{let w=null;return w=u[o](r,(A,$)=>{c.schedule(()=>{p.next({snapshot:A,prevKey:$})}),"once"===o&&c.schedule(()=>p.complete())},A=>{c.schedule(()=>p.error(A))}),"on"===o?{unsubscribe(){null!=w&&u.off(r,w)}}:{unsubscribe(){}}}).pipe((0,On.U)(p=>{const{snapshot:w,prevKey:A}=p;let $=null;return w.exists()&&($=w.key),{type:r,payload:w,prevKey:A,key:$}}),(0,Bo.B)())}function rp(u,r){const o=u.length;for(let c=0;c<o;c++)if(u[c].payload.key===r)return c;return-1}function Fu(u,r){const{payload:o,prevKey:c,key:p}=r,w=rp(u,p),A=function cl(u,r){if(fg(r))return 0;{const o=rp(u,r);return-1===o?u.length:o+1}}(u,c);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let $=null;r.payload.forEach(X=>{const ue={payload:X,type:"value",prevKey:$,key:X.key};return $=X.key,u=[...u,ue],!1})}return u;case"child_added":if(w>-1){const $=u[w-1];($&&$.key||null)!==c&&(u=u.filter(X=>X.payload.key!==o.key)).splice(A,0,r)}else{if(null==c)return[r,...u];(u=u.slice()).splice(A,0,r)}return u;case"child_removed":return u.filter($=>$.payload.key!==o.key);case"child_changed":return u.map($=>$.payload.key===p?r:$);case"child_moved":if(w>-1){const $=u.splice(w,1)[0];return(u=u.slice()).splice(A,0,$),u}return u;default:return u}}function q_(u){return(fg(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function gg(u,r,o){return function Um(u,r,o){return Uh(u,"value","once",o).pipe((0,bs.w)(c=>{const p=[(0,So.of)(c)];return r.forEach(w=>p.push(Uh(u,w,"on",o))),(0,Cs.T)(...p).pipe((0,Bi.R)(Fu,[]))}),(0,To.x)())}(u,r=q_(r),o)}function Y_(u,r,o){const c=(r=q_(r)).map(p=>Uh(u,p,"on",o));return(0,Cs.T)(...c)}function jh(u,r){return function(c,p){return pg(c,{stringCase:()=>u.child(c)[r](p),firebaseCase:()=>c[r](p),snapshotCase:()=>c.ref[r](p)})}}function Hd(u){return function(o){return o?pg(o,{stringCase:()=>u.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):u.remove()}}function rd(u,r){return function(){return Uh(u,"value","on",r)}}const oi=new m.OlP("angularfire2.realtimeDatabaseURL"),Mv=new m.OlP("angularfire2.database.use-emulator");let Hm=(()=>{class u{constructor(o,c,p,w,A,$,X,ue,Ze,st,yt,$t,Gt,ln,xn){this.schedulers=$;const Rr=X,Zr=(0,Qi.on)(o,A,c);ue&&(0,Wi.nw)(Zr,A,Ze,yt,$t,Gt,st,ln),this.database=(0,Qi.cc)(`${Zr.name}.database.${p}`,"AngularFireDatabase",Zr.name,()=>{const Di=A.runOutsideAngular(()=>Zr.database(p||void 0));return Rr&&Di.useEmulator(...Rr),Di},[Rr])}list(o,c){const p=this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,o));let w=p;return c&&(w=c(p)),function jm(u,r){const o=r.schedulers.outsideAngular,c=r.schedulers.ngZone.run(()=>u.ref);return{query:u,update:jh(c,"update"),set:jh(c,"set"),push:p=>c.push(p),remove:Hd(c),snapshotChanges:p=>gg(u,p,o).pipe(De.iC),stateChanges:p=>Y_(u,p,o).pipe(De.iC),auditTrail:p=>function Sv(u,r,o){return function Av(u,r,o){return function Tv(u,r){return Uh(u,"value","on",r).pipe((0,On.U)(o=>{let c;return o.payload.forEach(p=>(c=p.key,!1)),{data:o,lastKeyToLoad:c}}))}(u,o).pipe(function Q(...u){const r=(0,T.jO)(u);return(0,Es.e)((o,c)=>{const p=u.length,w=new Array(p);let A=u.map(()=>!1),$=!1;for(let X=0;X<p;X++)(0,Ao.Xf)(u[X]).subscribe((0,no.x)(c,ue=>{w[X]=ue,!$&&!A[X]&&(A[X]=!0,($=A.every(S.y))&&(A=null))},J.Z));o.subscribe((0,no.x)(c,X=>{if($){const ue=[X,...w];c.next(r?r(...ue):ue)}}))})}(r),(0,On.U)(([p,w])=>{const A=p.lastKeyToLoad,$=w.map(X=>X.key);return{actions:w,lastKeyToLoad:A,loadedKeys:$}}),function Me(u){return(0,Es.e)((r,o)=>{let c=!1,p=0;r.subscribe((0,no.x)(o,w=>(c||(c=!u(w,p++)))&&o.next(w)))})}(p=>-1===p.loadedKeys.indexOf(p.lastKeyToLoad)),(0,On.U)(p=>p.actions))}(u,Y_(u,r).pipe((0,Bi.R)((p,w)=>[...p,w],[])),o)}(u,p,o).pipe(De.iC),valueChanges:(p,w)=>gg(u,p,o).pipe((0,On.U)($=>$.map(X=>w&&w.idField?Object.assign(Object.assign({},X.payload.val()),{[w.idField]:X.key}):X.payload.val())),De.iC)}}(w,this)}object(o){return function mg(u,r){return{query:u,snapshotChanges:()=>rd(u,r.schedulers.outsideAngular)().pipe(De.iC),update:o=>u.ref.update(o),set:o=>u.ref.set(o),remove:()=>u.ref.remove(),valueChanges:()=>rd(u,r.schedulers.outsideAngular)().pipe(De.iC,(0,On.U)(c=>c.payload.exists()?c.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(Qi.Dh),m.LFG(Qi.xv,8),m.LFG(oi,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(De.HU),m.LFG(Mv,8),m.LFG(Wi.zQ,8),m.LFG(Wi.Qv,8),m.LFG(Wi.L6,8),m.LFG(Wi._Q,8),m.LFG(Wi.rT,8),m.LFG(Wi.lh,8),m.LFG(Wi.f7,8),m.LFG(_e.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Z_=(()=>{class u{constructor(){Dl.Z.registerVersion("angularfire",De.q4.full,"rtdb-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[Hm]}),u})();var Q_=L(515),yg=L(5363),X_=L(3151),zm=L(5132),Gm=L(9300),Wm=L(7579);var Km=L(5577),xv=L(8675),qm=L(1520);const Jm="firebase_screen_id",ey="outlet",Gd="screen_class",Cg="screen_name";let n0=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const op={},kv=u=>{const r=[u[Gd],u[ey]].join("#");if(op.hasOwnProperty(r))return op[r];{const o=n0++;return op[r]=o,o}},o0=new m.OlP("angularfire2.analytics.analyticsCollectionEnabled"),ry=new m.OlP("angularfire2.analytics.appVersion"),a0=new m.OlP("angularfire2.analytics.appName"),iy=new m.OlP("angularfire2.analytics.debugMode"),Lu=new m.OlP("angularfire2.analytics.config"),Wd="dataLayer";let ac=(()=>{class u{constructor(o,c,p,w,A,$,X,ue,Ze){if(this.analyticsInitialized=new Promise(()=>{}),(0,Ti.NF)(X)){window[Wd]=window[Wd]||[];const yt=(...ln)=>"config"===ln[0]&&"firebase"===ln[2].origin&&(this.measurementId=ln[1],!0),$t=ln=>{window.gtag=(...xn)=>{ln&&ln(...xn),"event"===xn[0]&&xn[2].send_to===this.measurementId&&(w&&(xn[2].app_name=w),p&&(xn[2].app_version=p)),A&&typeof console<"u"&&console.info(...xn),function(...Rr){window[Wd].push(arguments)}(...xn)}};window[Wd].some(yt)?(this.analyticsInitialized=Promise.resolve(),$t()):this.analyticsInitialized=new Promise(ln=>{$t((...xn)=>{yt(...xn)&&ln()})}),$&&this.updateConfig($),A&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const st=(0,So.of)(void 0).pipe((0,yg.Q)(Ze.outsideAngular),(0,bs.w)(zm.Gb),(0,bs.w)(yt=>yt?ue.runOutsideAngular(()=>L.e(3814).then(L.bind(L,3814))):Q_.E),(0,On.U)(()=>(0,Qi.cc)("analytics","AngularFireAnalytics",o.name,()=>{const yt=o.analytics();return!1===c&&yt.setAnalyticsCollectionEnabled(!1),yt},[o,c,$,A])),(0,X_.d)({bufferSize:1,refCount:!1}));return(0,Qi.pX)(this,st,ue)}updateConfig(o){return(0,Zi.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},o),{update:!0}))})}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(Qi.Ot),m.LFG(o0,8),m.LFG(ry,8),m.LFG(a0,8),m.LFG(iy,8),m.LFG(Lu,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(De.HU))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),lc=(()=>{class u{constructor(o,c,p,w){if(this.disposables=[],Dl.Z.registerVersion("angularfire",De.q4.full,"compat-user-tracking"),(0,Ti.PM)(c))this.initialized=Promise.resolve();else{let A;this.initialized=w.runOutsideAngular(()=>new Promise($=>A=$)),this.disposables=[p.authState.subscribe($=>{o.setUserId(null==$?void 0:$.uid),A()}),p.credential.subscribe($=>{if($){const X=$.user.isAnonymous?"anonymous":$.additionalUserInfo.providerId;$.additionalUserInfo.isNewUser&&o.logEvent("sign_up",{method:X}),o.logEvent("login",{method:X})}})]}}ngOnDestroy(){this.disposables.forEach(o=>o.unsubscribe())}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(ac),m.LFG(m.Lbi),m.LFG(Wi.zQ),m.LFG(m.R0b))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),Vv=(()=>{class u{constructor(o,c,p,w,A,$){if(Dl.Z.registerVersion("angularfire",De.q4.full,"compat-screen-tracking"),!c||!o)return this;A.runOutsideAngular(()=>{this.disposable=((u,r,o)=>u.events.pipe((0,Gm.h)(p=>p instanceof le.jw)).pipe((0,bs.w)(p=>{var w;const $=(null===(w=u.parseUrl(u.url.replace(/(?:\().+(?:\))/g,$t=>$t.replace("://",":///"))).root.children[p.snapshot.outlet])||void 0===w?void 0:w.toString())||"",X=u.routerState.root.children.map($t=>$t).find($t=>$t.outlet===p.snapshot.outlet);if(!X)return(0,So.of)(null);let ue=X;for(;ue.firstChild;)ue=ue.firstChild;const Ze=ue.pathFromRoot.map($t=>{var Gt;return null===(Gt=$t.routeConfig)||void 0===Gt?void 0:Gt.path}).filter($t=>$t).join("/")||"/",st={[Cg]:Ze,page_path:`/${$}`,firebase_event_origin:"auto",firebase_screen:Ze,[ey]:p.snapshot.outlet};r&&(st.page_title=r.getTitle());let yt=X.component;if(yt){if(yt===le.fw){let $t=p.snapshot;for(;$t.firstChild;)$t=$t.firstChild;yt=$t.component}}else yt=p.snapshot.component;if("string"==typeof yt)return(0,So.of)(Object.assign(Object.assign({},st),{[Gd]:yt}));if(yt){const $t=o.resolveComponentFactory(yt);return(0,So.of)(Object.assign(Object.assign({},st),{[Gd]:$t.selector}))}return(0,So.of)(null)}),(0,Gm.h)(p=>!!p),(0,On.U)(p=>Object.assign({firebase_screen_class:p[Gd],[Jm]:kv(p)},p)),function Rv(u,r,o,c){return(0,Es.e)((p,w)=>{let A;r&&"function"!=typeof r?({duration:o,element:A,connector:c}=r):A=r;const $=new Map,X=Gt=>{$.forEach(Gt),Gt(w)},ue=Gt=>X(ln=>ln.error(Gt));let Ze=0,st=!1;const yt=new no.Q(w,Gt=>{try{const ln=u(Gt);let xn=$.get(ln);if(!xn){$.set(ln,xn=c?c():new Wm.x);const Rr=function $t(Gt,ln){const xn=new lr.y(Rr=>{Ze++;const Zr=ln.subscribe(Rr);return()=>{Zr.unsubscribe(),0==--Ze&&st&&yt.unsubscribe()}});return xn.key=Gt,xn}(ln,xn);if(w.next(Rr),o){const Zr=(0,no.x)(xn,()=>{xn.complete(),null==Zr||Zr.unsubscribe()},void 0,void 0,()=>$.delete(ln));yt.add((0,Ao.Xf)(o(Rr)).subscribe(Zr))}}xn.next(A?A(Gt):Gt)}catch(ln){ue(ln)}},()=>X(Gt=>Gt.complete()),ue,()=>$.clear(),()=>(st=!0,0===Ze));p.subscribe(yt)})}(p=>p[ey]),(0,Km.z)(p=>p.pipe((0,To.x)((w,A)=>JSON.stringify(w)===JSON.stringify(A)),(0,xv.O)(void 0),(0,qm.G)(),(0,On.U)(([w,A])=>w?Object.assign({firebase_previous_class:w[Gd],firebase_previous_screen:w[Cg],firebase_previous_id:w[Jm]},A):A)))))(c,p,w).pipe((0,bs.w)(X=>(0,Zi.mG)(this,void 0,void 0,function*(){return $&&(yield $.initialized),yield o.logEvent("screen_view",X)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(ac),m.LFG(le.F0,8),m.LFG(y.Dx,8),m.LFG(m._Vd),m.LFG(m.R0b),m.LFG(lc,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),Ag=(()=>{class u{constructor(o,c,p){Dl.Z.registerVersion("angularfire",De.q4.full,"analytics-compat"),o.app.then(()=>{})}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(ac),m.LFG(Vv,8),m.LFG(lc,8))},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[ac]}),u})();var Mg=L(1085),Wh=L(8996);const Uv="firebasestorage.googleapis.com",Rg="storageBucket";class ks extends U.ZR{constructor(r,o,c=0){super(Kh(r),`Firebase Storage: ${o} (${Kh(r)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ks.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return Kh(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Br=(()=>((Br=Br||{}).UNKNOWN="unknown",Br.OBJECT_NOT_FOUND="object-not-found",Br.BUCKET_NOT_FOUND="bucket-not-found",Br.PROJECT_NOT_FOUND="project-not-found",Br.QUOTA_EXCEEDED="quota-exceeded",Br.UNAUTHENTICATED="unauthenticated",Br.UNAUTHORIZED="unauthorized",Br.UNAUTHORIZED_APP="unauthorized-app",Br.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Br.INVALID_CHECKSUM="invalid-checksum",Br.CANCELED="canceled",Br.INVALID_EVENT_NAME="invalid-event-name",Br.INVALID_URL="invalid-url",Br.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Br.NO_DEFAULT_BUCKET="no-default-bucket",Br.CANNOT_SLICE_BLOB="cannot-slice-blob",Br.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Br.NO_DOWNLOAD_URL="no-download-url",Br.INVALID_ARGUMENT="invalid-argument",Br.INVALID_ARGUMENT_COUNT="invalid-argument-count",Br.APP_DELETED="app-deleted",Br.INVALID_ROOT_OPERATION="invalid-root-operation",Br.INVALID_FORMAT="invalid-format",Br.INTERNAL_ERROR="internal-error",Br.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Br))();function Kh(u){return"storage/"+u}function xg(){return new ks(Br.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Kd(){return new ks(Br.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Og(){return new ks(Br.CANCELED,"User canceled the upload/download.")}function Ng(){return new ks(Br.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Bu(u){return new ks(Br.INVALID_ARGUMENT,u)}function jv(){return new ks(Br.APP_DELETED,"The Firebase app was deleted.")}function Hv(u){return new ks(Br.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uc(u,r){return new ks(Br.INVALID_FORMAT,"String does not match format '"+u+"': "+r)}function hp(u){throw new ks(Br.INTERNAL_ERROR,"Internal error: "+u)}class Jo{constructor(r,o){this.bucket=r,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,o){let c;try{c=Jo.makeFromUrl(r,o)}catch{return new Jo(r,"")}if(""===c.path)return c;throw function dp(u){return new ks(Br.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(r)}static makeFromUrl(r,o){let c=null;const p="([A-Za-z0-9.\\-_]+)",$=new RegExp("^gs://"+p+"(/(.*))?$","i");function ue(Mi){Mi.path_=decodeURIComponent(Mi.path)}const st=o.replace(/[.]/g,"\\."),Di=[{regex:$,indices:{bucket:1,path:3},postModify:function w(Mi){"/"===Mi.path.charAt(Mi.path.length-1)&&(Mi.path_=Mi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${st}/v[A-Za-z0-9_]+/b/${p}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ue},{regex:new RegExp(`^https?://${o===Uv?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${p}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ue}];for(let Mi=0;Mi<Di.length;Mi++){const Ol=Di[Mi],fa=Ol.regex.exec(r);if(fa){let pa=fa[Ol.indices.path];pa||(pa=""),c=new Jo(fa[Ol.indices.bucket],pa),Ol.postModify(c);break}}if(null==c)throw function u0(u){return new ks(Br.INVALID_URL,"Invalid URL '"+u+"'.")}(r);return c}}class dy{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}function qd(u){return"string"==typeof u||u instanceof String}function fp(u){return Qh()&&u instanceof Blob}function Qh(){return typeof Blob<"u"&&!(0,U.UG)()}function Xh(u,r,o,c){if(c<r)throw Bu(`Invalid value for '${u}'. Expected ${r} or greater.`);if(c>o)throw Bu(`Invalid value for '${u}'. Expected ${o} or less.`)}function Tl(u,r,o){let c=r;return null==o&&(c=`https://${r}`),`${o}://${c}/v0${u}`}function kg(u){const r=encodeURIComponent;let o="?";for(const c in u)u.hasOwnProperty(c)&&(o=o+(r(c)+"=")+r(u[c])+"&");return o=o.slice(0,-1),o}var Ca=(()=>((Ca=Ca||{})[Ca.NO_ERROR=0]="NO_ERROR",Ca[Ca.NETWORK_ERROR=1]="NETWORK_ERROR",Ca[Ca.ABORT=2]="ABORT",Ca))();function Yd(u,r){const o=u>=500&&u<600,p=-1!==[408,429].indexOf(u),w=-1!==r.indexOf(u);return o||p||w}class my{constructor(r,o,c,p,w,A,$,X,ue,Ze,st,yt=!0){this.url_=r,this.method_=o,this.headers_=c,this.body_=p,this.successCodes_=w,this.additionalRetryCodes_=A,this.callback_=$,this.errorCallback_=X,this.timeout_=ue,this.progressCallback_=Ze,this.connectionFactory_=st,this.retry=yt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($t,Gt)=>{this.resolve_=$t,this.reject_=Gt,this.start_()})}start_(){const o=(c,p)=>{const w=this.resolve_,A=this.reject_,$=p.connection;if(p.wasSuccessCode)try{const X=this.callback_($,$.getResponse());!function zv(u){return void 0!==u}(X)?w():w(X)}catch(X){A(X)}else if(null!==$){const X=xg();X.serverResponse=$.getErrorText(),A(this.errorCallback_?this.errorCallback_($,X):X)}else A(p.canceled?this.appDelete_?jv():Og():Kd())};this.canceled_?o(0,new Fg(!1,null,!0)):this.backoffId_=function hy(u,r,o){let c=1,p=null,w=null,A=!1,$=0;function X(){return 2===$}let ue=!1;function Ze(...xn){ue||(ue=!0,r.apply(null,xn))}function st(xn){p=setTimeout(()=>{p=null,u($t,X())},xn)}function yt(){w&&clearTimeout(w)}function $t(xn,...Rr){if(ue)return void yt();if(xn)return yt(),void Ze.call(null,xn,...Rr);if(X()||A)return yt(),void Ze.call(null,xn,...Rr);let Di;c<64&&(c*=2),1===$?($=2,Di=0):Di=1e3*(c+Math.random()),st(Di)}let Gt=!1;function ln(xn){Gt||(Gt=!0,yt(),!ue&&(null!==p?(xn||($=2),clearTimeout(p),st(0)):xn||($=1)))}return st(0),w=setTimeout(()=>{A=!0,ln(!0)},o),ln}((c,p)=>{if(p)return void c(!1,new Fg(!1,null,!0));const w=this.connectionFactory_();this.pendingConnection_=w;const A=$=>{null!==this.progressCallback_&&this.progressCallback_($.loaded,$.lengthComputable?$.total:-1)};null!==this.progressCallback_&&w.addUploadProgressListener(A),w.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&w.removeUploadProgressListener(A),this.pendingConnection_=null;const $=w.getErrorCode()===Ca.NO_ERROR,X=w.getStatus();if(!$||Yd(X,this.additionalRetryCodes_)&&this.retry){const Ze=w.getErrorCode()===Ca.ABORT;return void c(!1,new Fg(!1,null,Ze))}const ue=-1!==this.successCodes_.indexOf(X);c(!0,new Fg(ue,w))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,null!==this.backoffId_&&function fy(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fg{constructor(r,o,c){this.wasSuccessCode=r,this.connection=o,this.canceled=!!c}}function Kv(...u){const r=function EE(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==r){const o=new r;for(let c=0;c<u.length;c++)o.append(u[c]);return o.getBlob()}if(Qh())return new Blob(u);throw new ks(Br.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ha={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bg{constructor(r,o){this.data=r,this.contentType=o||null}}function Zd(u,r){switch(u){case Ha.RAW:return new Bg(vy(r));case Ha.BASE64:case Ha.BASE64URL:return new Bg(Qd(u,r));case Ha.DATA_URL:return new Bg(function di(u){const r=new No(u);return r.base64?Qd(Ha.BASE64,r.rest):function iu(u){let r;try{r=decodeURIComponent(u)}catch{throw uc(Ha.DATA_URL,"Malformed data URL.")}return vy(r)}(r.rest)}(r),function pp(u){return new No(u).contentType}(r))}throw xg()}function vy(u){const r=[];for(let o=0;o<u.length;o++){let c=u.charCodeAt(o);c<=127?r.push(c):c<=2047?r.push(192|c>>6,128|63&c):55296==(64512&c)?o<u.length-1&&56320==(64512&u.charCodeAt(o+1))?(c=65536|(1023&c)<<10|1023&u.charCodeAt(++o),r.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|63&c)):r.push(239,191,189):56320==(64512&c)?r.push(239,191,189):r.push(224|c>>12,128|c>>6&63,128|63&c)}return new Uint8Array(r)}function Qd(u,r){switch(u){case Ha.BASE64:{const p=-1!==r.indexOf("-"),w=-1!==r.indexOf("_");if(p||w)throw uc(u,"Invalid character '"+(p?"-":"_")+"' found: is it base64url encoded?");break}case Ha.BASE64URL:{const p=-1!==r.indexOf("+"),w=-1!==r.indexOf("/");if(p||w)throw uc(u,"Invalid character '"+(p?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function Lg(u){if(typeof atob>"u")throw function cy(u){return new ks(Br.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(r)}catch(p){throw p.message.includes("polyfill")?p:uc(u,"Invalid character found")}const c=new Uint8Array(o.length);for(let p=0;p<o.length;p++)c[p]=o.charCodeAt(p);return c}class No{constructor(r){this.base64=!1,this.contentType=null;const o=r.match(/^data:([^,]+)?,/);if(null===o)throw uc(Ha.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=o[1]||null;null!=c&&(this.base64=function fl(u,r){return u.length>=r.length&&u.substring(u.length-r.length)===r}(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=r.substring(r.indexOf(",")+1)}}class da{constructor(r,o){let c=0,p="";fp(r)?(this.data_=r,c=r.size,p=r.type):r instanceof ArrayBuffer?(o?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),c=this.data_.length):r instanceof Uint8Array&&(o?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),c=r.length),this.size_=c,this.type_=p}size(){return this.size_}type(){return this.type_}slice(r,o){if(fp(this.data_)){const p=function wE(u,r,o){return u.webkitSlice?u.webkitSlice(r,o):u.mozSlice?u.mozSlice(r,o):u.slice?u.slice(r,o):null}(this.data_,r,o);return null===p?null:new da(p)}{const c=new Uint8Array(this.data_.buffer,r,o-r);return new da(c,!0)}}static getBlob(...r){if(Qh()){const o=r.map(c=>c instanceof da?c.data_:c);return new da(Kv.apply(null,o))}{const o=r.map(A=>qd(A)?Zd(Ha.RAW,A).data:A.data_);let c=0;o.forEach(A=>{c+=A.byteLength});const p=new Uint8Array(c);let w=0;return o.forEach(A=>{for(let $=0;$<A.length;$++)p[w++]=A[$]}),new da(p,!0)}}uploadData(){return this.data_}}function cc(u){let r;try{r=JSON.parse(u)}catch{return null}return function gy(u){return"object"==typeof u&&!Array.isArray(u)}(r)?r:null}function ha(u){const r=u.lastIndexOf("/",u.length-2);return-1===r?u:u.slice(r+1)}function Jh(u,r){return r}class ko{constructor(r,o,c,p){this.server=r,this.local=o||r,this.writable=!!c,this.xform=p||Jh}}let $u=null;function Al(){if($u)return $u;const u=[];u.push(new ko("bucket")),u.push(new ko("generation")),u.push(new ko("metageneration")),u.push(new ko("name","fullPath",!0));const o=new ko("name");o.xform=function r(w,A){return function ef(u){return!qd(u)||u.length<2?u:ha(u)}(A)},u.push(o);const p=new ko("size");return p.xform=function c(w,A){return void 0!==A?Number(A):A},u.push(p),u.push(new ko("timeCreated")),u.push(new ko("updated")),u.push(new ko("md5Hash",null,!0)),u.push(new ko("cacheControl",null,!0)),u.push(new ko("contentDisposition",null,!0)),u.push(new ko("contentEncoding",null,!0)),u.push(new ko("contentLanguage",null,!0)),u.push(new ko("contentType",null,!0)),u.push(new ko("metadata","customMetadata",!0)),$u=u,$u}function _y(u,r,o){const c=cc(r);return null===c?null:function $g(u,r,o){const c={type:"file"},p=o.length;for(let w=0;w<p;w++){const A=o[w];c[A.local]=A.xform(c,r[A.server])}return function qv(u,r){Object.defineProperty(u,"ref",{get:function o(){const w=new Jo(u.bucket,u.fullPath);return r._makeStorageReference(w)}})}(c,u),c}(u,c,o)}function ys(u,r){const o={},c=r.length;for(let p=0;p<c;p++){const w=r[p];w.writable&&(o[w.server]=u[w.local])}return JSON.stringify(o)}const Zv="prefixes",Ey="items";class Ml{constructor(r,o,c,p){this.url=r,this.method=o,this.handler=c,this.timeout=p,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vu(u){if(!u)throw xg()}function Vg(u,r){return function o(c,p){const w=_y(u,p,r);return Vu(null!==w),w}}function tf(u){return function r(o,c){let p;return p=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function _E(){return new ks(Br.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function qh(){return new ks(Br.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function cp(u){return new ks(Br.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===o.getStatus()?function ly(u){return new ks(Br.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):c,p.status=o.getStatus(),p.serverResponse=c.serverResponse,p}}function Ug(u){const r=tf(u);return function o(c,p){let w=r(c,p);return 404===c.getStatus()&&(w=function Pg(u){return new ks(Br.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),w.serverResponse=p.serverResponse,w}}function f0(u,r,o){const p=Tl(r.fullServerUrl(),u.host,u._protocol),A=u.maxOperationRetryTime,$=new Ml(p,"GET",Vg(u,o),A);return $.errorHandler=Ug(r),$}function CE(u,r,o,c,p){const w={};w.prefix=r.isRoot?"":r.path+"/",o&&o.length>0&&(w.delimiter=o),c&&(w.pageToken=c),p&&(w.maxResults=p);const $=Tl(r.bucketOnlyServerUrl(),u.host,u._protocol),ue=u.maxOperationRetryTime,Ze=new Ml($,"GET",function IE(u,r){return function o(c,p){const w=function wy(u,r,o){const c=cc(o);return null===c?null:function co(u,r,o){const c={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[Zv])for(const p of o[Zv]){const w=p.replace(/\/$/,""),A=u._makeStorageReference(new Jo(r,w));c.prefixes.push(A)}if(o[Ey])for(const p of o[Ey]){const w=u._makeStorageReference(new Jo(r,p.name));c.items.push(w)}return c}(u,r,c)}(u,r,p);return Vu(null!==w),w}}(u,r.bucket),ue);return Ze.urlParams=w,Ze.errorHandler=tf(r),Ze}function su(u,r,o){const c=Object.assign({},o);return c.fullPath=u.path,c.size=r.size(),c.contentType||(c.contentType=function Rl(u,r){return u&&u.contentType||r&&r.type()||"application/octet-stream"}(null,r)),c}class ou{constructor(r,o,c,p){this.current=r,this.total=o,this.finalized=!!c,this.metadata=p||null}}function Uu(u,r){let o=null;try{o=u.getResponseHeader("X-Goog-Upload-Status")}catch{Vu(!1)}return Vu(!!o&&-1!==(r||["active"]).indexOf(o)),o}const Hg={STATE_CHANGED:"state_changed"},ba={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dc(u){switch(u){case"running":case"pausing":case"canceling":return ba.RUNNING;case"paused":return ba.PAUSED;case"success":return ba.SUCCESS;case"canceled":return ba.CANCELED;default:return ba.ERROR}}class nf{constructor(r,o,c){if(function py(u){return"function"==typeof u}(r)||null!=o||null!=c)this.next=r,this.error=null!=o?o:void 0,this.complete=null!=c?c:void 0;else{const w=r;this.next=w.next,this.error=w.error,this.complete=w.complete}}}function pl(u){return(...r)=>{Promise.resolve().then(()=>u(...r))}}let rf=null;class t_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ca.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ca.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ca.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,o,c,p){if(this.sent_)throw hp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,r,!0),void 0!==p)for(const w in p)p.hasOwnProperty(w)&&this.xhr_.setRequestHeader(w,p[w].toString());return void 0!==c?this.xhr_.send(c):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",r)}}class g0 extends t_{initXhr(){this.xhr_.responseType="text"}}function au(){return rf?rf():new g0}class sd{constructor(r,o,c=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=r,this._blob=o,this._metadata=c,this._mappings=Al(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=p=>{if(this._request=void 0,this._chunkMultiplier=1,p._codeEquals(Br.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const w=this.isExponentialBackoffExpired();if(Yd(p.status,[])){if(!w)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();p=Kd()}this._error=p,this._transition("error")}},this._metadataErrorHandler=p=>{this._request=void 0,p._codeEquals(Br.CANCELED)?this.completeTransitions_():(this._error=p,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((p,w)=>{this._resolve=p,this._reject=w,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const r=this._transferred;return o=>this._updateProgress(r+o)}_shouldDoResumable(r){return r.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(r){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,c])=>{switch(this._state){case"running":r(o,c);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((r,o)=>{const c=function Jv(u,r,o,c,p){const w=r.bucketOnlyServerUrl(),A=su(r,c,p),$={name:A.fullPath},X=Tl(w,u.host,u._protocol),Ze={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${c.size()}`,"X-Goog-Upload-Header-Content-Type":A.contentType,"Content-Type":"application/json; charset=utf-8"},st=ys(A,o),Gt=new Ml(X,"POST",function $t(ln){let xn;Uu(ln);try{xn=ln.getResponseHeader("X-Goog-Upload-URL")}catch{Vu(!1)}return Vu(qd(xn)),xn},u.maxUploadRetryTime);return Gt.urlParams=$,Gt.headers=Ze,Gt.body=st,Gt.errorHandler=tf(r),Gt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(c,au,r,o);this._request=p,p.getPromise().then(w=>{this._request=void 0,this._uploadUrl=w,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const r=this._uploadUrl;this._resolveToken((o,c)=>{const p=function p0(u,r,o,c){const X=new Ml(o,"POST",function w(ue){const Ze=Uu(ue,["active","final"]);let st=null;try{st=ue.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vu(!1)}st||Vu(!1);const yt=Number(st);return Vu(!isNaN(yt)),new ou(yt,c.size(),"final"===Ze)},u.maxUploadRetryTime);return X.headers={"X-Goog-Upload-Command":"query"},X.errorHandler=tf(r),X}(this._ref.storage,this._ref._location,r,this._blob),w=this._ref.storage._makeRequest(p,au,o,c);this._request=w,w.getPromise().then(A=>{this._request=void 0,this._updateProgress(A.current),this._needToFetchStatus=!1,A.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const r=262144*this._chunkMultiplier,o=new ou(this._transferred,this._blob.size()),c=this._uploadUrl;this._resolveToken((p,w)=>{let A;try{A=function e_(u,r,o,c,p,w,A,$){const X=new ou(0,0);if(A?(X.current=A.current,X.total=A.total):(X.current=0,X.total=c.size()),c.size()!==X.total)throw function Yh(){return new ks(Br.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ue=X.total-X.current;let Ze=ue;p>0&&(Ze=Math.min(Ze,p));const st=X.current;let $t="";$t=0===Ze?"finalize":ue===Ze?"upload, finalize":"upload";const Gt={"X-Goog-Upload-Command":$t,"X-Goog-Upload-Offset":`${X.current}`},ln=c.slice(st,st+Ze);if(null===ln)throw Ng();const Di=new Ml(o,"POST",function xn(Mi,Ol){const fa=Uu(Mi,["active","final"]),sa=X.current+Ze,pa=c.size();let pf;return pf="final"===fa?Vg(r,w)(Mi,Ol):null,new ou(sa,pa,"final"===fa,pf)},r.maxUploadRetryTime);return Di.headers=Gt,Di.body=ln.uploadData(),Di.progressCallback=$||null,Di.errorHandler=tf(u),Di}(this._ref._location,this._ref.storage,c,this._blob,r,this._mappings,o,this._makeProgressCallback())}catch(X){return this._error=X,void this._transition("error")}const $=this._ref.storage._makeRequest(A,au,p,w,!1);this._request=$,$.getPromise().then(X=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(X.current),X.finalized?(this._metadata=X.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((r,o)=>{const c=f0(this._ref.storage,this._ref._location,this._mappings),p=this._ref.storage._makeRequest(c,au,r,o);this._request=p,p.getPromise().then(w=>{this._request=void 0,this._metadata=w,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((r,o)=>{const c=function jg(u,r,o,c,p){const w=r.bucketOnlyServerUrl(),A={"X-Goog-Upload-Protocol":"multipart"},X=function $(){let Di="";for(let Mi=0;Mi<2;Mi++)Di+=Math.random().toString().slice(2);return Di}();A["Content-Type"]="multipart/related; boundary="+X;const ue=su(r,c,p),Ze=ys(ue,o),$t=da.getBlob("--"+X+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ze+"\r\n--"+X+"\r\nContent-Type: "+ue.contentType+"\r\n\r\n",c,"\r\n--"+X+"--");if(null===$t)throw Ng();const Gt={name:ue.fullPath},ln=Tl(w,u.host,u._protocol),Rr=u.maxUploadRetryTime,Zr=new Ml(ln,"POST",Vg(u,o),Rr);return Zr.urlParams=Gt,Zr.headers=A,Zr.body=$t.uploadData(),Zr.errorHandler=tf(r),Zr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(c,au,r,o);this._request=p,p.getPromise().then(w=>{this._request=void 0,this._metadata=w,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(r){const o=this._transferred;this._transferred=r,this._transferred!==o&&this._notifyObservers()}_transition(r){if(this._state!==r)switch(r){case"canceling":case"pausing":this._state=r,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=r,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=r,this._notifyObservers();break;case"canceled":this._error=Og(),this._state=r,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const r=dc(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:r,metadata:this._metadata,task:this,ref:this._ref}}on(r,o,c,p){const w=new nf(o||void 0,c||void 0,p||void 0);return this._addObserver(w),()=>{this._removeObserver(w)}}then(r,o){return this._promise.then(r,o)}catch(r){return this.then(null,r)}_addObserver(r){this._observers.push(r),this._notifyObserver(r)}_removeObserver(r){const o=this._observers.indexOf(r);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let r=!0;switch(dc(this._state)){case ba.SUCCESS:pl(this._resolve.bind(null,this.snapshot))();break;case ba.CANCELED:case ba.ERROR:pl(this._reject.bind(null,this._error))();break;default:r=!1}r&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(r){switch(dc(this._state)){case ba.RUNNING:case ba.PAUSED:r.next&&pl(r.next.bind(r,this.snapshot))();break;case ba.SUCCESS:r.complete&&pl(r.complete.bind(r))();break;default:r.error&&pl(r.error.bind(r,this._error))()}}resume(){const r="paused"===this._state||"pausing"===this._state;return r&&this._transition("running"),r}pause(){const r="running"===this._state;return r&&this._transition("pausing"),r}cancel(){const r="running"===this._state||"pausing"===this._state;return r&&this._transition("canceling"),r}}class hc{constructor(r,o){this._service=r,this._location=o instanceof Jo?o:Jo.makeFromUrl(o,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,o){return new hc(r,o)}get root(){const r=new Jo(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ha(this._location.path)}get storage(){return this._service}get parent(){const r=function Is(u){if(0===u.length)return null;const r=u.lastIndexOf("/");return-1===r?"":u.slice(0,r)}(this._location.path);if(null===r)return null;const o=new Jo(this._location.bucket,r);return new hc(this._service,o)}_throwIfRoot(r){if(""===this._location.path)throw Hv(r)}}function yp(u,r,o){return fc.apply(this,arguments)}function fc(){return(fc=(0,Yn.Z)(function*(u,r,o){const p=yield r_(u,{pageToken:o});r.prefixes.push(...p.prefixes),r.items.push(...p.items),null!=p.nextPageToken&&(yield yp(u,r,p.nextPageToken))})).apply(this,arguments)}function r_(u,r){null!=r&&"number"==typeof r.maxResults&&Xh("options.maxResults",1,1e3,r.maxResults);const o=r||{},c=CE(u.storage,u._location,"/",o.pageToken,o.maxResults);return u.storage.makeRequestWithTokens(c,au)}function _p(u){u._throwIfRoot("getDownloadURL");const r=function Xv(u,r,o){const p=Tl(r.fullServerUrl(),u.host,u._protocol),A=u.maxOperationRetryTime,$=new Ml(p,"GET",function h0(u,r){return function o(c,p){const w=_y(u,p,r);return Vu(null!==w),function Yv(u,r,o,c){const p=cc(r);if(null===p||!qd(p.downloadTokens))return null;const w=p.downloadTokens;if(0===w.length)return null;const A=encodeURIComponent;return w.split(",").map(ue=>{const st=u.fullPath;return Tl("/b/"+A(u.bucket)+"/o/"+A(st),o,c)+kg({alt:"media",token:ue})})[0]}(w,p,u.host,u._protocol)}}(u,o),A);return $.errorHandler=Ug(r),$}(u.storage,u._location,Al());return u.storage.makeRequestWithTokens(r,au).then(o=>{if(null===o)throw function Zh(){return new ks(Br.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function i_(u,r){const o=function uo(u,r){const o=r.split("/").filter(c=>c.length>0).join("/");return 0===u.length?o:u+"/"+o}(u._location.path,r),c=new Jo(u._location.bucket,o);return new hc(u.storage,c)}function pc(u,r){if(u instanceof Ty){const o=u;if(null==o._bucket)throw function uy(){return new ks(Br.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rg+"' property when initializing the app?")}();const c=new hc(o,o._bucket);return null!=r?pc(c,r):c}return void 0!==r?i_(u,r):u}function s_(u,r){if(r&&function Ep(u){return/^[A-Za-z]+:\/\//.test(u)}(r)){if(u instanceof Ty)return function y0(u,r){return new hc(u,r)}(u,r);throw Bu("To use ref(service, url), the first argument must be a Storage instance.")}return pc(u,r)}function Sy(u,r){const o=null==r?void 0:r[Rg];return null==o?null:Jo.makeFromBucketSpec(o,u)}class Ty{constructor(r,o,c,p,w){this.app=r,this._authProvider=o,this._appCheckProvider=c,this._url=p,this._firebaseVersion=w,this._bucket=null,this._host=Uv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=p?Jo.makeFromBucketSpec(p,this._host):Sy(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._bucket=null!=this._url?Jo.makeFromBucketSpec(this._url,r):Sy(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){Xh("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){Xh("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}_getAuthToken(){var r=this;return(0,Yn.Z)(function*(){if(r._overrideAuthToken)return r._overrideAuthToken;const o=r._authProvider.getImmediate({optional:!0});if(o){const c=yield o.getToken();if(null!==c)return c.accessToken}return null})()}_getAppCheckToken(){var r=this;return(0,Yn.Z)(function*(){const o=r._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new hc(this,r)}_makeRequest(r,o,c,p,w=!0){if(this._deleted)return new dy(jv());{const A=function Wv(u,r,o,c,p,w,A=!0){const $=kg(u.urlParams),X=u.url+$,ue=Object.assign({},u.headers);return function yy(u,r){r&&(u["X-Firebase-GMPID"]=r)}(ue,r),function c0(u,r){null!==r&&r.length>0&&(u.Authorization="Firebase "+r)}(ue,o),function d0(u,r){u["X-Firebase-Storage-Version"]="webjs/"+(null!=r?r:"AppManager")}(ue,w),function Gv(u,r){null!==r&&(u["X-Firebase-AppCheck"]=r)}(ue,c),new my(X,u.method,ue,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,p,A)}(r,this._appId,c,p,o,this._firebaseVersion,w);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}makeRequestWithTokens(r,o){var c=this;return(0,Yn.Z)(function*(){const[p,w]=yield Promise.all([c._getAuthToken(),c._getAppCheckToken()]);return c._makeRequest(r,o,p,w).getPromise()})()}}const wp="@firebase/storage";function Qg(u,r){return s_(u=(0,U.m9)(u),r)}function E0(u,{instanceIdentifier:r}){const o=u.getProvider("app").getImmediate(),c=u.getProvider("auth-internal"),p=u.getProvider("app-check-internal");return new Ty(o,c,p,r,we.SDK_VERSION)}!function c_(){(0,we._registerComponent)(new ge.wA("storage",E0,"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)(wp,"0.11.2",""),(0,we.registerVersion)(wp,"0.11.2","esm2017")}();class em{constructor(r,o,c){this._delegate=r,this.task=o,this.ref=c}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class d_{constructor(r,o){this._delegate=r,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new em(this._delegate.snapshot,this,this._ref)}then(r,o){return this._delegate.then(c=>{if(r)return r(new em(c,this,this._ref))},o)}on(r,o,c,p){let w;return o&&(w="function"==typeof o?A=>o(new em(A,this,this._ref)):{next:o.next?A=>o.next(new em(A,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(r,w,c||void 0,p||void 0)}}class gc{constructor(r,o){this._delegate=r,this._service=o}get prefixes(){return this._delegate.prefixes.map(r=>new ea(r,this._service))}get items(){return this._delegate.items.map(r=>new ea(r,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ea{constructor(r,o){this._delegate=r,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(r){const o=function Xg(u,r){return i_(u,r)}(this._delegate,r);return new ea(o,this.storage)}get root(){return new ea(this._delegate.root,this.storage)}get parent(){const r=this._delegate.parent;return null==r?null:new ea(r,this.storage)}put(r,o){return this._throwIfRoot("put"),new d_(function Zg(u,r,o){return function m0(u,r,o){return u._throwIfRoot("uploadBytesResumable"),new sd(u,new da(r),o)}(u=(0,U.m9)(u),r,o)}(this._delegate,r,o),this)}putString(r,o=Ha.RAW,c){this._throwIfRoot("putString");const p=Zd(o,r),w=Object.assign({},c);return null==w.contentType&&null!=p.contentType&&(w.contentType=p.contentType),new d_(new sd(this._delegate,new da(p.data,!0),w),this)}listAll(){return function Ry(u){return function mp(u){const r={prefixes:[],items:[]};return yp(u,r).then(()=>r)}(u=(0,U.m9)(u))}(this._delegate).then(r=>new gc(r,this.storage))}list(r){return function My(u,r){return r_(u=(0,U.m9)(u),r)}(this._delegate,r||void 0).then(o=>new gc(o,this.storage))}getMetadata(){return function a_(u){return function Jd(u){u._throwIfRoot("getMetadata");const r=f0(u.storage,u._location,Al());return u.storage.makeRequestWithTokens(r,au)}(u=(0,U.m9)(u))}(this._delegate)}updateMetadata(r){return function l_(u,r){return function vp(u,r){u._throwIfRoot("updateMetadata");const o=function gp(u,r,o,c){const w=Tl(r.fullServerUrl(),u.host,u._protocol),$=ys(o,c),ue=u.maxOperationRetryTime,Ze=new Ml(w,"PATCH",Vg(u,c),ue);return Ze.headers={"Content-Type":"application/json; charset=utf-8"},Ze.body=$,Ze.errorHandler=Ug(r),Ze}(u.storage,u._location,r,Al());return u.storage.makeRequestWithTokens(o,au)}(u=(0,U.m9)(u),r)}(this._delegate,r)}getDownloadURL(){return function u_(u){return _p(u=(0,U.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function xy(u){return function af(u){u._throwIfRoot("deleteObject");const r=function Iy(u,r){const c=Tl(r.fullServerUrl(),u.host,u._protocol),$=new Ml(c,"DELETE",function A(X,ue){},u.maxOperationRetryTime);return $.successCodes=[200,204],$.errorHandler=Ug(r),$}(u.storage,u._location);return u.storage.makeRequestWithTokens(r,au)}(u=(0,U.m9)(u))}(this._delegate)}_throwIfRoot(r){if(""===this._delegate._location.path)throw Hv(r)}}class gl{constructor(r,o){this.app=r,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(r){if(od(r))throw Bu("ref() expected a child path but got a URL, use refFromURL instead.");return new ea(Qg(this._delegate,r),this)}refFromURL(r){if(!od(r))throw Bu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Jo.makeFromUrl(r,this._delegate.host)}catch{throw Bu("refFromUrl() expected a valid full URL but got an invalid one.")}return new ea(Qg(this._delegate,r),this)}setMaxUploadRetryTime(r){this._delegate.maxUploadRetryTime=r}setMaxOperationRetryTime(r){this._delegate.maxOperationRetryTime=r}useEmulator(r,o,c={}){!function lf(u,r,o,c={}){!function Kg(u,r,o,c={}){u.host=`${r}:${o}`,u._protocol="http";const{mockUserToken:p}=c;p&&(u._overrideAuthToken="string"==typeof p?p:(0,U.Sg)(p,u.app.options.projectId))}(u,r,o,c)}(this._delegate,r,o,c)}}function od(u){return/^[A-Za-z]+:\/\//.test(u)}function ju(u,{instanceIdentifier:r}){const o=u.getProvider("app-compat").getImmediate(),c=u.getProvider("storage").getImmediate({identifier:r});return new gl(o,c)}function C0(u){const r=function Oy(u){return new lr.y(r=>{const o=A=>r.next(A);o(u.snapshot);const w=u.on("state_changed",o);return u.then(A=>{o(A),r.complete()},A=>{o(u.snapshot),(A=>{r.error(A)})(A)}),function(){w()}}).pipe(function ru(u,r=to.z){return(0,Es.e)((o,c)=>{let p=null,w=null,A=null;const $=()=>{if(p){p.unsubscribe(),p=null;const ue=w;w=null,c.next(ue)}};function X(){const ue=A+u,Ze=r.now();if(Ze<ue)return p=this.schedule(void 0,ue-Ze),void c.add(p);$()}o.subscribe((0,no.x)(c,ue=>{w=ue,A=r.now(),p||(p=r.schedule(X,u),c.add(p))},()=>{$(),c.complete()},void 0,()=>{w=p=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>r,percentageChanges:()=>r.pipe((0,On.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function Ny(u){return{getDownloadURL:()=>(0,So.of)(void 0).pipe(De.fc,(0,bs.w)(()=>u.getDownloadURL()),De.iC),getMetadata:()=>(0,So.of)(void 0).pipe(De.fc,(0,bs.w)(()=>u.getMetadata()),De.iC),delete:()=>(0,Wh.D)(u.delete()),child:r=>Ny(u.child(r)),updateMetadata:r=>(0,Wh.D)(u.updateMetadata(r)),put:(r,o)=>C0(u.put(r,o)),putString:(r,o,c)=>C0(u.putString(r,o,c)),list:r=>(0,Wh.D)(u.list(r)),listAll:()=>(0,Wh.D)(u.listAll())}}!function I0(u){const r={TaskState:ba,TaskEvent:Hg,StringFormat:Ha,Storage:gl,Reference:ea};u.INTERNAL.registerComponent(new ge.wA("storage-compat",ju,"PUBLIC").setServiceProps(r).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Ln.Z);const b0=new m.OlP("angularfire2.storageBucket"),D0=new m.OlP("angularfire2.storage.maxUploadRetryTime"),h_=new m.OlP("angularfire2.storage.maxOperationRetryTime"),S0=new m.OlP("angularfire2.storage.use-emulator");let Wo=(()=>{class u{constructor(o,c,p,w,A,$,X,ue,Ze,st){const yt=(0,Qi.on)(o,A,c);this.storage=(0,Qi.cc)(`${yt.name}.storage.${p}`,"AngularFireStorage",yt.name,()=>{const $t=A.runOutsideAngular(()=>yt.storage(p||void 0)),Gt=Ze;return Gt&&$t.useEmulator(...Gt),X&&$t.setMaxUploadRetryTime(X),ue&&$t.setMaxOperationRetryTime(ue),$t},[X,ue])}ref(o){return Ny(this.storage.ref(o))}refFromURL(o){return Ny(this.storage.refFromURL(o))}upload(o,c,p){return Ny(this.storage.ref(o)).put(c,p)}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(Qi.Dh),m.LFG(Qi.xv,8),m.LFG(b0,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(De.HU),m.LFG(D0,8),m.LFG(h_,8),m.LFG(S0,8),m.LFG(_e.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),A0=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({}),u})(),uf=(()=>{class u{constructor(){Dl.Z.registerVersion("angularfire",De.q4.full,"gcs-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[Wo],imports:[A0]}),u})();class Ip{}class DE{}const Hu="*";function f_(u,r=null){return{type:2,steps:u,options:r}}function p_(u){return{type:6,styles:u,offset:null}}function xl(u){Promise.resolve().then(u)}class ho{constructor(r=0,o=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=r+o}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xl(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(r=>r()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(r){this._position=this.totalTime?r*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(r){const o="start"==r?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class Pl{constructor(r){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=r;let o=0,c=0,p=0;const w=this.players.length;0==w?xl(()=>this._onFinish()):this.players.forEach(A=>{A.onDone(()=>{++o==w&&this._onFinish()}),A.onDestroy(()=>{++c==w&&this._onDestroy()}),A.onStart(()=>{++p==w&&this._onStart()})}),this.totalTime=this.players.reduce((A,$)=>Math.max(A,$.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this.players.forEach(r=>r.init())}onStart(r){this._onStartFns.push(r)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(r=>r()),this._onStartFns=[])}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(r=>r.play())}pause(){this.players.forEach(r=>r.pause())}restart(){this.players.forEach(r=>r.restart())}finish(){this._onFinish(),this.players.forEach(r=>r.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(r=>r.destroy()),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this.players.forEach(r=>r.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(r){const o=r*this.totalTime;this.players.forEach(c=>{const p=c.totalTime?Math.min(1,o/c.totalTime):1;c.setPosition(p)})}getPosition(){const r=this.players.reduce((o,c)=>null===o||c.totalTime>o.totalTime?c:o,null);return null!=r?r.getPosition():0}beforeDestroy(){this.players.forEach(r=>{r.beforeDestroy&&r.beforeDestroy()})}triggerCallback(r){const o="start"==r?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}const tm="!";function m_(u){return new m.vHH(3e3,!1)}function cf(u){switch(u.length){case 0:return new ho;case 1:return u[0];default:return new Pl(u)}}function ME(u,r,o,c,p=new Map,w=new Map){const A=[],$=[];let X=-1,ue=null;if(c.forEach(Ze=>{const st=Ze.get("offset"),yt=st==X,$t=yt&&ue||new Map;Ze.forEach((Gt,ln)=>{let xn=ln,Rr=Gt;if("offset"!==ln)switch(xn=r.normalizePropertyName(xn,A),Rr){case tm:Rr=p.get(ln);break;case Hu:Rr=w.get(ln);break;default:Rr=r.normalizeStyleValue(ln,xn,Rr,A)}$t.set(xn,Rr)}),yt||$.push($t),ue=$t,X=st}),A.length)throw function ui(u){return new m.vHH(3502,!1)}();return $}function k0(u,r,o,c){switch(r){case"start":u.onStart(()=>c(o&&F0(o,"start",u)));break;case"done":u.onDone(()=>c(o&&F0(o,"done",u)));break;case"destroy":u.onDestroy(()=>c(o&&F0(o,"destroy",u)))}}function F0(u,r,o){const c=o.totalTime,w=L0(u.element,u.triggerName,u.fromState,u.toState,r||u.phaseName,null==c?u.totalTime:c,!!o.disabled),A=u._data;return null!=A&&(w._data=A),w}function L0(u,r,o,c,p="",w=0,A){return{element:u,triggerName:r,fromState:o,toState:c,phaseName:p,totalTime:w,disabled:!!A}}function lu(u,r,o){let c=u.get(r);return c||u.set(r,c=o),c}function RE(u){const r=u.indexOf(":");return[u.substring(1,r),u.slice(r+1)]}const Cw=(()=>typeof document>"u"?null:document.documentElement)();function B0(u){const r=u.parentNode||u.host||null;return r===Cw?null:r}let df=null,$0=!1;function V0(u,r){for(;r;){if(r===u)return!0;r=B0(r)}return!1}function U0(u,r,o){if(o)return Array.from(u.querySelectorAll(r));const c=u.querySelector(r);return c?[c]:[]}let j0=(()=>{class u{validateStyleProperty(o){return function xE(u){df||(df=function PE(){return typeof document<"u"?document.body:null}()||{},$0=!!df.style&&"WebkitAppearance"in df.style);let r=!0;return df.style&&!function bw(u){return"ebkit"==u.substring(1,6)}(u)&&(r=u in df.style,!r&&$0&&(r="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in df.style)),r}(o)}matchesElement(o,c){return!1}containsElement(o,c){return V0(o,c)}getParentElement(o){return B0(o)}query(o,c,p){return U0(o,c,p)}computeStyle(o,c,p){return p||""}animate(o,c,p,w,A,$=[],X){return new ho(p,w)}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),E_=(()=>{class u{}return u.NOOP=new j0,u})();const OE=1e3,H0="ng-enter",nh="ng-leave",z0="ng-trigger",rm=".ng-trigger",Aw="ng-animating",w_=".ng-animating";function ad(u){if("number"==typeof u)return u;const r=u.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:NE(parseFloat(r[1]),r[2])}function NE(u,r){return"s"===r?u*OE:u}function Pr(u,r,o){return u.hasOwnProperty("duration")?u:function Mw(u,r,o){let p,w=0,A="";if("string"==typeof u){const $=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===$)return r.push(m_()),{duration:0,delay:0,easing:""};p=NE(parseFloat($[1]),$[2]);const X=$[3];null!=X&&(w=NE(parseFloat(X),$[4]));const ue=$[5];ue&&(A=ue)}else p=u;if(!o){let $=!1,X=r.length;p<0&&(r.push(function P0(){return new m.vHH(3100,!1)}()),$=!0),w<0&&(r.push(function O0(){return new m.vHH(3101,!1)}()),$=!0),$&&r.splice(X,0,m_())}return{duration:p,delay:w,easing:A}}(u,r,o)}function ky(u,r={}){return Object.keys(u).forEach(o=>{r[o]=u[o]}),r}function kE(u){const r=new Map;return Object.keys(u).forEach(o=>{r.set(o,u[o])}),r}function yc(u,r=new Map,o){if(o)for(let[c,p]of o)r.set(c,p);for(let[c,p]of u)r.set(c,p);return r}function uu(u,r,o){r.forEach((c,p)=>{const w=b_(p);o&&!o.has(p)&&o.set(p,u.style[w]),u.style[w]=c})}function Ms(u,r){r.forEach((o,c)=>{const p=b_(c);u.style[p]=""})}function I_(u){return Array.isArray(u)?1==u.length?u[0]:f_(u):u}const C_=new RegExp("{{\\s*(.+?)\\s*}}","g");function BE(u){let r=[];if("string"==typeof u){let o;for(;o=C_.exec(u);)r.push(o[1]);C_.lastIndex=0}return r}function sm(u,r,o){const c=u.toString(),p=c.replace(C_,(w,A)=>{let $=r[A];return null==$&&(o.push(function y_(u){return new m.vHH(3003,!1)}()),$=""),$.toString()});return p==c?u:p}function Fy(u){const r=[];let o=u.next();for(;!o.done;)r.push(o.value),o=u.next();return r}const $E=/-+([a-z0-9])/g;function b_(u){return u.replace($E,(...r)=>r[1].toUpperCase())}function Da(u,r,o){switch(r.type){case 7:return u.visitTrigger(r,o);case 0:return u.visitState(r,o);case 1:return u.visitTransition(r,o);case 2:return u.visitSequence(r,o);case 3:return u.visitGroup(r,o);case 4:return u.visitAnimate(r,o);case 5:return u.visitKeyframes(r,o);case 6:return u.visitStyle(r,o);case 8:return u.visitReference(r,o);case 9:return u.visitAnimateChild(r,o);case 10:return u.visitAnimateRef(r,o);case 11:return u.visitQuery(r,o);case 12:return u.visitStagger(r,o);default:throw function nm(u){return new m.vHH(3004,!1)}()}}function VE(u,r){return window.getComputedStyle(u)[r]}const D_="*";function Ly(u,r){const o=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(c=>function By(u,r,o){if(":"==u[0]){const X=function kw(u,r){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,c)=>parseFloat(c)>parseFloat(o);case":decrement":return(o,c)=>parseFloat(c)<parseFloat(o);default:return r.push(function Zt(u){return new m.vHH(3016,!1)}()),"* => *"}}(u,o);if("function"==typeof X)return void r.push(X);u=X}const c=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return o.push(function kt(u){return new m.vHH(3015,!1)}()),r;const p=c[1],w=c[2],A=c[3];r.push(W0(p,A));"<"==w[0]&&!(p==D_&&A==D_)&&r.push(W0(A,p))}(c,o,r)):o.push(u),o}const S_=new Set(["true","1"]),T_=new Set(["false","0"]);function W0(u,r){const o=S_.has(u)||T_.has(u),c=S_.has(r)||T_.has(r);return(p,w)=>{let A=u==D_||u==p,$=r==D_||r==w;return!A&&o&&"boolean"==typeof p&&(A=p?S_.has(u):T_.has(u)),!$&&c&&"boolean"==typeof w&&($=w?S_.has(r):T_.has(r)),A&&$}}const UE=new RegExp("s*:selfs*,?","g");function q0(u,r,o,c){return new Fw(u).build(r,o,c)}class Fw{constructor(r){this._driver=r}build(r,o,c){const p=new KI(o);return this._resetContextStyleTimingState(p),Da(this,I_(r),p)}_resetContextStyleTimingState(r){r.currentQuerySelector="",r.collectedStyles=new Map,r.collectedStyles.set("",new Map),r.currentTime=0}visitTrigger(r,o){let c=o.queryCount=0,p=o.depCount=0;const w=[],A=[];return"@"==r.name.charAt(0)&&o.errors.push(function s(){return new m.vHH(3006,!1)}()),r.definitions.forEach($=>{if(this._resetContextStyleTimingState(o),0==$.type){const X=$,ue=X.name;ue.toString().split(/\s*,\s*/).forEach(Ze=>{X.name=Ze,w.push(this.visitState(X,o))}),X.name=ue}else if(1==$.type){const X=this.visitTransition($,o);c+=X.queryCount,p+=X.depCount,A.push(X)}else o.errors.push(function e(){return new m.vHH(3007,!1)}())}),{type:7,name:r.name,states:w,transitions:A,queryCount:c,depCount:p,options:null}}visitState(r,o){const c=this.visitStyle(r.styles,o),p=r.options&&r.options.params||null;if(c.containsDynamicStyles){const w=new Set,A=p||{};c.styles.forEach($=>{$ instanceof Map&&$.forEach(X=>{BE(X).forEach(ue=>{A.hasOwnProperty(ue)||w.add(ue)})})}),w.size&&(Fy(w.values()),o.errors.push(function t(u,r){return new m.vHH(3008,!1)}()))}return{type:0,name:r.name,style:c,options:p?{params:p}:null}}visitTransition(r,o){o.queryCount=0,o.depCount=0;const c=Da(this,I_(r.animation),o);return{type:1,matchers:Ly(r.expr,o.errors),animation:c,queryCount:o.queryCount,depCount:o.depCount,options:ff(r.options)}}visitSequence(r,o){return{type:2,steps:r.steps.map(c=>Da(this,c,o)),options:ff(r.options)}}visitGroup(r,o){const c=o.currentTime;let p=0;const w=r.steps.map(A=>{o.currentTime=c;const $=Da(this,A,o);return p=Math.max(p,o.currentTime),$});return o.currentTime=p,{type:3,steps:w,options:ff(r.options)}}visitAnimate(r,o){const c=function YI(u,r){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return om(Pr(u,r).duration,0,"");const o=u;if(o.split(/\s+/).some(w=>"{"==w.charAt(0)&&"{"==w.charAt(1))){const w=om(0,0,"");return w.dynamic=!0,w.strValue=o,w}const p=Pr(o,r);return om(p.duration,p.delay,p.easing)}(r.timings,o.errors);o.currentAnimateTimings=c;let p,w=r.styles?r.styles:p_({});if(5==w.type)p=this.visitKeyframes(w,o);else{let A=r.styles,$=!1;if(!A){$=!0;const ue={};c.easing&&(ue.easing=c.easing),A=p_(ue)}o.currentTime+=c.duration+c.delay;const X=this.visitStyle(A,o);X.isEmptyStep=$,p=X}return o.currentAnimateTimings=null,{type:4,timings:c,style:p,options:null}}visitStyle(r,o){const c=this._makeStyleAst(r,o);return this._validateStyleAst(c,o),c}_makeStyleAst(r,o){const c=[],p=Array.isArray(r.styles)?r.styles:[r.styles];for(let $ of p)"string"==typeof $?$===Hu?c.push($):o.errors.push(new m.vHH(3002,!1)):c.push(kE($));let w=!1,A=null;return c.forEach($=>{if($ instanceof Map&&($.has("easing")&&(A=$.get("easing"),$.delete("easing")),!w))for(let X of $.values())if(X.toString().indexOf("{{")>=0){w=!0;break}}),{type:6,styles:c,easing:A,offset:r.offset,containsDynamicStyles:w,options:null}}_validateStyleAst(r,o){const c=o.currentAnimateTimings;let p=o.currentTime,w=o.currentTime;c&&w>0&&(w-=c.duration+c.delay),r.styles.forEach(A=>{"string"!=typeof A&&A.forEach(($,X)=>{const ue=o.collectedStyles.get(o.currentQuerySelector),Ze=ue.get(X);let st=!0;Ze&&(w!=p&&w>=Ze.startTime&&p<=Ze.endTime&&(o.errors.push(function g(u,r,o,c,p){return new m.vHH(3010,!1)}()),st=!1),w=Ze.startTime),st&&ue.set(X,{startTime:w,endTime:p}),o.options&&function LE(u,r,o){const c=r.params||{},p=BE(u);p.length&&p.forEach(w=>{c.hasOwnProperty(w)||o.push(function N0(u){return new m.vHH(3001,!1)}())})}($,o.options,o.errors)})})}visitKeyframes(r,o){const c={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function E(){return new m.vHH(3011,!1)}()),c;let w=0;const A=[];let $=!1,X=!1,ue=0;const Ze=r.steps.map(Rr=>{const Zr=this._makeStyleAst(Rr,o);let Di=null!=Zr.offset?Zr.offset:function qI(u){if("string"==typeof u)return null;let r=null;if(Array.isArray(u))u.forEach(o=>{if(o instanceof Map&&o.has("offset")){const c=o;r=parseFloat(c.get("offset")),c.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const o=u;r=parseFloat(o.get("offset")),o.delete("offset")}return r}(Zr.styles),Mi=0;return null!=Di&&(w++,Mi=Zr.offset=Di),X=X||Mi<0||Mi>1,$=$||Mi<ue,ue=Mi,A.push(Mi),Zr});X&&o.errors.push(function k(){return new m.vHH(3012,!1)}()),$&&o.errors.push(function Y(){return new m.vHH(3200,!1)}());const st=r.steps.length;let yt=0;w>0&&w<st?o.errors.push(function se(){return new m.vHH(3202,!1)}()):0==w&&(yt=1/(st-1));const $t=st-1,Gt=o.currentTime,ln=o.currentAnimateTimings,xn=ln.duration;return Ze.forEach((Rr,Zr)=>{const Di=yt>0?Zr==$t?1:yt*Zr:A[Zr],Mi=Di*xn;o.currentTime=Gt+ln.delay+Mi,ln.duration=Mi,this._validateStyleAst(Rr,o),Rr.offset=Di,c.styles.push(Rr)}),c}visitReference(r,o){return{type:8,animation:Da(this,I_(r.animation),o),options:ff(r.options)}}visitAnimateChild(r,o){return o.depCount++,{type:9,options:ff(r.options)}}visitAnimateRef(r,o){return{type:10,animation:this.visitReference(r.animation,o),options:ff(r.options)}}visitQuery(r,o){const c=o.currentQuerySelector,p=r.options||{};o.queryCount++,o.currentQuery=r;const[w,A]=function Lw(u){const r=!!u.split(/\s*,\s*/).find(o=>":self"==o);return r&&(u=u.replace(UE,"")),u=u.replace(/@\*/g,rm).replace(/@\w+/g,o=>rm+"-"+o.slice(1)).replace(/:animating/g,w_),[u,r]}(r.selector);o.currentQuerySelector=c.length?c+" "+w:w,lu(o.collectedStyles,o.currentQuerySelector,new Map);const $=Da(this,I_(r.animation),o);return o.currentQuery=null,o.currentQuerySelector=c,{type:11,selector:w,limit:p.limit||0,optional:!!p.optional,includeSelf:A,animation:$,originalSelector:r.selector,options:ff(r.options)}}visitStagger(r,o){o.currentQuery||o.errors.push(function Se(){return new m.vHH(3013,!1)}());const c="full"===r.timings?{duration:0,delay:0,easing:"full"}:Pr(r.timings,o.errors,!0);return{type:12,animation:Da(this,I_(r.animation),o),timings:c,options:null}}}class KI{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ff(u){return u?(u=ky(u)).params&&(u.params=function WI(u){return u?ky(u):null}(u.params)):u={},u}function om(u,r,o){return{duration:u,delay:r,easing:o}}function Z0(u,r,o,c,p,w,A=null,$=!1){return{type:1,element:u,keyframes:r,preStyleProps:o,postStyleProps:c,duration:p,delay:w,totalTime:p+w,easing:A,subTimeline:$}}class A_{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,o){let c=this._map.get(r);c||this._map.set(r,c=[]),c.push(...o)}has(r){return this._map.has(r)}clear(){this._map.clear()}}const Bw=new RegExp(":enter","g"),Vw=new RegExp(":leave","g");function Q0(u,r,o,c,p,w=new Map,A=new Map,$,X,ue=[]){return(new ZI).buildKeyframes(u,r,o,c,p,w,A,$,X,ue)}class ZI{buildKeyframes(r,o,c,p,w,A,$,X,ue,Ze=[]){ue=ue||new A_;const st=new R_(r,o,ue,p,w,Ze,[]);st.options=X;const yt=X.delay?ad(X.delay):0;st.currentTimeline.delayNextStep(yt),st.currentTimeline.setStyles([A],null,st.errors,X),Da(this,c,st);const $t=st.timelines.filter(Gt=>Gt.containsAnimation());if($t.length&&$.size){let Gt;for(let ln=$t.length-1;ln>=0;ln--){const xn=$t[ln];if(xn.element===o){Gt=xn;break}}Gt&&!Gt.allowOnlyTimelineStyles()&&Gt.setStyles([$],null,st.errors,X)}return $t.length?$t.map(Gt=>Gt.buildKeyframes()):[Z0(o,[],[],[],0,yt,"",!1)]}visitTrigger(r,o){}visitState(r,o){}visitTransition(r,o){}visitAnimateChild(r,o){const c=o.subInstructions.get(o.element);if(c){const p=o.createSubContext(r.options),w=o.currentTimeline.currentTime,A=this._visitSubInstructions(c,p,p.options);w!=A&&o.transformIntoNewTimeline(A)}o.previousNode=r}visitAnimateRef(r,o){const c=o.createSubContext(r.options);c.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],o,c),this.visitReference(r.animation,c),o.transformIntoNewTimeline(c.currentTimeline.currentTime),o.previousNode=r}_applyAnimationRefDelays(r,o,c){for(const w of r){const A=null==w?void 0:w.delay;if(A){var p;const $="number"==typeof A?A:ad(sm(A,null!==(p=null==w?void 0:w.params)&&void 0!==p?p:{},o.errors));c.delayNextStep($)}}}_visitSubInstructions(r,o,c){let w=o.currentTimeline.currentTime;const A=null!=c.duration?ad(c.duration):null,$=null!=c.delay?ad(c.delay):null;return 0!==A&&r.forEach(X=>{const ue=o.appendInstructionToTimeline(X,A,$);w=Math.max(w,ue.duration+ue.delay)}),w}visitReference(r,o){o.updateOptions(r.options,!0),Da(this,r.animation,o),o.previousNode=r}visitSequence(r,o){const c=o.subContextCount;let p=o;const w=r.options;if(w&&(w.params||w.delay)&&(p=o.createSubContext(w),p.transformIntoNewTimeline(),null!=w.delay)){6==p.previousNode.type&&(p.currentTimeline.snapshotCurrentStyles(),p.previousNode=M_);const A=ad(w.delay);p.delayNextStep(A)}r.steps.length&&(r.steps.forEach(A=>Da(this,A,p)),p.currentTimeline.applyStylesToKeyframe(),p.subContextCount>c&&p.transformIntoNewTimeline()),o.previousNode=r}visitGroup(r,o){const c=[];let p=o.currentTimeline.currentTime;const w=r.options&&r.options.delay?ad(r.options.delay):0;r.steps.forEach(A=>{const $=o.createSubContext(r.options);w&&$.delayNextStep(w),Da(this,A,$),p=Math.max(p,$.currentTimeline.currentTime),c.push($.currentTimeline)}),c.forEach(A=>o.currentTimeline.mergeTimelineCollectedStyles(A)),o.transformIntoNewTimeline(p),o.previousNode=r}_visitTiming(r,o){if(r.dynamic){const c=r.strValue;return Pr(o.params?sm(c,o.params,o.errors):c,o.errors)}return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,o){const c=o.currentAnimateTimings=this._visitTiming(r.timings,o),p=o.currentTimeline;c.delay&&(o.incrementTime(c.delay),p.snapshotCurrentStyles());const w=r.style;5==w.type?this.visitKeyframes(w,o):(o.incrementTime(c.duration),this.visitStyle(w,o),p.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=r}visitStyle(r,o){const c=o.currentTimeline,p=o.currentAnimateTimings;!p&&c.hasCurrentStyleProperties()&&c.forwardFrame();const w=p&&p.easing||r.easing;r.isEmptyStep?c.applyEmptyStep(w):c.setStyles(r.styles,w,o.errors,o.options),o.previousNode=r}visitKeyframes(r,o){const c=o.currentAnimateTimings,p=o.currentTimeline.duration,w=c.duration,$=o.createSubContext().currentTimeline;$.easing=c.easing,r.styles.forEach(X=>{$.forwardTime((X.offset||0)*w),$.setStyles(X.styles,X.easing,o.errors,o.options),$.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles($),o.transformIntoNewTimeline(p+w),o.previousNode=r}visitQuery(r,o){const c=o.currentTimeline.currentTime,p=r.options||{},w=p.delay?ad(p.delay):0;w&&(6===o.previousNode.type||0==c&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=M_);let A=c;const $=o.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!p.optional,o.errors);o.currentQueryTotal=$.length;let X=null;$.forEach((ue,Ze)=>{o.currentQueryIndex=Ze;const st=o.createSubContext(r.options,ue);w&&st.delayNextStep(w),ue===o.element&&(X=st.currentTimeline),Da(this,r.animation,st),st.currentTimeline.applyStylesToKeyframe(),A=Math.max(A,st.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(A),X&&(o.currentTimeline.mergeTimelineCollectedStyles(X),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=r}visitStagger(r,o){const c=o.parentContext,p=o.currentTimeline,w=r.timings,A=Math.abs(w.duration),$=A*(o.currentQueryTotal-1);let X=A*o.currentQueryIndex;switch(w.duration<0?"reverse":w.easing){case"reverse":X=$-X;break;case"full":X=c.currentStaggerTime}const Ze=o.currentTimeline;X&&Ze.delayNextStep(X);const st=Ze.currentTime;Da(this,r.animation,o),o.previousNode=r,c.currentStaggerTime=p.currentTime-st+(p.startTime-c.currentTimeline.startTime)}}const M_={};class R_{constructor(r,o,c,p,w,A,$,X){this._driver=r,this.element=o,this.subInstructions=c,this._enterClassName=p,this._leaveClassName=w,this.errors=A,this.timelines=$,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=M_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=X||new x_(this._driver,o,0),$.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,o){if(!r)return;const c=r;let p=this.options;null!=c.duration&&(p.duration=ad(c.duration)),null!=c.delay&&(p.delay=ad(c.delay));const w=c.params;if(w){let A=p.params;A||(A=this.options.params={}),Object.keys(w).forEach($=>{(!o||!A.hasOwnProperty($))&&(A[$]=sm(w[$],A,this.errors))})}}_copyOptions(){const r={};if(this.options){const o=this.options.params;if(o){const c=r.params={};Object.keys(o).forEach(p=>{c[p]=o[p]})}}return r}createSubContext(r=null,o,c){const p=o||this.element,w=new R_(this._driver,p,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(p,c||0));return w.previousNode=this.previousNode,w.currentAnimateTimings=this.currentAnimateTimings,w.options=this._copyOptions(),w.updateOptions(r),w.currentQueryIndex=this.currentQueryIndex,w.currentQueryTotal=this.currentQueryTotal,w.parentContext=this,this.subContextCount++,w}transformIntoNewTimeline(r){return this.previousNode=M_,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,o,c){const p={duration:null!=o?o:r.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+r.delay,easing:""},w=new Uw(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,p,r.stretchStartingKeyframe);return this.timelines.push(w),p}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,o,c,p,w,A){let $=[];if(p&&$.push(this.element),r.length>0){r=(r=r.replace(Bw,"."+this._enterClassName)).replace(Vw,"."+this._leaveClassName);let ue=this._driver.query(this.element,r,1!=c);0!==c&&(ue=c<0?ue.slice(ue.length+c,ue.length):ue.slice(0,c)),$.push(...ue)}return!w&&0==$.length&&A.push(function tt(u){return new m.vHH(3014,!1)}()),$}}class x_{constructor(r,o,c,p){this._driver=r,this.element=o,this.startTime=c,this._elementTimelineStylesLookup=p,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+r),o&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,o){return this.applyStylesToKeyframe(),new x_(this._driver,r,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,o){this._localTimelineStyles.set(r,o),this._globalTimelineStyles.set(r,o),this._styleSummary.set(r,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[o,c]of this._globalTimelineStyles)this._backFill.set(o,c||Hu),this._currentKeyframe.set(o,Hu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,o,c,p){o&&this._previousKeyframe.set("easing",o);const w=p&&p.params||{},A=function jw(u,r){const o=new Map;let c;return u.forEach(p=>{if("*"===p){c=c||r.keys();for(let w of c)o.set(w,Hu)}else yc(p,o)}),o}(r,this._globalTimelineStyles);for(let[X,ue]of A){const Ze=sm(ue,w,c);var $;this._pendingStyles.set(X,Ze),this._localTimelineStyles.has(X)||this._backFill.set(X,null!==($=this._globalTimelineStyles.get(X))&&void 0!==$?$:Hu),this._updateStyle(X,Ze)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((r,o)=>{this._currentKeyframe.set(o,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,r)}))}snapshotCurrentStyles(){for(let[r,o]of this._localTimelineStyles)this._pendingStyles.set(r,o),this._updateStyle(r,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const r=[];for(let o in this._currentKeyframe)r.push(o);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((o,c)=>{const p=this._styleSummary.get(c);(!p||o.time>p.time)&&this._updateStyle(c,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const r=new Set,o=new Set,c=1===this._keyframes.size&&0===this.duration;let p=[];this._keyframes.forEach(($,X)=>{const ue=yc($,new Map,this._backFill);ue.forEach((Ze,st)=>{Ze===tm?r.add(st):Ze===Hu&&o.add(st)}),c||ue.set("offset",X/this.duration),p.push(ue)});const w=r.size?Fy(r.values()):[],A=o.size?Fy(o.values()):[];if(c){const $=p[0],X=new Map($);$.set("offset",0),X.set("offset",1),p=[$,X]}return Z0(this.element,p,w,A,this.duration,this.startTime,this.easing,!1)}}class Uw extends x_{constructor(r,o,c,p,w,A,$=!1){super(r,o,A.delay),this.keyframes=c,this.preStyleProps=p,this.postStyleProps=w,this._stretchStartingKeyframe=$,this.timings={duration:A.duration,delay:A.delay,easing:A.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:o,duration:c,easing:p}=this.timings;if(this._stretchStartingKeyframe&&o){const w=[],A=c+o,$=o/A,X=yc(r[0]);X.set("offset",0),w.push(X);const ue=yc(r[0]);ue.set("offset",am($)),w.push(ue);const Ze=r.length-1;for(let st=1;st<=Ze;st++){let yt=yc(r[st]);const $t=yt.get("offset");yt.set("offset",am((o+$t*c)/A)),w.push(yt)}c=A,o=0,p="",r=w}return Z0(this.element,r,this.preStyleProps,this.postStyleProps,c,o,p,!0)}}function am(u,r=3){const o=Math.pow(10,r-1);return Math.round(u*o)/o}class X0{}const Gw=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class HE extends X0{normalizePropertyName(r,o){return b_(r)}normalizeStyleValue(r,o,c,p){let w="";const A=c.toString().trim();if(Gw.has(o)&&0!==c&&"0"!==c)if("number"==typeof c)w="px";else{const $=c.match(/^[+-]?[\d\.]+([a-z]*)$/);$&&0==$[1].length&&p.push(function v_(u,r){return new m.vHH(3005,!1)}())}return A+w}}function zE(u,r,o,c,p,w,A,$,X,ue,Ze,st,yt){return{type:0,element:u,triggerName:r,isRemovalTransition:p,fromState:o,fromStyles:w,toState:c,toStyles:A,timelines:$,queriedElements:X,preStyleProps:ue,postStyleProps:Ze,totalTime:st,errors:yt}}const Vy={};class GE{constructor(r,o,c){this._triggerName=r,this.ast=o,this._stateStyles=c}match(r,o,c,p){return function WE(u,r,o,c,p){return u.some(w=>w(r,o,c,p))}(this.ast.matchers,r,o,c,p)}buildStyles(r,o,c){let p=this._stateStyles.get("*");return void 0!==r&&(p=this._stateStyles.get(null==r?void 0:r.toString())||p),p?p.buildStyles(o,c):new Map}build(r,o,c,p,w,A,$,X,ue,Ze){var st;const yt=[],$t=this.ast.options&&this.ast.options.params||Vy,ln=this.buildStyles(c,$&&$.params||Vy,yt),xn=X&&X.params||Vy,Rr=this.buildStyles(p,xn,yt),Zr=new Set,Di=new Map,Mi=new Map,Ol="void"===p,fa={params:Kw(xn,$t),delay:null===(st=this.ast.options)||void 0===st?void 0:st.delay},sa=Ze?[]:Q0(r,o,this.ast.animation,w,A,ln,Rr,fa,ue,yt);let pa=0;if(sa.forEach(cu=>{pa=Math.max(cu.duration+cu.delay,pa)}),yt.length)return zE(o,this._triggerName,c,p,Ol,ln,Rr,[],[],Di,Mi,pa,yt);sa.forEach(cu=>{const Gy=cu.element,Wy=lu(Di,Gy,new Set);cu.preStyleProps.forEach(um=>Wy.add(um));const lm=lu(Mi,Gy,new Set);cu.postStyleProps.forEach(um=>lm.add(um)),Gy!==o&&Zr.add(Gy)});const pf=Fy(Zr.values());return zE(o,this._triggerName,c,p,Ol,ln,Rr,sa,pf,Di,Mi,pa)}}function Kw(u,r){const o=ky(r);for(const c in u)u.hasOwnProperty(c)&&null!=u[c]&&(o[c]=u[c]);return o}class qw{constructor(r,o,c){this.styles=r,this.defaultParams=o,this.normalizer=c}buildStyles(r,o){const c=new Map,p=ky(this.defaultParams);return Object.keys(r).forEach(w=>{const A=r[w];null!==A&&(p[w]=A)}),this.styles.styles.forEach(w=>{"string"!=typeof w&&w.forEach((A,$)=>{A&&(A=sm(A,p,o));const X=this.normalizer.normalizePropertyName($,o);A=this.normalizer.normalizeStyleValue($,X,A,o),c.set($,A)})}),c}}class J0{constructor(r,o,c){this.name=r,this.ast=o,this._normalizer=c,this.transitionFactories=[],this.states=new Map,o.states.forEach(p=>{this.states.set(p.name,new qw(p.style,p.options&&p.options.params||{},c))}),eE(this.states,"true","1"),eE(this.states,"false","0"),o.transitions.forEach(p=>{this.transitionFactories.push(new GE(r,p,this.states))}),this.fallbackTransition=function Zw(u,r,o){return new GE(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(A,$)=>!0],options:null,queryCount:0,depCount:0},r)}(r,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,o,c,p){return this.transitionFactories.find(A=>A.match(r,o,c,p))||null}matchStyles(r,o,c){return this.fallbackTransition.buildStyles(r,o,c)}}function eE(u,r,o){u.has(r)?u.has(o)||u.set(o,u.get(r)):u.has(o)&&u.set(r,u.get(o))}const Qw=new A_;class Xw{constructor(r,o,c){this.bodyNode=r,this._driver=o,this._normalizer=c,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,o){const c=[],w=q0(this._driver,o,c,[]);if(c.length)throw function Oi(u){return new m.vHH(3503,!1)}();this._animations.set(r,w)}_buildPlayer(r,o,c){const p=r.element,w=ME(0,this._normalizer,0,r.keyframes,o,c);return this._driver.animate(p,w,r.duration,r.delay,r.easing,[],!0)}create(r,o,c={}){const p=[],w=this._animations.get(r);let A;const $=new Map;if(w?(A=Q0(this._driver,o,w,H0,nh,new Map,new Map,c,Qw,p),A.forEach(Ze=>{const st=lu($,Ze.element,new Map);Ze.postStyleProps.forEach(yt=>st.set(yt,null))})):(p.push(function gi(){return new m.vHH(3300,!1)}()),A=[]),p.length)throw function Fo(u){return new m.vHH(3504,!1)}();$.forEach((Ze,st)=>{Ze.forEach((yt,$t)=>{Ze.set($t,this._driver.computeStyle(st,$t,Hu))})});const ue=cf(A.map(Ze=>{const st=$.get(Ze.element);return this._buildPlayer(Ze,new Map,st)}));return this._playersById.set(r,ue),ue.onDestroy(()=>this.destroy(r)),this.players.push(ue),ue}destroy(r){const o=this._getPlayer(r);o.destroy(),this._playersById.delete(r);const c=this.players.indexOf(o);c>=0&&this.players.splice(c,1)}_getPlayer(r){const o=this._playersById.get(r);if(!o)throw function wo(u){return new m.vHH(3301,!1)}();return o}listen(r,o,c,p){const w=L0(o,"","","");return k0(this._getPlayer(r),c,w,p),()=>{}}command(r,o,c,p){if("register"==c)return void this.register(r,p[0]);if("create"==c)return void this.create(r,o,p[0]||{});const w=this._getPlayer(r);switch(c){case"play":w.play();break;case"pause":w.pause();break;case"reset":w.reset();break;case"restart":w.restart();break;case"finish":w.finish();break;case"init":w.init();break;case"setPosition":w.setPosition(parseFloat(p[0]));break;case"destroy":this.destroy(r)}}}const KE="ng-animate-queued",tE="ng-animate-disabled",qE=[],nE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zu="__ng_removed";class P_{get params(){return this.options.params}constructor(r,o=""){this.namespaceId=o;const c=r&&r.hasOwnProperty("value");if(this.value=function sE(u){return null!=u?u:null}(c?r.value:r),c){const w=ky(r);delete w.value,this.options=w}else this.options={};this.options.params||(this.options.params={})}absorbOptions(r){const o=r.params;if(o){const c=this.options.params;Object.keys(o).forEach(p=>{null==c[p]&&(c[p]=o[p])})}}}const Uy="void",rE=new P_(Uy);class iI{constructor(r,o,c){this.id=r,this.hostElement=o,this._engine=c,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,Sa(o,this._hostClassName)}listen(r,o,c,p){if(!this._triggers.has(o))throw function Fs(u,r){return new m.vHH(3302,!1)}();if(null==c||0==c.length)throw function za(u){return new m.vHH(3303,!1)}();if(!function sI(u){return"start"==u||"done"==u}(c))throw function th(u,r){return new m.vHH(3400,!1)}();const w=lu(this._elementListeners,r,[]),A={name:o,phase:c,callback:p};w.push(A);const $=lu(this._engine.statesByElement,r,new Map);return $.has(o)||(Sa(r,z0),Sa(r,z0+"-"+o),$.set(o,rE)),()=>{this._engine.afterFlush(()=>{const X=w.indexOf(A);X>=0&&w.splice(X,1),this._triggers.has(o)||$.delete(o)})}}register(r,o){return!this._triggers.has(r)&&(this._triggers.set(r,o),!0)}_getTrigger(r){const o=this._triggers.get(r);if(!o)throw function __(u){return new m.vHH(3401,!1)}();return o}trigger(r,o,c,p=!0){const w=this._getTrigger(o),A=new jy(this.id,o,r);let $=this._engine.statesByElement.get(r);$||(Sa(r,z0),Sa(r,z0+"-"+o),this._engine.statesByElement.set(r,$=new Map));let X=$.get(o);const ue=new P_(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&X&&ue.absorbOptions(X.options),$.set(o,ue),X||(X=rE),ue.value!==Uy&&X.value===ue.value){if(!function aE(u,r){const o=Object.keys(u),c=Object.keys(r);if(o.length!=c.length)return!1;for(let p=0;p<o.length;p++){const w=o[p];if(!r.hasOwnProperty(w)||u[w]!==r[w])return!1}return!0}(X.params,ue.params)){const ln=[],xn=w.matchStyles(X.value,X.params,ln),Rr=w.matchStyles(ue.value,ue.params,ln);ln.length?this._engine.reportError(ln):this._engine.afterFlush(()=>{Ms(r,xn),uu(r,Rr)})}return}const yt=lu(this._engine.playersByElement,r,[]);yt.forEach(ln=>{ln.namespaceId==this.id&&ln.triggerName==o&&ln.queued&&ln.destroy()});let $t=w.matchTransition(X.value,ue.value,r,ue.params),Gt=!1;if(!$t){if(!p)return;$t=w.fallbackTransition,Gt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:o,transition:$t,fromState:X,toState:ue,player:A,isFallbackTransition:Gt}),Gt||(Sa(r,KE),A.onStart(()=>{bp(r,KE)})),A.onDone(()=>{let ln=this.players.indexOf(A);ln>=0&&this.players.splice(ln,1);const xn=this._engine.playersByElement.get(r);if(xn){let Rr=xn.indexOf(A);Rr>=0&&xn.splice(Rr,1)}}),this.players.push(A),yt.push(A),A}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(o=>o.delete(r)),this._elementListeners.forEach((o,c)=>{this._elementListeners.set(c,o.filter(p=>p.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);const o=this._engine.playersByElement.get(r);o&&(o.forEach(c=>c.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,o){const c=this._engine.driver.query(r,rm,!0);c.forEach(p=>{if(p[zu])return;const w=this._engine.fetchNamespacesByElement(p);w.size?w.forEach(A=>A.triggerLeaveAnimation(p,o,!1,!0)):this.clearElementCache(p)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(p=>this.clearElementCache(p)))}triggerLeaveAnimation(r,o,c,p){const w=this._engine.statesByElement.get(r),A=new Map;if(w){const $=[];if(w.forEach((X,ue)=>{if(A.set(ue,X.value),this._triggers.has(ue)){const Ze=this.trigger(r,ue,Uy,p);Ze&&$.push(Ze)}}),$.length)return this._engine.markElementAsRemoved(this.id,r,!0,o,A),c&&cf($).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){const o=this._elementListeners.get(r),c=this._engine.statesByElement.get(r);if(o&&c){const p=new Set;o.forEach(w=>{const A=w.name;if(p.has(A))return;p.add(A);const X=this._triggers.get(A).fallbackTransition,ue=c.get(A)||rE,Ze=new P_(Uy),st=new jy(this.id,A,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:A,transition:X,fromState:ue,toState:Ze,player:st,isFallbackTransition:!0})})}}removeNode(r,o){const c=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,o),this.triggerLeaveAnimation(r,o,!0))return;let p=!1;if(c.totalAnimations){const w=c.players.length?c.playersByQueriedElement.get(r):[];if(w&&w.length)p=!0;else{let A=r;for(;A=A.parentNode;)if(c.statesByElement.get(A)){p=!0;break}}}if(this.prepareLeaveAnimationListeners(r),p)c.markElementAsRemoved(this.id,r,!1,o);else{const w=r[zu];(!w||w===nE)&&(c.afterFlush(()=>this.clearElementCache(r)),c.destroyInnerAnimations(r),c._onRemovalComplete(r,o))}}insertNode(r,o){Sa(r,this._hostClassName)}drainQueuedTransitions(r){const o=[];return this._queue.forEach(c=>{const p=c.player;if(p.destroyed)return;const w=c.element,A=this._elementListeners.get(w);A&&A.forEach($=>{if($.name==c.triggerName){const X=L0(w,c.triggerName,c.fromState.value,c.toState.value);X._data=r,k0(c.player,$.phase,X,$.callback)}}),p.markedForDestroy?this._engine.afterFlush(()=>{p.destroy()}):o.push(c)}),this._queue=[],o.sort((c,p)=>{const w=c.transition.ast.depCount,A=p.transition.ast.depCount;return 0==w||0==A?w-A:this._engine.driver.containsElement(c.element,p.element)?1:-1})}destroy(r){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}elementContainsData(r){let o=!1;return this._elementListeners.has(r)&&(o=!0),o=!!this._queue.find(c=>c.element===r)||o,o}}class iE{_onRemovalComplete(r,o){this.onRemovalComplete(r,o)}constructor(r,o,c){this.bodyNode=r,this.driver=o,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(p,w)=>{}}get queuedPlayers(){const r=[];return this._namespaceList.forEach(o=>{o.players.forEach(c=>{c.queued&&r.push(c)})}),r}createNamespace(r,o){const c=new iI(r,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(c,o):(this.newHostElements.set(o,c),this.collectEnterElement(o)),this._namespaceLookup[r]=c}_balanceNamespaceList(r,o){const c=this._namespaceList,p=this.namespacesByHostElement;if(c.length-1>=0){let A=!1,$=this.driver.getParentElement(o);for(;$;){const X=p.get($);if(X){const ue=c.indexOf(X);c.splice(ue+1,0,r),A=!0;break}$=this.driver.getParentElement($)}A||c.unshift(r)}else c.push(r);return p.set(o,r),r}register(r,o){let c=this._namespaceLookup[r];return c||(c=this.createNamespace(r,o)),c}registerTrigger(r,o,c){let p=this._namespaceLookup[r];p&&p.register(o,c)&&this.totalAnimations++}destroy(r,o){if(!r)return;const c=this._fetchNamespace(r);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[r];const p=this._namespaceList.indexOf(c);p>=0&&this._namespaceList.splice(p,1)}),this.afterFlushAnimationsDone(()=>c.destroy(o))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){const o=new Set,c=this.statesByElement.get(r);if(c)for(let p of c.values())if(p.namespaceId){const w=this._fetchNamespace(p.namespaceId);w&&o.add(w)}return o}trigger(r,o,c,p){if(O_(o)){const w=this._fetchNamespace(r);if(w)return w.trigger(o,c,p),!0}return!1}insertNode(r,o,c,p){if(!O_(o))return;const w=o[zu];if(w&&w.setForRemoval){w.setForRemoval=!1,w.setForMove=!0;const A=this.collectedLeaveElements.indexOf(o);A>=0&&this.collectedLeaveElements.splice(A,1)}if(r){const A=this._fetchNamespace(r);A&&A.insertNode(o,c)}p&&this.collectEnterElement(o)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,o){o?this.disabledNodes.has(r)||(this.disabledNodes.add(r),Sa(r,tE)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),bp(r,tE))}removeNode(r,o,c,p){if(O_(o)){const w=r?this._fetchNamespace(r):null;if(w?w.removeNode(o,p):this.markElementAsRemoved(r,o,!1,p),c){const A=this.namespacesByHostElement.get(o);A&&A.id!==r&&A.removeNode(o,p)}}else this._onRemovalComplete(o,p)}markElementAsRemoved(r,o,c,p,w){this.collectedLeaveElements.push(o),o[zu]={namespaceId:r,setForRemoval:p,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:w}}listen(r,o,c,p,w){return O_(o)?this._fetchNamespace(r).listen(o,c,p,w):()=>{}}_buildInstruction(r,o,c,p,w){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,c,p,r.fromState.options,r.toState.options,o,w)}destroyInnerAnimations(r){let o=this.driver.query(r,rm,!0);o.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(r,w_,!0),o.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(r){const o=this.playersByElement.get(r);o&&o.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(r){const o=this.playersByQueriedElement.get(r);o&&o.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return cf(this.players).onDone(()=>r());r()})}processLeaveNode(r){var o;const c=r[zu];if(c&&c.setForRemoval){if(r[zu]=nE,c.namespaceId){this.destroyInnerAnimations(r);const p=this._fetchNamespace(c.namespaceId);p&&p.clearElementCache(r)}this._onRemovalComplete(r,c.setForRemoval)}null!==(o=r.classList)&&void 0!==o&&o.contains(tE)&&this.markElementAsDisabled(r,!1),this.driver.query(r,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(r=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,p)=>this._balanceNamespaceList(c,p)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)Sa(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{o=this._flushAnimations(c,r)}finally{for(let p=0;p<c.length;p++)c[p]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],o.length?cf(o).onDone(()=>{c.forEach(p=>p())}):c.forEach(p=>p())}}reportError(r){throw function Ew(u){return new m.vHH(3402,!1)}()}_flushAnimations(r,o){const c=new A_,p=[],w=new Map,A=[],$=new Map,X=new Map,ue=new Map,Ze=new Set;this.disabledNodes.forEach(mr=>{Ze.add(mr);const Sr=this.driver.query(mr,".ng-animate-queued",!0);for(let zr=0;zr<Sr.length;zr++)Ze.add(Sr[zr])});const st=this.bodyNode,yt=Array.from(this.statesByElement.keys()),$t=oE(yt,this.collectedEnterElements),Gt=new Map;let ln=0;$t.forEach((mr,Sr)=>{const zr=H0+ln++;Gt.set(Sr,zr),mr.forEach(Ni=>Sa(Ni,zr))});const xn=[],Rr=new Set,Zr=new Set;for(let mr=0;mr<this.collectedLeaveElements.length;mr++){const Sr=this.collectedLeaveElements[mr],zr=Sr[zu];zr&&zr.setForRemoval&&(xn.push(Sr),Rr.add(Sr),zr.hasAnimation?this.driver.query(Sr,".ng-star-inserted",!0).forEach(Ni=>Rr.add(Ni)):Zr.add(Sr))}const Di=new Map,Mi=oE(yt,Array.from(Rr));Mi.forEach((mr,Sr)=>{const zr=nh+ln++;Di.set(Sr,zr),mr.forEach(Ni=>Sa(Ni,zr))}),r.push(()=>{$t.forEach((mr,Sr)=>{const zr=Gt.get(Sr);mr.forEach(Ni=>bp(Ni,zr))}),Mi.forEach((mr,Sr)=>{const zr=Di.get(Sr);mr.forEach(Ni=>bp(Ni,zr))}),xn.forEach(mr=>{this.processLeaveNode(mr)})});const Ol=[],fa=[];for(let mr=this._namespaceList.length-1;mr>=0;mr--)this._namespaceList[mr].drainQueuedTransitions(o).forEach(zr=>{const Ni=zr.player,Io=zr.element;if(Ol.push(Ni),this.collectedEnterElements.length){const Ga=Io[zu];if(Ga&&Ga.setForMove){if(Ga.previousTriggersValues&&Ga.previousTriggersValues.has(zr.triggerName)){const Dp=Ga.previousTriggersValues.get(zr.triggerName),Nl=this.statesByElement.get(zr.element);if(Nl&&Nl.has(zr.triggerName)){const cm=Nl.get(zr.triggerName);cm.value=Dp,Nl.set(zr.triggerName,cm)}}return void Ni.destroy()}}const vc=!st||!this.driver.containsElement(st,Io),ml=Di.get(Io),rh=Gt.get(Io),Co=this._buildInstruction(zr,c,rh,ml,vc);if(Co.errors&&Co.errors.length)return void fa.push(Co);if(vc)return Ni.onStart(()=>Ms(Io,Co.fromStyles)),Ni.onDestroy(()=>uu(Io,Co.toStyles)),void p.push(Ni);if(zr.isFallbackTransition)return Ni.onStart(()=>Ms(Io,Co.fromStyles)),Ni.onDestroy(()=>uu(Io,Co.toStyles)),void p.push(Ni);const dE=[];Co.timelines.forEach(Ga=>{Ga.stretchStartingKeyframe=!0,this.disabledNodes.has(Ga.element)||dE.push(Ga)}),Co.timelines=dE,c.append(Io,Co.timelines),A.push({instruction:Co,player:Ni,element:Io}),Co.queriedElements.forEach(Ga=>lu($,Ga,[]).push(Ni)),Co.preStyleProps.forEach((Ga,Dp)=>{if(Ga.size){let Nl=X.get(Dp);Nl||X.set(Dp,Nl=new Set),Ga.forEach((cm,B_)=>Nl.add(B_))}}),Co.postStyleProps.forEach((Ga,Dp)=>{let Nl=ue.get(Dp);Nl||ue.set(Dp,Nl=new Set),Ga.forEach((cm,B_)=>Nl.add(B_))})});if(fa.length){const mr=[];fa.forEach(Sr=>{mr.push(function ww(u,r){return new m.vHH(3505,!1)}())}),Ol.forEach(Sr=>Sr.destroy()),this.reportError(mr)}const sa=new Map,pa=new Map;A.forEach(mr=>{const Sr=mr.element;c.has(Sr)&&(pa.set(Sr,Sr),this._beforeAnimationBuild(mr.player.namespaceId,mr.instruction,sa))}),p.forEach(mr=>{const Sr=mr.element;this._getPreviousPlayers(Sr,!1,mr.namespaceId,mr.triggerName,null).forEach(Ni=>{lu(sa,Sr,[]).push(Ni),Ni.destroy()})});const pf=xn.filter(mr=>QE(mr,X,ue)),cu=new Map;ZE(cu,this.driver,Zr,ue,Hu).forEach(mr=>{QE(mr,X,ue)&&pf.push(mr)});const Wy=new Map;$t.forEach((mr,Sr)=>{ZE(Wy,this.driver,new Set(mr),X,tm)}),pf.forEach(mr=>{var Sr,zr;const Ni=cu.get(mr),Io=Wy.get(mr);cu.set(mr,new Map([...Array.from(null!==(Sr=null==Ni?void 0:Ni.entries())&&void 0!==Sr?Sr:[]),...Array.from(null!==(zr=null==Io?void 0:Io.entries())&&void 0!==zr?zr:[])]))});const lm=[],um=[],cw={};A.forEach(mr=>{const{element:Sr,player:zr,instruction:Ni}=mr;if(c.has(Sr)){if(Ze.has(Sr))return zr.onDestroy(()=>uu(Sr,Ni.toStyles)),zr.disabled=!0,zr.overrideTotalTime(Ni.totalTime),void p.push(zr);let Io=cw;if(pa.size>1){let ml=Sr;const rh=[];for(;ml=ml.parentNode;){const Co=pa.get(ml);if(Co){Io=Co;break}rh.push(ml)}rh.forEach(Co=>pa.set(Co,Io))}const vc=this._buildAnimation(zr.namespaceId,Ni,sa,w,Wy,cu);if(zr.setRealPlayer(vc),Io===cw)lm.push(zr);else{const ml=this.playersByElement.get(Io);ml&&ml.length&&(zr.parentPlayer=cf(ml)),p.push(zr)}}else Ms(Sr,Ni.fromStyles),zr.onDestroy(()=>uu(Sr,Ni.toStyles)),um.push(zr),Ze.has(Sr)&&p.push(zr)}),um.forEach(mr=>{const Sr=w.get(mr.element);if(Sr&&Sr.length){const zr=cf(Sr);mr.setRealPlayer(zr)}}),p.forEach(mr=>{mr.parentPlayer?mr.syncPlayerEvents(mr.parentPlayer):mr.destroy()});for(let mr=0;mr<xn.length;mr++){const Sr=xn[mr],zr=Sr[zu];if(bp(Sr,nh),zr&&zr.hasAnimation)continue;let Ni=[];if($.size){let vc=$.get(Sr);vc&&vc.length&&Ni.push(...vc);let ml=this.driver.query(Sr,w_,!0);for(let rh=0;rh<ml.length;rh++){let Co=$.get(ml[rh]);Co&&Co.length&&Ni.push(...Co)}}const Io=Ni.filter(vc=>!vc.destroyed);Io.length?oI(this,Sr,Io):this.processLeaveNode(Sr)}return xn.length=0,lm.forEach(mr=>{this.players.push(mr),mr.onDone(()=>{mr.destroy();const Sr=this.players.indexOf(mr);this.players.splice(Sr,1)}),mr.play()}),lm}elementContainsData(r,o){let c=!1;const p=o[zu];return p&&p.setForRemoval&&(c=!0),this.playersByElement.has(o)&&(c=!0),this.playersByQueriedElement.has(o)&&(c=!0),this.statesByElement.has(o)&&(c=!0),this._fetchNamespace(r).elementContainsData(o)||c}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,o,c,p,w){let A=[];if(o){const $=this.playersByQueriedElement.get(r);$&&(A=$)}else{const $=this.playersByElement.get(r);if($){const X=!w||w==Uy;$.forEach(ue=>{ue.queued||!X&&ue.triggerName!=p||A.push(ue)})}}return(c||p)&&(A=A.filter($=>!(c&&c!=$.namespaceId||p&&p!=$.triggerName))),A}_beforeAnimationBuild(r,o,c){const w=o.element,A=o.isRemovalTransition?void 0:r,$=o.isRemovalTransition?void 0:o.triggerName;for(const X of o.timelines){const ue=X.element,Ze=ue!==w,st=lu(c,ue,[]);this._getPreviousPlayers(ue,Ze,A,$,o.toState).forEach($t=>{const Gt=$t.getRealPlayer();Gt.beforeDestroy&&Gt.beforeDestroy(),$t.destroy(),st.push($t)})}Ms(w,o.fromStyles)}_buildAnimation(r,o,c,p,w,A){const $=o.triggerName,X=o.element,ue=[],Ze=new Set,st=new Set,yt=o.timelines.map(Gt=>{const ln=Gt.element;Ze.add(ln);const xn=ln[zu];if(xn&&xn.removedBeforeQueried)return new ho(Gt.duration,Gt.delay);const Rr=ln!==X,Zr=function QI(u){const r=[];return k_(u,r),r}((c.get(ln)||qE).map(sa=>sa.getRealPlayer())).filter(sa=>!!sa.element&&sa.element===ln),Di=w.get(ln),Mi=A.get(ln),Ol=ME(0,this._normalizer,0,Gt.keyframes,Di,Mi),fa=this._buildPlayer(Gt,Ol,Zr);if(Gt.subTimeline&&p&&st.add(ln),Rr){const sa=new jy(r,$,ln);sa.setRealPlayer(fa),ue.push(sa)}return fa});ue.forEach(Gt=>{lu(this.playersByQueriedElement,Gt.element,[]).push(Gt),Gt.onDone(()=>function YE(u,r,o){let c=u.get(r);if(c){if(c.length){const p=c.indexOf(o);c.splice(p,1)}0==c.length&&u.delete(r)}return c}(this.playersByQueriedElement,Gt.element,Gt))}),Ze.forEach(Gt=>Sa(Gt,Aw));const $t=cf(yt);return $t.onDestroy(()=>{Ze.forEach(Gt=>bp(Gt,Aw)),uu(X,o.toStyles)}),st.forEach(Gt=>{lu(p,Gt,[]).push($t)}),$t}_buildPlayer(r,o,c){return o.length>0?this.driver.animate(r.element,o,r.duration,r.delay,r.easing,c):new ho(r.duration,r.delay)}}class jy{constructor(r,o,c){this.namespaceId=r,this.triggerName=o,this.element=c,this._player=new ho,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((o,c)=>{o.forEach(p=>k0(r,c,void 0,p))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){const o=this._player;o.triggerCallback&&r.onStart(()=>o.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,o){lu(this._queuedCallbacks,r,[]).push(o)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){const o=this._player;o.triggerCallback&&o.triggerCallback(r)}}function O_(u){return u&&1===u.nodeType}function N_(u,r){const o=u.style.display;return u.style.display=null!=r?r:"none",o}function ZE(u,r,o,c,p){const w=[];o.forEach(X=>w.push(N_(X)));const A=[];c.forEach((X,ue)=>{const Ze=new Map;X.forEach(st=>{const yt=r.computeStyle(ue,st,p);Ze.set(st,yt),(!yt||0==yt.length)&&(ue[zu]=rI,A.push(ue))}),u.set(ue,Ze)});let $=0;return o.forEach(X=>N_(X,w[$++])),A}function oE(u,r){const o=new Map;if(u.forEach($=>o.set($,[])),0==r.length)return o;const c=1,p=new Set(r),w=new Map;function A($){if(!$)return c;let X=w.get($);if(X)return X;const ue=$.parentNode;return X=o.has(ue)?ue:p.has(ue)?c:A(ue),w.set($,X),X}return r.forEach($=>{const X=A($);X!==c&&o.get(X).push($)}),o}function Sa(u,r){var o;null===(o=u.classList)||void 0===o||o.add(r)}function bp(u,r){var o;null===(o=u.classList)||void 0===o||o.remove(r)}function oI(u,r,o){cf(o).onDone(()=>u.processLeaveNode(r))}function k_(u,r){for(let o=0;o<u.length;o++){const c=u[o];c instanceof Pl?k_(c.players,r):r.push(c)}}function QE(u,r,o){const c=o.get(u);if(!c)return!1;let p=r.get(u);return p?c.forEach(w=>p.add(w)):r.set(u,c),o.delete(u),!0}class Hy{constructor(r,o,c){this.bodyNode=r,this._driver=o,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(p,w)=>{},this._transitionEngine=new iE(r,o,c),this._timelineEngine=new Xw(r,o,c),this._transitionEngine.onRemovalComplete=(p,w)=>this.onRemovalComplete(p,w)}registerTrigger(r,o,c,p,w){const A=r+"-"+p;let $=this._triggerCache[A];if(!$){const X=[],Ze=q0(this._driver,w,X,[]);if(X.length)throw function Kn(u,r){return new m.vHH(3404,!1)}();$=function Yw(u,r,o){return new J0(u,r,o)}(p,Ze,this._normalizer),this._triggerCache[A]=$}this._transitionEngine.registerTrigger(o,p,$)}register(r,o){this._transitionEngine.register(r,o)}destroy(r,o){this._transitionEngine.destroy(r,o)}onInsert(r,o,c,p){this._transitionEngine.insertNode(r,o,c,p)}onRemove(r,o,c,p){this._transitionEngine.removeNode(r,o,p||!1,c)}disableAnimations(r,o){this._transitionEngine.markElementAsDisabled(r,o)}process(r,o,c,p){if("@"==c.charAt(0)){const[w,A]=RE(c);this._timelineEngine.command(w,o,A,p)}else this._transitionEngine.trigger(r,o,c,p)}listen(r,o,c,p,w){if("@"==c.charAt(0)){const[A,$]=RE(c);return this._timelineEngine.listen(A,o,$,w)}return this._transitionEngine.listen(r,o,c,p,w)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let aI=(()=>{class u{constructor(o,c,p){this._element=o,this._startStyles=c,this._endStyles=p,this._state=0;let w=u.initialStylesByElement.get(o);w||u.initialStylesByElement.set(o,w=new Map),this._initialStyles=w}start(){this._state<1&&(this._startStyles&&uu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(uu(this._element,this._initialStyles),this._endStyles&&(uu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(Ms(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ms(this._element,this._endStyles),this._endStyles=null),uu(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function F_(u){let r=null;return u.forEach((o,c)=>{(function lE(u){return"display"===u||"position"===u})(c)&&(r=r||new Map,r.set(c,o))}),r}class uE{constructor(r,o,c,p){this.element=r,this.keyframes=o,this.options=c,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){const o=[];return r.forEach(c=>{o.push(Object.fromEntries(c))}),o}_triggerWebAnimation(r,o,c){return r.animate(this._convertKeyframesToObject(o),c)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((c,p)=>{"offset"!==p&&r.set(p,this._finished?c:VE(this.element,p))}),this.currentSnapshot=r}triggerCallback(r){const o="start"===r?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class JE{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}matchesElement(r,o){return!1}containsElement(r,o){return V0(r,o)}getParentElement(r){return B0(r)}query(r,o,c){return U0(r,o,c)}computeStyle(r,o,c){return window.getComputedStyle(r)[o]}animate(r,o,c,p,w,A=[]){const X={duration:c,delay:p,fill:0==p?"both":"forwards"};w&&(X.easing=w);const ue=new Map,Ze=A.filter($t=>$t instanceof uE);(function Rw(u,r){return 0===u||0===r})(c,p)&&Ze.forEach($t=>{$t.currentSnapshot.forEach((Gt,ln)=>ue.set(ln,Gt))});let st=function im(u){return u.length?u[0]instanceof Map?u:u.map(r=>kE(r)):[]}(o).map($t=>yc($t));st=function xw(u,r,o){if(o.size&&r.length){let c=r[0],p=[];if(o.forEach((w,A)=>{c.has(A)||p.push(A),c.set(A,w)}),p.length)for(let w=1;w<r.length;w++){let A=r[w];p.forEach($=>A.set($,VE(u,$)))}}return r}(r,st,ue);const yt=function XE(u,r){let o=null,c=null;return Array.isArray(r)&&r.length?(o=F_(r[0]),r.length>1&&(c=F_(r[r.length-1]))):r instanceof Map&&(o=F_(r)),o||c?new aI(u,o,c):null}(r,st);return new uE(r,st,X,yt)}}let ew=(()=>{class u extends Ip{constructor(o,c){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(c.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(o){const c=this._nextAnimationId.toString();this._nextAnimationId++;const p=Array.isArray(o)?f_(o):o;return nw(this._renderer,null,c,"register",[p]),new tw(c,this._renderer)}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(m.FYo),m.LFG(Ti.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class tw extends DE{constructor(r,o){super(),this._id=r,this._renderer=o}create(r,o){return new lI(this._id,r,o||{},this._renderer)}}class lI{constructor(r,o,c,p){this.id=r,this.element=o,this._renderer=p,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(r,o){return this._renderer.listen(this.element,`@@${this.id}:${r}`,o)}_command(r,...o){return nw(this._renderer,this.element,this.id,r,o)}onDone(r){this._listen("done",r)}onStart(r){this._listen("start",r)}onDestroy(r){this._listen("destroy",r)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(r){this._command("setPosition",r)}getPosition(){var r,o;return null!==(r=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==r?r:0}}function nw(u,r,o,c,p){return u.setProperty(r,`@@${o}:${c}`,p)}const rw="@.disabled";let iw=(()=>{class u{constructor(o,c,p){this.delegate=o,this.engine=c,this._zone=p,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(w,A)=>{const $=null==A?void 0:A.parentNode(w);$&&A.removeChild($,w)}}createRenderer(o,c){const w=this.delegate.createRenderer(o,c);if(!(o&&c&&c.data&&c.data.animation)){let Ze=this._rendererCache.get(w);return Ze||(Ze=new uI("",w,this.engine,()=>this._rendererCache.delete(w)),this._rendererCache.set(w,Ze)),Ze}const A=c.id,$=c.id+"-"+this._currentId;this._currentId++,this.engine.register($,o);const X=Ze=>{Array.isArray(Ze)?Ze.forEach(X):this.engine.registerTrigger(A,$,o,Ze.name,Ze)};return c.data.animation.forEach(X),new sw(this,$,w,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,c,p){o>=0&&o<this._microtaskId?this._zone.run(()=>c(p)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(w=>{const[A,$]=w;A($)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,p]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(m.FYo),m.LFG(Hy),m.LFG(m.R0b))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class uI{constructor(r,o,c,p){this.namespaceId=r,this.delegate=o,this.engine=c,this._onDestroy=p,this.destroyNode=this.delegate.destroyNode?w=>o.destroyNode(w):null}get data(){return this.delegate.data}destroy(){var r;this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),null===(r=this._onDestroy)||void 0===r||r.call(this)}createElement(r,o){return this.delegate.createElement(r,o)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,o){this.delegate.appendChild(r,o),this.engine.onInsert(this.namespaceId,o,r,!1)}insertBefore(r,o,c,p=!0){this.delegate.insertBefore(r,o,c),this.engine.onInsert(this.namespaceId,o,r,p)}removeChild(r,o,c){this.engine.onRemove(this.namespaceId,o,this.delegate,c)}selectRootElement(r,o){return this.delegate.selectRootElement(r,o)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,o,c,p){this.delegate.setAttribute(r,o,c,p)}removeAttribute(r,o,c){this.delegate.removeAttribute(r,o,c)}addClass(r,o){this.delegate.addClass(r,o)}removeClass(r,o){this.delegate.removeClass(r,o)}setStyle(r,o,c,p){this.delegate.setStyle(r,o,c,p)}removeStyle(r,o,c){this.delegate.removeStyle(r,o,c)}setProperty(r,o,c){"@"==o.charAt(0)&&o==rw?this.disableAnimations(r,!!c):this.delegate.setProperty(r,o,c)}setValue(r,o){this.delegate.setValue(r,o)}listen(r,o,c){return this.delegate.listen(r,o,c)}disableAnimations(r,o){this.engine.disableAnimations(r,o)}}class sw extends uI{constructor(r,o,c,p,w){super(o,c,p,w),this.factory=r,this.namespaceId=o}setProperty(r,o,c){"@"==o.charAt(0)?"."==o.charAt(1)&&o==rw?this.disableAnimations(r,c=void 0===c||!!c):this.engine.process(this.namespaceId,r,o.slice(1),c):this.delegate.setProperty(r,o,c)}listen(r,o,c){if("@"==o.charAt(0)){const p=function cI(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(r);let w=o.slice(1),A="";return"@"!=w.charAt(0)&&([w,A]=function dI(u){const r=u.indexOf(".");return[u.substring(0,r),u.slice(r+1)]}(w)),this.engine.listen(this.namespaceId,p,w,A,$=>{this.factory.scheduleListenerCallback($._data||-1,c,$)})}return this.delegate.listen(r,o,c)}}const ow=[{provide:Ip,useClass:ew},{provide:X0,useFactory:function hI(){return new HE}},{provide:Hy,useClass:(()=>{class u extends Hy{constructor(o,c,p,w){super(o.body,c,p)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(Ti.K0),m.LFG(E_),m.LFG(X0),m.LFG(m.z2F))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:m.FYo,useFactory:function fI(u,r,o){return new iw(u,r,o)},deps:[y.se,Hy,m.R0b]}],cE=[{provide:E_,useFactory:()=>new JE},{provide:m.QbO,useValue:"BrowserAnimations"},...ow],aw=[{provide:E_,useClass:j0},{provide:m.QbO,useValue:"NoopAnimations"},...ow];let pI=(()=>{class u{static withConfig(o){return{ngModule:u,providers:o.disableAnimations?aw:cE}}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:cE,imports:[y.b2]}),u})(),gI=(()=>{class u{constructor(o){this.objFirebase=o}TraerUsuarios(){return this.usuariosFirebase=this.objFirebase.collection("usuarios"),this.usuariosFirebase.valueChanges()}}return u.\u0275fac=function(o){return new(o||u)(m.LFG(Mg.ST))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();var mI=L(2110),lw=L(5030),zy=L(7622);let uw=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=m.oAB({type:u,bootstrap:[os]}),u.\u0275inj=m.cJS({providers:[Ps,qs,ve.X1,zy.e,Mg.yb,gI,mI.O,{provide:le.wN,useClass:ve.r4}],imports:[y.b2,ve.Pc.forRoot(),Lo,lw.u5,Qi.hO.initializeApp(Do_firebase),Wi.ww,Z_,Ag,Mg.yb,pI,uf,lw.UX,(0,Re.hX)(()=>(0,Re.ZF)(Do_firebase)),vt(()=>He()),fi(()=>Hi())]}),u})();(0,m.G48)(),y.q6().bootstrapModule(uw).catch(u=>console.log(u))},2110:(pn,dt,L)=>{"use strict";L.d(dt,{O:()=>De});var y=L(5861),m=L(9260),le=L(2223),ve=L(1085);let De=(()=>{class Re{constructor(_e){this.objFirebase=_e,this.usuario=JSON.parse(sessionStorage.getItem("usuario"))}TraerFotosFeas(){return this.fotosFirebase=this.objFirebase.collection("feas"),this.fotosFirebase.valueChanges()}TraerFotosLindas(){return this.fotosFirebase=this.objFirebase.collection("lindas"),this.fotosFirebase.valueChanges()}GuardarData(_e,Be){var U=this;return(0,y.Z)(function*(){let we=U.objFirebase.createId(),je={id:we,nombre:_e.nombre,path:_e.path,usuario:_e.usuario,positivo:0,negativo:0};U.objFirebase.collection(Be).doc(we).set(je).then(ge=>{console.log(ge)}).catch(ge=>{console.log(ge)})})()}TraerUrl(_e){let Be;return m.Z.storage().ref().child(_e).getDownloadURL().then(U=>{Be=U,console.log(U)}).catch(U=>{console.log(U)}),Be}VotarNegativo(_e,Be){console.log(_e),_e.negativo++,this.objFirebase.collection(Be).doc(_e.id).update(_e).then(U=>{console.log(U)})}VotarPositivo(_e,Be){_e.positivo++,console.log(_e),this.objFirebase.collection(Be).doc(_e.id).update(_e).then(U=>{console.log(U)})}}return Re.\u0275fac=function(_e){return new(_e||Re)(le.LFG(ve.ST))},Re.\u0275prov=le.Yz7({token:Re,factory:Re.\u0275fac}),Re})()},1135:(pn,dt,L)=>{"use strict";L.d(dt,{X:()=>m});var y=L(7579);class m extends y.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const De=super._subscribe(ve);return!De.closed&&ve.next(this._value),De}getValue(){const{hasError:ve,thrownError:De,_value:Re}=this;if(ve)throw De;return this._throwIfClosed(),Re}next(ve){super.next(this._value=ve)}}},9751:(pn,dt,L)=>{"use strict";L.d(dt,{y:()=>_e});var y=L(930),m=L(727),le=L(8822),ve=L(9635),De=L(2416),Re=L(576),he=L(2806);let _e=(()=>{class je{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const qe=new je;return qe.source=this,qe.operator=Ue,qe}subscribe(Ue,qe,It){const Ae=function we(je){return je&&je instanceof y.Lv||function U(je){return je&&(0,Re.m)(je.next)&&(0,Re.m)(je.error)&&(0,Re.m)(je.complete)}(je)&&(0,m.Nn)(je)}(Ue)?Ue:new y.Hp(Ue,qe,It);return(0,he.x)(()=>{const{operator:Ce,source:ct}=this;Ae.add(Ce?Ce.call(Ae,ct):ct?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(qe){Ue.error(qe)}}forEach(Ue,qe){return new(qe=Be(qe))((It,Ae)=>{const Ce=new y.Hp({next:ct=>{try{Ue(ct)}catch(at){Ae(at),Ce.unsubscribe()}},error:Ae,complete:It});this.subscribe(Ce)})}_subscribe(Ue){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ue)}[le.L](){return this}pipe(...Ue){return(0,ve.U)(Ue)(this)}toPromise(Ue){return new(Ue=Be(Ue))((qe,It)=>{let Ae;this.subscribe(Ce=>Ae=Ce,Ce=>It(Ce),()=>qe(Ae))})}}return je.create=ge=>new je(ge),je})();function Be(je){var ge;return null!==(ge=null!=je?je:De.config.Promise)&&void 0!==ge?ge:Promise}},7579:(pn,dt,L)=>{"use strict";L.d(dt,{x:()=>he});var y=L(9751),m=L(727);const ve=(0,L(3888).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=L(8737),Re=L(2806);let he=(()=>{class Be extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const je=new _e(this,this);return je.operator=we,je}_throwIfClosed(){if(this.closed)throw new ve}next(we){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const je of this.currentObservers)je.next(we)}})}error(we){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:je}=this;for(;je.length;)je.shift().error(we)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:je,isStopped:ge,observers:Ue}=this;return je||ge?m.Lc:(this.currentObservers=null,Ue.push(we),new m.w0(()=>{this.currentObservers=null,(0,De.P)(Ue,we)}))}_checkFinalizedStatuses(we){const{hasError:je,thrownError:ge,isStopped:Ue}=this;je?we.error(ge):Ue&&we.complete()}asObservable(){const we=new y.y;return we.source=this,we}}return Be.create=(U,we)=>new _e(U,we),Be})();class _e extends he{constructor(U,we){super(),this.destination=U,this.source=we}next(U){var we,je;null===(je=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===je||je.call(we,U)}error(U){var we,je;null===(je=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===je||je.call(we,U)}complete(){var U,we;null===(we=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===we||we.call(U)}_subscribe(U){var we,je;return null!==(je=null===(we=this.source)||void 0===we?void 0:we.subscribe(U))&&void 0!==je?je:m.Lc}}},930:(pn,dt,L)=>{"use strict";L.d(dt,{Hp:()=>It,Lv:()=>je});var y=L(576),m=L(727),le=L(2416),ve=L(7849),De=L(5032);const Re=Be("C",void 0,void 0);function Be(ze,et,ft){return{kind:ze,value:et,error:ft}}var U=L(3410),we=L(2806);class je extends m.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,m.Nn)(et)&&et.add(this)):this.destination=at}static create(et,ft,vt){return new It(et,ft,vt)}next(et){this.isStopped?ct(function _e(ze){return Be("N",ze,void 0)}(et),this):this._next(et)}error(et){this.isStopped?ct(function he(ze){return Be("E",void 0,ze)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?ct(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ge=Function.prototype.bind;function Ue(ze,et){return ge.call(ze,et)}class qe{constructor(et){this.partialObserver=et}next(et){const{partialObserver:ft}=this;if(ft.next)try{ft.next(et)}catch(vt){Ae(vt)}}error(et){const{partialObserver:ft}=this;if(ft.error)try{ft.error(et)}catch(vt){Ae(vt)}else Ae(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(ft){Ae(ft)}}}class It extends je{constructor(et,ft,vt){let Ye;if(super(),(0,y.m)(et)||!et)Ye={next:null!=et?et:void 0,error:null!=ft?ft:void 0,complete:null!=vt?vt:void 0};else{let Le;this&&le.config.useDeprecatedNextContext?(Le=Object.create(et),Le.unsubscribe=()=>this.unsubscribe(),Ye={next:et.next&&Ue(et.next,Le),error:et.error&&Ue(et.error,Le),complete:et.complete&&Ue(et.complete,Le)}):Ye=et}this.destination=new qe(Ye)}}function Ae(ze){le.config.useDeprecatedSynchronousErrorHandling?(0,we.O)(ze):(0,ve.h)(ze)}function ct(ze,et){const{onStoppedNotification:ft}=le.config;ft&&U.z.setTimeout(()=>ft(ze,et))}const at={closed:!0,next:De.Z,error:function Ce(ze){throw ze},complete:De.Z}},727:(pn,dt,L)=>{"use strict";L.d(dt,{Lc:()=>Re,w0:()=>De,Nn:()=>he});var y=L(576);const le=(0,L(3888).d)(Be=>function(we){Be(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((je,ge)=>`${ge+1}) ${je.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var ve=L(8737);class De{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const Ue of we)Ue.remove(this);else we.remove(this);const{initialTeardown:je}=this;if((0,y.m)(je))try{je()}catch(Ue){U=Ue instanceof le?Ue.errors:[Ue]}const{_finalizers:ge}=this;if(ge){this._finalizers=null;for(const Ue of ge)try{_e(Ue)}catch(qe){U=null!=U?U:[],qe instanceof le?U=[...U,...qe.errors]:U.push(qe)}}if(U)throw new le(U)}}add(U){var we;if(U&&U!==this)if(this.closed)_e(U);else{if(U instanceof De){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(U)}}_hasParent(U){const{_parentage:we}=this;return we===U||Array.isArray(we)&&we.includes(U)}_addParent(U){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(U),we):we?[we,U]:U}_removeParent(U){const{_parentage:we}=this;we===U?this._parentage=null:Array.isArray(we)&&(0,ve.P)(we,U)}remove(U){const{_finalizers:we}=this;we&&(0,ve.P)(we,U),U instanceof De&&U._removeParent(this)}}De.EMPTY=(()=>{const Be=new De;return Be.closed=!0,Be})();const Re=De.EMPTY;function he(Be){return Be instanceof De||Be&&"closed"in Be&&(0,y.m)(Be.remove)&&(0,y.m)(Be.add)&&(0,y.m)(Be.unsubscribe)}function _e(Be){(0,y.m)(Be)?Be():Be.unsubscribe()}},2416:(pn,dt,L)=>{"use strict";L.d(dt,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(pn,dt,L)=>{"use strict";L.d(dt,{z:()=>De});var y=L(8189),le=L(7669),ve=L(8996);function De(...Re){return function m(){return(0,y.J)(1)}()((0,ve.D)(Re,(0,le.yG)(Re)))}},515:(pn,dt,L)=>{"use strict";L.d(dt,{E:()=>m});const m=new(L(9751).y)(De=>De.complete())},8996:(pn,dt,L)=>{"use strict";L.d(dt,{D:()=>et});var y=L(8421),m=L(5363),le=L(9468),Re=L(9751),_e=L(2202),Be=L(576),U=L(9672);function je(ft,vt){if(!ft)throw new Error("Iterable cannot be null");return new Re.y(Ye=>{(0,U.f)(Ye,vt,()=>{const Le=ft[Symbol.asyncIterator]();(0,U.f)(Ye,vt,()=>{Le.next().then(_t=>{_t.done?Ye.complete():Ye.next(_t.value)})},0,!0)})})}var ge=L(3670),Ue=L(8239),qe=L(1144),It=L(6495),Ae=L(2206),Ce=L(4532),ct=L(3260);function et(ft,vt){return vt?function ze(ft,vt){if(null!=ft){if((0,ge.c)(ft))return function ve(ft,vt){return(0,y.Xf)(ft).pipe((0,le.R)(vt),(0,m.Q)(vt))}(ft,vt);if((0,qe.z)(ft))return function he(ft,vt){return new Re.y(Ye=>{let Le=0;return vt.schedule(function(){Le===ft.length?Ye.complete():(Ye.next(ft[Le++]),Ye.closed||this.schedule())})})}(ft,vt);if((0,Ue.t)(ft))return function De(ft,vt){return(0,y.Xf)(ft).pipe((0,le.R)(vt),(0,m.Q)(vt))}(ft,vt);if((0,Ae.D)(ft))return je(ft,vt);if((0,It.T)(ft))return function we(ft,vt){return new Re.y(Ye=>{let Le;return(0,U.f)(Ye,vt,()=>{Le=ft[_e.h](),(0,U.f)(Ye,vt,()=>{let _t,nt;try{({value:_t,done:nt}=Le.next())}catch(pt){return void Ye.error(pt)}nt?Ye.complete():Ye.next(_t)},0,!0)}),()=>(0,Be.m)(null==Le?void 0:Le.return)&&Le.return()})}(ft,vt);if((0,ct.L)(ft))return function at(ft,vt){return je((0,ct.Q)(ft),vt)}(ft,vt)}throw(0,Ce.z)(ft)}(ft,vt):(0,y.Xf)(ft)}},4968:(pn,dt,L)=>{"use strict";L.d(dt,{R:()=>U});var y=L(8421),m=L(9751),le=L(5577),ve=L(1144),De=L(576),Re=L(3268);const he=["addListener","removeListener"],_e=["addEventListener","removeEventListener"],Be=["on","off"];function U(qe,It,Ae,Ce){if((0,De.m)(Ae)&&(Ce=Ae,Ae=void 0),Ce)return U(qe,It,Ae).pipe((0,Re.Z)(Ce));const[ct,at]=function Ue(qe){return(0,De.m)(qe.addEventListener)&&(0,De.m)(qe.removeEventListener)}(qe)?_e.map(ze=>et=>qe[ze](It,et,Ae)):function je(qe){return(0,De.m)(qe.addListener)&&(0,De.m)(qe.removeListener)}(qe)?he.map(we(qe,It)):function ge(qe){return(0,De.m)(qe.on)&&(0,De.m)(qe.off)}(qe)?Be.map(we(qe,It)):[];if(!ct&&(0,ve.z)(qe))return(0,le.z)(ze=>U(ze,It,Ae))((0,y.Xf)(qe));if(!ct)throw new TypeError("Invalid event target");return new m.y(ze=>{const et=(...ft)=>ze.next(1<ft.length?ft:ft[0]);return ct(et),()=>at(et)})}function we(qe,It){return Ae=>Ce=>qe[Ae](It,Ce)}},8421:(pn,dt,L)=>{"use strict";L.d(dt,{Xf:()=>ge});var y=L(655),m=L(1144),le=L(8239),ve=L(9751),De=L(3670),Re=L(2206),he=L(4532),_e=L(6495),Be=L(3260),U=L(576),we=L(7849),je=L(8822);function ge(ze){if(ze instanceof ve.y)return ze;if(null!=ze){if((0,De.c)(ze))return function Ue(ze){return new ve.y(et=>{const ft=ze[je.L]();if((0,U.m)(ft.subscribe))return ft.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,m.z)(ze))return function qe(ze){return new ve.y(et=>{for(let ft=0;ft<ze.length&&!et.closed;ft++)et.next(ze[ft]);et.complete()})}(ze);if((0,le.t)(ze))return function It(ze){return new ve.y(et=>{ze.then(ft=>{et.closed||(et.next(ft),et.complete())},ft=>et.error(ft)).then(null,we.h)})}(ze);if((0,Re.D)(ze))return Ce(ze);if((0,_e.T)(ze))return function Ae(ze){return new ve.y(et=>{for(const ft of ze)if(et.next(ft),et.closed)return;et.complete()})}(ze);if((0,Be.L)(ze))return function ct(ze){return Ce((0,Be.Q)(ze))}(ze)}throw(0,he.z)(ze)}function Ce(ze){return new ve.y(et=>{(function at(ze,et){var ft,vt,Ye,Le;return(0,y.mG)(this,void 0,void 0,function*(){try{for(ft=(0,y.KL)(ze);!(vt=yield ft.next()).done;)if(et.next(vt.value),et.closed)return}catch(_t){Ye={error:_t}}finally{try{vt&&!vt.done&&(Le=ft.return)&&(yield Le.call(ft))}finally{if(Ye)throw Ye.error}}et.complete()})})(ze,et).catch(ft=>et.error(ft))})}},6451:(pn,dt,L)=>{"use strict";L.d(dt,{T:()=>Re});var y=L(8189),m=L(8421),le=L(515),ve=L(7669),De=L(8996);function Re(...he){const _e=(0,ve.yG)(he),Be=(0,ve._6)(he,1/0),U=he;return U.length?1===U.length?(0,m.Xf)(U[0]):(0,y.J)(Be)((0,De.D)(U,_e)):le.E}},9646:(pn,dt,L)=>{"use strict";L.d(dt,{of:()=>le});var y=L(7669),m=L(8996);function le(...ve){const De=(0,y.yG)(ve);return(0,m.D)(ve,De)}},5403:(pn,dt,L)=>{"use strict";L.d(dt,{Q:()=>le,x:()=>m});var y=L(930);function m(ve,De,Re,he,_e){return new le(ve,De,Re,he,_e)}class le extends y.Lv{constructor(De,Re,he,_e,Be,U){super(De),this.onFinalize=Be,this.shouldUnsubscribe=U,this._next=Re?function(we){try{Re(we)}catch(je){De.error(je)}}:super._next,this._error=_e?function(we){try{_e(we)}catch(je){De.error(je)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(we){De.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},6590:(pn,dt,L)=>{"use strict";L.d(dt,{d:()=>le});var y=L(4482),m=L(5403);function le(ve){return(0,y.e)((De,Re)=>{let he=!1;De.subscribe((0,m.x)(Re,_e=>{he=!0,Re.next(_e)},()=>{he||Re.next(ve),Re.complete()}))})}},1884:(pn,dt,L)=>{"use strict";L.d(dt,{x:()=>ve});var y=L(4671),m=L(4482),le=L(5403);function ve(Re,he=y.y){return Re=null!=Re?Re:De,(0,m.e)((_e,Be)=>{let U,we=!0;_e.subscribe((0,le.x)(Be,je=>{const ge=he(je);(we||!Re(U,ge))&&(we=!1,U=ge,Be.next(je))}))})}function De(Re,he){return Re===he}},9300:(pn,dt,L)=>{"use strict";L.d(dt,{h:()=>le});var y=L(4482),m=L(5403);function le(ve,De){return(0,y.e)((Re,he)=>{let _e=0;Re.subscribe((0,m.x)(he,Be=>ve.call(De,Be,_e++)&&he.next(Be)))})}},590:(pn,dt,L)=>{"use strict";L.d(dt,{P:()=>he});var y=L(6805),m=L(9300),le=L(5698),ve=L(6590),De=L(8068),Re=L(4671);function he(_e,Be){const U=arguments.length>=2;return we=>we.pipe(_e?(0,m.h)((je,ge)=>_e(je,ge,we)):Re.y,(0,le.q)(1),U?(0,ve.d)(Be):(0,De.T)(()=>new y.K))}},4004:(pn,dt,L)=>{"use strict";L.d(dt,{U:()=>le});var y=L(4482),m=L(5403);function le(ve,De){return(0,y.e)((Re,he)=>{let _e=0;Re.subscribe((0,m.x)(he,Be=>{he.next(ve.call(De,Be,_e++))}))})}},8189:(pn,dt,L)=>{"use strict";L.d(dt,{J:()=>le});var y=L(5577),m=L(4671);function le(ve=1/0){return(0,y.z)(m.y,ve)}},5577:(pn,dt,L)=>{"use strict";L.d(dt,{z:()=>_e});var y=L(4004),m=L(8421),le=L(4482),ve=L(9672),De=L(5403),he=L(576);function _e(Be,U,we=1/0){return(0,he.m)(U)?_e((je,ge)=>(0,y.U)((Ue,qe)=>U(je,Ue,ge,qe))((0,m.Xf)(Be(je,ge))),we):("number"==typeof U&&(we=U),(0,le.e)((je,ge)=>function Re(Be,U,we,je,ge,Ue,qe,It){const Ae=[];let Ce=0,ct=0,at=!1;const ze=()=>{at&&!Ae.length&&!Ce&&U.complete()},et=vt=>Ce<je?ft(vt):Ae.push(vt),ft=vt=>{Ue&&U.next(vt),Ce++;let Ye=!1;(0,m.Xf)(we(vt,ct++)).subscribe((0,De.x)(U,Le=>{null==ge||ge(Le),Ue?et(Le):U.next(Le)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Ce--;Ae.length&&Ce<je;){const Le=Ae.shift();qe?(0,ve.f)(U,qe,()=>ft(Le)):ft(Le)}ze()}catch(Le){U.error(Le)}}))};return Be.subscribe((0,De.x)(U,et,()=>{at=!0,ze()})),()=>{null==It||It()}}(je,ge,Be,we)))}},5363:(pn,dt,L)=>{"use strict";L.d(dt,{Q:()=>ve});var y=L(9672),m=L(4482),le=L(5403);function ve(De,Re=0){return(0,m.e)((he,_e)=>{he.subscribe((0,le.x)(_e,Be=>(0,y.f)(_e,De,()=>_e.next(Be),Re),()=>(0,y.f)(_e,De,()=>_e.complete(),Re),Be=>(0,y.f)(_e,De,()=>_e.error(Be),Re)))})}},1520:(pn,dt,L)=>{"use strict";L.d(dt,{G:()=>le});var y=L(4482),m=L(5403);function le(){return(0,y.e)((ve,De)=>{let Re,he=!1;ve.subscribe((0,m.x)(De,_e=>{const Be=Re;Re=_e,he&&De.next([Be,_e]),he=!0}))})}},5026:(pn,dt,L)=>{"use strict";L.d(dt,{R:()=>ve});var y=L(4482),m=L(5403);function ve(De,Re){return(0,y.e)(function le(De,Re,he,_e,Be){return(U,we)=>{let je=he,ge=Re,Ue=0;U.subscribe((0,m.x)(we,qe=>{const It=Ue++;ge=je?De(ge,qe,It):(je=!0,qe),_e&&we.next(ge)},Be&&(()=>{je&&we.next(ge),we.complete()})))}}(De,Re,arguments.length>=2,!0))}},3099:(pn,dt,L)=>{"use strict";L.d(dt,{B:()=>De});var y=L(8421),m=L(7579),le=L(930),ve=L(4482);function De(he={}){const{connector:_e=(()=>new m.x),resetOnError:Be=!0,resetOnComplete:U=!0,resetOnRefCountZero:we=!0}=he;return je=>{let ge,Ue,qe,It=0,Ae=!1,Ce=!1;const ct=()=>{null==Ue||Ue.unsubscribe(),Ue=void 0},at=()=>{ct(),ge=qe=void 0,Ae=Ce=!1},ze=()=>{const et=ge;at(),null==et||et.unsubscribe()};return(0,ve.e)((et,ft)=>{It++,!Ce&&!Ae&&ct();const vt=qe=null!=qe?qe:_e();ft.add(()=>{It--,0===It&&!Ce&&!Ae&&(Ue=Re(ze,we))}),vt.subscribe(ft),!ge&&It>0&&(ge=new le.Hp({next:Ye=>vt.next(Ye),error:Ye=>{Ce=!0,ct(),Ue=Re(at,Be,Ye),vt.error(Ye)},complete:()=>{Ae=!0,ct(),Ue=Re(at,U),vt.complete()}}),(0,y.Xf)(et).subscribe(ge))})(je)}}function Re(he,_e,...Be){if(!0===_e)return void he();if(!1===_e)return;const U=new le.Hp({next:()=>{U.unsubscribe(),he()}});return(0,y.Xf)(_e(...Be)).subscribe(U)}},3151:(pn,dt,L)=>{"use strict";L.d(dt,{d:()=>De});var y=L(7579),m=L(6063);class le extends y.x{constructor(he=1/0,_e=1/0,Be=m.l){super(),this._bufferSize=he,this._windowTime=_e,this._timestampProvider=Be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=_e===1/0,this._bufferSize=Math.max(1,he),this._windowTime=Math.max(1,_e)}next(he){const{isStopped:_e,_buffer:Be,_infiniteTimeWindow:U,_timestampProvider:we,_windowTime:je}=this;_e||(Be.push(he),!U&&Be.push(we.now()+je)),this._trimBuffer(),super.next(he)}_subscribe(he){this._throwIfClosed(),this._trimBuffer();const _e=this._innerSubscribe(he),{_infiniteTimeWindow:Be,_buffer:U}=this,we=U.slice();for(let je=0;je<we.length&&!he.closed;je+=Be?1:2)he.next(we[je]);return this._checkFinalizedStatuses(he),_e}_trimBuffer(){const{_bufferSize:he,_timestampProvider:_e,_buffer:Be,_infiniteTimeWindow:U}=this,we=(U?1:2)*he;if(he<1/0&&we<Be.length&&Be.splice(0,Be.length-we),!U){const je=_e.now();let ge=0;for(let Ue=1;Ue<Be.length&&Be[Ue]<=je;Ue+=2)ge=Ue;ge&&Be.splice(0,ge+1)}}}var ve=L(3099);function De(Re,he,_e){let Be,U=!1;return Re&&"object"==typeof Re?({bufferSize:Be=1/0,windowTime:he=1/0,refCount:U=!1,scheduler:_e}=Re):Be=null!=Re?Re:1/0,(0,ve.B)({connector:()=>new le(Be,he,_e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:U})}},8675:(pn,dt,L)=>{"use strict";L.d(dt,{O:()=>ve});var y=L(7272),m=L(7669),le=L(4482);function ve(...De){const Re=(0,m.yG)(De);return(0,le.e)((he,_e)=>{(Re?(0,y.z)(De,he,Re):(0,y.z)(De,he)).subscribe(_e)})}},9468:(pn,dt,L)=>{"use strict";L.d(dt,{R:()=>m});var y=L(4482);function m(le,ve=0){return(0,y.e)((De,Re)=>{Re.add(le.schedule(()=>De.subscribe(Re),ve))})}},3900:(pn,dt,L)=>{"use strict";L.d(dt,{w:()=>ve});var y=L(8421),m=L(4482),le=L(5403);function ve(De,Re){return(0,m.e)((he,_e)=>{let Be=null,U=0,we=!1;const je=()=>we&&!Be&&_e.complete();he.subscribe((0,le.x)(_e,ge=>{null==Be||Be.unsubscribe();let Ue=0;const qe=U++;(0,y.Xf)(De(ge,qe)).subscribe(Be=(0,le.x)(_e,It=>_e.next(Re?Re(ge,It,qe,Ue++):It),()=>{Be=null,je()}))},()=>{we=!0,je()}))})}},5698:(pn,dt,L)=>{"use strict";L.d(dt,{q:()=>ve});var y=L(515),m=L(4482),le=L(5403);function ve(De){return De<=0?()=>y.E:(0,m.e)((Re,he)=>{let _e=0;Re.subscribe((0,le.x)(he,Be=>{++_e<=De&&(he.next(Be),De<=_e&&he.complete())}))})}},8505:(pn,dt,L)=>{"use strict";L.d(dt,{b:()=>De});var y=L(576),m=L(4482),le=L(5403),ve=L(4671);function De(Re,he,_e){const Be=(0,y.m)(Re)||he||_e?{next:Re,error:he,complete:_e}:Re;return Be?(0,m.e)((U,we)=>{var je;null===(je=Be.subscribe)||void 0===je||je.call(Be);let ge=!0;U.subscribe((0,le.x)(we,Ue=>{var qe;null===(qe=Be.next)||void 0===qe||qe.call(Be,Ue),we.next(Ue)},()=>{var Ue;ge=!1,null===(Ue=Be.complete)||void 0===Ue||Ue.call(Be),we.complete()},Ue=>{var qe;ge=!1,null===(qe=Be.error)||void 0===qe||qe.call(Be,Ue),we.error(Ue)},()=>{var Ue,qe;ge&&(null===(Ue=Be.unsubscribe)||void 0===Ue||Ue.call(Be)),null===(qe=Be.finalize)||void 0===qe||qe.call(Be)}))}):ve.y}},8068:(pn,dt,L)=>{"use strict";L.d(dt,{T:()=>ve});var y=L(6805),m=L(4482),le=L(5403);function ve(Re=De){return(0,m.e)((he,_e)=>{let Be=!1;he.subscribe((0,le.x)(_e,U=>{Be=!0,_e.next(U)},()=>Be?_e.complete():_e.error(Re())))})}function De(){return new y.K}},4408:(pn,dt,L)=>{"use strict";L.d(dt,{o:()=>De});var y=L(727);class m extends y.w0{constructor(he,_e){super()}schedule(he,_e=0){return this}}const le={setInterval(Re,he,..._e){const{delegate:Be}=le;return null!=Be&&Be.setInterval?Be.setInterval(Re,he,..._e):setInterval(Re,he,..._e)},clearInterval(Re){const{delegate:he}=le;return((null==he?void 0:he.clearInterval)||clearInterval)(Re)},delegate:void 0};var ve=L(8737);class De extends m{constructor(he,_e){super(he,_e),this.scheduler=he,this.work=_e,this.pending=!1}schedule(he,_e=0){var Be;if(this.closed)return this;this.state=he;const U=this.id,we=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(we,U,_e)),this.pending=!0,this.delay=_e,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(we,this.id,_e),this}requestAsyncId(he,_e,Be=0){return le.setInterval(he.flush.bind(he,this),Be)}recycleAsyncId(he,_e,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return _e;null!=_e&&le.clearInterval(_e)}execute(he,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(he,_e);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,_e){let U,Be=!1;try{this.work(he)}catch(we){Be=!0,U=we||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:he,scheduler:_e}=this,{actions:Be}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Be,this),null!=he&&(this.id=this.recycleAsyncId(_e,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(pn,dt,L)=>{"use strict";L.d(dt,{v:()=>le});var y=L(6063);class m{constructor(De,Re=m.now){this.schedulerActionCtor=De,this.now=Re}schedule(De,Re=0,he){return new this.schedulerActionCtor(this,De).schedule(he,Re)}}m.now=y.l.now;class le extends m{constructor(De,Re=m.now){super(De,Re),this.actions=[],this._active=!1}flush(De){const{actions:Re}=this;if(this._active)return void Re.push(De);let he;this._active=!0;do{if(he=De.execute(De.state,De.delay))break}while(De=Re.shift());if(this._active=!1,he){for(;De=Re.shift();)De.unsubscribe();throw he}}}},4986:(pn,dt,L)=>{"use strict";L.d(dt,{z:()=>le});var y=L(4408);const le=new(L(7565).v)(y.o)},6063:(pn,dt,L)=>{"use strict";L.d(dt,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(pn,dt,L)=>{"use strict";L.d(dt,{z:()=>y});const y={setTimeout(m,le,...ve){const{delegate:De}=y;return null!=De&&De.setTimeout?De.setTimeout(m,le,...ve):setTimeout(m,le,...ve)},clearTimeout(m){const{delegate:le}=y;return((null==le?void 0:le.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(pn,dt,L)=>{"use strict";L.d(dt,{h:()=>m});const m=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pn,dt,L)=>{"use strict";L.d(dt,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(pn,dt,L)=>{"use strict";L.d(dt,{K:()=>m});const m=(0,L(3888).d)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(pn,dt,L)=>{"use strict";L.d(dt,{_6:()=>Re,jO:()=>ve,yG:()=>De});var y=L(576);function le(he){return he[he.length-1]}function ve(he){return(0,y.m)(le(he))?he.pop():void 0}function De(he){return function m(he){return he&&(0,y.m)(he.schedule)}(le(he))?he.pop():void 0}function Re(he,_e){return"number"==typeof le(he)?he.pop():_e}},4742:(pn,dt,L)=>{"use strict";L.d(dt,{D:()=>De});const{isArray:y}=Array,{getPrototypeOf:m,prototype:le,keys:ve}=Object;function De(he){if(1===he.length){const _e=he[0];if(y(_e))return{args:_e,keys:null};if(function Re(he){return he&&"object"==typeof he&&m(he)===le}(_e)){const Be=ve(_e);return{args:Be.map(U=>_e[U]),keys:Be}}}return{args:he,keys:null}}},8737:(pn,dt,L)=>{"use strict";function y(m,le){if(m){const ve=m.indexOf(le);0<=ve&&m.splice(ve,1)}}L.d(dt,{P:()=>y})},3888:(pn,dt,L)=>{"use strict";function y(m){const ve=m(De=>{Error.call(De),De.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}L.d(dt,{d:()=>y})},1810:(pn,dt,L)=>{"use strict";function y(m,le){return m.reduce((ve,De,Re)=>(ve[De]=le[Re],ve),{})}L.d(dt,{n:()=>y})},2806:(pn,dt,L)=>{"use strict";L.d(dt,{O:()=>ve,x:()=>le});var y=L(2416);let m=null;function le(De){if(y.config.useDeprecatedSynchronousErrorHandling){const Re=!m;if(Re&&(m={errorThrown:!1,error:null}),De(),Re){const{errorThrown:he,error:_e}=m;if(m=null,he)throw _e}}else De()}function ve(De){y.config.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=De)}},9672:(pn,dt,L)=>{"use strict";function y(m,le,ve,De=0,Re=!1){const he=le.schedule(function(){ve(),Re?m.add(this.schedule(null,De)):this.unsubscribe()},De);if(m.add(he),!Re)return he}L.d(dt,{f:()=>y})},4671:(pn,dt,L)=>{"use strict";function y(m){return m}L.d(dt,{y:()=>y})},1144:(pn,dt,L)=>{"use strict";L.d(dt,{z:()=>y});const y=m=>m&&"number"==typeof m.length&&"function"!=typeof m},2206:(pn,dt,L)=>{"use strict";L.d(dt,{D:()=>m});var y=L(576);function m(le){return Symbol.asyncIterator&&(0,y.m)(null==le?void 0:le[Symbol.asyncIterator])}},576:(pn,dt,L)=>{"use strict";function y(m){return"function"==typeof m}L.d(dt,{m:()=>y})},3670:(pn,dt,L)=>{"use strict";L.d(dt,{c:()=>le});var y=L(8822),m=L(576);function le(ve){return(0,m.m)(ve[y.L])}},6495:(pn,dt,L)=>{"use strict";L.d(dt,{T:()=>le});var y=L(2202),m=L(576);function le(ve){return(0,m.m)(null==ve?void 0:ve[y.h])}},8239:(pn,dt,L)=>{"use strict";L.d(dt,{t:()=>m});var y=L(576);function m(le){return(0,y.m)(null==le?void 0:le.then)}},3260:(pn,dt,L)=>{"use strict";L.d(dt,{L:()=>ve,Q:()=>le});var y=L(655),m=L(576);function le(De){return(0,y.FC)(this,arguments,function*(){const he=De.getReader();try{for(;;){const{value:_e,done:Be}=yield(0,y.qq)(he.read());if(Be)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(_e)}}finally{he.releaseLock()}})}function ve(De){return(0,m.m)(null==De?void 0:De.getReader)}},4482:(pn,dt,L)=>{"use strict";L.d(dt,{A:()=>m,e:()=>le});var y=L(576);function m(ve){return(0,y.m)(null==ve?void 0:ve.lift)}function le(ve){return De=>{if(m(De))return De.lift(function(Re){try{return ve(Re,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pn,dt,L)=>{"use strict";L.d(dt,{Z:()=>ve});var y=L(4004);const{isArray:m}=Array;function ve(De){return(0,y.U)(Re=>function le(De,Re){return m(Re)?De(...Re):De(Re)}(De,Re))}},5032:(pn,dt,L)=>{"use strict";function y(){}L.d(dt,{Z:()=>y})},9635:(pn,dt,L)=>{"use strict";L.d(dt,{U:()=>le,z:()=>m});var y=L(4671);function m(...ve){return le(ve)}function le(ve){return 0===ve.length?y.y:1===ve.length?ve[0]:function(Re){return ve.reduce((he,_e)=>_e(he),Re)}}},7849:(pn,dt,L)=>{"use strict";L.d(dt,{h:()=>le});var y=L(2416),m=L(3410);function le(ve){m.z.setTimeout(()=>{const{onUnhandledError:De}=y.config;if(!De)throw ve;De(ve)})}},4532:(pn,dt,L)=>{"use strict";function y(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(dt,{z:()=>y})},863:(pn,dt,L)=>{var y={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function m(le){if(!L.o(y,le))return Promise.resolve().then(()=>{var Re=new Error("Cannot find module '"+le+"'");throw Re.code="MODULE_NOT_FOUND",Re});var ve=y[le],De=ve[0];return Promise.all(ve.slice(1).map(L.e)).then(()=>L(De))}m.keys=()=>Object.keys(y),m.id=863,pn.exports=m},655:(pn,dt,L)=>{"use strict";L.d(dt,{FC:()=>et,KL:()=>vt,ZT:()=>m,_T:()=>ve,gn:()=>De,mG:()=>je,qq:()=>ze});var y=function(xe,Ve){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(We,Ne){We.__proto__=Ne}||function(We,Ne){for(var Fe in Ne)Object.prototype.hasOwnProperty.call(Ne,Fe)&&(We[Fe]=Ne[Fe])})(xe,Ve)};function m(xe,Ve){if("function"!=typeof Ve&&null!==Ve)throw new TypeError("Class extends value "+String(Ve)+" is not a constructor or null");function We(){this.constructor=xe}y(xe,Ve),xe.prototype=null===Ve?Object.create(Ve):(We.prototype=Ve.prototype,new We)}function ve(xe,Ve){var We={};for(var Ne in xe)Object.prototype.hasOwnProperty.call(xe,Ne)&&Ve.indexOf(Ne)<0&&(We[Ne]=xe[Ne]);if(null!=xe&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Ne=Object.getOwnPropertySymbols(xe);Fe<Ne.length;Fe++)Ve.indexOf(Ne[Fe])<0&&Object.prototype.propertyIsEnumerable.call(xe,Ne[Fe])&&(We[Ne[Fe]]=xe[Ne[Fe]])}return We}function De(xe,Ve,We,Ne){var mt,Fe=arguments.length,He=Fe<3?Ve:null===Ne?Ne=Object.getOwnPropertyDescriptor(Ve,We):Ne;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)He=Reflect.decorate(xe,Ve,We,Ne);else for(var lt=xe.length-1;lt>=0;lt--)(mt=xe[lt])&&(He=(Fe<3?mt(He):Fe>3?mt(Ve,We,He):mt(Ve,We))||He);return Fe>3&&He&&Object.defineProperty(Ve,We,He),He}function je(xe,Ve,We,Ne){return new(We||(We=Promise))(function(He,mt){function lt(un){try{Pt(Ne.next(un))}catch(Tt){mt(Tt)}}function Mt(un){try{Pt(Ne.throw(un))}catch(Tt){mt(Tt)}}function Pt(un){un.done?He(un.value):function Fe(He){return He instanceof We?He:new We(function(mt){mt(He)})}(un.value).then(lt,Mt)}Pt((Ne=Ne.apply(xe,Ve||[])).next())})}function ze(xe){return this instanceof ze?(this.v=xe,this):new ze(xe)}function et(xe,Ve,We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ne=We.apply(xe,Ve||[]),He=[];return Fe={},mt("next"),mt("throw"),mt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function mt(Je){Ne[Je]&&(Fe[Je]=function(Ot){return new Promise(function(Qt,yn){He.push([Je,Ot,Qt,yn])>1||lt(Je,Ot)})})}function lt(Je,Ot){try{!function Mt(Je){Je.value instanceof ze?Promise.resolve(Je.value.v).then(Pt,un):Tt(He[0][2],Je)}(Ne[Je](Ot))}catch(Qt){Tt(He[0][3],Qt)}}function Pt(Je){lt("next",Je)}function un(Je){lt("throw",Je)}function Tt(Je,Ot){Je(Ot),He.shift(),He.length&&lt(He[0][0],He[0][1])}}function vt(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Ve=xe[Symbol.asyncIterator];return Ve?Ve.call(xe):(xe=function It(xe){var Ve="function"==typeof Symbol&&Symbol.iterator,We=Ve&&xe[Ve],Ne=0;if(We)return We.call(xe);if(xe&&"number"==typeof xe.length)return{next:function(){return xe&&Ne>=xe.length&&(xe=void 0),{value:xe&&xe[Ne++],done:!xe}}};throw new TypeError(Ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(xe),We={},Ne("next"),Ne("throw"),Ne("return"),We[Symbol.asyncIterator]=function(){return this},We);function Ne(He){We[He]=xe[He]&&function(mt){return new Promise(function(lt,Mt){!function Fe(He,mt,lt,Mt){Promise.resolve(Mt).then(function(Pt){He({value:Pt,done:lt})},mt)}(lt,Mt,(mt=xe[He](mt)).done,mt.value)})}}}},4755:(pn,dt,L)=>{"use strict";L.d(dt,{Do:()=>ct,EM:()=>Ta,HT:()=>ve,JF:()=>Qi,K0:()=>Re,Mx:()=>rs,NF:()=>Zi,O5:()=>W,Ov:()=>En,PM:()=>yi,S$:()=>It,V_:()=>Be,Ye:()=>at,b0:()=>Ce,bD:()=>Cr,ez:()=>xi,q:()=>le,sg:()=>ps,tP:()=>gn,w_:()=>De});var y=L(2223);let m=null;function le(){return m}function ve(V){m||(m=V)}class De{}const Re=new y.OlP("DocumentToken");let he=(()=>{class V{historyGo(H){throw new Error("Not implemented")}}return V.\u0275fac=function(H){return new(H||V)},V.\u0275prov=y.Yz7({token:V,factory:function(){return function _e(){return(0,y.LFG)(U)}()},providedIn:"platform"}),V})();const Be=new y.OlP("Location Initialized");let U=(()=>{class V extends he{constructor(H){super(),this._doc=H,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(H){const ye=le().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("popstate",H,!1),()=>ye.removeEventListener("popstate",H)}onHashChange(H){const ye=le().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("hashchange",H,!1),()=>ye.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,ye,Ke){we()?this._history.pushState(H,ye,Ke):this._location.hash=Ke}replaceState(H,ye,Ke){we()?this._history.replaceState(H,ye,Ke):this._location.hash=Ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return V.\u0275fac=function(H){return new(H||V)(y.LFG(Re))},V.\u0275prov=y.Yz7({token:V,factory:function(){return function je(){return new U((0,y.LFG)(Re))}()},providedIn:"platform"}),V})();function we(){return!!window.history.pushState}function ge(V,re){if(0==V.length)return re;if(0==re.length)return V;let H=0;return V.endsWith("/")&&H++,re.startsWith("/")&&H++,2==H?V+re.substring(1):1==H?V+re:V+"/"+re}function Ue(V){const re=V.match(/#|\?|$/),H=re&&re.index||V.length;return V.slice(0,H-("/"===V[H-1]?1:0))+V.slice(H)}function qe(V){return V&&"?"!==V[0]?"?"+V:V}let It=(()=>{class V{historyGo(H){throw new Error("Not implemented")}}return V.\u0275fac=function(H){return new(H||V)},V.\u0275prov=y.Yz7({token:V,factory:function(){return(0,y.f3M)(Ce)},providedIn:"root"}),V})();const Ae=new y.OlP("appBaseHref");let Ce=(()=>{class V extends It{constructor(H,ye){var Ke,Bt,Yt;super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=null!==(Ke=null!==(Bt=null!=ye?ye:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Bt?Bt:null===(Yt=(0,y.f3M)(Re).location)||void 0===Yt?void 0:Yt.origin)&&void 0!==Ke?Ke:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return ge(this._baseHref,H)}path(H=!1){const ye=this._platformLocation.pathname+qe(this._platformLocation.search),Ke=this._platformLocation.hash;return Ke&&H?`${ye}${Ke}`:ye}pushState(H,ye,Ke,Bt){const Yt=this.prepareExternalUrl(Ke+qe(Bt));this._platformLocation.pushState(H,ye,Yt)}replaceState(H,ye,Ke,Bt){const Yt=this.prepareExternalUrl(Ke+qe(Bt));this._platformLocation.replaceState(H,ye,Yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ye,Ke;null===(ye=(Ke=this._platformLocation).historyGo)||void 0===ye||ye.call(Ke,H)}}return V.\u0275fac=function(H){return new(H||V)(y.LFG(he),y.LFG(Ae,8))},V.\u0275prov=y.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),ct=(()=>{class V extends It{constructor(H,ye){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=ye&&(this._baseHref=ye)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let ye=this._platformLocation.hash;return null==ye&&(ye="#"),ye.length>0?ye.substring(1):ye}prepareExternalUrl(H){const ye=ge(this._baseHref,H);return ye.length>0?"#"+ye:ye}pushState(H,ye,Ke,Bt){let Yt=this.prepareExternalUrl(Ke+qe(Bt));0==Yt.length&&(Yt=this._platformLocation.pathname),this._platformLocation.pushState(H,ye,Yt)}replaceState(H,ye,Ke,Bt){let Yt=this.prepareExternalUrl(Ke+qe(Bt));0==Yt.length&&(Yt=this._platformLocation.pathname),this._platformLocation.replaceState(H,ye,Yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ye,Ke;null===(ye=(Ke=this._platformLocation).historyGo)||void 0===ye||ye.call(Ke,H)}}return V.\u0275fac=function(H){return new(H||V)(y.LFG(he),y.LFG(Ae,8))},V.\u0275prov=y.Yz7({token:V,factory:V.\u0275fac}),V})(),at=(()=>{class V{constructor(H){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const ye=this._locationStrategy.getBaseHref();this._basePath=function vt(V){if(new RegExp("^(https?:)?//").test(V)){const[,H]=V.split(/\/\/[^\/]+/);return H}return V}(Ue(ft(ye))),this._locationStrategy.onPopState(Ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ke.state,type:Ke.type})})}ngOnDestroy(){var H;null===(H=this._urlChangeSubscription)||void 0===H||H.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,ye=""){return this.path()==this.normalize(H+qe(ye))}normalize(H){return V.stripTrailingSlash(function et(V,re){if(!V||!re.startsWith(V))return re;const H=re.substring(V.length);return""===H||["/",";","?","#"].includes(H[0])?H:re}(this._basePath,ft(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,ye="",Ke=null){this._locationStrategy.pushState(Ke,"",H,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+qe(ye)),Ke)}replaceState(H,ye="",Ke=null){this._locationStrategy.replaceState(Ke,"",H,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+qe(ye)),Ke)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){var ye,Ke;null===(ye=(Ke=this._locationStrategy).historyGo)||void 0===ye||ye.call(Ke,H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ye=>{this._notifyUrlChangeListeners(ye.url,ye.state)})),()=>{const ye=this._urlChangeListeners.indexOf(H);var Ke;this._urlChangeListeners.splice(ye,1),0===this._urlChangeListeners.length&&(null===(Ke=this._urlChangeSubscription)||void 0===Ke||Ke.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",ye){this._urlChangeListeners.forEach(Ke=>Ke(H,ye))}subscribe(H,ye,Ke){return this._subject.subscribe({next:H,error:ye,complete:Ke})}}return V.normalizeQueryParams=qe,V.joinWithSlash=ge,V.stripTrailingSlash=Ue,V.\u0275fac=function(H){return new(H||V)(y.LFG(It))},V.\u0275prov=y.Yz7({token:V,factory:function(){return function ze(){return new at((0,y.LFG)(It))}()},providedIn:"root"}),V})();function ft(V){return V.replace(/\/index.html$/,"")}function rs(V,re){re=encodeURIComponent(re);for(const H of V.split(";")){const ye=H.indexOf("="),[Ke,Bt]=-1==ye?[H,""]:[H.slice(0,ye),H.slice(ye+1)];if(Ke.trim()===re)return decodeURIComponent(Bt)}return null}class vs{constructor(re,H,ye,Ke){this.$implicit=re,this.ngForOf=H,this.index=ye,this.count=Ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ps=(()=>{class V{set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,ye,Ke){this._viewContainer=H,this._template=ye,this._differs=Ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const ye=this._viewContainer;H.forEachOperation((Ke,Bt,Yt)=>{if(null==Ke.previousIndex)ye.createEmbeddedView(this._template,new vs(Ke.item,this._ngForOf,-1,-1),null===Yt?void 0:Yt);else if(null==Yt)ye.remove(null===Bt?void 0:Bt);else if(null!==Bt){const tr=ye.get(Bt);ye.move(tr,Yt),_s(tr,Ke)}});for(let Ke=0,Bt=ye.length;Ke<Bt;Ke++){const tr=ye.get(Ke).context;tr.index=Ke,tr.count=Bt,tr.ngForOf=this._ngForOf}H.forEachIdentityChange(Ke=>{_s(ye.get(Ke.currentIndex),Ke)})}static ngTemplateContextGuard(H,ye){return!0}}return V.\u0275fac=function(H){return new(H||V)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},V.\u0275dir=y.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),V})();function _s(V,re){V.context.$implicit=re.item}let W=(()=>{class V{constructor(H,ye){this._viewContainer=H,this._context=new ne,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ye}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){Ee("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){Ee("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,ye){return!0}}return V.\u0275fac=function(H){return new(H||V)(y.Y36(y.s_b),y.Y36(y.Rgc))},V.\u0275dir=y.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),V})();class ne{constructor(){this.$implicit=null,this.ngIf=null}}function Ee(V,re){if(re&&!re.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,y.AaK)(re)}'.`)}let gn=(()=>{class V{constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const ye=this._viewContainerRef;if(this._viewRef&&ye.remove(ye.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ke,ngTemplateOutletContext:Bt,ngTemplateOutletInjector:Yt}=this;this._viewRef=ye.createEmbeddedView(Ke,Bt,Yt?{injector:Yt}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return V.\u0275fac=function(H){return new(H||V)(y.Y36(y.s_b))},V.\u0275dir=y.lG2({type:V,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]}),V})();class Ri{createSubscription(re,H){return re.subscribe({next:H,error:ye=>{throw ye}})}dispose(re){re.unsubscribe()}}class Fi{createSubscription(re,H){return re.then(H,ye=>{throw ye})}dispose(re){}}const is=new Fi,Gr=new Ri;let En=(()=>{class V{constructor(H){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=H}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(H){return this._obj?H!==this._obj?(this._dispose(),this.transform(H)):this._latestValue:(H&&this._subscribe(H),this._latestValue)}_subscribe(H){this._obj=H,this._strategy=this._selectStrategy(H),this._subscription=this._strategy.createSubscription(H,ye=>this._updateLatestValue(H,ye))}_selectStrategy(H){if((0,y.QGY)(H))return is;if((0,y.F4k)(H))return Gr;throw function ur(V,re){return new y.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(H,ye){H===this._obj&&(this._latestValue=ye,this._ref.markForCheck())}}return V.\u0275fac=function(H){return new(H||V)(y.Y36(y.sBO,16))},V.\u0275pipe=y.Yjl({name:"async",type:V,pure:!1,standalone:!0}),V})(),xi=(()=>{class V{}return V.\u0275fac=function(H){return new(H||V)},V.\u0275mod=y.oAB({type:V}),V.\u0275inj=y.cJS({}),V})();const Cr="browser",Wa="server";function Zi(V){return V===Cr}function yi(V){return V===Wa}let Ta=(()=>{class V{}return V.\u0275prov=(0,y.Yz7)({token:V,providedIn:"root",factory:()=>new os((0,y.LFG)(Re),window)}),V})();class os{constructor(re,H){this.document=re,this.window=H,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(re){this.supportsScrolling()&&this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){if(!this.supportsScrolling())return;const H=function Lo(V,re){const H=V.getElementById(re)||V.getElementsByName(re)[0];if(H)return H;if("function"==typeof V.createTreeWalker&&V.body&&"function"==typeof V.body.attachShadow){const ye=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Ke=ye.currentNode;for(;Ke;){const Bt=Ke.shadowRoot;if(Bt){const Yt=Bt.getElementById(re)||Bt.querySelector(`[name="${re}"]`);if(Yt)return Yt}Ke=ye.nextNode()}}return null}(this.document,re);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(re){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=re)}}scrollToElement(re){const H=re.getBoundingClientRect(),ye=H.left+this.window.pageXOffset,Ke=H.top+this.window.pageYOffset,Bt=this.offset();this.window.scrollTo(ye-Bt[0],Ke-Bt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const re=Gi(this.window.history)||Gi(Object.getPrototypeOf(this.window.history));return!(!re||!re.writable&&!re.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Gi(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class Qi{}},2223:(pn,dt,L)=>{"use strict";L.d(dt,{$8M:()=>Ac,$WT:()=>cn,$Z:()=>Ym,AFp:()=>Wf,ALo:()=>p,AaK:()=>Be,CHM:()=>Vt,CRH:()=>oC,D6c:()=>LD,EJc:()=>Ub,EpF:()=>Ay,F$t:()=>xy,F4k:()=>Yg,FYo:()=>Iv,FiY:()=>bu,G48:()=>dD,GSi:()=>qm,Gf:()=>iC,GfV:()=>ep,GkF:()=>Sy,Gpc:()=>je,HDt:()=>cb,Hsn:()=>Qg,JOm:()=>$a,KtG:()=>hn,LFG:()=>At,LMc:()=>$D,LSH:()=>Dh,Lbi:()=>km,Lck:()=>oI,MAs:()=>mp,MMx:()=>XE,NdJ:()=>o_,Ojb:()=>Fm,OlP:()=>ji,Oqu:()=>kt,P3R:()=>Pd,PXZ:()=>nD,Q6J:()=>yp,QGY:()=>qg,QbO:()=>pv,Qsj:()=>ca,R0b:()=>kl,RDi:()=>H_,Rgc:()=>Zr,SBq:()=>Lh,Sil:()=>Hb,Suo:()=>sC,TTD:()=>Vo,TgZ:()=>Jd,X6Q:()=>cD,XFs:()=>tn,Xpm:()=>_s,Xts:()=>lo,Y36:()=>Sl,YKP:()=>bp,YNc:()=>hc,Yjl:()=>$e,Yz7:()=>Je,Z0I:()=>Tn,ZZ4:()=>LI,_Bn:()=>oE,_UZ:()=>_p,_Vd:()=>Jf,_c5:()=>TD,_uU:()=>Y,aQg:()=>BI,c2e:()=>TC,cJS:()=>Qt,cg1:()=>rm,dDg:()=>Xb,dqk:()=>Sn,eFA:()=>UC,eJc:()=>EI,ekj:()=>g_,eoX:()=>LC,f3M:()=>sn,g9A:()=>Nm,h0i:()=>Sa,hGG:()=>AD,hij:()=>Zt,iGM:()=>rC,ifc:()=>Pe,ip1:()=>SC,jDz:()=>F_,kL8:()=>w_,lG2:()=>ie,lcZ:()=>$,lqb:()=>Jc,lri:()=>kC,n5z:()=>Ei,oAB:()=>Ee,oxw:()=>Ry,q4F:()=>Bh,qFp:()=>VD,qLn:()=>$h,qOj:()=>Qh,qZA:()=>vp,rWj:()=>FC,s9C:()=>Xg,sBO:()=>hD,s_b:()=>Sr,soG:()=>fw,tb:()=>xI,tp0:()=>Du,uIk:()=>da,vHH:()=>Ce,vpe:()=>ln,wAp:()=>Pr,xp6:()=>Mv,z2F:()=>U_,zSh:()=>jf,zs3:()=>dl});var Re,y=L(7579),m=L(727),le=L(9751),ve=L(6451),De=L(3099);function he(n){for(let i in n)if(n[i]===he)return i;throw Error("Could not find renamed property on target object.")}function _e(n,i){for(const a in i)i.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=i[a])}function Be(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Be).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function U(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const we=he({__forward_ref__:he});function je(n){return n.__forward_ref__=je,n.toString=function(){return Be(this())},n}function ge(n){return Ue(n)?n():n}function Ue(n){return"function"==typeof n&&n.hasOwnProperty(we)&&n.__forward_ref__===je}function qe(n){return n&&!!n.\u0275providers}const Ae="https://g.co/ng/security#xss";class Ce extends Error{constructor(i,a){super(function ct(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,a)),this.code=i}}function at(n){return"string"==typeof n?n:null==n?"":String(n)}function Ye(n,i){throw new Ce(-201,!1)}function lt(n,i){null==n&&function Mt(n,i,a,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${a} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function Je(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yn(n){return Dn(n,Ft)||Dn(n,sr)}function Tn(n){return null!==yn(n)}function Dn(n,i){return n.hasOwnProperty(i)?n[i]:null}function In(n){return n&&(n.hasOwnProperty(or)||n.hasOwnProperty(yr))?n[or]:null}const Ft=he({\u0275prov:he}),or=he({\u0275inj:he}),sr=he({ngInjectableDef:he}),yr=he({ngInjectorDef:he});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let xr;function rr(n){const i=xr;return xr=n,i}function Or(n,i,a){const d=yn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&tn.Optional?null:void 0!==i?i:void Ye(Be(n))}const Sn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vr={},ar="__NG_DI_FLAG__",Lr="ngTempTokenPath",Gn=/\n/gm,ci="__source";let Un;function me(n){const i=Un;return Un=n,i}function Ge(n,i=tn.Default){if(void 0===Un)throw new Ce(-203,!1);return null===Un?Or(n,void 0,i):Un.get(n,i&tn.Optional?null:void 0,i)}function At(n,i=tn.Default){return(function dr(){return xr}()||Ge)(ge(n),i)}function sn(n,i=tn.Default){return At(n,lr(i))}function lr(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function On(n){const i=[];for(let a=0;a<n.length;a++){const d=ge(n[a]);if(Array.isArray(d)){if(0===d.length)throw new Ce(900,!1);let f,v=tn.Default;for(let b=0;b<d.length;b++){const x=d[b],B=Qe(x);"number"==typeof B?-1===B?f=x.token:v|=B:f=x}i.push(At(f,v))}else i.push(At(d))}return i}function _r(n,i){return n[ar]=i,n.prototype[ar]=i,n}function Qe(n){return n[ar]}function z(n){return{toString:n}.toString()}var q=(()=>((q=q||{})[q.OnPush=0]="OnPush",q[q.Default=1]="Default",q))(),Pe=(()=>{return(n=Pe||(Pe={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Pe;var n})();const it={},ke=[],ht=he({\u0275cmp:he}),Ct=he({\u0275dir:he}),jt=he({\u0275pipe:he}),Ut=he({\u0275mod:he}),on=he({\u0275fac:he}),fn=he({__NG_ELEMENT_ID__:he}),Wn=he({__NG_ENV_ID__:he});function kn(n,i,a){let d=n.length;for(;;){const f=n.indexOf(i,a);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=i.length;if(f+v===d||n.charCodeAt(f+v)<=32)return f}a=f+1}}function Dt(n,i,a){let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const v=a[d++],b=a[d++],x=a[d++];n.setAttribute(i,b,x,v)}else{const v=f,b=a[++d];zt(v)?n.setProperty(i,v,b):n.setAttribute(i,v,b),d++}}return d}function wt(n){return 3===n||4===n||6===n}function zt(n){return 64===n.charCodeAt(0)}function _n(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let a=-1;for(let d=0;d<i.length;d++){const f=i[d];"number"==typeof f?a=f:0===a||Nn(n,a,f,null,-1===a||2===a?i[++d]:null)}}return n}function Nn(n,i,a,d,f){let v=0,b=n.length;if(-1===i)b=-1;else for(;v<n.length;){const x=n[v++];if("number"==typeof x){if(x===i){b=-1;break}if(x>i){b=v-1;break}}}for(;v<n.length;){const x=n[v];if("number"==typeof x)break;if(x===a){if(null===d)return void(null!==f&&(n[v+1]=f));if(d===n[v+1])return void(n[v+2]=f)}v++,null!==d&&v++,null!==f&&v++}-1!==b&&(n.splice(b,0,i),v=b+1),n.splice(v++,0,a),null!==d&&n.splice(v++,0,d),null!==f&&n.splice(v++,0,f)}const Xn="ng-template";function nr(n,i,a){let d=0,f=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&f){const b=n[d++];if(a&&"class"===v&&-1!==kn(b.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(f=!1)}}return!1}function Jr(n){return 4===n.type&&n.value!==Xn}function Tr(n,i,a){return i===(4!==n.type||a?n.value:Xn)}function Qn(n,i,a){let d=4;const f=n.attrs||[],v=function ki(n){for(let i=0;i<n.length;i++)if(wt(n[i]))return i;return n.length}(f);let b=!1;for(let x=0;x<i.length;x++){const B=i[x];if("number"!=typeof B){if(!b)if(4&d){if(d=2|1&d,""!==B&&!Tr(n,B,a)||""===B&&1===i.length){if(Jn(d))return!1;b=!0}}else{const te=8&d?B:i[++x];if(8&d&&null!==n.attrs){if(!nr(n.attrs,te,a)){if(Jn(d))return!1;b=!0}continue}const Oe=fi(8&d?"class":B,f,Jr(n),a);if(-1===Oe){if(Jn(d))return!1;b=!0;continue}if(""!==te){let ot;ot=Oe>v?"":f[Oe+1].toLowerCase();const xt=8&d?ot:null;if(xt&&-1!==kn(xt,te,0)||2&d&&te!==ot){if(Jn(d))return!1;b=!0}}}}else{if(!b&&!Jn(d)&&!Jn(B))return!1;if(b&&Jn(B))continue;b=!1,d=B|1&d}}return Jn(d)||b}function Jn(n){return 0==(1&n)}function fi(n,i,a,d){if(null===i)return-1;let f=0;if(d||!a){let v=!1;for(;f<i.length;){const b=i[f];if(b===n)return f;if(3===b||6===b)v=!0;else{if(1===b||2===b){let x=i[++f];for(;"string"==typeof x;)x=i[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=v?1:2}return-1}return function pi(n,i){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const d=n[a];if("number"==typeof d)return-1;if(d===i)return a;a++}return-1}(i,n)}function Ls(n,i,a=!1){for(let d=0;d<i.length;d++)if(Qn(n,i[d],a))return!0;return!1}function Bs(n,i){e:for(let a=0;a<i.length;a++){const d=i[a];if(n.length===d.length){for(let f=0;f<n.length;f++)if(n[f]!==d[f])continue e;return!0}}return!1}function Si(n,i){return n?":not("+i.trim()+")":i}function ei(n){let i=n[0],a=1,d=2,f="",v=!1;for(;a<n.length;){let b=n[a];if("string"==typeof b)if(2&d){const x=n[++a];f+="["+b+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!Jn(b)&&(i+=Si(v,f),f=""),d=b,v=v||!Jn(d);a++}return""!==f&&(i+=Si(v,f)),i}function _s(n){return z(()=>{const i=zn(n),a={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===q.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Pe.Emulated,styles:n.styles||ke,_:null,schemas:n.schemas||null,tView:null,id:""};ur(a);const d=n.dependencies;return a.directiveDefs=Ri(d,!1),a.pipeDefs=Ri(d,!0),a.id=function is(n){let i=0;const a=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const f of a)i=Math.imul(31,i)+f.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(a),a})}function W(n){return Xe(n)||ut(n)}function ne(n){return null!==n}function Ee(n){return z(()=>({type:n.type,bootstrap:n.bootstrap||ke,declarations:n.declarations||ke,imports:n.imports||ke,exports:n.exports||ke,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function G(n,i){if(null==n)return it;const a={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),a[f]=d,i&&(i[f]=v)}return a}function ie(n){return z(()=>{const i=zn(n);return ur(i),i})}function $e(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xe(n){return n[ht]||null}function ut(n){return n[Ct]||null}function Rt(n){return n[jt]||null}function cn(n){const i=Xe(n)||ut(n)||Rt(n);return null!==i&&i.standalone}function gn(n,i){const a=n[Ut]||null;if(!a&&!0===i)throw new Error(`Type ${Be(n)} does not have '\u0275mod' property.`);return a}function zn(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||ke,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:G(n.inputs,i),outputs:G(n.outputs)}}function ur(n){var i;null===(i=n.features)||void 0===i||i.forEach(a=>a(n))}function Ri(n,i){if(!n)return null;const a=i?Rt:W;return()=>("function"==typeof n?n():n).map(d=>a(d)).filter(ne)}const Gr=0,En=1,hr=2,Kr=3,Hi=4,bo=5,zi=6,Xs=7,Qr=8,Yi=9,Li=10,er=11,Ws=12,Js=13,$r=14,Ii=15,ss=16,Rs=17,xs=18,fo=19,po=20,$s=21,Ks=22,ta=23,xi=24,Cr=25,eo=1,ga=2,Zi=7,yi=8,qs=9,Ti=11;function os(n){return Array.isArray(n)&&"object"==typeof n[eo]}function Gi(n){return Array.isArray(n)&&!0===n[eo]}function Lo(n){return 0!=(4&n.flags)}function Do(n){return n.componentOffset>-1}function Qi(n){return 1==(1&n.flags)}function Wi(n){return!!n.template}function to(n){return 0!=(512&n[hr])}function gs(n,i){return n.hasOwnProperty(on)?n[on]:null}let C=null!==(Re=Sn.WeakRef)&&void 0!==Re?Re:class j{constructor(i){this.ref=i}deref(){return this.ref}},rt=0,Lt=null,nn=!1;function an(n){const i=Lt;return Lt=n,i}class jr{constructor(){this.id=rt++,this.ref=function N(n){return new C(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[i,a]of this.producers){const d=a.producerNode.deref();if(void 0!==d&&a.atTrackingVersion===this.trackingVersion){if(d.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(i),null==d||d.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const i=nn;nn=!0;try{for(const[a,d]of this.consumers){const f=d.consumerNode.deref();void 0!==f&&f.trackingVersion===d.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),null==f||f.producers.delete(this.id))}}finally{nn=i}}producerAccessed(){if(nn)throw new Error("");if(null===Lt)return;let i=Lt.producers.get(this.id);void 0===i?(i={consumerNode:Lt.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Lt.trackingVersion},Lt.producers.set(this.id,i),this.consumers.set(Lt.id,i)):(i.seenValueVersion=this.valueVersion,i.atTrackingVersion=Lt.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){var i;return!1!==(null===(i=Lt)||void 0===i?void 0:i.consumerAllowSignalWrites)}producerPollStatus(i){return this.valueVersion!==i||(this.onProducerUpdateValueVersion(),this.valueVersion!==i)}}let Xi=null;const ya=()=>{};class Fl extends jr{constructor(i,a,d){super(),this.watch=i,this.schedule=a,this.dirty=!1,this.cleanupFn=ya,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=d}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const i=an(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ya,this.watch(this.registerOnCleanup)}finally{an(i)}}cleanup(){this.cleanupFn()}}class hu{constructor(i,a,d){this.previousValue=i,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Vo(){return Ll}function Ll(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ec),Vi}function Vi(){const n=Ss(this),i=null==n?void 0:n.current;if(i){const a=n.previous;if(a===it)n.previous=i;else for(let d in i)a[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Ec(n,i,a,d){const f=this.declaredInputs[a],v=Ss(n)||function ld(n,i){return n[fu]=i}(n,{previous:it,current:null}),b=v.current||(v.current={}),x=v.previous,B=x[f];b[f]=new hu(B&&B.currentValue,i,x===it),n[d]=i}Vo.ngInherit=!0;const fu="__ngSimpleChanges__";function Ss(n){return n[fu]||null}const Uo=function(n,i,a){};function ti(n){for(;Array.isArray(n);)n=n[Gr];return n}function Aa(n,i){return ti(i[n])}function ls(n,i){return ti(i[n.index])}function Bl(n,i){return n.data[i]}function qa(n,i){return n[i]}function Ts(n,i){const a=i[n];return os(a)?a:a[Gr]}function pu(n){return 128==(128&n[hr])}function re(n,i){return null==i?null:n[i]}function H(n){n[Rs]=0}function ye(n){1024&n[hr]||(n[hr]|=1024,Bt(n,1))}function Ke(n){1024&n[hr]&&(n[hr]&=-1025,Bt(n,-1))}function Bt(n,i){let a=n[Kr];if(null===a)return;a[bo]+=i;let d=a;for(a=a[Kr];null!==a&&(1===i&&1===d[bo]||-1===i&&0===d[bo]);)a[bo]+=i,d=a,a=a[Kr]}const An={lFrame:vu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function As(){return An.bindingsEnabled}function rn(){return An.lFrame.lView}function en(){return An.lFrame.tView}function Vt(n){return An.lFrame.contextLView=n,n[Qr]}function hn(n){return An.lFrame.contextLView=null,n}function vi(){let n=Ya();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ya(){return An.lFrame.currentTNode}function Qa(n,i){const a=An.lFrame;a.currentTNode=n,a.isParent=i}function wc(){return An.lFrame.isParent}function gu(){An.lFrame.isParent=!1}function Dr(){return An.lFrame.bindingIndex++}function cr(n,i){const a=An.lFrame;a.bindingIndex=a.bindingRootIndex=n,ni(i)}function ni(n){An.lFrame.currentDirectiveIndex=n}function es(){return An.lFrame.currentQueryIndex}function Mn(n){An.lFrame.currentQueryIndex=n}function Ku(n){const i=n[En];return 2===i.type?i.declTNode:1===i.type?n[zi]:null}function mu(n,i,a){if(a&tn.SkipSelf){let f=i,v=n;for(;!(f=f.parent,null!==f||a&tn.Host||(f=Ku(v),null===f||(v=v[$r],10&f.type))););if(null===f)return!1;i=f,n=v}const d=An.lFrame=yu();return d.currentTNode=i,d.lView=n,!0}function Ma(n){const i=yu(),a=n[En];An.lFrame=i,i.currentTNode=a.firstChild,i.lView=n,i.tView=a,i.contextLView=n,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function yu(){const n=An.lFrame,i=null===n?null:n.child;return null===i?vu(n):i}function vu(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Ic(){const n=An.lFrame;return An.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const hi=Ic;function _i(){const n=Ic();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wr(){return An.lFrame.selectedIndex}function Ra(n){An.lFrame.selectedIndex=n}function ms(){const n=An.lFrame;return Bl(n.tView,n.selectedIndex)}let yf=!0;function Xa(){return yf}function ts(n){yf=n}function Ja(n,i){for(let te=i.directiveStart,pe=i.directiveEnd;te<pe;te++){const ot=n.data[te].type.prototype,{ngAfterContentInit:xt,ngAfterContentChecked:Jt,ngAfterViewInit:bn,ngAfterViewChecked:Fn,ngOnDestroy:qn}=ot;var a,d,f,v,b,x,B;xt&&(null!==(a=n.contentHooks)&&void 0!==a?a:n.contentHooks=[]).push(-te,xt),Jt&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(te,Jt),(null!==(f=n.contentCheckHooks)&&void 0!==f?f:n.contentCheckHooks=[]).push(te,Jt)),bn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-te,bn),Fn&&((null!==(b=n.viewHooks)&&void 0!==b?b:n.viewHooks=[]).push(te,Fn),(null!==(x=n.viewCheckHooks)&&void 0!==x?x:n.viewCheckHooks=[]).push(te,Fn)),null!=qn&&(null!==(B=n.destroyHooks)&&void 0!==B?B:n.destroyHooks=[]).push(te,qn)}}function M(n,i,a){F(n,i,3,a)}function P(n,i,a,d){(3&n[hr])===a&&F(n,i,a,d)}function D(n,i){let a=n[hr];(3&a)===i&&(a&=4095,a+=1,n[hr]=a)}function F(n,i,a,d){const v=null!=d?d:-1,b=i.length-1;let x=0;for(let B=void 0!==d?65535&n[Rs]:0;B<b;B++)if("number"==typeof i[B+1]){if(x=i[B],null!=d&&x>=d)break}else i[B]<0&&(n[Rs]+=65536),(x<v||-1==v)&&(Te(n,a,i,B),n[Rs]=(4294901760&n[Rs])+B+2),B++}function ee(n,i){Uo(4,n,i);const a=an(null);try{i.call(n)}finally{an(a),Uo(5,n,i)}}function Te(n,i,a,d){const f=a[d]<0,v=a[d+1],x=n[f?-a[d]:a[d]];f?n[hr]>>12<n[Rs]>>16&&(3&n[hr])===i&&(n[hr]+=4096,ee(x,v)):ee(x,v)}const Ie=-1;class gt{constructor(i,a,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function qo(n){return n!==Ie}function _a(n){return 32767&n}function la(n,i){let a=function na(n){return n>>16}(n),d=i;for(;a>0;)d=d[$r],a--;return d}let io=!0;function Vl(n){const i=io;return io=n,i}const sh=255,oh=5;let vf=0;const el={};function tl(n,i){const a=bc(n,i);if(-1!==a)return a;const d=i[En];d.firstCreatePass&&(n.injectorIndex=i.length,ah(d.data,n),ah(i,null),ah(d.blueprint,null));const f=_f(n,i),v=n.injectorIndex;if(qo(f)){const b=_a(f),x=la(f,i),B=x[En].data;for(let te=0;te<8;te++)i[v+te]=x[b+te]|B[b+te]}return i[v+8]=f,v}function ah(n,i){n.push(0,0,0,0,0,0,0,0,i)}function bc(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function _f(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,d=null,f=i;for(;null!==f;){if(d=Gs(f),null===d)return Ie;if(a++,f=f[$r],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return Ie}function Dc(n,i,a){!function Ap(n,i,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(fn)&&(d=a[fn]),null==d&&(d=a[fn]=vf++);const f=d&sh;i.data[n+(f>>oh)]|=1<<f}(n,i,a)}function cs(n,i,a){if(a&tn.Optional||void 0!==n)return n;Ye()}function _u(n,i,a,d){if(a&tn.Optional&&void 0===d&&(d=null),!(a&(tn.Self|tn.Host))){const f=n[Yi],v=rr(void 0);try{return f?f.get(i,d,a&tn.Optional):Or(i,d,a&tn.Optional)}finally{rr(v)}}return cs(d,0,a)}function vo(n,i,a,d=tn.Default,f){if(null!==n){if(2048&i[hr]){const b=function hm(n,i,a,d,f){let v=n,b=i;for(;null!==v&&null!==b&&2048&b[hr]&&!(512&b[hr]);){const x=Sc(v,b,a,d|tn.Self,el);if(x!==el)return x;let B=v.parent;if(!B){const te=b[po];if(te){const pe=te.get(a,el,d);if(pe!==el)return pe}B=Gs(b),b=b[$r]}v=B}return f}(n,i,a,d,el);if(b!==el)return b}const v=Sc(n,i,a,d,el);if(v!==el)return v}return _u(i,a,d,f)}function Sc(n,i,a,d,f){const v=function Eu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(fn)?n[fn]:void 0;return"number"==typeof i?i>=0?i&sh:Tc:i}(a);if("function"==typeof v){if(!mu(i,n,d))return d&tn.Host?cs(f,0,d):_u(i,a,d,f);try{const b=v(d);if(null!=b||d&tn.Optional)return b;Ye()}finally{hi()}}else if("number"==typeof v){let b=null,x=bc(n,i),B=Ie,te=d&tn.Host?i[Ii][zi]:null;for((-1===x||d&tn.SkipSelf)&&(B=-1===x?_f(n,i):i[x+8],B!==Ie&&ds(d,!1)?(b=i[En],x=_a(B),i=la(B,i)):x=-1);-1!==x;){const pe=i[En];if(pr(v,x,pe.data)){const Oe=xa(x,i,a,b,d,te);if(Oe!==el)return Oe}B=i[x+8],B!==Ie&&ds(d,i[En].data[x+8]===te)&&pr(v,x,i)?(b=pe,x=_a(B),i=la(B,i)):x=-1}}return f}function xa(n,i,a,d,f,v){const b=i[En],x=b.data[n+8],pe=Pa(x,b,a,null==d?Do(x)&&io:d!=b&&0!=(3&x.type),f&tn.Host&&v===x);return null!==pe?ii(i,b,pe,x):el}function Pa(n,i,a,d,f){const v=n.providerIndexes,b=i.data,x=1048575&v,B=n.directiveStart,pe=v>>20,ot=f?x+pe:n.directiveEnd;for(let xt=d?x:x+pe;xt<ot;xt++){const Jt=b[xt];if(xt<B&&a===Jt||xt>=B&&Jt.type===a)return xt}if(f){const xt=b[B];if(xt&&Wi(xt)&&xt.type===a)return B}return null}function ii(n,i,a,d){let f=n[a];const v=i.data;if(function Wt(n){return n instanceof gt}(f)){const b=f;b.resolving&&function et(n,i){const a=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${n}${a}`)}(function ze(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}(v[a]));const x=Vl(b.canSeeViewProviders);b.resolving=!0;const B=b.injectImpl?rr(b.injectImpl):null;mu(n,d,tn.Default);try{f=n[a]=b.factory(void 0,v,n,d),i.firstCreatePass&&a>=d.directiveStart&&function Sp(n,i,a){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:v}=i.type.prototype;if(d){var b,x;const Oe=Ll(i);(null!==(b=a.preOrderHooks)&&void 0!==b?b:a.preOrderHooks=[]).push(n,Oe),(null!==(x=a.preOrderCheckHooks)&&void 0!==x?x:a.preOrderCheckHooks=[]).push(n,Oe)}var B,te,pe;f&&(null!==(B=a.preOrderHooks)&&void 0!==B?B:a.preOrderHooks=[]).push(0-n,f),v&&((null!==(te=a.preOrderHooks)&&void 0!==te?te:a.preOrderHooks=[]).push(n,v),(null!==(pe=a.preOrderCheckHooks)&&void 0!==pe?pe:a.preOrderCheckHooks=[]).push(n,v))}(a,v[a],i)}finally{null!==B&&rr(B),Vl(x),b.resolving=!1,hi()}}return f}function pr(n,i,a){return!!(a[i+(n>>oh)]&1<<n)}function ds(n,i){return!(n&tn.Self||n&tn.Host&&i)}class Oa{constructor(i,a){this._tNode=i,this._lView=a}get(i,a,d){return vo(this._tNode,this._lView,i,lr(d),a)}}function Tc(){return new Oa(vi(),rn())}function Ei(n){return z(()=>{const i=n.prototype.constructor,a=i[on]||wu(i),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const v=f[on]||wu(f);if(v&&v!==a)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function wu(n){return Ue(n)?()=>{const i=wu(ge(n));return i&&i()}:gs(n)}function Gs(n){const i=n[En],a=i.type;return 2===a?i.declTNode:1===a?n[zi]:null}function Ac(n){return function lh(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const a=n.attrs;if(a){const d=a.length;let f=0;for(;f<d;){const v=a[f];if(wt(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<d&&"string"==typeof a[f];)f++;else{if(v===i)return a[f+1];f+=2}}}return null}(vi(),n)}const Po="__annotations__",qi="__parameters__",so="__prop__metadata__";function cd(n,i,a,d,f){return z(()=>{const v=wl(i);function b(...x){if(this instanceof b)return v.call(this,...x),this;const B=new b(...x);return function(pe){return f&&f(pe,...x),(pe.hasOwnProperty(Po)?pe[Po]:Object.defineProperty(pe,Po,{value:[]})[Po]).push(B),d&&d(pe),pe}}return a&&(b.prototype=Object.create(a.prototype)),b.prototype.ngMetadataName=n,b.annotationCls=b,b})}function wl(n){return function(...a){if(n){const d=n(...a);for(const f in d)this[f]=d[f]}}}function Yo(n,i,a){return z(()=>{const d=wl(i);function f(...v){if(this instanceof f)return d.apply(this,v),this;const b=new f(...v);return x.annotation=b,x;function x(B,te,pe){const Oe=B.hasOwnProperty(qi)?B[qi]:Object.defineProperty(B,qi,{value:[]})[qi];for(;Oe.length<=pe;)Oe.push(null);return(Oe[pe]=Oe[pe]||[]).push(b),B}}return a&&(f.prototype=Object.create(a.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}const Na=Yo("Attribute",n=>({attributeName:n,__NG_ELEMENT_ID__:()=>Ac(n)}));function Ns(n){const i=Sn.ng;if(i&&i.\u0275compilerFacade)return i.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const Cl=Function;function Hl(n){return"function"==typeof n}function zl(n,i){n.forEach(a=>Array.isArray(a)?zl(a,i):i(a))}function Yu(n,i,a){i>=n.length?n.push(a):n.splice(i,0,a)}function nl(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Mc(n,i){const a=[];for(let d=0;d<n;d++)a.push(i);return a}function Ur(n,i,a){let d=Ui(n,i);return d>=0?n[1|d]=a:(d=~d,function xp(n,i,a,d){let f=n.length;if(f==i)n.push(a,d);else if(1===f)n.push(d,n[0]),n[0]=a;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=a,n[i+1]=d}}(n,d,i,a)),d}function Rc(n,i){const a=Ui(n,i);if(a>=0)return n[1|a]}function Ui(n,i){return function xc(n,i,a){let d=0,f=n.length>>a;for(;f!==d;){const v=d+(f-d>>1),b=n[v<<a];if(i===b)return v<<a;b>i?f=v:d=v+1}return~(f<<a)}(n,i,1)}const Pc=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Fa=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Oc=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Gl=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class ns{constructor(i){this._reflect=i||Sn.Reflect}factory(i){return(...a)=>new i(...a)}_zipTypesAndAnnotations(i,a){let d;d=Mc(typeof i>"u"?a.length:i.length);for(let f=0;f<d.length;f++)d[f]=typeof i>"u"?[]:i[f]&&i[f]!=Object?[i[f]]:[],a&&null!=a[f]&&(d[f]=d[f].concat(a[f]));return d}_ownParameters(i,a){if(function wi(n){return Pc.test(n)||Gl.test(n)||Fa.test(n)&&!Oc.test(n)}(i.toString()))return null;if(i.parameters&&i.parameters!==a.parameters)return i.parameters;const f=i.ctorParameters;if(f&&f!==a.ctorParameters){const x="function"==typeof f?f():f,B=x.map(pe=>pe&&pe.type),te=x.map(pe=>pe&&La(pe.decorators));return this._zipTypesAndAnnotations(B,te)}const v=i.hasOwnProperty(qi)&&i[qi],b=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",i);return b||v?this._zipTypesAndAnnotations(b,v):Mc(i.length)}parameters(i){if(!Hl(i))return[];const a=Nc(i);let d=this._ownParameters(i,a);return!d&&a!==Object&&(d=this.parameters(a)),d||[]}_ownAnnotations(i,a){if(i.annotations&&i.annotations!==a.annotations){let d=i.annotations;return"function"==typeof d&&d.annotations&&(d=d.annotations),d}return i.decorators&&i.decorators!==a.decorators?La(i.decorators):i.hasOwnProperty(Po)?i[Po]:null}annotations(i){if(!Hl(i))return[];const a=Nc(i),d=this._ownAnnotations(i,a)||[];return(a!==Object?this.annotations(a):[]).concat(d)}_ownPropMetadata(i,a){if(i.propMetadata&&i.propMetadata!==a.propMetadata){let d=i.propMetadata;return"function"==typeof d&&d.propMetadata&&(d=d.propMetadata),d}if(i.propDecorators&&i.propDecorators!==a.propDecorators){const d=i.propDecorators,f={};return Object.keys(d).forEach(v=>{f[v]=La(d[v])}),f}return i.hasOwnProperty(so)?i[so]:null}propMetadata(i){if(!Hl(i))return{};const a=Nc(i),d={};if(a!==Object){const v=this.propMetadata(a);Object.keys(v).forEach(b=>{d[b]=v[b]})}const f=this._ownPropMetadata(i,a);return f&&Object.keys(f).forEach(v=>{const b=[];d.hasOwnProperty(v)&&b.push(...d[v]),b.push(...f[v]),d[v]=b}),d}ownPropMetadata(i){return Hl(i)&&this._ownPropMetadata(i,Nc(i))||{}}hasLifecycleHook(i,a){return i instanceof Cl&&a in i.prototype}}function La(n){return n?n.map(i=>new(0,i.type.annotationCls)(...i.args?i.args:[])):[]}function Nc(n){const i=n.prototype?Object.getPrototypeOf(n.prototype):null;return(i?i.constructor:null)||Object}const If=_r(Yo("Inject",n=>({token:n})),-1),bu=_r(Yo("Optional"),8),Wl=_r(Yo("Self"),2),Du=_r(Yo("SkipSelf"),4),hd=_r(Yo("Host"),1);let il=null;function pd(n){return hs(function fd(){return il=il||new ns}().parameters(n))}function hs(n){return n.map(i=>function ua(n){const i={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(n)&&n.length>0)for(let a=0;a<n.length;a++){const d=n[a];if(void 0===d)continue;const f=Object.getPrototypeOf(d);if(d instanceof bu||"Optional"===f.ngMetadataName)i.optional=!0;else if(d instanceof Du||"SkipSelf"===f.ngMetadataName)i.skipSelf=!0;else if(d instanceof Wl||"Self"===f.ngMetadataName)i.self=!0;else if(d instanceof hd||"Host"===f.ngMetadataName)i.host=!0;else if(d instanceof If)i.token=d.token;else if(d instanceof Na){if(void 0===d.attributeName)throw new Ce(204,!1);i.attribute=d.attributeName}else i.token=d}else i.token=void 0===n||Array.isArray(n)&&0===n.length?null:n;return i}(i))}var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();const Va=/^>|^->|<!--|-->|--!>|<!-$/g,Lc=/(<|>)/,Bc="\u200b$1\u200b";const Ed=new Map;let si=0;const Np="__ngContext__";function _o(n,i){os(i)?(n[Np]=i[fo],function ch(n){Ed.set(n[fo],n)}(i)):n[Np]=i}let wd;function hh(n,i){return wd(n,i)}function Df(n){const i=n[Kr];return Gi(i)?i[Kr]:i}function Fp(n){return Ql(n[Ws])}function Uc(n){return Ql(n[Hi])}function Ql(n){for(;null!==n&&!Gi(n);)n=n[Hi];return n}function Ua(n,i,a,d,f){if(null!=d){let v,b=!1;Gi(d)?v=d:os(d)&&(b=!0,d=d[Gr]);const x=ti(d);0===n&&null!==a?null==f?mh(i,a,x):jc(i,a,x,f||null,!0):1===n&&null!==a?jc(i,a,x,f||null,!0):2===n?function Eh(n,i,a){const d=Hc(n,i);d&&function Tf(n,i,a,d){n.removeChild(i,a,d)}(n,d,i,a)}(i,x,b):3===n&&i.destroyNode(x),null!=v&&function ov(n,i,a,d,f){const v=a[Zi];v!==ti(a)&&Ua(i,n,d,v,f);for(let x=Ti;x<a.length;x++){const B=a[x];Sd(B[En],B,n,i,d,v)}}(i,n,v,a,f)}}function Ea(n,i){return n.createComment(function Op(n){return n.replace(Va,i=>i.replace(Lc,Bc))}(i))}function Ju(n,i,a){return n.createElement(i,a)}function Pi(n,i){const a=n[qs],d=a.indexOf(i);Ke(i),a.splice(d,1)}function Xl(n,i){if(n.length<=Ti)return;const a=Ti+i,d=n[a];if(d){const f=d[ss];null!==f&&f!==n&&Pi(f,d),i>0&&(n[a-1][Hi]=d[Hi]);const v=nl(n,Ti+i);!function ph(n,i){Sd(n,i,i[er],2,null,null),i[Gr]=null,i[zi]=null}(d[En],d);const b=v[xs];null!==b&&b.detachView(v[En]),d[Kr]=null,d[Hi]=null,d[hr]&=-129}return d}function Cd(n,i){if(!(256&i[hr])){var a,d;const f=i[er];null===(a=i[ta])||void 0===a||a.destroy(),null===(d=i[xi])||void 0===d||d.destroy(),f.destroyNode&&Sd(n,i,f,3,null,null),function j_(n){let i=n[Ws];if(!i)return Sf(n[En],n);for(;i;){let a=null;if(os(i))a=i[Ws];else{const d=i[Ti];d&&(a=d)}if(!a){for(;i&&!i[Hi]&&i!==n;)os(i)&&Sf(i[En],i),i=i[Kr];null===i&&(i=n),os(i)&&Sf(i[En],i),a=i&&i[Hi]}i=a}}(i)}}function Sf(n,i){if(!(256&i[hr])){i[hr]&=-129,i[hr]|=256,function sv(n,i){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let d=0;d<a.length;d+=2){const f=i[a[d]];if(!(f instanceof gt)){const v=a[d+1];if(Array.isArray(v))for(let b=0;b<v.length;b+=2){const x=f[v[b]],B=v[b+1];Uo(4,x,B);try{B.call(x)}finally{Uo(5,x,B)}}else{Uo(4,f,v);try{v.call(f)}finally{Uo(5,f,v)}}}}}(n,i),function Bp(n,i){const a=n.cleanup,d=i[Xs];if(null!==a)for(let v=0;v<a.length-1;v+=2)if("string"==typeof a[v]){const b=a[v+3];b>=0?d[b]():d[-b].unsubscribe(),v+=2}else a[v].call(d[a[v+1]]);null!==d&&(i[Xs]=null);const f=i[$s];if(null!==f){for(let v=0;v<f.length;v++)(0,f[v])();i[$s]=null}}(n,i),1===i[En].type&&i[er].destroy();const a=i[ss];if(null!==a&&Gi(i[Kr])){a!==i[Kr]&&Pi(a,i);const d=i[xs];null!==d&&d.detachView(n)}!function pm(n){Ed.delete(n[fo])}(i)}}function gh(n,i,a){return function $p(n,i,a){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return a[Gr];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:v}=n.data[d.directiveStart+f];if(v===Pe.None||v===Pe.Emulated)return null}return ls(d,a)}}(n,i.parent,a)}function jc(n,i,a,d,f){n.insertBefore(i,a,d,f)}function mh(n,i,a){n.appendChild(i,a)}function ec(n,i,a,d,f){null!==d?jc(n,i,a,d,f):mh(n,i,a)}function Hc(n,i){return n.parentNode(i)}function Vp(n,i,a){return Af(n,i,a)}let yh,Ch,Gc,Af=function bd(n,i,a){return 40&n.type?ls(n,a):null};function vh(n,i,a,d){const f=gh(n,d,i),v=i[er],x=Vp(d.parent||i[zi],d,i);if(null!=f)if(Array.isArray(a))for(let B=0;B<a.length;B++)ec(v,f,a[B],x,!1);else ec(v,f,a,x,!1);void 0!==yh&&yh(v,d,i,a,f)}function Rf(n,i){if(null!==i){const a=i.type;if(3&a)return ls(i,n);if(4&a)return _m(-1,n[i.index]);if(8&a){const d=i.child;if(null!==d)return Rf(n,d);{const f=n[i.index];return Gi(f)?_m(-1,f):ti(f)}}if(32&a)return hh(i,n)()||ti(n[i.index]);{const d=_h(n,i);return null!==d?Array.isArray(d)?d[0]:Rf(Df(n[Ii]),d):Rf(n,i.next)}}return null}function _h(n,i){return null!==i?n[Ii][zi].projection[i.projection]:null}function _m(n,i){const a=Ti+n+1;if(a<i.length){const d=i[a],f=d[En].firstChild;if(null!==f)return Rf(d,f)}return i[Zi]}function wh(n,i,a,d,f,v,b){for(;null!=a;){const x=d[a.index],B=a.type;if(b&&0===i&&(x&&_o(ti(x),d),a.flags|=2),32!=(32&a.flags))if(8&B)wh(n,i,a.child,d,f,v,!1),Ua(i,n,f,x,v);else if(32&B){const te=hh(a,d);let pe;for(;pe=te();)Ua(i,n,f,pe,v);Ua(i,n,f,x,v)}else 16&B?xf(n,i,d,a,f,v):Ua(i,n,f,x,v);a=b?a.projectionNext:a.next}}function Sd(n,i,a,d,f,v){wh(a,d,n.firstChild,i,f,v,!1)}function xf(n,i,a,d,f,v){const b=a[Ii],B=b[zi].projection[d.projection];if(Array.isArray(B))for(let te=0;te<B.length;te++)Ua(i,n,f,B[te],v);else wh(n,i,B,b[Kr],f,v,!0)}function Ih(n,i,a){""===a?n.removeAttribute(i,"class"):n.setAttribute(i,"class",a)}function Of(n,i,a){const{mergedAttrs:d,classes:f,styles:v}=a;null!==d&&Dt(n,i,d),null!==f&&Ih(n,i,f),null!==v&&function Jl(n,i,a){n.setAttribute(i,"style",a)}(n,i,v)}function H_(n){Ch=n}function Hp(n){var i;return(null===(i=function jp(){if(void 0===Gc&&(Gc=null,Sn.trustedTypes))try{Gc=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gc}())||void 0===i?void 0:i.createScriptURL(n))||n}class Nf{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ae})`}}function nc(n){return n instanceof Nf?n.changingThisBreaksApplicationSecurity:n}function ja(n,i){const a=function zp(n){return n instanceof Nf&&n.getTypeName()||null}(n);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see ${Ae})`)}return a===i}const Wp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ao=(()=>((ao=ao||{})[ao.NONE=0]="NONE",ao[ao.HTML=1]="HTML",ao[ao.STYLE=2]="STYLE",ao[ao.SCRIPT=3]="SCRIPT",ao[ao.URL=4]="URL",ao[ao.RESOURCE_URL=5]="RESOURCE_URL",ao))();function Dh(n){const i=ic();return i?i.sanitize(ao.URL,n)||"":ja(n,"URL")?nc(n):function Kp(n){return(n=String(n)).match(Wp)?n:"unsafe:"+n}(at(n))}function Zp(n){const i=ic();if(i)return Hp(i.sanitize(ao.RESOURCE_URL,n)||"");if(ja(n,"ResourceURL"))return Hp(nc(n));throw new Ce(904,!1)}function Pd(n,i,a){return function hv(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Zp:Dh}(i,a)(n)}function ic(){const n=rn();return n&&n[Li].sanitizer}class ji{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Je({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const lo=new ji("ENVIRONMENT_INITIALIZER"),Mm=new ji("INJECTOR",-1),Vf=new ji("INJECTOR_DEF_TYPES");class Od{get(i,a=vr){if(a===vr){const d=new Error(`NullInjectorError: No provider for ${Be(i)}!`);throw d.name="NullInjectorError",d}return a}}function sc(...n){return{\u0275providers:Nd(0,n),\u0275fromNgModule:!0}}function Nd(n,...i){const a=[],d=new Set;let f;return zl(i,v=>{const b=v;Pu(b,a,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&Jp(f,a),a}function Jp(n,i){for(let a=0;a<n.length;a++){const{providers:f}=n[a];oc(f,v=>{i.push(v)})}}function Pu(n,i,a,d){if(!(n=ge(n)))return!1;let f=null,v=In(n);const b=!v&&Xe(n);if(v||b){if(b&&!b.standalone)return!1;f=n}else{const B=n.ngModule;if(v=In(B),!v)return!1;f=B}const x=d.has(f);if(b){if(x)return!1;if(d.add(f),b.dependencies){const B="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const te of B)Pu(te,i,a,d)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let te;d.add(f);try{zl(v.imports,pe=>{Pu(pe,i,a,d)&&(te||(te=[]),te.push(pe))})}finally{}void 0!==te&&Jp(te,i)}if(!x){const te=gs(f)||(()=>new f);i.push({provide:f,useFactory:te,deps:ke},{provide:Vf,useValue:f,multi:!0},{provide:lo,useValue:()=>At(f),multi:!0})}const B=v.providers;null==B||x||oc(B,pe=>{i.push(pe)})}}return f!==n&&void 0!==n.providers}function oc(n,i){for(let a of n)qe(a)&&(a=a.\u0275providers),Array.isArray(a)?oc(a,i):i(a)}const Ia=he({provide:String,useValue:he});function al(n){return null!==n&&"object"==typeof n&&Ia in n}function zo(n){return"function"==typeof n}const jf=new ji("Set Injector scope."),Hf={},Nu={};let xm;function eg(){return void 0===xm&&(xm=new Od),xm}class Jc{}class zf extends Jc{get destroyed(){return this._destroyed}constructor(i,a,d,f){super(),this.parent=a,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rg(i,b=>this.processProvider(b)),this.records.set(Mm,nu(void 0,this)),f.has("environment")&&this.records.set(Jc,nu(void 0,this));const v=this.records.get(jf);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Vf.multi,ke,tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const a=me(this),d=rr(void 0);try{return i()}finally{me(a),rr(d)}}get(i,a=vr,d=tn.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Wn))return i[Wn](this);d=lr(d);const f=me(this),v=rr(void 0);try{if(!(d&tn.SkipSelf)){let x=this.records.get(i);if(void 0===x){const B=function Om(n){return"function"==typeof n||"object"==typeof n&&n instanceof ji}(i)&&yn(i);x=B&&this.injectableDefInScope(B)?nu(tg(i),Hf):null,this.records.set(i,x)}if(null!=x)return this.hydrate(i,x)}return(d&tn.Self?eg():this.parent).get(i,a=d&tn.Optional&&a===vr?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[Lr]=b[Lr]||[]).unshift(Be(i)),f)throw b;return function de(n,i,a,d){const f=n[Lr];throw i[ci]&&f.unshift(i[ci]),n.message=function K(n,i,a,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=Be(i);if(Array.isArray(i))f=i.map(Be).join(" -> ");else if("object"==typeof i){let v=[];for(let b in i)if(i.hasOwnProperty(b)){let x=i[b];v.push(b+":"+("string"==typeof x?JSON.stringify(x):Be(x)))}f=`{${v.join(", ")}}`}return`${a}${d?"("+d+")":""}[${f}]: ${n.replace(Gn,"\n  ")}`}("\n"+n.message,f,a,d),n.ngTokenPath=f,n[Lr]=null,n}(b,i,"R3InjectorError",this.source)}throw b}finally{rr(v),me(f)}}resolveInjectorInitializers(){const i=me(this),a=rr(void 0);try{const d=this.get(lo.multi,ke,tn.Self);for(const f of d)f()}finally{me(i),rr(a)}}toString(){const i=[],a=this.records;for(const d of a.keys())i.push(Be(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(i){let a=zo(i=ge(i))?i:ge(i&&i.provide);const d=function Gf(n){return al(n)?nu(void 0,n.useValue):nu(Pm(n),Hf)}(i);if(zo(i)||!0!==i.multi)this.records.get(a);else{let f=this.records.get(a);f||(f=nu(void 0,Hf,!0),f.factory=()=>On(f.multi),this.records.set(a,f)),a=i,f.multi.push(i)}this.records.set(a,d)}hydrate(i,a){return a.value===Hf&&(a.value=Nu,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ah(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(i){if(!i.providedIn)return!1;const a=ge(i.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(i){const a=this._onDestroyHooks.indexOf(i);-1!==a&&this._onDestroyHooks.splice(a,1)}}function tg(n){const i=yn(n),a=null!==i?i.factory:gs(n);if(null!==a)return a;if(n instanceof ji)throw new Ce(204,!1);if(n instanceof Function)return function Fd(n){const i=n.length;if(i>0)throw Mc(i,"?"),new Ce(204,!1);const a=function Nt(n){return n&&(n[Ft]||n[sr])||null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new Ce(204,!1)}function Pm(n,i,a){let d;if(zo(n)){const f=ge(n);return gs(f)||tg(f)}if(al(n))d=()=>ge(n.useValue);else if(function Uf(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...On(n.deps||[]));else if(function Ou(n){return!(!n||!n.useExisting)}(n))d=()=>At(ge(n.useExisting));else{const f=ge(n&&(n.useClass||n.provide));if(!function ng(n){return!!n.deps}(n))return gs(f)||tg(f);d=()=>new f(...On(n.deps))}return d}function nu(n,i,a=!1){return{factory:n,value:i,multi:a?[]:void 0}}function rg(n,i){for(const a of n)Array.isArray(a)?rg(a,i):a&&qe(a)?rg(a.\u0275providers,i):i(a)}const Wf=new ji("AppId",{providedIn:"root",factory:()=>Go}),Go="ng",Nm=new ji("Platform Initializer"),km=new ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pv=new ji("AnimationModuleType"),Fm=new ji("CSP nonce",{providedIn:"root",factory:()=>{var n,i;return(null===(n=function Ru(){return void 0!==Ch?Ch:typeof document<"u"?document:void 0}().body)||void 0===n||null===(i=n.querySelector("[ngCspNonce]"))||void 0===i?void 0:i.getAttribute("ngCspNonce"))||null}});let $d=(n,i)=>null;function Yf(n,i){return $d(n,i)}class Qf{}class Xf{}class Ev{resolveComponentFactory(i){throw function Vm(n){const i=Error(`No component factory found for ${Be(n)}.`);return i.ngComponent=n,i}(i)}}let Jf=(()=>{class n{}return n.NULL=new Ev,n})();function wv(){return td(vi(),rn())}function td(n,i){return new Lh(ls(n,i))}let Lh=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=wv,n})();function K_(n){return n instanceof Lh?n.nativeElement:n}class Iv{}let ca=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Cv(){const n=rn(),a=Ts(vi().index,n);return(os(a)?a:n)[er]}(),n})(),bv=(()=>{class n{}return n.\u0275prov=Je({token:n,providedIn:"root",factory:()=>null}),n})();class ep{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Bh=new ep("16.0.0"),tp={};function ul(n){for(;n;){n[hr]|=64;const i=Df(n);if(to(n)&&!i)return n;n=i}return null}function Ud(n){return n.ngOriginalError}class $h{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i);this._console.error("ERROR",i),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(i){let a=i&&Ud(i);for(;a&&Ud(a);)a=Ud(a);return a||null}}const jd=new ji("",{providedIn:"root",factory:()=>!1});function Fu(n){return n instanceof Function?n():n}class jh extends jr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(i){this._lView=i}onConsumerDependencyMayHaveChanged(){ul(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(i,a,d){const f=an(this);this.trackingVersion++;try{i(a,d)}finally{an(f)}}destroy(){this.trackingVersion++}}let Hd=null;function jm(){var n;return null!==(n=Hd)&&void 0!==n||(Hd=new jh),Hd}function rd(n,i){var a;return null!==(a=n[i])&&void 0!==a?a:jm()}function mg(n,i){const a=jm();a.hasReadASignal&&(n[i]=Hd,a.lView=n,Hd=new jh)}const oi={};function Mv(n){Hm(en(),rn(),Wr()+n,!1)}function Hm(n,i,a,d){if(!d)if(3==(3&i[hr])){const v=n.preOrderCheckHooks;null!==v&&M(i,v,a)}else{const v=n.preOrderHooks;null!==v&&P(i,v,0,a)}Ra(a)}const yg={\u0275\u0275defineInjectable:Je,\u0275\u0275defineInjector:Qt,\u0275\u0275inject:At,\u0275\u0275invalidFactoryDep:function Xt(n){throw new Ce(202,!1)},resolveForwardRef:ge};const zm=he({provide:String,useValue:he});function Gm(n){return void 0!==n.useClass}function Rv(n){return void 0!==n.useFactory}const qm=cd("Injectable",void 0,void 0,void 0,(n,i)=>function X_(n,i){let a=null,d=null;n.hasOwnProperty(Ft)||Object.defineProperty(n,Ft,{get:()=>(null===a&&(a=Ns().compileInjectable(yg,`ng:///${n.name}/\u0275prov.js`,function xv(n,i){const a=i||{providedIn:null},d={name:n.name,type:n,typeArgumentCount:0,providedIn:a.providedIn};return(Gm(a)||Rv(a))&&void 0!==a.deps&&(d.deps=hs(a.deps)),Gm(a)?d.useClass=a.useClass:function Wm(n){return zm in n}(a)?d.useValue=a.useValue:Rv(a)?d.useFactory=a.useFactory:function Km(n){return void 0!==n.useExisting}(a)&&(d.useExisting=a.useExisting),d}(n,i))),a)}),n.hasOwnProperty(on)||Object.defineProperty(n,on,{get:()=>{if(null===d){const f=Ns();d=f.compileFactory(yg,`ng:///${n.name}/\u0275fac.js`,{name:n.name,type:n,typeArgumentCount:0,deps:pd(n),target:f.FactoryTarget.Injectable})}return d},configurable:!0})}(n,i));function Hh(n,i=null,a=null,d){const f=ip(n,i,a,d);return f.resolveInjectorInitializers(),f}function ip(n,i=null,a=null,d,f=new Set){const v=[a||ke,sc(n)];return d=d||("object"==typeof n?void 0:Be(n)),new zf(v,i||eg(),d||null,f)}let dl=(()=>{class n{static create(a,d){if(Array.isArray(a))return Hh({name:""},d,a,"");{var f;const v=null!==(f=a.name)&&void 0!==f?f:"";return Hh({name:v},a.parent,a.providers,v)}}}return n.THROW_IF_NOT_FOUND=vr,n.NULL=new Od,n.\u0275prov=Je({token:n,providedIn:"any",factory:()=>At(Mm)}),n.__NG_ELEMENT_ID__=-1,n})();function Sl(n,i=tn.Default){const a=rn();return null===a?At(n,i):vo(vi(),a,ge(n),i)}function Ym(){throw new Error("invalid")}function id(n,i,a,d,f,v,b,x,B,te,pe){const Oe=i.blueprint.slice();return Oe[Gr]=f,Oe[hr]=140|d,(null!==te||n&&2048&n[hr])&&(Oe[hr]|=2048),H(Oe),Oe[Kr]=Oe[$r]=n,Oe[Qr]=a,Oe[Li]=b||n&&n[Li],Oe[er]=x||n&&n[er],Oe[Yi]=B||n&&n[Yi]||null,Oe[zi]=v,Oe[fo]=function Yy(){return si++}(),Oe[Ks]=pe,Oe[po]=te,Oe[Ii]=2==i.type?n[Ii]:Oe,Oe}function zh(n,i,a,d,f){let v=n.data[i];if(null===v)v=function zd(n,i,a,d,f){const v=Ya(),b=wc(),B=n.data[i]=function Nv(n,i,a,d,f,v){return{type:a,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?v:v&&v.parent,a,i,d,f);return null===n.firstChild&&(n.firstChild=B),null!==v&&(b?null==v.child&&null!==B.parent&&(v.child=B):null===v.next&&(v.next=B,B.prev=v)),B}(n,i,a,d,f),function mf(){return An.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=a,v.value=d,v.attrs=f;const b=function Za(){const n=An.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===b?-1:b.injectorIndex}return Qa(v,!0),v}function vg(n,i,a,d){if(0===a)return-1;const f=i.length;for(let v=0;v<a;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return f}function J_(n,i,a,d,f){const v=rd(i,ta),b=Wr(),x=2&d;try{if(Ra(-1),x&&i.length>Cr&&Hm(n,i,Cr,!1),Uo(x?2:0,f),x)v.runInContext(a,d,f);else{const te=an(null);try{a(d,f)}finally{an(te)}}}finally{x&&null===i[ta]&&mg(i,ta),Ra(b),Uo(x?3:1,f)}}function _g(n,i,a){if(Lo(i)){const d=an(null);try{const v=i.directiveEnd;for(let b=i.directiveStart;b<v;b++){const x=n.data[b];x.contentQueries&&x.contentQueries(1,a[b],b)}}finally{an(d)}}}function Eg(n,i,a){As()&&(function ty(n,i,a,d){const f=a.directiveStart,v=a.directiveEnd;Do(a)&&function iy(n,i,a){const d=ls(i,n),b=Sg(n,id(n,Ig(a),null,a.onPush?64:16,d,i,null,n[Li].rendererFactory.createRenderer(d,a),null,null,null));n[i.index]=b}(i,a,n.data[f+a.componentOffset]),n.firstCreatePass||tl(a,i),_o(d,i);const b=a.initialInputs;for(let x=f;x<v;x++){const B=n.data[x],te=ii(i,n,x,a);_o(te,i),null!==b&&sy(0,x-f,te,B,0,b),Wi(B)&&(Ts(a.index,i)[Qr]=ii(i,n,x,a))}}(n,i,a,ls(a,i)),64==(64&a.flags)&&Fv(n,i,a))}function wg(n,i,a=ls){const d=i.localNames;if(null!==d){let f=i.index+1;for(let v=0;v<d.length;v+=2){const b=d[v+1],x=-1===b?a(i,n):n[b];n[f++]=x}}}function Ig(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Zm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function Zm(n,i,a,d,f,v,b,x,B,te,pe){const Oe=Cr+d,ot=Oe+f,xt=function e0(n,i){const a=[];for(let d=0;d<i;d++)a.push(d<n?null:oi);return a}(Oe,ot),Jt="function"==typeof te?te():te;return xt[En]={type:n,blueprint:xt,template:a,queries:null,viewQuery:x,declTNode:i,data:xt.slice().fill(null,Oe),bindingStartIndex:Oe,expandoStartIndex:ot,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:B,consts:Jt,incompleteFirstPass:!1,ssrId:pe}}let Jm=n=>null;function Gd(n,i,a,d){for(let f in n)if(n.hasOwnProperty(f)){a=null===a?{}:a;const v=n[f];null===d?Cg(a,i,f,v):d.hasOwnProperty(f)&&Cg(a,i,d[f],v)}return a}function Cg(n,i,a,d){n.hasOwnProperty(a)?n[a].push(i,d):n[a]=[i,d]}function hl(n,i,a,d,f,v,b,x){const B=ls(i,a);let pe,te=i.inputs;!x&&null!=te&&(pe=te[d])?(Wh(n,a,pe,d,f),Do(i)&&function n0(n,i){const a=Ts(i,n);16&a[hr]||(a[hr]|=64)}(a,i.index)):3&i.type&&(d=function t0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=b?b(f,i.value||"",d):f,v.setProperty(B,d,f))}function ap(n,i,a,d){if(As()){const f=null===d?null:{"":-1},v=function Bv(n,i){const a=n.directiveRegistry;let d=null,f=null;if(a)for(let b=0;b<a.length;b++){const x=a[b];if(Ls(i,x.selectors,!1))if(d||(d=[]),Wi(x))if(null!==x.findHostDirectiveDefs){const B=[];f=f||new Map,x.findHostDirectiveDefs(x,B,f),d.unshift(...B,x),$v(n,i,B.length)}else d.unshift(x),$v(n,i,0);else{var v;f=f||new Map,null===(v=x.findHostDirectiveDefs)||void 0===v||v.call(x,x,d,f),d.push(x)}}return null===d?null:[d,f]}(n,a);let b,x;null===v?b=x=null:[b,x]=v,null!==b&&r0(n,i,a,b,f,x),f&&function ny(n,i,a){if(i){const d=n.localNames=[];for(let f=0;f<i.length;f+=2){const v=a[i[f+1]];if(null==v)throw new Ce(-301,!1);d.push(i[f],v)}}}(a,d,f)}a.mergedAttrs=_n(a.mergedAttrs,a.attrs)}function r0(n,i,a,d,f,v){for(let Oe=0;Oe<d.length;Oe++)Dc(tl(a,i),n,d[Oe].type);!function ry(n,i,a){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+a,n.providerIndexes=i}(a,n.data.length,d.length);for(let Oe=0;Oe<d.length;Oe++){const ot=d[Oe];ot.providersResolver&&ot.providersResolver(ot)}let b=!1,x=!1,B=vg(n,i,d.length,null);for(let Oe=0;Oe<d.length;Oe++){const ot=d[Oe];a.mergedAttrs=_n(a.mergedAttrs,ot.hostAttrs),a0(n,a,i,B,ot),o0(B,ot,f),null!==ot.contentQueries&&(a.flags|=4),(null!==ot.hostBindings||null!==ot.hostAttrs||0!==ot.hostVars)&&(a.flags|=64);const xt=ot.type.prototype;var te,pe;!b&&(xt.ngOnChanges||xt.ngOnInit||xt.ngDoCheck)&&((null!==(te=n.preOrderHooks)&&void 0!==te?te:n.preOrderHooks=[]).push(a.index),b=!0),x||!xt.ngOnChanges&&!xt.ngDoCheck||((null!==(pe=n.preOrderCheckHooks)&&void 0!==pe?pe:n.preOrderCheckHooks=[]).push(a.index),x=!0),B++}!function vE(n,i,a){const f=i.directiveEnd,v=n.data,b=i.attrs,x=[];let B=null,te=null;for(let pe=i.directiveStart;pe<f;pe++){const Oe=v[pe],ot=a?a.get(Oe):null,Jt=ot?ot.outputs:null;B=Gd(Oe.inputs,pe,B,ot?ot.inputs:null),te=Gd(Oe.outputs,pe,te,Jt);const bn=null===B||null===b||Jr(i)?null:Gh(B,pe,b);x.push(bn)}null!==B&&(B.hasOwnProperty("class")&&(i.flags|=8),B.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=x,i.inputs=B,i.outputs=te}(n,a,v)}function Fv(n,i,a){const d=a.directiveStart,f=a.directiveEnd,v=a.index,b=function El(){return An.lFrame.currentDirectiveIndex}();try{Ra(v);for(let x=d;x<f;x++){const B=n.data[x],te=i[x];ni(x),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&Lv(B,te)}}finally{Ra(-1),ni(b)}}function Lv(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function $v(n,i,a){var d;i.componentOffset=a,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function o0(n,i,a){if(a){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)a[i.exportAs[d]]=n;Wi(i)&&(a[""]=n)}}function a0(n,i,a,d,f){n.data[d]=f;const v=f.factory||(f.factory=gs(f.type)),b=new gt(v,Wi(f),Sl);n.blueprint[d]=b,a[d]=b,function lp(n,i,a,d,f){const v=f.hostBindings;if(v){let b=n.hostBindingOpCodes;null===b&&(b=n.hostBindingOpCodes=[]);const x=~i.index;(function s0(n){let i=n.length;for(;i>0;){const a=n[--i];if("number"==typeof a&&a<0)return a}return 0})(b)!=x&&b.push(x),b.push(a,d,v)}}(n,i,d,vg(n,a,f.hostVars,oi),f)}function Lu(n,i,a,d,f,v){const b=ls(n,i);!function up(n,i,a,d,f,v,b){if(null==v)n.removeAttribute(i,f,a);else{const x=null==b?at(v):b(v,d||"",f);n.setAttribute(i,f,x,a)}}(i[er],b,v,n.value,a,d,f)}function sy(n,i,a,d,f,v){const b=v[i];if(null!==b)for(let x=0;x<b.length;)bg(d,a,b[x++],b[x++],b[x++])}function bg(n,i,a,d,f){const v=an(null);try{null!==n.setInput?n.setInput(i,f,a,d):i[d]=f}finally{an(v)}}function Gh(n,i,a){let d=null,f=0;for(;f<a.length;){const v=a[f];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const b=n[v];for(let x=0;x<b.length;x+=2)if(b[x]===i){d.push(v,b[x+1],a[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function Dg(n,i,a,d){return[n,!0,!1,i,null,0,d,a,null,null,null]}function Wd(n,i){const a=n.contentQueries;if(null!==a)for(let d=0;d<a.length;d+=2){const v=a[d+1];if(-1!==v){const b=n.data[v];Mn(a[d]),b.contentQueries(2,i[v],v)}}}function Sg(n,i){return n[Ws]?n[Js][Hi]=i:n[Ws]=i,n[Js]=i,i}function ac(n,i,a){Mn(0);const d=an(null);try{i(n,a)}finally{an(d)}}function Tg(n){return n[Xs]||(n[Xs]=[])}function Vv(n){return n.cleanup||(n.cleanup=[])}function Mg(n,i){const a=n[Yi],d=a?a.get($h,null):null;d&&d.handleError(i)}function Wh(n,i,a,d,f){for(let v=0;v<a.length;){const b=a[v++],x=a[v++];bg(n.data[b],i[b],d,x,f)}}function Uv(n,i){const a=Ts(i,n),d=a[En];!function Rg(n,i){for(let a=i.length;a<n.blueprint.length;a++)i.push(n.blueprint[a])}(d,a);const f=a[Gr];null!==f&&null===a[Ks]&&(a[Ks]=Yf(f,a[Yi])),oy(d,a,a[Qr])}function oy(n,i,a){Ma(i);try{const d=n.viewQuery;null!==d&&ac(1,d,a);const f=n.template;null!==f&&J_(n,i,f,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Wd(n,i),n.staticViewQueries&&ac(2,n.viewQuery,a);const v=n.components;null!==v&&function ay(n,i){for(let a=0;a<i.length;a++)Uv(n,i[a])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[hr]&=-5,_i()}}let Kh=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(a,d,f){const v=typeof Zone>"u"?null:Zone.current,b=new Fl(a,te=>{this.all.has(te)&&this.queue.set(te,v)},f);let x;this.all.add(b),b.notify();const B=()=>{var te;b.cleanup(),null===(te=x)||void 0===te||te(),this.all.delete(b),this.queue.delete(b)};return x=null==d?void 0:d.onDestroy(B),{destroy:B}}flush(){if(0!==this.queue.size)for(const[a,d]of this.queue)this.queue.delete(a),d?d.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return n.\u0275prov=Je({token:n,providedIn:"root",factory:()=>new n}),n})();function Pg(n,i,a){let d=a?n.styles:null,f=a?n.classes:null,v=0;if(null!==i)for(let b=0;b<i.length;b++){const x=i[b];"number"==typeof x?v=x:1==v?f=U(f,x):2==v&&(d=U(d,x+": "+i[++b]+";"))}a?n.styles=d:n.stylesWithoutHost=d,a?n.classes=f:n.classesWithoutHost=f}function cp(n,i,a,d,f=!1){for(;null!==a;){const v=i[a.index];if(null!==v&&d.push(ti(v)),Gi(v)){for(let x=Ti;x<v.length;x++){const B=v[x],te=B[En].firstChild;null!==te&&cp(B[En],B,te,d)}v[Zi]!==v[Gr]&&d.push(v[Zi])}const b=a.type;if(8&b)cp(n,i,a.child,d);else if(32&b){const x=hh(a,i);let B;for(;B=x();)d.push(B)}else if(16&b){const x=_h(i,a);if(Array.isArray(x))d.push(...x);else{const B=Df(i[Ii]);cp(B[En],B,x,d,!0)}}a=f?a.projectionNext:a.next}return d}function qh(n,i,a,d=!0){const f=i[Li].rendererFactory;f.begin&&f.begin();try{Kd(n,i,n.template,a)}catch(x){throw d&&Mg(i,x),x}finally{var b;f.end&&f.end(),null===(b=i[Li].effectManager)||void 0===b||b.flush()}}function Kd(n,i,a,d){var f;const v=i[hr];if(256!=(256&v)){null===(f=i[Li].effectManager)||void 0===f||f.flush(),Ma(i);try{H(i),function Gu(n){return An.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&J_(n,i,a,2,d);const x=3==(3&v);if(x){const pe=n.preOrderCheckHooks;null!==pe&&M(i,pe,null)}else{const pe=n.preOrderHooks;null!==pe&&P(i,pe,0,null),D(i,0)}if(function u0(n){for(let i=Fp(n);null!==i;i=Uc(i)){if(!i[ga])continue;const a=i[qs];for(let d=0;d<a.length;d++){ye(a[d])}}}(i),function Og(n){for(let i=Fp(n);null!==i;i=Uc(i))for(let a=Ti;a<i.length;a++){const d=i[a],f=d[En];pu(d)&&Kd(f,d,f.template,d[Qr])}}(i),null!==n.contentQueries&&Wd(n,i),x){const pe=n.contentCheckHooks;null!==pe&&M(i,pe)}else{const pe=n.contentHooks;null!==pe&&P(i,pe,1),D(i,1)}!function sp(n,i){const a=n.hostBindingOpCodes;if(null===a)return;const d=rd(i,xi);try{for(let f=0;f<a.length;f++){const v=a[f];if(v<0)Ra(~v);else{const b=v,x=a[++f],B=a[++f];cr(x,b),d.runInContext(B,2,i[b])}}}finally{null===i[xi]&&mg(i,xi),Ra(-1)}}(n,i);const B=n.components;null!==B&&function Ng(n,i){for(let a=0;a<i.length;a++)dp(n,i[a])}(i,B);const te=n.viewQuery;if(null!==te&&ac(2,te,d),x){const pe=n.viewCheckHooks;null!==pe&&M(i,pe)}else{const pe=n.viewHooks;null!==pe&&P(i,pe,2),D(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[hr]&=-73,Ke(i)}finally{_i()}}}function dp(n,i){const a=Ts(i,n);if(pu(a)){const d=a[En];80&a[hr]?Kd(d,a,d.template,a[Qr]):a[bo]>0&&uy(a)}}function uy(n){for(let d=Fp(n);null!==d;d=Uc(d))for(let f=Ti;f<d.length;f++){const v=d[f];if(pu(v))if(1024&v[hr]){const b=v[En];Kd(b,v,b.template,v[Qr])}else v[bo]>0&&uy(v)}const a=n[En].components;if(null!==a)for(let d=0;d<a.length;d++){const f=Ts(a[d],n);pu(f)&&f[bo]>0&&uy(f)}}class Yh{get rootNodes(){const i=this._lView,a=i[En];return cp(a,i,a.firstChild,[])}constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qr]}set context(i){this._lView[Qr]=i}get destroyed(){return 256==(256&this._lView[hr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Kr];if(Gi(i)){const a=i[yi],d=a?a.indexOf(this):-1;d>-1&&(Xl(i,d),nl(a,d))}this._attachedToViewContainer=!1}Cd(this._lView[En],this._lView)}onDestroy(i){!function Yt(n,i){if(256==(256&n[hr]))throw new Ce(911,!1);null===n[$s]&&(n[$s]=[]),n[$s].push(i)}(this._lView,i)}markForCheck(){ul(this._cdRefInjectingView||this._lView)}detach(){this._lView[hr]&=-129}reattach(){this._lView[hr]|=128}detectChanges(){qh(this._lView[En],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ym(n,i){Sd(n,i,i[er],2,null,null)}(this._lView[En],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=i}}class Zh extends Yh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;qh(i[En],i,i[Qr],!1)}checkNoChanges(){}get context(){return null}}class cy extends Jf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Xe(i);return new uc(a,this.ngModule)}}function Bu(n){const i=[];for(let a in n)n.hasOwnProperty(a)&&i.push({propName:n[a],templateName:a});return i}class Hv{constructor(i,a){this.injector=i,this.parentInjector=a}get(i,a,d){d=lr(d);const f=this.injector.get(i,tp,d);return f!==tp||a===tp?f:this.parentInjector.get(i,a,d)}}class uc extends Xf{get inputs(){return Bu(this.componentDef.inputs)}get outputs(){return Bu(this.componentDef.outputs)}constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=function vs(n){return n.map(ei).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}create(i,a,d,f){var v;let b=(f=f||this.ngModule)instanceof Jc?f:null===(v=f)||void 0===v?void 0:v.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const x=b?new Hv(i,b):i,B=x.get(Iv,null);if(null===B)throw new Ce(407,!1);const Oe={rendererFactory:B,sanitizer:x.get(bv,null),effectManager:x.get(Kh,null)},ot=B.createRenderer(null,this.componentDef),xt=this.componentDef.selectors[0][0]||"div",Jt=d?function Qm(n,i,a,d){const v=d.get(jd,!1)||a===Pe.ShadowDom,b=n.selectRootElement(i,v);return function Xm(n){Jm(n)}(b),b}(ot,d,this.componentDef.encapsulation,x):Ju(ot,xt,function jv(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(xt)),bn=this.componentDef.onPush?576:528,Fn=Zm(0,null,null,1,0,null,null,null,null,null,null),qn=id(null,Fn,null,bn,null,null,Oe,ot,x,null,null);let mn,ai;Ma(qn);try{const mi=this.componentDef;let fs,_c=null;mi.findHostDirectiveDefs?(fs=[],_c=new Map,mi.findHostDirectiveDefs(mi,fs,_c),fs.push(mi)):fs=[mi];const hb=function dy(n,i){const a=n[En],d=Cr;return n[d]=i,zh(a,d,2,"#host",null)}(qn,Jt),UD=function hy(n,i,a,d,f,v,b){const x=f[En];!function fy(n,i,a,d){for(const f of n)i.mergedAttrs=_n(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(Pg(i,i.mergedAttrs,!0),null!==a&&Of(d,a,i))}(d,n,i,b);let B=null;null!==i&&(B=Yf(i,f[Yi]));const te=v.rendererFactory.createRenderer(i,a),pe=id(f,Ig(a),null,a.onPush?64:16,f[n.index],n,v,te,null,null,B);return x.firstCreatePass&&$v(x,n,d.length-1),Sg(f,pe),f[n.index]=pe}(hb,Jt,mi,fs,qn,Oe,ot);ai=Bl(Fn,Cr),Jt&&function py(n,i,a,d){if(d)Dt(n,a,["ng-version",Bh.full]);else{const{attrs:f,classes:v}=function ps(n){const i=[],a=[];let d=1,f=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===f?""!==v&&i.push(v,n[++d]):8===f&&a.push(v);else{if(!Jn(f))break;f=v}d++}return{attrs:i,classes:a}}(i.selectors[0]);f&&Dt(n,a,f),v&&v.length>0&&Ih(n,a,v.join(" "))}}(ot,mi,Jt,d),void 0!==a&&function gy(n,i,a){const d=n.projection=[];for(let f=0;f<i.length;f++){const v=a[f];d.push(null!=v?Array.from(v):null)}}(ai,this.ngContentSelectors,a),mn=function zv(n,i,a,d,f,v){const b=vi(),x=f[En],B=ls(b,f);r0(x,f,b,a,null,d);for(let pe=0;pe<a.length;pe++)_o(ii(f,x,b.directiveStart+pe,b),f);Fv(x,f,b),B&&_o(B,f);const te=ii(f,x,b.directiveStart+b.componentOffset,b);if(n[Qr]=f[Qr]=te,null!==v)for(const pe of v)pe(te,i);return _g(x,b,n),te}(UD,mi,fs,_c,qn,[qd]),oy(Fn,qn,null)}finally{_i()}return new hp(this.componentType,mn,td(ai,qn),qn,ai)}}class hp extends Qf{constructor(i,a,d,f,v){super(),this.location=d,this._rootLView=f,this._tNode=v,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Zh(f),this.componentType=i}setInput(i,a){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[i])){var v;if(null!==(v=this.previousInputValues)&&void 0!==v||(this.previousInputValues=new Map),this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),a))return;const b=this._rootLView;Wh(b[En],b,f,i,a),this.previousInputValues.set(i,a),ul(Ts(this._tNode.index,b))}}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function qd(){const n=vi();Ja(rn()[En],n)}function Qh(n){let i=function fp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const d=[n];for(;i;){let f;if(Wi(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ce(903,!1);f=i.\u0275dir}if(f){if(a){d.push(f);const b=n;b.inputs=Tl(n.inputs),b.declaredInputs=Tl(n.declaredInputs),b.outputs=Tl(n.outputs);const x=f.hostBindings;x&&Yd(n,x);const B=f.viewQuery,te=f.contentQueries;if(B&&kg(n,B),te&&Ca(n,te),_e(n.inputs,f.inputs),_e(n.declaredInputs,f.declaredInputs),_e(n.outputs,f.outputs),Wi(f)&&f.data.animation){const pe=n.data;pe.animation=(pe.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let b=0;b<v.length;b++){const x=v[b];x&&x.ngInherit&&x(n),x===Qh&&(a=!1)}}i=Object.getPrototypeOf(i)}!function Xh(n){let i=0,a=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=i+=f.hostVars,f.hostAttrs=_n(f.hostAttrs,a=_n(a,f.hostAttrs))}}(d)}function Tl(n){return n===it?{}:n===ke?[]:n}function kg(n,i){const a=n.viewQuery;n.viewQuery=a?(d,f)=>{i(d,f),a(d,f)}:i}function Ca(n,i){const a=n.contentQueries;n.contentQueries=a?(d,f,v)=>{i(d,f,v),a(d,f,v)}:i}function Yd(n,i){const a=n.hostBindings;n.hostBindings=a?(d,f)=>{i(d,f),a(d,f)}:i}function Lg(n){return!!Zd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Zd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function No(n,i,a){return!Object.is(n[i],a)&&(n[i]=a,!0)}function da(n,i,a,d){const f=rn();return No(f,Dr(),i)&&(en(),Lu(ms(),f,n,i,a,d)),da}function Is(n,i,a,d){return No(n,Dr(),a)?i+at(a)+d:oi}function hc(n,i,a,d,f,v,b,x){const B=rn(),te=en(),pe=n+Cr,Oe=te.firstCreatePass?function sd(n,i,a,d,f,v,b,x,B){const te=i.consts,pe=zh(i,n,4,b||null,re(te,x));ap(i,a,pe,re(te,B)),Ja(i,pe);const Oe=pe.tView=Zm(2,pe,d,f,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,te,null);return null!==i.queries&&(i.queries.template(i,pe),Oe.queries=i.queries.embeddedTView(pe)),pe}(pe,te,B,i,a,d,f,v,b):te.data[pe];Qa(Oe,!1);const ot=Dy(te,B,Oe,n);Xa()&&vh(te,B,ot,Oe),_o(ot,B),Sg(B,B[pe]=Dg(ot,B,ot,Oe)),Qi(Oe)&&Eg(te,B,Oe),null!=b&&wg(B,Oe,x)}let Dy=function Gg(n,i,a,d){return ts(!0),i[er].createComment("")};function mp(n){return qa(function _l(){return An.lFrame.contextLView}(),Cr+n)}function yp(n,i,a){const d=rn();return No(d,Dr(),i)&&hl(en(),ms(),d,n,i,d[er],a,!1),yp}function fc(n,i,a,d,f){const b=f?"class":"style";Wh(n,a,i.inputs[b],b,d)}function Jd(n,i,a,d){const f=rn(),v=en(),b=Cr+n,x=f[er],B=v.firstCreatePass?function r_(n,i,a,d,f,v){const b=i.consts,B=zh(i,n,2,d,re(b,f));return ap(i,a,B,re(b,v)),null!==B.attrs&&Pg(B,B.attrs,!1),null!==B.mergedAttrs&&Pg(B,B.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,B),B}(b,v,f,i,a,d):v.data[b],te=af(v,f,B,x,i,n);f[b]=te;const pe=Qi(B);return Qa(B,!0),Of(x,te,B),32!=(32&B.flags)&&Xa()&&vh(v,f,te,B),0===function Ar(){return An.lFrame.elementDepthCount}()&&_o(te,f),function Ai(){An.lFrame.elementDepthCount++}(),pe&&(Eg(v,f,B),_g(v,B,f)),null!==d&&wg(f,B),Jd}function vp(){let n=vi();wc()?gu():(n=n.parent,Qa(n,!1));const i=n;(function Yr(n){return An.skipHydrationRootTNode===n})(i)&&function Zn(){An.skipHydrationRootTNode=null}(),function Ci(){An.lFrame.elementDepthCount--}();const a=en();return a.firstCreatePass&&(Ja(a,n),Lo(n)&&a.queries.elementEnd(n)),null!=i.classesWithoutHost&&function ir(n){return 0!=(8&n.flags)}(i)&&fc(a,i,rn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Os(n){return 0!=(16&n.flags)}(i)&&fc(a,i,rn(),i.stylesWithoutHost,!1),vp}function _p(n,i,a,d){return Jd(n,i,a,d),vp(),_p}let af=(n,i,a,d,f,v)=>(ts(!0),Ju(d,f,function us(){return An.lFrame.currentNamespace}()));function pc(n,i,a){const d=rn(),f=en(),v=n+Cr,b=f.firstCreatePass?function y0(n,i,a,d,f){const v=i.consts,b=re(v,d),x=zh(i,n,8,"ng-container",b);return null!==b&&Pg(x,b,!0),ap(i,a,x,re(v,f)),null!==i.queries&&i.queries.elementStart(i,x),x}(v,f,d,i,a):f.data[v];Qa(b,!0);const x=Kg(f,d,b,n);return d[v]=x,Xa()&&vh(f,d,x,b),_o(x,d),Qi(b)&&(Eg(f,d,b),_g(f,b,d)),null!=a&&wg(d,b),pc}function s_(){let n=vi();const i=en();return wc()?gu():(n=n.parent,Qa(n,!1)),i.firstCreatePass&&(Ja(i,n),Lo(n)&&i.queries.elementEnd(n)),s_}function Sy(n,i,a){return pc(n,i,a),s_(),Sy}let Kg=(n,i,a,d)=>(ts(!0),Ea(i[er],""));function Ay(){return rn()}function qg(n){return!!n&&"function"==typeof n.then}function Yg(n){return!!n&&"function"==typeof n.subscribe}function o_(n,i,a,d){const f=rn(),v=en(),b=vi();return function a_(n,i,a,d,f,v,b){const x=Qi(d),te=n.firstCreatePass&&Vv(n),pe=i[Qr],Oe=Tg(i);let ot=!0;if(3&d.type||b){const bn=ls(d,i),Fn=b?b(bn):bn,qn=Oe.length,mn=b?mi=>b(ti(mi[d.index])):d.index;let ai=null;if(!b&&x&&(ai=function Zg(n,i,a,d){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const b=f[v];if(b===a&&f[v+1]===d){const x=i[Xs],B=f[v+2];return x.length>B?x[B]:null}"string"==typeof b&&(v+=2)}return null}(n,i,f,d.index)),null!==ai)(ai.__ngLastListenerFn__||ai).__ngNextListenerFn__=v,ai.__ngLastListenerFn__=v,ot=!1;else{v=My(d,i,pe,v,!1);const mi=a.listen(Fn,f,v);Oe.push(v,mi),te&&te.push(f,mn,qn,qn+1)}}else v=My(d,i,pe,v,!1);const xt=d.outputs;let Jt;if(ot&&null!==xt&&(Jt=xt[f])){const bn=Jt.length;if(bn)for(let Fn=0;Fn<bn;Fn+=2){const fs=i[Jt[Fn]][Jt[Fn+1]].subscribe(v),_c=Oe.length;Oe.push(v,fs),te&&te.push(f,d.index,_c,-(_c+1))}}}(v,f,f[er],b,n,i,d),o_}function l_(n,i,a,d){try{return Uo(6,i,a),!1!==a(d)}catch(f){return Mg(n,f),!1}finally{Uo(7,i,a)}}function My(n,i,a,d,f){return function v(b){if(b===Function)return d;ul(n.componentOffset>-1?Ts(n.index,i):i);let B=l_(i,a,d,b),te=v.__ngNextListenerFn__;for(;te;)B=l_(i,a,te,b)&&B,te=te.__ngNextListenerFn__;return f&&!1===B&&(b.preventDefault(),b.returnValue=!1),B}}function Ry(n=1){return function ri(n){return(An.lFrame.contextLView=function Zs(n,i){for(;n>0;)i=i[$r],n--;return i}(n,An.lFrame.contextLView))[Qr]}(n)}function u_(n,i){let a=null;const d=function rs(n){const i=n.attrs;if(null!=i){const a=i.indexOf(5);if(!(1&a))return i[a+1]}return null}(n);for(let f=0;f<i.length;f++){const v=i[f];if("*"!==v){if(null===d?Ls(n,v,!0):Bs(d,v))return f}else a=f}return a}function xy(n){const i=rn()[Ii][zi];if(!i.projection){const d=i.projection=Mc(n?n.length:1,null),f=d.slice();let v=i.child;for(;null!==v;){const b=n?u_(v,n):0;null!==b&&(f[b]?f[b].projectionNext=v:d[b]=v,f[b]=v),v=v.next}}}function Qg(n,i=0,a){const d=rn(),f=en(),v=zh(f,Cr+n,16,null,a||null);null===v.projection&&(v.projection=i),gu(),(!d[Ks]||function dn(){return null!==An.skipHydrationRootTNode}())&&32!=(32&v.flags)&&function Eo(n,i,a){xf(i[er],0,i,a,gh(n,a,i),Vp(a.parent||i[zi],a,i))}(f,d,v)}function Xg(n,i,a){return Jg(n,"",i,"",a),Xg}function Jg(n,i,a,d,f){const v=rn(),b=Is(v,i,a,d);return b!==oi&&hl(en(),ms(),v,n,b,v[er],f,!1),Jg}function ea(n,i){return n<<17|i<<2}function gl(n){return n>>17&32767}function Py(n){return 2|n}function eh(n){return(131068&n)>>2}function ju(n,i){return-131069&n|i<<2}function Oy(n){return 1|n}function h_(n,i,a,d,f){const v=n[a+1],b=null===i;let x=d?gl(v):eh(v),B=!1;for(;0!==x&&(!1===B||b);){const pe=n[x+1];S0(n[x],i)&&(B=!0,n[x+1]=d?Oy(pe):Py(pe)),x=d?gl(pe):eh(pe)}B&&(n[a+1]=d?Py(v):Oy(v))}function S0(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ui(n,i)>=0}function g_(n,i){return function ho(n,i,a,d){const f=rn(),v=en(),b=function Ro(n){const i=An.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,a}(2);v.firstUpdatePass&&function x0(n,i,a,d){const f=n.data;if(null===f[a+1]){const v=f[Wr()],b=function tm(n,i){return i>=n.expandoStartIndex}(n,a);(function k(n,i){return 0!=(n.flags&(i?8:16))})(v,d)&&null===i&&!b&&(i=!1),i=function m_(n,i,a,d){const f=function Wu(n){const i=An.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===f)0===(d?i.classBindings:i.styleBindings)&&(a=nm(a=y_(null,n,i,a,d),i.attrs,d),v=null);else{const b=i.directiveStylingLast;if(-1===b||n[b]!==f)if(a=y_(f,n,i,a,d),null===v){let B=function P0(n,i,a){const d=a?i.classBindings:i.styleBindings;if(0!==eh(d))return n[gl(d)]}(n,i,d);void 0!==B&&Array.isArray(B)&&(B=y_(null,n,i,B[1],d),B=nm(B,i.attrs,d),function O0(n,i,a,d){n[gl(a?i.classBindings:i.styleBindings)]=d}(n,i,d,B))}else v=function N0(n,i,a){let d;const f=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<f;v++)d=nm(d,n[v].hostAttrs,a);return nm(d,i.attrs,a)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),a}(f,v,i,d),function b0(n,i,a,d,f,v){let b=v?i.classBindings:i.styleBindings,x=gl(b),B=eh(b);n[d]=a;let pe,te=!1;if(Array.isArray(a)?(pe=a[1],(null===pe||Ui(a,pe)>0)&&(te=!0)):pe=a,f)if(0!==B){const ot=gl(n[x+1]);n[d+1]=ea(ot,x),0!==ot&&(n[ot+1]=ju(n[ot+1],d)),n[x+1]=function w0(n,i){return 131071&n|i<<17}(n[x+1],d)}else n[d+1]=ea(x,0),0!==x&&(n[x+1]=ju(n[x+1],d)),x=d;else n[d+1]=ea(B,0),0===x?x=d:n[B+1]=ju(n[B+1],d),B=d;te&&(n[d+1]=Py(n[d+1])),h_(n,pe,d,!0),h_(n,pe,d,!1),function D0(n,i,a,d,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&Ui(v,i)>=0&&(a[d+1]=Oy(a[d+1]))}(i,pe,n,d,v),b=ea(x,B),v?i.classBindings=b:i.styleBindings=b}(f,v,i,a,b,d)}}(v,n,b,d),i!==oi&&No(f,b,i)&&function l(n,i,a,d,f,v,b,x){if(!(3&i.type))return;const B=n.data,te=B[x+1],pe=function I0(n){return 1==(1&n)}(te)?h(B,i,a,f,eh(te),b):void 0;g(pe)||(g(v)||function od(n){return 2==(2&n)}(te)&&(v=h(B,null,a,f,x,b)),function Pf(n,i,a,d,f){if(i)f?n.addClass(a,d):n.removeClass(a,d);else{let v=-1===d.indexOf("-")?void 0:$a.DashCase;null==f?n.removeStyle(a,d,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=$a.Important),n.setStyle(a,d,f,v))}}(d,b,Aa(Wr(),a),f,v))}(v,v.data[Wr()],f,f[er],n,f[b+1]=function E(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Be(nc(n)))),n}(i,a),d,b)}(n,i,null,!0),g_}function y_(n,i,a,d,f){let v=null;const b=a.directiveEnd;let x=a.directiveStylingLast;for(-1===x?x=a.directiveStart:x++;x<b&&(v=i[x],d=nm(d,v.hostAttrs,f),v!==n);)x++;return null!==n&&(a.directiveStylingLast=x),d}function nm(n,i,a){const d=a?1:2;let f=-1;if(null!==i)for(let v=0;v<i.length;v++){const b=i[v];"number"==typeof b?f=b:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ur(n,b,!!a||i[++v]))}return void 0===n?null:n}function h(n,i,a,d,f,v){const b=null===i;let x;for(;f>0;){const B=n[f],te=Array.isArray(B),pe=te?B[1]:B,Oe=null===pe;let ot=a[f+1];ot===oi&&(ot=Oe?ke:void 0);let xt=Oe?Rc(ot,d):pe===d?ot:void 0;if(te&&!g(xt)&&(xt=Rc(B,d)),g(xt)&&(x=xt,b))return x;const Jt=n[f+1];f=b?gl(Jt):eh(Jt)}if(null!==i){let B=v?i.residualClasses:i.residualStyles;null!=B&&(x=Rc(B,d))}return x}function g(n){return void 0!==n}function Y(n,i=""){const a=rn(),d=en(),f=n+Cr,v=d.firstCreatePass?zh(d,f,1,i,null):d.data[f],b=se(d,a,v,i,n);a[f]=b,Xa()&&vh(d,a,b,v),Qa(v,!1)}let se=(n,i,a,d,f)=>(ts(!0),function fh(n,i){return n.createText(i)}(i[er],d));function kt(n){return Zt("",n,""),kt}function Zt(n,i,a){const d=rn(),f=Is(d,n,i,a);return f!==oi&&function ru(n,i,a){const d=Aa(i,n);!function Lp(n,i,a){n.setValue(i,a)}(n[er],d,a)}(d,Wr(),f),Zt}const hf=void 0;var H0=["en",[["a","p"],["AM","PM"],hf],[["AM","PM"],hf,hf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hf,"{1} 'at' {0}",hf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tw(n){const a=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let nh={};function rm(n){const i=function Mw(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=ad(i);if(a)return a;const d=i.split("-")[0];if(a=ad(d),a)return a;if("en"===d)return H0;throw new Ce(701,!1)}function w_(n){return rm(n)[Pr.PluralCase]}function ad(n){return n in nh||(nh[n]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[n]),nh[n]}var Pr=(()=>((Pr=Pr||{})[Pr.LocaleId=0]="LocaleId",Pr[Pr.DayPeriodsFormat=1]="DayPeriodsFormat",Pr[Pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pr[Pr.DaysFormat=3]="DaysFormat",Pr[Pr.DaysStandalone=4]="DaysStandalone",Pr[Pr.MonthsFormat=5]="MonthsFormat",Pr[Pr.MonthsStandalone=6]="MonthsStandalone",Pr[Pr.Eras=7]="Eras",Pr[Pr.FirstDayOfWeek=8]="FirstDayOfWeek",Pr[Pr.WeekendRange=9]="WeekendRange",Pr[Pr.DateFormat=10]="DateFormat",Pr[Pr.TimeFormat=11]="TimeFormat",Pr[Pr.DateTimeFormat=12]="DateTimeFormat",Pr[Pr.NumberSymbols=13]="NumberSymbols",Pr[Pr.NumberFormats=14]="NumberFormats",Pr[Pr.CurrencyCode=15]="CurrencyCode",Pr[Pr.CurrencySymbol=16]="CurrencySymbol",Pr[Pr.CurrencyName=17]="CurrencyName",Pr[Pr.Currencies=18]="Currencies",Pr[Pr.Directionality=19]="Directionality",Pr[Pr.PluralCase=20]="PluralCase",Pr[Pr.ExtraData=21]="ExtraData",Pr))();const im="en-US";let LE=im;function iE(n,i,a,d,f){if(n=ge(n),Array.isArray(n))for(let v=0;v<n.length;v++)iE(n[v],i,a,d,f);else{const v=en(),b=rn();let x=zo(n)?n:ge(n.provide),B=Pm(n);const te=vi(),pe=1048575&te.providerIndexes,Oe=te.directiveStart,ot=te.providerIndexes>>20;if(zo(n)||!n.multi){const xt=new gt(B,f,Sl),Jt=sE(x,i,f?pe:pe+ot,Oe);-1===Jt?(Dc(tl(te,b),v,x),jy(v,n,i.length),i.push(x),te.directiveStart++,te.directiveEnd++,f&&(te.providerIndexes+=1048576),a.push(xt),b.push(xt)):(a[Jt]=xt,b[Jt]=xt)}else{const xt=sE(x,i,pe+ot,Oe),Jt=sE(x,i,pe,pe+ot),Fn=Jt>=0&&a[Jt];if(f&&!Fn||!f&&!(xt>=0&&a[xt])){Dc(tl(te,b),v,x);const qn=function ZE(n,i,a,d,f){const v=new gt(n,a,Sl);return v.multi=[],v.index=i,v.componentProviders=0,YE(v,f,d&&!a),v}(f?sI:O_,a.length,f,d,B);!f&&Fn&&(a[Jt].providerFactory=qn),jy(v,n,i.length,0),i.push(x),te.directiveStart++,te.directiveEnd++,f&&(te.providerIndexes+=1048576),a.push(qn),b.push(qn)}else jy(v,n,xt>-1?xt:Jt,YE(a[f?Jt:xt],B,!f&&d));!f&&d&&Fn&&a[Jt].componentProviders++}}}function jy(n,i,a,d){const f=zo(i),v=function kd(n){return!!n.useClass}(i);if(f||v){const B=(v?ge(i.useClass):i).prototype.ngOnDestroy;if(B){const te=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const pe=te.indexOf(a);-1===pe?te.push(a,[d,B]):te[pe+1].push(d,B)}else te.push(a,B)}}}function YE(n,i,a){return a&&n.componentProviders++,n.multi.push(i)-1}function sE(n,i,a,d){for(let f=a;f<d;f++)if(i[f]===n)return f;return-1}function O_(n,i,a,d){return N_(this.multi,[])}function sI(n,i,a,d){const f=this.multi;let v;if(this.providerFactory){const b=this.providerFactory.componentProviders,x=ii(a,a[En],this.providerFactory.index,d);v=x.slice(0,b),N_(f,v);for(let B=b;B<x.length;B++)v.push(x[B])}else v=[],N_(f,v);return v}function N_(n,i){for(let a=0;a<n.length;a++)i.push((0,n[a])());return i}function oE(n,i=[]){return a=>{a.providersResolver=(d,f)=>function iI(n,i,a){const d=en();if(d.firstCreatePass){const f=Wi(n);iE(a,d.data,d.blueprint,f,!0),iE(i,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,i)}}class Sa{}class bp{}function oI(n,i){return new k_(n,null!=i?i:null,[])}class k_ extends Sa{constructor(i,a,d){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cy(this);const f=gn(i);this._bootstrapComponents=Fu(f.bootstrap),this._r3Injector=ip(i,a,[{provide:Sa,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver},...d],Be(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class aE extends bp{constructor(i){super(),this.moduleType=i}create(i){return new k_(this.moduleType,i,[])}}class Hy extends Sa{constructor(i){super(),this.componentFactoryResolver=new cy(this),this.instance=null;const a=new zf([...i.providers,{provide:Sa,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver}],i.parent||eg(),i.debugName,new Set(["environment"]));this.injector=a,i.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function XE(n,i,a=null){return new Hy({providers:n,parent:i,debugName:a,runEnvironmentInitializers:!0}).injector}let aI=(()=>{class n{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const d=Nd(0,a.type),f=d.length>0?XE([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,f)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Je({token:n,providedIn:"environment",factory:()=>new n(At(Jc))}),n})();function F_(n){n.getStandaloneInjector=i=>i.get(aI).getOrCreateStandaloneInjector(n)}function uw(n,i,a,d,f,v){const b=i+a;return No(n,b,f)?function iu(n,i,a){return n[i]=a}(n,b+1,v?d.call(v,f):d(f)):function zy(n,i){const a=n[i];return a===oi?void 0:a}(n,b+1)}function p(n,i){const a=en();let d;const f=n+Cr;var v;a.firstCreatePass?(d=function w(n,i){if(i)for(let a=i.length-1;a>=0;a--){const d=i[a];if(n===d.name)return d}}(i,a.pipeRegistry),a.data[f]=d,d.onDestroy&&(null!==(v=a.destroyHooks)&&void 0!==v?v:a.destroyHooks=[]).push(f,d.onDestroy)):d=a.data[f];const b=d.factory||(d.factory=gs(d.type)),x=rr(Sl);try{const B=Vl(!1),te=b();return Vl(B),function Wg(n,i,a,d){a>=n.data.length&&(n.data[a]=null,n.blueprint[a]=null),i[a]=d}(a,rn(),f,te),te}finally{rr(x)}}function $(n,i,a){const d=n+Cr,f=rn(),v=qa(f,d);return function yt(n,i){return n[En].data[i].pure}(f,d)?uw(f,function bi(){const n=An.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}(),i,v.transform,a,v):v.transform(a)}function Gt(n){return i=>{setTimeout(n,void 0,i)}}const ln=class $t extends y.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,d){let f=i,v=a||(()=>null),b=d;if(i&&"object"==typeof i){var x,B,te;const Oe=i;f=null===(x=Oe.next)||void 0===x?void 0:x.bind(Oe),v=null===(B=Oe.error)||void 0===B?void 0:B.bind(Oe),b=null===(te=Oe.complete)||void 0===te?void 0:te.bind(Oe)}this.__isAsync&&(v=Gt(v),f&&(f=Gt(f)),b&&(b=Gt(b)));const pe=super.subscribe({next:f,error:v,complete:b});return i instanceof m.w0&&i.add(pe),pe}};function xn(){return this._results[Symbol.iterator]()}class Rr{get changes(){return this._changes||(this._changes=new ln)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Rr.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=xn)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,a){return this._results.reduce(i,a)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,a){const d=this;d.dirty=!1;const f=function Oo(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Cu(n,i,a){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],v=i[d];if(a&&(f=a(f),v=a(v)),v!==f)return!1}return!0}(d._results,f,a))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zr=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ol,n})();const Di=Zr,Mi=class extends Di{constructor(i,a,d){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=d}get ssrId(){var i;return(null===(i=this._declarationTContainer.tView)||void 0===i?void 0:i.ssrId)||null}createEmbeddedView(i,a){return this.createEmbeddedViewImpl(i,a,null)}createEmbeddedViewImpl(i,a,d){const f=this._declarationTContainer.tView,v=id(this._declarationLView,f,i,16,null,f.declTNode,null,null,null,a||null,d||null);v[ss]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[xs];return null!==x&&(v[xs]=x.createEmbeddedView(f)),oy(f,v,i),new Yh(v)}};function Ol(){return fa(vi(),rn())}function fa(n,i){return 4&n.type?new Mi(i,n,td(n,i)):null}let Sr=(()=>{class n{}return n.__NG_ELEMENT_ID__=zr,n})();function zr(){return rh(vi(),rn())}const Ni=Sr,Io=class extends Ni{constructor(i,a,d){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=d}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){const i=_f(this._hostTNode,this._hostLView);if(qo(i)){const a=la(i,this._hostLView),d=_a(i);return new Oa(a[En].data[d+8],a)}return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=vc(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-Ti}createEmbeddedView(i,a,d){let f,v;"number"==typeof d?f=d:null!=d&&(f=d.index,v=d.injector);const x=i.createEmbeddedViewImpl(a||{},v,null);return this.insertImpl(x,f,!1),x}createComponent(i,a,d,f,v){var b,B;const te=i&&!Hl(i);let pe;if(te)pe=a;else{const qn=a||{};pe=qn.index,d=qn.injector,f=qn.projectableNodes,v=qn.environmentInjector||qn.ngModuleRef}const Oe=te?i:new uc(Xe(i)),ot=d||this.parentInjector;if(!v&&null==Oe.ngModule){const mn=(te?ot:this.parentInjector).get(Jc,null);mn&&(v=mn)}const xt=Xe(null!==(b=Oe.componentType)&&void 0!==b?b:{}),Jt=(null==xt?void 0:xt.id,null),bn=null!==(B=null==Jt?void 0:Jt.firstChild)&&void 0!==B?B:null,Fn=Oe.create(ot,f,bn,v);return this.insertImpl(Fn.hostView,pe,!!Jt),Fn}insert(i,a){return this.insertImpl(i,a,!1)}insertImpl(i,a,d){const f=i._lView,v=f[En];if(function V(n){return Gi(n[Kr])}(f)){const B=this.indexOf(i);if(-1!==B)this.detach(B);else{const te=f[Kr],pe=new Io(te,te[zi],te[Kr]);pe.detach(pe.indexOf(i))}}const b=this._adjustIndex(a),x=this._lContainer;if(function iv(n,i,a,d){const f=Ti+d,v=a.length;d>0&&(a[f-1][Hi]=i),d<v-Ti?(i[Hi]=a[f],Yu(a,Ti+d,i)):(a.push(i),i[Hi]=null),i[Kr]=a;const b=i[ss];null!==b&&a!==b&&function oo(n,i){const a=n[qs];i[Ii]!==i[Kr][Kr][Ii]&&(n[ga]=!0),null===a?n[qs]=[i]:a.push(i)}(b,i);const x=i[xs];null!==x&&x.insertView(n),i[hr]|=128}(v,f,x,b),!d){const B=_m(b,x),te=f[er],pe=Hc(te,x[Zi]);null!==pe&&function mm(n,i,a,d,f,v){d[Gr]=f,d[zi]=i,Sd(n,d,a,1,f,v)}(v,x[zi],te,f,pe,B)}return i.attachToViewContainerRef(),Yu(ml(x),b,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=vc(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),d=Xl(this._lContainer,a);d&&(nl(ml(this._lContainer),a),Cd(d[En],d))}detach(i){const a=this._adjustIndex(i,-1),d=Xl(this._lContainer,a);return d&&null!=nl(ml(this._lContainer),a)?new Yh(d):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function vc(n){return n[yi]}function ml(n){return n[yi]||(n[yi]=[])}function rh(n,i){let a;const d=i[n.index];return Gi(d)?a=d:(a=Dg(d,i,null,n),i[n.index]=a,Sg(i,a)),dE(a,i,n,d),new Io(a,n,i)}let dE=function dw(n,i,a,d){if(n[Zi])return;let f;f=8&a.type?ti(d):function Co(n,i){const a=n[er],d=a.createComment(""),f=ls(i,n);return jc(a,Hc(a,f),d,function vm(n,i){return n.nextSibling(i)}(a,f),!1),d}(i,a),n[Zi]=f};class Nl{constructor(i){this.queryList=i,this.matches=null}clone(){return new Nl(this.queryList)}setDirty(){this.queryList.setDirty()}}class cm{constructor(i=[]){this.queries=i}createEmbeddedView(i){const a=i.queries;if(null!==a){const d=null!==i.contentQueries?i.contentQueries[0]:a.length,f=[];for(let v=0;v<d;v++){const b=a.getByIndex(v);f.push(this.queries[b.indexInDeclarationView].clone())}return new cm(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let a=0;a<this.queries.length;a++)null!==uC(i,a).matches&&this.queries[a].setDirty()}}class B_{constructor(i,a,d=null){this.predicate=i,this.flags=a,this.read=d}}class yI{constructor(i=[]){this.queries=i}elementStart(i,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,a)}elementEnd(i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(i)}embeddedTView(i){let a=null;for(let d=0;d<this.length;d++){const f=null!==a?a.length:0,v=this.getByIndex(d).embeddedTView(i,f);v&&(v.indexInDeclarationView=d,null!==a?a.push(v):a=[v])}return null!==a?new yI(a):null}template(i,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,a)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class vI{constructor(i,a=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(i,a){this.isApplyingToNode(a)&&this.matchTNode(i,a)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,a){this.elementStart(i,a)}embeddedTView(i,a){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,a),new vI(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const v=d[f];this.matchTNodeWithReadOption(i,a,fb(a,v)),this.matchTNodeWithReadOption(i,a,Pa(a,i,v,!1,!1))}else d===Zr?4&a.type&&this.matchTNodeWithReadOption(i,a,-1):this.matchTNodeWithReadOption(i,a,Pa(a,i,d,!1,!1))}matchTNodeWithReadOption(i,a,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Lh||f===Sr||f===Zr&&4&a.type)this.addMatch(a.index,-2);else{const v=Pa(a,i,f,!1,!1);null!==v&&this.addMatch(a.index,v)}else this.addMatch(a.index,d)}}addMatch(i,a){null===this.matches?this.matches=[i,a]:this.matches.push(i,a)}}function fb(n,i){const a=n.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===i)return a[d+1];return null}function gb(n,i,a,d){return-1===a?function pb(n,i){return 11&n.type?td(n,i):4&n.type?fa(n,i):null}(i,n):-2===a?function mb(n,i,a){return a===Lh?td(i,n):a===Zr?fa(i,n):a===Sr?rh(i,n):void 0}(n,i,d):ii(n,n[En],a,i)}function nC(n,i,a,d){const f=i[xs].queries[d];if(null===f.matches){const v=n.data,b=a.matches,x=[];for(let B=0;B<b.length;B+=2){const te=b[B];x.push(te<0?null:gb(i,v[te],b[B+1],a.metadata.read))}f.matches=x}return f.matches}function _I(n,i,a,d){const f=n.queries.getByIndex(a),v=f.matches;if(null!==v){const b=nC(n,i,f,a);for(let x=0;x<v.length;x+=2){const B=v[x];if(B>0)d.push(b[x/2]);else{const te=v[x+1],pe=i[-B];for(let Oe=Ti;Oe<pe.length;Oe++){const ot=pe[Oe];ot[ss]===ot[Kr]&&_I(ot[En],ot,te,d)}if(null!==pe[qs]){const Oe=pe[qs];for(let ot=0;ot<Oe.length;ot++){const xt=Oe[ot];_I(xt[En],xt,te,d)}}}}}return d}function rC(n){const i=rn(),a=en(),d=es();Mn(d+1);const f=uC(a,d);if(n.dirty&&function ud(n){return 4==(4&n[hr])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?_I(a,i,d,[]):nC(a,i,f,d);n.reset(v,K_),n.notifyOnChanges()}return!0}return!1}function iC(n,i,a){const d=en();d.firstCreatePass&&(lC(d,new B_(n,i,a),-1),2==(2&i)&&(d.staticViewQueries=!0)),aC(d,rn(),i)}function sC(n,i,a,d){const f=en();if(f.firstCreatePass){const v=vi();lC(f,new B_(i,a,d),v.index),function vb(n,i){const a=n.contentQueries||(n.contentQueries=[]);i!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,i)}(f,n),2==(2&a)&&(f.staticContentQueries=!0)}aC(f,rn(),a)}function oC(){return function yb(n,i){return n[xs].queries[i].queryList}(rn(),es())}function aC(n,i,a){const d=new Rr(4==(4&a));(function Ov(n,i,a,d){const f=Tg(i);f.push(a),n.firstCreatePass&&Vv(n).push(d,f.length-1)})(n,i,d,d.destroy),null===i[xs]&&(i[xs]=new cm),i[xs].queries.push(new Nl(d))}function lC(n,i,a){null===n.queries&&(n.queries=new yI),n.queries.track(new vI(i,a))}function uC(n,i){return n.queries.getByIndex(i)}function EI(n){return!!gn(n)}const SC=new ji("Application Initializer");let DI=(()=>{class n{constructor(){var a;this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f}),this.appInits=null!==(a=sn(SC,{optional:!0}))&&void 0!==a?a:[]}runInitializers(){if(this.initialized)return;const a=[];for(const f of this.appInits){const v=f();if(qg(v))a.push(v);else if(Yg(v)){const b=new Promise((x,B)=>{v.subscribe({complete:x,error:B})});a.push(b)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{d()}).catch(f=>{this.reject(f)}),0===a.length&&d(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TC=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const fw=new ji("LocaleId",{providedIn:"root",factory:()=>sn(fw,tn.Optional|tn.SkipSelf)||function Vb(){return typeof $localize<"u"&&$localize.locale||im}()}),Ub=new ji("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jb{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}let Hb=(()=>{class n{compileModuleSync(a){return new aE(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),v=Fu(gn(a).declarations).reduce((b,x)=>{const B=Xe(x);return B&&b.push(new uc(B)),b},[]);return new jb(d,v)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wb=(()=>Promise.resolve(0))();function SI(n){typeof Zone>"u"?Wb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}function RC(...n){}class kl{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ln(!1),this.onMicrotaskEmpty=new ln(!1),this.onStable=new ln(!1),this.onError=new ln(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&a,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Kb(){let n=Sn.requestAnimationFrame,i=Sn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Zb(n){const i=()=>{!function Yb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,AI(n),n.isCheckStableRunning=!0,TI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),AI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,f,v,b,x)=>{try{return xC(n),a.invokeTask(f,v,b,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),PC(n)}},onInvoke:(a,d,f,v,b,x,B)=>{try{return xC(n),a.invoke(f,v,b,x,B)}finally{n.shouldCoalesceRunChangeDetection&&i(),PC(n)}},onHasTask:(a,d,f,v)=>{a.hasTask(f,v),d===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,AI(n),TI(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(a,d,f,v)=>(a.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!kl.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(kl.isInAngularZone())throw new Ce(909,!1)}run(i,a,d){return this._inner.run(i,a,d)}runTask(i,a,d,f){const v=this._inner,b=v.scheduleEventTask("NgZoneEvent: "+f,i,qb,RC,RC);try{return v.runTask(b,a,d)}finally{v.cancelTask(b)}}runGuarded(i,a,d){return this._inner.runGuarded(i,a,d)}runOutsideAngular(i){return this._outer.run(i)}}const qb={};function TI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function AI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function xC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PC(n){n._nesting--,TI(n)}class Qb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ln,this.onMicrotaskEmpty=new ln,this.onStable=new ln,this.onError=new ln}run(i,a,d){return i.apply(a,d)}runGuarded(i,a,d){return i.apply(a,d)}runOutsideAngular(i){return i()}runTask(i,a,d,f){return i.apply(a,d)}}const OC=new ji("",{providedIn:"root",factory:NC});function NC(){const n=sn(kl);let i=!0;const a=new le.y(f=>{i=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{f.next(i),f.complete()})}),d=new le.y(f=>{let v;n.runOutsideAngular(()=>{v=n.onStable.subscribe(()=>{kl.assertNotInAngularZone(),SI(()=>{!i&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(i=!0,f.next(!0))})})});const b=n.onUnstable.subscribe(()=>{kl.assertInAngularZone(),i&&(i=!1,n.runOutsideAngular(()=>{f.next(!1)}))});return()=>{v.unsubscribe(),b.unsubscribe()}});return(0,ve.T)(a,d.pipe((0,De.B)()))}const kC=new ji(""),FC=new ji("");let MI,Xb=(()=>{class n{constructor(a,d,f){this._ngZone=a,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,MI||(function Jb(n){MI=n}(f),f.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{kl.assertNotInAngularZone(),SI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())SI(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,f){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==v),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:v,updateCb:f})}whenStable(a,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,f){return[]}}return n.\u0275fac=function(a){return new(a||n)(At(kl),At(LC),At(FC))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),LC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){var f,v;return null!==(f=null===(v=MI)||void 0===v?void 0:v.findTestabilityInTree(this,a,d))&&void 0!==f?f:null}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),dm=null;const BC=new ji("AllowMultipleToken"),RI=new ji("PlatformDestroyListeners"),xI=new ji("appBootstrapListener");class nD{constructor(i,a){this.name=i,this.token=a}}function UC(n,i,a=[]){const d=`Platform: ${i}`,f=new ji(d);return(v=[])=>{let b=PI();if(!b||b.injector.get(BC,!1)){const x=[...a,...v,{provide:f,useValue:!0}];n?n(x):function rD(n){if(dm&&!dm.get(BC,!1))throw new Ce(400,!1);(function $C(){!function ro(n){Xi=n}(()=>{throw new Ce(600,!1)})})(),dm=n;const i=n.get(HC);(function VC(n){const i=n.get(Nm,null);null==i||i.forEach(a=>a())})(n)}(function jC(n=[],i){return dl.create({name:i,providers:[{provide:jf,useValue:"platform"},{provide:RI,useValue:new Set([()=>dm=null])},...n]})}(x,d))}return function sD(n){const i=PI();if(!i)throw new Ce(401,!1);return i}()}}function PI(){var n,i;return null!==(n=null===(i=dm)||void 0===i?void 0:i.get(HC))&&void 0!==n?n:null}let HC=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const f=function oD(n="zone.js",i){return"noop"===n?new Qb:"zone.js"===n?new kl(i):n}(null==d?void 0:d.ngZone,function zC(n){var i,a;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(i=null==n?void 0:n.eventCoalescing)&&void 0!==i&&i,shouldCoalesceRunChangeDetection:null!==(a=null==n?void 0:n.runCoalescing)&&void 0!==a&&a}}({eventCoalescing:null==d?void 0:d.ngZoneEventCoalescing,runCoalescing:null==d?void 0:d.ngZoneRunCoalescing}));return f.run(()=>{const v=function QE(n,i,a){return new k_(n,i,a)}(a.moduleType,this.injector,function YC(n){return[{provide:kl,useFactory:n},{provide:lo,multi:!0,useFactory:()=>{const i=sn(lD,{optional:!0});return()=>i.initialize()}},{provide:qC,useFactory:aD},{provide:OC,useFactory:NC}]}(()=>f)),b=v.injector.get($h,null);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:B=>{b.handleError(B)}});v.onDestroy(()=>{pw(this._modules,v),x.unsubscribe()})}),function GC(n,i,a){try{const d=a();return qg(d)?d.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(b,f,()=>{const x=v.injector.get(DI);return x.runInitializers(),x.donePromise.then(()=>(function C_(n){lt(n,"Expected localeId to be defined"),"string"==typeof n&&(LE=n.toLowerCase().replace(/_/g,"-"))}(v.injector.get(fw,im)||im),this._moduleDoBootstrap(v),v))})})}bootstrapModule(a,d=[]){const f=WC({},d);return function eD(n,i,a){const d=new aE(a);return Promise.resolve(d)}(0,0,a).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(a){const d=a.injector.get(U_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!a.instance.ngDoBootstrap)throw new Ce(-403,!1);a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const a=this._injector.get(RI,null);a&&(a.forEach(d=>d()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(At(dl))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function WC(n,i){return Array.isArray(i)?i.reduce(WC,n):{...n,...i}}let U_=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(qC),this.componentTypes=[],this.components=[],this.isStable=sn(OC),this._injector=sn(Jc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,d){const f=a instanceof Xf;if(!this._injector.get(DI).done)throw!f&&cn(a),new Ce(405,!1);let b;b=f?a:this._injector.get(Jf).resolveComponentFactory(a),this.componentTypes.push(b.componentType);const x=function tD(n){return n.isBoundToModule}(b)?void 0:this._injector.get(Sa),te=b.create(dl.NULL,[],d||b.selector,x),pe=te.location.nativeElement,Oe=te.injector.get(kC,null);return null==Oe||Oe.registerApplication(pe),te.onDestroy(()=>{this.detachView(te.hostView),pw(this.components,te),null==Oe||Oe.unregisterApplication(pe)}),this._loadComponent(te),te}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;pw(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(xI,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>pw(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ce(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pw(n,i){const a=n.indexOf(i);a>-1&&n.splice(a,1)}const qC=new ji("",{providedIn:"root",factory:()=>sn($h).handleError.bind(void 0)});function aD(){const n=sn(kl),i=sn($h);return a=>n.runOutsideAngular(()=>i.handleError(a))}let lD=(()=>{class n{constructor(){this.zone=sn(kl),this.applicationRef=sn(U_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var a;null===(a=this._onMicrotaskEmptySubscription)||void 0===a||a.unsubscribe()}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cD(){return!1}function dD(){}let hD=(()=>{class n{}return n.__NG_ELEMENT_ID__=fD,n})();function fD(n){return function pD(n,i,a){if(Do(n)&&!a){const d=Ts(n.index,i);return new Yh(d,d)}return 47&n.type?new Yh(i[Ii],i):null}(vi(),rn(),16==(16&n))}class JC{constructor(){}supports(i){return Lg(i)}create(i){return new ED(i)}}const _D=(n,i)=>i;class ED{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||_D}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,d=this._removalsHead,f=0,v=null;for(;a||d;){const b=!d||a&&a.currentIndex<tb(d,f,v)?a:d,x=tb(b,f,v),B=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(a=a._next,null==b.previousIndex)f++;else{v||(v=[]);const te=x-f,pe=B-f;if(te!=pe){for(let ot=0;ot<te;ot++){const xt=ot<v.length?v[ot]:v[ot]=0,Jt=xt+ot;pe<=Jt&&Jt<te&&(v[ot]=xt+1)}v[b.previousIndex]=pe-te}}x!==B&&i(b,x,B)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Lg(i))throw new Ce(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,v,b,a=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let x=0;x<this.length;x++)v=i[x],b=this._trackByFn(x,v),null!==a&&Object.is(a.trackById,b)?(d&&(a=this._verifyReinsertion(a,v,b,x)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,b,x),d=!0),a=a._next}else f=0,function Bg(n,i){if(Array.isArray(n))for(let a=0;a<n.length;a++)i(n[a]);else{const a=n[Symbol.iterator]();let d;for(;!(d=a.next()).done;)i(d.value)}}(i,x=>{b=this._trackByFn(f,x),null!==a&&Object.is(a.trackById,b)?(d&&(a=this._verifyReinsertion(a,x,b,f)),Object.is(a.item,x)||this._addIdentityChange(a,x)):(a=this._mismatch(a,x,b,f),d=!0),a=a._next,f++}),this.length=f;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,d,f){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,v,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,v,f)):i=this._addAfter(new wD(a,d),v,f),i}_verifyReinsertion(i,a,d,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,v=i._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(i,a,d),this._addToMoves(i,d),i}_moveAfter(i,a,d){return this._unlink(i),this._insertAfter(i,a,d),this._addToMoves(i,d),i}_addAfter(i,a,d){return this._insertAfter(i,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,d){const f=null===a?this._itHead:a._next;return i._next=f,i._prev=a,null===f?this._itTail=i:f._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new eb),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,d=i._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eb),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wD{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ID{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const a=i._prevDup,d=i._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class eb{constructor(){this.map=new Map}put(i){const a=i.trackById;let d=this.map.get(a);d||(d=new ID,this.map.set(a,d)),d.add(i)}get(i,a){const f=this.map.get(i);return f?f.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tb(n,i,a){const d=n.previousIndex;if(null===d)return d;let f=0;return a&&d<a.length&&(f=a[d]),d+i+f}class nb{constructor(){}supports(i){return i instanceof Map||Zd(i)}create(){return new CD}}class CD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||Zd(i)))throw new Ce(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,f)=>{if(a&&a.key===f)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const v=this._getOrCreateRecordForKey(f,d);a=this._insertBeforeOrAppend(a,v)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const d=i._prev;return a._next=i,a._prev=d,i._prev=a,d&&(d._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,a);const v=f._prev,b=f._next;return v&&(v._next=b),b&&(b._prev=v),f._next=null,f._prev=null,f}const d=new bD(i);return this._records.set(i,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(d=>a(i[d],d))}}class bD{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rb(){return new LI([new JC])}let LI=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(null!=d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||rb()),deps:[[n,new Du,new bu]]}}find(a){const d=this.factories.find(f=>f.supports(a));if(null!=d)return d;throw new Ce(901,!1)}}return n.\u0275prov=Je({token:n,providedIn:"root",factory:rb}),n})();function ib(){return new BI([new nb])}let BI=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||ib()),deps:[[n,new Du,new bu]]}}find(a){const d=this.factories.find(f=>f.supports(a));if(d)return d;throw new Ce(901,!1)}}return n.\u0275prov=Je({token:n,providedIn:"root",factory:ib}),n})();const TD=UC(null,"core",[]);let AD=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(At(U_))},n.\u0275mod=Ee({type:n}),n.\u0275inj=Qt({}),n})(),cb=(()=>{class n{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=sn(kl),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(a=>{this.resolve=a})})}add(){if(this.completed)return-1;const a=this.taskId++;return this.collection.add(a),a}remove(a){this.completed||(this.collection.delete(a),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function $D(n,i){const a=Xe(n),d=i.elementInjector||eg();return new uc(a).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}function VD(n){const i=Xe(n);if(!i)return null;const a=new uc(i);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return i.standalone}}}},5030:(pn,dt,L)=>{"use strict";L.d(dt,{u5:()=>Mo,wO:()=>Es,JU:()=>qe,a5:()=>tn,JJ:()=>Or,JL:()=>Nr,F:()=>Ee,On:()=>Gr,UX:()=>Ds,Q7:()=>Cs,_Y:()=>En});var y=L(2223),m=L(4755),le=L(8996),ve=L(9751),De=L(4742),Re=L(8421),he=L(7669),_e=L(5403),Be=L(3268),U=L(1810),je=L(4004);let ge=(()=>{class Z{constructor(C,N){this._renderer=C,this._elementRef=N,this.onChange=fe=>{},this.onTouched=()=>{}}setProperty(C,N){this._renderer.setProperty(this._elementRef.nativeElement,C,N)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(y.Qsj),y.Y36(y.SBq))},Z.\u0275dir=y.lG2({type:Z}),Z})(),Ue=(()=>{class Z extends ge{}return Z.\u0275fac=function(){let j;return function(N){return(j||(j=y.n5z(Z)))(N||Z)}}(),Z.\u0275dir=y.lG2({type:Z,features:[y.qOj]}),Z})();const qe=new y.OlP("NgValueAccessor"),Ce={provide:qe,useExisting:(0,y.Gpc)(()=>ze),multi:!0},at=new y.OlP("CompositionEventMode");let ze=(()=>{class Z extends ge{constructor(C,N,fe){super(C,N),this._compositionMode=fe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ct(){const Z=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(Z.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(at,8))},Z.\u0275dir=y.lG2({type:Z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,N){1&C&&y.NdJ("input",function(rt){return N._handleInput(rt.target.value)})("blur",function(){return N.onTouched()})("compositionstart",function(){return N._compositionStart()})("compositionend",function(rt){return N._compositionEnd(rt.target.value)})},features:[y._Bn([Ce]),y.qOj]}),Z})();function et(Z){return null==Z||("string"==typeof Z||Array.isArray(Z))&&0===Z.length}const vt=new y.OlP("NgValidators"),Ye=new y.OlP("NgAsyncValidators");function Et(Z){return et(Z.value)?{required:!0}:null}function Fe(Z){return null}function He(Z){return null!=Z}function mt(Z){return(0,y.QGY)(Z)?(0,le.D)(Z):Z}function lt(Z){let j={};return Z.forEach(C=>{j=null!=C?{...j,...C}:j}),0===Object.keys(j).length?null:j}function Mt(Z,j){return j.map(C=>C(Z))}function un(Z){return Z.map(j=>function Pt(Z){return!Z.validate}(j)?j:C=>j.validate(C))}function Je(Z){return null!=Z?function Tt(Z){if(!Z)return null;const j=Z.filter(He);return 0==j.length?null:function(C){return lt(Mt(C,j))}}(un(Z)):null}function Qt(Z){return null!=Z?function Ot(Z){if(!Z)return null;const j=Z.filter(He);return 0==j.length?null:function(C){return function we(...Z){const j=(0,he.jO)(Z),{args:C,keys:N}=(0,De.D)(Z),fe=new ve.y(rt=>{const{length:Lt}=C;if(!Lt)return void rt.complete();const nn=new Array(Lt);let an=Lt,jr=Lt;for(let qr=0;qr<Lt;qr++){let Vr=!1;(0,Re.Xf)(C[qr]).subscribe((0,_e.x)(rt,wr=>{Vr||(Vr=!0,jr--),nn[qr]=wr},()=>an--,void 0,()=>{(!an||!Vr)&&(jr||rt.next(N?(0,U.n)(N,nn):nn),rt.complete())}))}});return j?fe.pipe((0,Be.Z)(j)):fe}(Mt(C,j).map(mt)).pipe((0,je.U)(lt))}}(un(Z)):null}function yn(Z,j){return null===Z?[j]:Array.isArray(Z)?[...Z,j]:[Z,j]}function Nt(Z){return Z?Array.isArray(Z)?Z:[Z]:[]}function In(Z,j){return Array.isArray(Z)?Z.includes(j):Z===j}function Ft(Z,j){const C=Nt(j);return Nt(Z).forEach(fe=>{In(C,fe)||C.push(fe)}),C}function or(Z,j){return Nt(j).filter(C=>!In(Z,C))}class sr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=Je(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=Qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j=void 0){this.control&&this.control.reset(j)}hasError(j,C){return!!this.control&&this.control.hasError(j,C)}getError(j,C){return this.control?this.control.getError(j,C):null}}class yr extends sr{get formDirective(){return null}get path(){return null}}class tn extends sr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xr{constructor(j){this._cd=j}get isTouched(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.touched)}get isUntouched(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.untouched)}get isPristine(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.pristine)}get isDirty(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.dirty)}get isValid(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.valid)}get isInvalid(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.invalid)}get isPending(){var j,C;return!(null===(j=this._cd)||void 0===j||null===(C=j.control)||void 0===C||!C.pending)}get isSubmitted(){var j;return!(null===(j=this._cd)||void 0===j||!j.submitted)}}let Or=(()=>{class Z extends xr{constructor(C){super(C)}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(tn,2))},Z.\u0275dir=y.lG2({type:Z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,N){2&C&&y.ekj("ng-untouched",N.isUntouched)("ng-touched",N.isTouched)("ng-pristine",N.isPristine)("ng-dirty",N.isDirty)("ng-valid",N.isValid)("ng-invalid",N.isInvalid)("ng-pending",N.isPending)},features:[y.qOj]}),Z})(),Nr=(()=>{class Z extends xr{constructor(C){super(C)}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(yr,10))},Z.\u0275dir=y.lG2({type:Z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(C,N){2&C&&y.ekj("ng-untouched",N.isUntouched)("ng-touched",N.isTouched)("ng-pristine",N.isPristine)("ng-dirty",N.isDirty)("ng-valid",N.isValid)("ng-invalid",N.isInvalid)("ng-pending",N.isPending)("ng-submitted",N.isSubmitted)},features:[y.qOj]}),Z})();const sn="VALID",lr="INVALID",On="PENDING",_r="DISABLED";function Qe(Z){return(q(Z)?Z.validators:Z)||null}function K(Z,j){return(q(j)?j.asyncValidators:Z)||null}function q(Z){return null!=Z&&!Array.isArray(Z)&&"object"==typeof Z}class ke{constructor(j,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(j),this._assignAsyncValidators(C)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===sn}get invalid(){return this.status===lr}get pending(){return this.status==On}get disabled(){return this.status===_r}get enabled(){return this.status!==_r}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._assignValidators(j)}setAsyncValidators(j){this._assignAsyncValidators(j)}addValidators(j){this.setValidators(Ft(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Ft(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(or(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(or(j,this._rawAsyncValidators))}hasValidator(j){return In(this._rawValidators,j)}hasAsyncValidator(j){return In(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=On,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const C=this._parentMarkedDirty(j.onlySelf);this.status=_r,this.errors=null,this._forEachChild(N=>{N.disable({...j,onlySelf:!0})}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...j,skipPristineCheck:C}),this._onDisabledChange.forEach(N=>N(!0))}enable(j={}){const C=this._parentMarkedDirty(j.onlySelf);this.status=sn,this._forEachChild(N=>{N.enable({...j,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors({...j,skipPristineCheck:C}),this._onDisabledChange.forEach(N=>N(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}getRawValue(){return this.value}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sn||this.status===On)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_r:sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=On,this._hasOwnPendingAsyncValidator=!0;const C=mt(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(N=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(N,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,C={}){this.errors=j,this._updateControlsErrors(!1!==C.emitEvent)}get(j){let C=j;return null==C||(Array.isArray(C)||(C=C.split(".")),0===C.length)?null:C.reduce((N,fe)=>N&&N._find(fe),this)}getError(j,C){const N=C?this.get(C):this;return N&&N.errors?N.errors[j]:null}hasError(j,C){return!!this.getError(j,C)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?_r:this.errors?lr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(On)?On:this._anyControlsHaveStatus(lr)?lr:sn}_anyControlsHaveStatus(j){return this._anyControls(C=>C.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){q(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(j){return null}_assignValidators(j){this._rawValidators=Array.isArray(j)?j.slice():j,this._composedValidatorFn=function de(Z){return Array.isArray(Z)?Je(Z):Z||null}(this._rawValidators)}_assignAsyncValidators(j){this._rawAsyncValidators=Array.isArray(j)?j.slice():j,this._composedAsyncValidatorFn=function z(Z){return Array.isArray(Z)?Qt(Z):Z||null}(this._rawAsyncValidators)}}class ht extends ke{constructor(j,C,N){super(Qe(C),K(N,C)),this.controls=j,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,C){return this.controls[j]?this.controls[j]:(this.controls[j]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(j,C,N={}){this.registerControl(j,C),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}removeControl(j,C={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(j,C,N={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],C&&this.registerControl(j,C),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,C={}){(function it(Z,j,C){Z._forEachChild((N,fe)=>{if(void 0===C[fe])throw new y.vHH(1002,"")})})(this,0,j),Object.keys(j).forEach(N=>{(function Pe(Z,j,C){const N=Z.controls;if(!(j?Object.keys(N):N).length)throw new y.vHH(1e3,"");if(!N[C])throw new y.vHH(1001,"")})(this,!0,N),this.controls[N].setValue(j[N],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(j,C={}){null!=j&&(Object.keys(j).forEach(N=>{const fe=this.controls[N];fe&&fe.patchValue(j[N],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(j={},C={}){this._forEachChild((N,fe)=>{N.reset(j[fe],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(j,C,N)=>(j[N]=C.getRawValue(),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(C,N)=>!!N._syncPendingControls()||C);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(C=>{const N=this.controls[C];N&&j(N,C)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const[C,N]of Object.entries(this.controls))if(this.contains(C)&&j(N))return!0;return!1}_reduceValue(){return this._reduceChildren({},(C,N,fe)=>((N.enabled||this.disabled)&&(C[fe]=N.value),C))}_reduceChildren(j,C){let N=j;return this._forEachChild((fe,rt)=>{N=C(N,fe,rt)}),N}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(j){return this.controls.hasOwnProperty(j)?this.controls[j]:null}}const fn=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Wn}),Wn="always";function Dt(Z,j,C=Wn){var N,fe;Nn(Z,j),j.valueAccessor.writeValue(Z.value),(Z.disabled||"always"===C)&&(null===(N=(fe=j.valueAccessor).setDisabledState)||void 0===N||N.call(fe,Z.disabled)),function nr(Z,j){j.valueAccessor.registerOnChange(C=>{Z._pendingValue=C,Z._pendingChange=!0,Z._pendingDirty=!0,"change"===Z.updateOn&&Tr(Z,j)})}(Z,j),function Qn(Z,j){const C=(N,fe)=>{j.valueAccessor.writeValue(N),fe&&j.viewToModelUpdate(N)};Z.registerOnChange(C),j._registerOnDestroy(()=>{Z._unregisterOnChange(C)})}(Z,j),function Jr(Z,j){j.valueAccessor.registerOnTouched(()=>{Z._pendingTouched=!0,"blur"===Z.updateOn&&Z._pendingChange&&Tr(Z,j),"submit"!==Z.updateOn&&Z.markAsTouched()})}(Z,j),function _n(Z,j){if(j.valueAccessor.setDisabledState){const C=N=>{j.valueAccessor.setDisabledState(N)};Z.registerOnDisabledChange(C),j._registerOnDestroy(()=>{Z._unregisterOnDisabledChange(C)})}}(Z,j)}function zt(Z,j){Z.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(j)})}function Nn(Z,j){const C=function Tn(Z){return Z._rawValidators}(Z);null!==j.validator?Z.setValidators(yn(C,j.validator)):"function"==typeof C&&Z.setValidators([C]);const N=function Dn(Z){return Z._rawAsyncValidators}(Z);null!==j.asyncValidator?Z.setAsyncValidators(yn(N,j.asyncValidator)):"function"==typeof N&&Z.setAsyncValidators([N]);const fe=()=>Z.updateValueAndValidity();zt(j._rawValidators,fe),zt(j._rawAsyncValidators,fe)}function Tr(Z,j){Z._pendingDirty&&Z.markAsDirty(),Z.setValue(Z._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1}const W={provide:yr,useExisting:(0,y.Gpc)(()=>Ee)},ne=(()=>Promise.resolve())();let Ee=(()=>{class Z extends yr{constructor(C,N,fe){super(),this.callSetDisabledState=fe,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new ht({},Je(C),Qt(N))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){ne.then(()=>{const N=this._findContainer(C.path);C.control=N.registerControl(C.name,C.control),Dt(C.control,C,this.callSetDisabledState),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){ne.then(()=>{const N=this._findContainer(C.path);N&&N.removeControl(C.name),this._directives.delete(C)})}addFormGroup(C){ne.then(()=>{const N=this._findContainer(C.path),fe=new ht({});(function Jn(Z,j){Nn(Z,j)})(fe,C),N.registerControl(C.name,fe),fe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){ne.then(()=>{const N=this._findContainer(C.path);N&&N.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,N){ne.then(()=>{this.form.get(C.path).setValue(N)})}setValue(C){this.control.setValue(C)}onSubmit(C){var N;return this.submitted=!0,function vs(Z,j){Z._syncPendingControls(),j.forEach(C=>{const N=C.control;"submit"===N.updateOn&&N._pendingChange&&(C.viewToModelUpdate(N._pendingValue),N._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(C),"dialog"===(null==C||null===(N=C.target)||void 0===N?void 0:N.method)}onReset(){this.resetForm()}resetForm(C=void 0){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(vt,10),y.Y36(Ye,10),y.Y36(fn,8))},Z.\u0275dir=y.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(C,N){1&C&&y.NdJ("submit",function(rt){return N.onSubmit(rt)})("reset",function(){return N.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([W]),y.qOj]}),Z})();function oe(Z,j){const C=Z.indexOf(j);C>-1&&Z.splice(C,1)}function G(Z){return"object"==typeof Z&&null!==Z&&2===Object.keys(Z).length&&"value"in Z&&"disabled"in Z}const ie=class extends ke{constructor(j=null,C,N){super(Qe(C),K(N,C)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),q(C)&&(C.nonNullable||C.initialValueIsDefault)&&(this.defaultValue=G(j)?j.value:j)}setValue(j,C={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(N=>N(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(j,C={}){this.setValue(j,C)}reset(j=this.defaultValue,C={}){this._applyFormState(j),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){oe(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){oe(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){G(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}},Fi={provide:tn,useExisting:(0,y.Gpc)(()=>Gr)},is=(()=>Promise.resolve())();let Gr=(()=>{class Z extends tn{constructor(C,N,fe,rt,Lt,nn){super(),this._changeDetectorRef=Lt,this.callSetDisabledState=nn,this.control=new ie,this._registered=!1,this.name="",this.update=new y.vpe,this._parent=C,this._setValidators(N),this._setAsyncValidators(fe),this.valueAccessor=function ps(Z,j){if(!j)return null;let C,N,fe;return Array.isArray(j),j.forEach(rt=>{rt.constructor===ze?C=rt:function ei(Z){return Object.getPrototypeOf(Z.constructor)===Ue}(rt)?N=rt:fe=rt}),fe||N||C||null}(0,rt)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const N=C.name.previousValue;this.formDirective.removeControl({name:N,path:this._getPath(N)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),function Si(Z,j){if(!Z.hasOwnProperty("model"))return!1;const C=Z.model;return!!C.isFirstChange()||!Object.is(j,C.currentValue)}(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Dt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){is.then(()=>{var N;this.control.setValue(C,{emitViewToModelChange:!1}),null===(N=this._changeDetectorRef)||void 0===N||N.markForCheck()})}_updateDisabled(C){const N=C.isDisabled.currentValue,fe=0!==N&&(0,y.D6c)(N);is.then(()=>{var rt;fe&&!this.control.disabled?this.control.disable():!fe&&this.control.disabled&&this.control.enable(),null===(rt=this._changeDetectorRef)||void 0===rt||rt.markForCheck()})}_getPath(C){return this._parent?function kn(Z,j){return[...j.path,Z]}(C,this._parent):[C]}}return Z.\u0275fac=function(C){return new(C||Z)(y.Y36(yr,9),y.Y36(vt,10),y.Y36(Ye,10),y.Y36(qe,10),y.Y36(y.sBO,8),y.Y36(fn,8))},Z.\u0275dir=y.lG2({type:Z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([Fi]),y.qOj,y.TTD]}),Z})(),En=(()=>{class Z{}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275dir=y.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Z})(),zi=(()=>{class Z{}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275mod=y.oAB({type:Z}),Z.\u0275inj=y.cJS({}),Z})();const er=new y.OlP("NgModelWithFormControlWarning");let Gi=(()=>{class Z{constructor(){this._validator=Fe}ngOnChanges(C){if(this.inputName in C){const N=this.normalizeInput(C[this.inputName].currentValue);this._enabled=this.enabled(N),this._validator=this._enabled?this.createValidator(N):Fe,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(C){return null!=C}}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275dir=y.lG2({type:Z,features:[y.TTD]}),Z})();const to={provide:vt,useExisting:(0,y.Gpc)(()=>Cs),multi:!0};let Cs=(()=>{class Z extends Gi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.D6c,this.createValidator=C=>Et}enabled(C){return C}}return Z.\u0275fac=function(){let j;return function(N){return(j||(j=y.n5z(Z)))(N||Z)}}(),Z.\u0275dir=y.lG2({type:Z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(C,N){2&C&&y.uIk("required",N._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([to]),y.qOj]}),Z})();const To={provide:vt,useExisting:(0,y.Gpc)(()=>Es),multi:!0};let Es=(()=>{class Z extends Gi{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=C=>function Ta(Z){return"number"==typeof Z?Z:parseInt(Z,10)}(C),this.createValidator=C=>function Ve(Z){return j=>et(j.value)||!function ft(Z){return null!=Z&&"number"==typeof Z.length}(j.value)?null:j.value.length<Z?{minlength:{requiredLength:Z,actualLength:j.value.length}}:null}(C)}}return Z.\u0275fac=function(){let j;return function(N){return(j||(j=y.n5z(Z)))(N||Z)}}(),Z.\u0275dir=y.lG2({type:Z,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(C,N){2&C&&y.uIk("minlength",N._enabled?N.minlength:null)},inputs:{minlength:"minlength"},features:[y._Bn([To]),y.qOj]}),Z})(),Kt=(()=>{class Z{}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275mod=y.oAB({type:Z}),Z.\u0275inj=y.cJS({imports:[zi]}),Z})(),Mo=(()=>{class Z{static withConfig(C){var N;return{ngModule:Z,providers:[{provide:fn,useValue:null!==(N=C.callSetDisabledState)&&void 0!==N?N:Wn}]}}}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275mod=y.oAB({type:Z}),Z.\u0275inj=y.cJS({imports:[Kt]}),Z})(),Ds=(()=>{class Z{static withConfig(C){var N,fe;return{ngModule:Z,providers:[{provide:er,useValue:null!==(N=C.warnOnNgModelWithFormControl)&&void 0!==N?N:"always"},{provide:fn,useValue:null!==(fe=C.callSetDisabledState)&&void 0!==fe?fe:Wn}]}}}return Z.\u0275fac=function(C){return new(C||Z)},Z.\u0275mod=y.oAB({type:Z}),Z.\u0275inj=y.cJS({imports:[Kt]}),Z})()},6550:(pn,dt,L)=>{"use strict";L.d(dt,{Dx:()=>tn,b2:()=>In,q6:()=>yn,se:()=>Le});var y=L(2223),m=L(4755);class le extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends le{static makeCurrent(){(0,m.HT)(new ve)}onAndCancel(K,z,q){return K.addEventListener(z,q),()=>{K.removeEventListener(z,q)}}dispatchEvent(K,z){K.dispatchEvent(z)}remove(K){K.parentNode&&K.parentNode.removeChild(K)}createElement(K,z){return(z=z||this.getDefaultDocument()).createElement(K)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(K){return K.nodeType===Node.ELEMENT_NODE}isShadowRoot(K){return K instanceof DocumentFragment}getGlobalEventTarget(K,z){return"window"===z?window:"document"===z?K:"body"===z?K.body:null}getBaseHref(K){const z=function Re(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==z?null:function _e(de){he=he||document.createElement("a"),he.setAttribute("href",de);const K=he.pathname;return"/"===K.charAt(0)?K:`/${K}`}(z)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(K){return(0,m.Mx)(document.cookie,K)}}let he,De=null,U=(()=>{class de{build(){return new XMLHttpRequest}}return de.\u0275fac=function(z){return new(z||de)},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();const we=new y.OlP("EventManagerPlugins");let je=(()=>{class de{constructor(z,q){this._zone=q,this._eventNameToPlugin=new Map,z.forEach(Pe=>{Pe.manager=this}),this._plugins=z.slice().reverse()}addEventListener(z,q,Pe){return this._findPluginFor(q).addEventListener(z,q,Pe)}getZone(){return this._zone}_findPluginFor(z){const q=this._eventNameToPlugin.get(z);if(q)return q;const Pe=this._plugins;for(let it=0;it<Pe.length;it++){const ke=Pe[it];if(ke.supports(z))return this._eventNameToPlugin.set(z,ke),ke}throw new Error(`No event manager plugin found for event ${z}`)}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(we),y.LFG(y.R0b))},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();class ge{constructor(K){this._doc=K}}const Ue="ng-app-id";let qe=(()=>{class de{constructor(z,q,Pe,it={}){this.doc=z,this.appId=q,this.nonce=Pe,this.platformId=it,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,m.PM)(it),this.resetHostNodes()}addStyles(z){for(const q of z)1===this.changeUsageCount(q,1)&&this.onStyleAdded(q)}removeStyles(z){for(const q of z)this.changeUsageCount(q,-1)<=0&&this.onStyleRemoved(q)}ngOnDestroy(){const z=this.styleNodesInDOM;z&&(z.forEach(q=>q.remove()),z.clear());for(const q of this.getAllStyles())this.onStyleRemoved(q);this.resetHostNodes()}addHost(z){this.hostNodes.add(z);for(const q of this.getAllStyles())this.addStyleToHost(z,q)}removeHost(z){this.hostNodes.delete(z)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(z){for(const q of this.hostNodes)this.addStyleToHost(q,z)}onStyleRemoved(z){var q,Pe;const it=this.styleRef;null===(q=it.get(z))||void 0===q||null===(Pe=q.elements)||void 0===Pe||Pe.forEach(ke=>ke.remove()),it.delete(z)}collectServerRenderedStyles(){var z;const q=null===(z=this.doc.head)||void 0===z?void 0:z.querySelectorAll(`style[${Ue}="${this.appId}"]`);if(null!=q&&q.length){const Pe=new Map;return q.forEach(it=>{null!=it.textContent&&Pe.set(it.textContent,it)}),Pe}return null}changeUsageCount(z,q){const Pe=this.styleRef;if(Pe.has(z)){const it=Pe.get(z);return it.usage+=q,it.usage}return Pe.set(z,{usage:q,elements:[]}),q}getStyleElement(z,q){const Pe=this.styleNodesInDOM,it=null==Pe?void 0:Pe.get(q);if((null==it?void 0:it.parentNode)===z)return Pe.delete(q),it.removeAttribute(Ue),it;{const ke=this.doc.createElement("style");return this.nonce&&ke.setAttribute("nonce",this.nonce),ke.textContent=q,this.platformIsServer&&ke.setAttribute(Ue,this.appId),ke}}addStyleToHost(z,q){var Pe;const it=this.getStyleElement(z,q);z.appendChild(it);const ke=this.styleRef,ht=null===(Pe=ke.get(q))||void 0===Pe?void 0:Pe.elements;ht?ht.push(it):ke.set(q,{elements:[it],usage:1})}resetHostNodes(){const z=this.hostNodes;z.clear(),z.add(this.doc.head)}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(m.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();const It={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ae=/%COMP%/g,et=new y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ye(de,K){return K.map(z=>z.replace(Ae,de))}let Le=(()=>{class de{constructor(z,q,Pe,it,ke,ht,Ct,jt=null){this.eventManager=z,this.sharedStylesHost=q,this.appId=Pe,this.removeStylesOnCompDestory=it,this.doc=ke,this.platformId=ht,this.ngZone=Ct,this.nonce=jt,this.rendererByCompId=new Map,this.platformIsServer=(0,m.PM)(ht),this.defaultRenderer=new _t(z,ke,Ct,this.platformIsServer)}createRenderer(z,q){if(!z||!q)return this.defaultRenderer;this.platformIsServer&&q.encapsulation===y.ifc.ShadowDom&&(q={...q,encapsulation:y.ifc.Emulated});const Pe=this.getOrCreateRenderer(z,q);return Pe instanceof Ve?Pe.applyToHost(z):Pe instanceof xe&&Pe.applyStyles(),Pe}getOrCreateRenderer(z,q){const Pe=this.rendererByCompId;let it=Pe.get(q.id);if(!it){const ke=this.doc,ht=this.ngZone,Ct=this.eventManager,jt=this.sharedStylesHost,Ut=this.removeStylesOnCompDestory,on=this.platformIsServer;switch(q.encapsulation){case y.ifc.Emulated:it=new Ve(Ct,jt,q,this.appId,Ut,ke,ht,on);break;case y.ifc.ShadowDom:return new ce(Ct,jt,z,q,ke,ht,this.nonce,on);default:it=new xe(Ct,jt,q,Ut,ke,ht,on)}it.onDestroy=()=>Pe.delete(q.id),Pe.set(q.id,it)}return it}ngOnDestroy(){this.rendererByCompId.clear()}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(je),y.LFG(qe),y.LFG(y.AFp),y.LFG(et),y.LFG(m.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();class _t{constructor(K,z,q,Pe){this.eventManager=K,this.doc=z,this.ngZone=q,this.platformIsServer=Pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(K,z){return z?this.doc.createElementNS(It[z]||z,K):this.doc.createElement(K)}createComment(K){return this.doc.createComment(K)}createText(K){return this.doc.createTextNode(K)}appendChild(K,z){(Et(K)?K.content:K).appendChild(z)}insertBefore(K,z,q){K&&(Et(K)?K.content:K).insertBefore(z,q)}removeChild(K,z){K&&K.removeChild(z)}selectRootElement(K,z){let q="string"==typeof K?this.doc.querySelector(K):K;if(!q)throw new Error(`The selector "${K}" did not match any elements`);return z||(q.textContent=""),q}parentNode(K){return K.parentNode}nextSibling(K){return K.nextSibling}setAttribute(K,z,q,Pe){if(Pe){z=Pe+":"+z;const it=It[Pe];it?K.setAttributeNS(it,z,q):K.setAttribute(z,q)}else K.setAttribute(z,q)}removeAttribute(K,z,q){if(q){const Pe=It[q];Pe?K.removeAttributeNS(Pe,z):K.removeAttribute(`${q}:${z}`)}else K.removeAttribute(z)}addClass(K,z){K.classList.add(z)}removeClass(K,z){K.classList.remove(z)}setStyle(K,z,q,Pe){Pe&(y.JOm.DashCase|y.JOm.Important)?K.style.setProperty(z,q,Pe&y.JOm.Important?"important":""):K.style[z]=q}removeStyle(K,z,q){q&y.JOm.DashCase?K.style.removeProperty(z):K.style[z]=""}setProperty(K,z,q){K[z]=q}setValue(K,z){K.nodeValue=z}listen(K,z,q){if("string"==typeof K&&!(K=(0,m.q)().getGlobalEventTarget(this.doc,K)))throw new Error(`Unsupported event target ${K} for event ${z}`);return this.eventManager.addEventListener(K,z,this.decoratePreventDefault(q))}decoratePreventDefault(K){return z=>{if("__ngUnwrap__"===z)return K;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>K(z)):K(z))&&(z.preventDefault(),z.returnValue=!1)}}}function Et(de){return"TEMPLATE"===de.tagName&&void 0!==de.content}class ce extends _t{constructor(K,z,q,Pe,it,ke,ht,Ct){super(K,it,ke,Ct),this.sharedStylesHost=z,this.hostEl=q,this.shadowRoot=q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const jt=Ye(Pe.id,Pe.styles);for(const Ut of jt){const on=document.createElement("style");ht&&on.setAttribute("nonce",ht),on.textContent=Ut,this.shadowRoot.appendChild(on)}}nodeOrShadowRoot(K){return K===this.hostEl?this.shadowRoot:K}appendChild(K,z){return super.appendChild(this.nodeOrShadowRoot(K),z)}insertBefore(K,z,q){return super.insertBefore(this.nodeOrShadowRoot(K),z,q)}removeChild(K,z){return super.removeChild(this.nodeOrShadowRoot(K),z)}parentNode(K){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(K)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xe extends _t{constructor(K,z,q,Pe,it,ke,ht,Ct){super(K,it,ke,ht),this.sharedStylesHost=z,this.removeStylesOnCompDestory=Pe,this.rendererUsageCount=0,this.styles=Ct?Ye(Ct,q.styles):q.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var K;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(K=this.onDestroy)||void 0===K||K.call(this))}}class Ve extends xe{constructor(K,z,q,Pe,it,ke,ht,Ct){const jt=Pe+"-"+q.id;super(K,z,q,it,ke,ht,Ct,jt),this.contentAttr=function ft(de){return"_ngcontent-%COMP%".replace(Ae,de)}(jt),this.hostAttr=function vt(de){return"_nghost-%COMP%".replace(Ae,de)}(jt)}applyToHost(K){this.applyStyles(),this.setAttribute(K,this.hostAttr,"")}createElement(K,z){const q=super.createElement(K,z);return super.setAttribute(q,this.contentAttr,""),q}}let We=(()=>{class de extends ge{constructor(z){super(z)}supports(z){return!0}addEventListener(z,q,Pe){return z.addEventListener(q,Pe,!1),()=>this.removeEventListener(z,q,Pe)}removeEventListener(z,q,Pe){return z.removeEventListener(q,Pe)}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(m.K0))},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();const Ne=["alt","control","meta","shift"],Fe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},He={alt:de=>de.altKey,control:de=>de.ctrlKey,meta:de=>de.metaKey,shift:de=>de.shiftKey};let mt=(()=>{class de extends ge{constructor(z){super(z)}supports(z){return null!=de.parseEventName(z)}addEventListener(z,q,Pe){const it=de.parseEventName(q),ke=de.eventCallback(it.fullKey,Pe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(z,it.domEventName,ke))}static parseEventName(z){const q=z.toLowerCase().split("."),Pe=q.shift();if(0===q.length||"keydown"!==Pe&&"keyup"!==Pe)return null;const it=de._normalizeKey(q.pop());let ke="",ht=q.indexOf("code");if(ht>-1&&(q.splice(ht,1),ke="code."),Ne.forEach(jt=>{const Ut=q.indexOf(jt);Ut>-1&&(q.splice(Ut,1),ke+=jt+".")}),ke+=it,0!=q.length||0===it.length)return null;const Ct={};return Ct.domEventName=Pe,Ct.fullKey=ke,Ct}static matchEventFullKeyCode(z,q){let Pe=Fe[z.key]||z.key,it="";return q.indexOf("code.")>-1&&(Pe=z.code,it="code."),!(null==Pe||!Pe)&&(Pe=Pe.toLowerCase()," "===Pe?Pe="space":"."===Pe&&(Pe="dot"),Ne.forEach(ke=>{ke!==Pe&&(0,He[ke])(z)&&(it+=ke+".")}),it+=Pe,it===q)}static eventCallback(z,q,Pe){return it=>{de.matchEventFullKeyCode(it,z)&&Pe.runGuarded(()=>q(it))}}static _normalizeKey(z){return"esc"===z?"escape":z}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(m.K0))},de.\u0275prov=y.Yz7({token:de,factory:de.\u0275fac}),de})();const yn=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:m.bD},{provide:y.g9A,useValue:function Tt(){ve.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function Ot(){return(0,y.RDi)(document),document},deps:[]}]),Tn=new y.OlP(""),Dn=[{provide:y.rWj,useClass:class Be{addToWindow(K){y.dqk.getAngularTestability=(q,Pe=!0)=>{const it=K.findTestabilityInTree(q,Pe);if(null==it)throw new Error("Could not find testability for element.");return it},y.dqk.getAllAngularTestabilities=()=>K.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>K.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(q=>{const Pe=y.dqk.getAllAngularTestabilities();let it=Pe.length,ke=!1;const ht=function(Ct){ke=ke||Ct,it--,0==it&&q(ke)};Pe.forEach(function(Ct){Ct.whenStable(ht)})})}findTestabilityInTree(K,z,q){if(null==z)return null;const Pe=K.getTestability(z);return null!=Pe?Pe:q?(0,m.q)().isShadowRoot(z)?this.findTestabilityInTree(K,z.host,!0):this.findTestabilityInTree(K,z.parentElement,!0):null}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],Nt=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Je(){return new y.qLn},deps:[]},{provide:we,useClass:We,multi:!0,deps:[m.K0,y.R0b,y.Lbi]},{provide:we,useClass:mt,multi:!0,deps:[m.K0]},Le,qe,je,{provide:y.FYo,useExisting:Le},{provide:m.JF,useClass:U,deps:[]},[]];let In=(()=>{class de{constructor(z){}static withServerTransition(z){return{ngModule:de,providers:[{provide:y.AFp,useValue:z.appId}]}}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(Tn,12))},de.\u0275mod=y.oAB({type:de}),de.\u0275inj=y.cJS({providers:[...Nt,...Dn],imports:[m.ez,y.hGG]}),de})(),tn=(()=>{class de{constructor(z){this._doc=z}getTitle(){return this._doc.title}setTitle(z){this._doc.title=z||""}}return de.\u0275fac=function(z){return new(z||de)(y.LFG(m.K0))},de.\u0275prov=y.Yz7({token:de,factory:function(z){let q=null;return q=z?new z:function yr(){return new tn((0,y.LFG)(m.K0))}(),q},providedIn:"root"}),de})();typeof window<"u"&&window},96:(pn,dt,L)=>{"use strict";L.d(dt,{gz:()=>Js,jw:()=>Gr,y6:()=>Hi,OD:()=>Ee,eC:()=>Nt,wm:()=>Qa,wN:()=>fr,F0:()=>en,rH:()=>hn,Bz:()=>Zs,Hx:()=>me,fw:()=>os});var y=L(2223),m=L(9751),le=L(576),De=L(8996),Re=L(9646),he=L(1135),_e=L(4742),Be=L(4671),U=L(3268),we=L(7669),je=L(1810),ge=L(5403),Ue=L(9672);function qe(...M){const P=(0,we.yG)(M),D=(0,we.jO)(M),{args:F,keys:ee}=(0,_e.D)(M);if(0===F.length)return(0,De.D)([],P);const Te=new m.y(function It(M,P,D=Be.y){return F=>{Ae(P,()=>{const{length:ee}=M,Te=new Array(ee);let Ie=ee,gt=ee;for(let Wt=0;Wt<ee;Wt++)Ae(P,()=>{const Bn=(0,De.D)(M[Wt],P);let Er=!1;Bn.subscribe((0,ge.x)(F,Vn=>{Te[Wt]=Vn,Er||(Er=!0,gt--),gt||F.next(D(Te.slice()))},()=>{--Ie||F.complete()}))},F)},F)}}(F,P,ee?Ie=>(0,je.n)(ee,Ie):Be.y));return D?Te.pipe((0,U.Z)(D)):Te}function Ae(M,P,D){M?(0,Ue.f)(D,M,P):P()}var Ce=L(6805),ct=L(7272),at=L(8421);function ze(M){return new m.y(P=>{(0,at.Xf)(M()).subscribe(P)})}var et=L(9635);function ft(M,P){const D=(0,le.m)(M)?M:()=>M,F=ee=>ee.error(D());return new m.y(P?ee=>P.schedule(F,0,ee):F)}var vt=L(515),Ye=L(727),Le=L(4482);function _t(){return(0,Le.e)((M,P)=>{let D=null;M._refCount++;const F=(0,ge.x)(P,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(D=null);const ee=M._connection,Te=D;D=null,ee&&(!Te||ee===Te)&&ee.unsubscribe(),P.unsubscribe()});M.subscribe(F),F.closed||(D=M.connect())})}class nt extends m.y{constructor(P,D){super(),this.source=P,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Le.A)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,null==P||P.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new Ye.w0;const D=this.getSubject();P.add(this.source.subscribe((0,ge.x)(D,void 0,()=>{this._teardown(),D.complete()},F=>{this._teardown(),D.error(F)},()=>this._teardown()))),P.closed&&(this._connection=null,P=Ye.w0.EMPTY)}return P}refCount(){return _t()(this)}}var pt=L(7579),Et=L(4755),ce=L(4004),xe=L(3900),Ve=L(5698),We=L(8675),Ne=L(9300),Fe=L(5577),He=L(590);function mt(M,P){return(0,le.m)(P)?(0,Fe.z)(M,P,1):(0,Fe.z)(M,1)}var lt=L(8505);function Mt(M){return(0,Le.e)((P,D)=>{let Te,F=null,ee=!1;F=P.subscribe((0,ge.x)(D,void 0,void 0,Ie=>{Te=(0,at.Xf)(M(Ie,Mt(M)(P))),F?(F.unsubscribe(),F=null,Te.subscribe(D)):ee=!0})),ee&&(F.unsubscribe(),F=null,Te.subscribe(D))})}var Pt=L(5026),un=L(6590);function Tt(M){return M<=0?()=>vt.E:(0,Le.e)((P,D)=>{let F=[];P.subscribe((0,ge.x)(D,ee=>{F.push(ee),M<F.length&&F.shift()},()=>{for(const ee of F)D.next(ee);D.complete()},void 0,()=>{F=null}))})}var Je=L(8068);function yn(M){return(0,Le.e)((P,D)=>{try{P.subscribe(D)}finally{D.add(M)}})}var Tn=L(8189),Dn=L(6550);const Nt="primary",In=Symbol("RouteTitle");class Ft{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const D=this.params[P];return Array.isArray(D)?D[0]:D}return null}getAll(P){if(this.has(P)){const D=this.params[P];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function or(M){return new Ft(M)}function sr(M,P,D){const F=D.path.split("/");if(F.length>M.length||"full"===D.pathMatch&&(P.hasChildren()||F.length<M.length))return null;const ee={};for(let Te=0;Te<F.length;Te++){const Ie=F[Te],gt=M[Te];if(Ie.startsWith(":"))ee[Ie.substring(1)]=gt;else if(Ie!==gt.path)return null}return{consumed:M.slice(0,F.length),posParams:ee}}function tn(M,P){const D=M?Object.keys(M):void 0,F=P?Object.keys(P):void 0;if(!D||!F||D.length!=F.length)return!1;let ee;for(let Te=0;Te<D.length;Te++)if(ee=D[Te],!xr(M[ee],P[ee]))return!1;return!0}function xr(M,P){if(Array.isArray(M)&&Array.isArray(P)){if(M.length!==P.length)return!1;const D=[...M].sort(),F=[...P].sort();return D.every((ee,Te)=>F[Te]===ee)}return M===P}function dr(M){return M.length>0?M[M.length-1]:null}function rr(M){return function ve(M){return!!M&&(M instanceof m.y||(0,le.m)(M.lift)&&(0,le.m)(M.subscribe))}(M)?M:(0,y.QGY)(M)?(0,De.D)(Promise.resolve(M)):(0,Re.of)(M)}const Or={exact:function $n(M,P,D){if(!Un(M.segments,P.segments)||!Lr(M.segments,P.segments,D)||M.numberOfChildren!==P.numberOfChildren)return!1;for(const F in P.children)if(!M.children[F]||!$n(M.children[F],P.children[F],D))return!1;return!0},subset:vr},Nr={exact:function vn(M,P){return tn(M,P)},subset:function Ir(M,P){return Object.keys(P).length<=Object.keys(M).length&&Object.keys(P).every(D=>xr(M[D],P[D]))},ignored:()=>!0};function Sn(M,P,D){return Or[D.paths](M.root,P.root,D.matrixParams)&&Nr[D.queryParams](M.queryParams,P.queryParams)&&!("exact"===D.fragment&&M.fragment!==P.fragment)}function vr(M,P,D){return ar(M,P,P.segments,D)}function ar(M,P,D,F){if(M.segments.length>D.length){const ee=M.segments.slice(0,D.length);return!(!Un(ee,D)||P.hasChildren()||!Lr(ee,D,F))}if(M.segments.length===D.length){if(!Un(M.segments,D)||!Lr(M.segments,D,F))return!1;for(const ee in P.children)if(!M.children[ee]||!vr(M.children[ee],P.children[ee],F))return!1;return!0}{const ee=D.slice(0,M.segments.length),Te=D.slice(M.segments.length);return!!(Un(M.segments,ee)&&Lr(M.segments,ee,F)&&M.children[Nt])&&ar(M.children[Nt],P,Te,F)}}function Lr(M,P,D){return P.every((F,ee)=>Nr[D](M[ee].parameters,F.parameters))}class Mr{constructor(P=new Gn([],{}),D={},F=null){this.root=P,this.queryParams=D,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return At.serialize(this)}}class Gn{constructor(P,D){this.segments=P,this.children=D,this.parent=null,Object.values(D).forEach(F=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xt(this)}}class Rn{constructor(P,D){this.path=P,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=or(this.parameters)),this._parameterMap}toString(){return z(this)}}function Un(M,P){return M.length===P.length&&M.every((D,F)=>D.path===P[F].path)}let me=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:function(){return new Ge},providedIn:"root"}),M})();class Ge{parse(P){const D=new Wn(P);return new Mr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(P){const D=`/${sn(P.root,!0)}`,F=function Pe(M){const P=Object.keys(M).map(D=>{const F=M[D];return Array.isArray(F)?F.map(ee=>`${On(D)}=${On(ee)}`).join("&"):`${On(D)}=${On(F)}`}).filter(D=>!!D);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${D}${F}${"string"==typeof P.fragment?`#${function _r(M){return encodeURI(M)}(P.fragment)}`:""}`}}const At=new Ge;function Xt(M){return M.segments.map(P=>z(P)).join("/")}function sn(M,P){if(!M.hasChildren())return Xt(M);if(P){const D=M.children[Nt]?sn(M.children[Nt],!1):"",F=[];return Object.entries(M.children).forEach(([ee,Te])=>{ee!==Nt&&F.push(`${ee}:${sn(Te,!1)}`)}),F.length>0?`${D}(${F.join("//")})`:D}{const D=function qt(M,P){let D=[];return Object.entries(M.children).forEach(([F,ee])=>{F===Nt&&(D=D.concat(P(ee,F)))}),Object.entries(M.children).forEach(([F,ee])=>{F!==Nt&&(D=D.concat(P(ee,F)))}),D}(M,(F,ee)=>ee===Nt?[sn(M.children[Nt],!1)]:[`${ee}:${sn(F,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[Nt]?`${Xt(M)}/${D[0]}`:`${Xt(M)}/(${D.join("//")})`}}function lr(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function On(M){return lr(M).replace(/%3B/gi,";")}function Qe(M){return lr(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function de(M){return decodeURIComponent(M)}function K(M){return de(M.replace(/\+/g,"%20"))}function z(M){return`${Qe(M.path)}${function q(M){return Object.keys(M).map(P=>`;${Qe(P)}=${Qe(M[P])}`).join("")}(M.parameters)}`}const it=/^[^\/()?;#]+/;function ke(M){const P=M.match(it);return P?P[0]:""}const ht=/^[^\/()?;=#]+/,jt=/^[^=?&#]+/,on=/^[^&#]+/;class Wn{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(P.length>0||Object.keys(D).length>0)&&(F[Nt]=new Gn(P,D)),F}parseSegment(){const P=ke(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(P),new Rn(de(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const D=function Ct(M){const P=M.match(ht);return P?P[0]:""}(this.remaining);if(!D)return;this.capture(D);let F="";if(this.consumeOptional("=")){const ee=ke(this.remaining);ee&&(F=ee,this.capture(F))}P[de(D)]=de(F)}parseQueryParam(P){const D=function Ut(M){const P=M.match(jt);return P?P[0]:""}(this.remaining);if(!D)return;this.capture(D);let F="";if(this.consumeOptional("=")){const Ie=function fn(M){const P=M.match(on);return P?P[0]:""}(this.remaining);Ie&&(F=Ie,this.capture(F))}const ee=K(D),Te=K(F);if(P.hasOwnProperty(ee)){let Ie=P[ee];Array.isArray(Ie)||(Ie=[Ie],P[ee]=Ie),Ie.push(Te)}else P[ee]=Te}parseParens(P){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=ke(this.remaining),ee=this.remaining[F.length];if("/"!==ee&&")"!==ee&&";"!==ee)throw new y.vHH(4010,!1);let Te;F.indexOf(":")>-1?(Te=F.slice(0,F.indexOf(":")),this.capture(Te),this.capture(":")):P&&(Te=Nt);const Ie=this.parseChildren();D[Te]=1===Object.keys(Ie).length?Ie[Nt]:new Gn([],Ie),this.consumeOptional("//")}return D}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new y.vHH(4011,!1)}}function kn(M){return M.segments.length>0?new Gn([],{[Nt]:M}):M}function Dt(M){const P={};for(const F of Object.keys(M.children)){const Te=Dt(M.children[F]);if(F===Nt&&0===Te.segments.length&&Te.hasChildren())for(const[Ie,gt]of Object.entries(Te.children))P[Ie]=gt;else(Te.segments.length>0||Te.hasChildren())&&(P[F]=Te)}return function wt(M){if(1===M.numberOfChildren&&M.children[Nt]){const P=M.children[Nt];return new Gn(M.segments.concat(P.segments),P.children)}return M}(new Gn(M.segments,P))}function zt(M){return M instanceof Mr}function Nn(M){var P;let D;const Te=kn(function F(Ie){const gt={};for(const Bn of Ie.children){const Er=F(Bn);gt[Bn.outlet]=Er}const Wt=new Gn(Ie.url,gt);return Ie===M&&(D=Wt),Wt}(M.root));return null!==(P=D)&&void 0!==P?P:Te}function Xn(M,P,D,F){let ee=M;for(;ee.parent;)ee=ee.parent;if(0===P.length)return Tr(ee,ee,ee,D,F);const Te=function fi(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new Jn(!0,0,M);let P=0,D=!1;const F=M.reduce((ee,Te,Ie)=>{if("object"==typeof Te&&null!=Te){if(Te.outlets){const gt={};return Object.entries(Te.outlets).forEach(([Wt,Bn])=>{gt[Wt]="string"==typeof Bn?Bn.split("/"):Bn}),[...ee,{outlets:gt}]}if(Te.segmentPath)return[...ee,Te.segmentPath]}return"string"!=typeof Te?[...ee,Te]:0===Ie?(Te.split("/").forEach((gt,Wt)=>{0==Wt&&"."===gt||(0==Wt&&""===gt?D=!0:".."===gt?P++:""!=gt&&ee.push(gt))}),ee):[...ee,Te]},[]);return new Jn(D,P,F)}(P);if(Te.toRoot())return Tr(ee,ee,new Gn([],{}),D,F);const Ie=function rs(M,P,D){if(M.isAbsolute)return new Ls(P,!0,0);if(!D)return new Ls(P,!1,NaN);if(null===D.parent)return new Ls(D,!0,0);const F=nr(M.commands[0])?0:1;return function ki(M,P,D){let F=M,ee=P,Te=D;for(;Te>ee;){if(Te-=ee,F=F.parent,!F)throw new y.vHH(4005,!1);ee=F.segments.length}return new Ls(F,!1,ee-Te)}(D,D.segments.length-1+F,M.numberOfDoubleDots)}(Te,ee,M),gt=Ie.processChildren?Si(Ie.segmentGroup,Ie.index,Te.commands):Bs(Ie.segmentGroup,Ie.index,Te.commands);return Tr(ee,Ie.segmentGroup,gt,D,F)}function nr(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Jr(M){return"object"==typeof M&&null!=M&&M.outlets}function Tr(M,P,D,F,ee){let Ie,Te={};F&&Object.entries(F).forEach(([Wt,Bn])=>{Te[Wt]=Array.isArray(Bn)?Bn.map(Er=>`${Er}`):`${Bn}`}),Ie=M===P?D:Qn(M,P,D);const gt=kn(Dt(Ie));return new Mr(gt,Te,ee)}function Qn(M,P,D){const F={};return Object.entries(M.children).forEach(([ee,Te])=>{F[ee]=Te===P?D:Qn(Te,P,D)}),new Gn(M.segments,F)}class Jn{constructor(P,D,F){if(this.isAbsolute=P,this.numberOfDoubleDots=D,this.commands=F,P&&F.length>0&&nr(F[0]))throw new y.vHH(4003,!1);const ee=F.find(Jr);if(ee&&ee!==dr(F))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ls{constructor(P,D,F){this.segmentGroup=P,this.processChildren=D,this.index=F}}function Bs(M,P,D){if(M||(M=new Gn([],{})),0===M.segments.length&&M.hasChildren())return Si(M,P,D);const F=function ei(M,P,D){let F=0,ee=P;const Te={match:!1,pathIndex:0,commandIndex:0};for(;ee<M.segments.length;){if(F>=D.length)return Te;const Ie=M.segments[ee],gt=D[F];if(Jr(gt))break;const Wt=`${gt}`,Bn=F<D.length-1?D[F+1]:null;if(ee>0&&void 0===Wt)break;if(Wt&&Bn&&"object"==typeof Bn&&void 0===Bn.outlets){if(!Qs(Wt,Bn,Ie))return Te;F+=2}else{if(!Qs(Wt,{},Ie))return Te;F++}ee++}return{match:!0,pathIndex:ee,commandIndex:F}}(M,P,D),ee=D.slice(F.commandIndex);if(F.match&&F.pathIndex<M.segments.length){const Te=new Gn(M.segments.slice(0,F.pathIndex),{});return Te.children[Nt]=new Gn(M.segments.slice(F.pathIndex),M.children),Si(Te,0,ee)}return F.match&&0===ee.length?new Gn(M.segments,{}):F.match&&!M.hasChildren()?vs(M,P,D):F.match?Si(M,0,ee):vs(M,P,D)}function Si(M,P,D){if(0===D.length)return new Gn(M.segments,{});{const F=function pi(M){return Jr(M[0])?M[0].outlets:{[Nt]:M}}(D),ee={};if(!F[Nt]&&M.children[Nt]&&1===M.numberOfChildren&&0===M.children[Nt].segments.length){const Te=Si(M.children[Nt],P,D);return new Gn(M.segments,Te.children)}return Object.entries(F).forEach(([Te,Ie])=>{"string"==typeof Ie&&(Ie=[Ie]),null!==Ie&&(ee[Te]=Bs(M.children[Te],P,Ie))}),Object.entries(M.children).forEach(([Te,Ie])=>{void 0===F[Te]&&(ee[Te]=Ie)}),new Gn(M.segments,ee)}}function vs(M,P,D){const F=M.segments.slice(0,P);let ee=0;for(;ee<D.length;){const Te=D[ee];if(Jr(Te)){const Wt=ps(Te.outlets);return new Gn(F,Wt)}if(0===ee&&nr(D[0])){F.push(new Rn(M.segments[P].path,_s(D[0]))),ee++;continue}const Ie=Jr(Te)?Te.outlets[Nt]:`${Te}`,gt=ee<D.length-1?D[ee+1]:null;Ie&&gt&&nr(gt)?(F.push(new Rn(Ie,_s(gt))),ee+=2):(F.push(new Rn(Ie,{})),ee++)}return new Gn(F,{})}function ps(M){const P={};return Object.entries(M).forEach(([D,F])=>{"string"==typeof F&&(F=[F]),null!==F&&(P[D]=vs(new Gn([],{}),0,F))}),P}function _s(M){const P={};return Object.entries(M).forEach(([D,F])=>P[D]=`${F}`),P}function Qs(M,P,D){return M==D.path&&tn(P,D.parameters)}const W="imperative";class ne{constructor(P,D){this.id=P,this.url=D}}class Ee extends ne{constructor(P,D,F="imperative",ee=null){super(P,D),this.type=0,this.navigationTrigger=F,this.restoredState=ee}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oe extends ne{constructor(P,D,F){super(P,D),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class G extends ne{constructor(P,D,F,ee){super(P,D),this.reason=F,this.code=ee,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ie extends ne{constructor(P,D,F,ee){super(P,D),this.reason=F,this.code=ee,this.type=16}}class $e extends ne{constructor(P,D,F,ee){super(P,D),this.error=F,this.target=ee,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xe extends ne{constructor(P,D,F,ee){super(P,D),this.urlAfterRedirects=F,this.state=ee,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ut extends ne{constructor(P,D,F,ee){super(P,D),this.urlAfterRedirects=F,this.state=ee,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends ne{constructor(P,D,F,ee,Te){super(P,D),this.urlAfterRedirects=F,this.state=ee,this.shouldActivate=Te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cn extends ne{constructor(P,D,F,ee){super(P,D),this.urlAfterRedirects=F,this.state=ee,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gn extends ne{constructor(P,D,F,ee){super(P,D),this.urlAfterRedirects=F,this.state=ee,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn{constructor(P){this.route=P,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ur{constructor(P){this.route=P,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ri{constructor(P){this.snapshot=P,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fi{constructor(P){this.snapshot=P,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(P){this.snapshot=P,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(P){this.snapshot=P,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class En{constructor(P,D,F){this.routerEvent=P,this.position=D,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Kr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Hi,this.attachRef=null}}let Hi=(()=>{class M{constructor(){this.contexts=new Map}onChildOutletCreated(D,F){const ee=this.getOrCreateContext(D);ee.outlet=F,this.contexts.set(D,ee)}onChildOutletDestroyed(D){const F=this.getContext(D);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let F=this.getContext(D);return F||(F=new Kr,this.contexts.set(D,F)),F}getContext(D){return this.contexts.get(D)||null}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();class bo{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const D=this.pathFromRoot(P);return D.length>1?D[D.length-2]:null}children(P){const D=zi(P,this._root);return D?D.children.map(F=>F.value):[]}firstChild(P){const D=zi(P,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(P){const D=Xs(P,this._root);return D.length<2?[]:D[D.length-2].children.map(ee=>ee.value).filter(ee=>ee!==P)}pathFromRoot(P){return Xs(P,this._root).map(D=>D.value)}}function zi(M,P){if(M===P.value)return P;for(const D of P.children){const F=zi(M,D);if(F)return F}return null}function Xs(M,P){if(M===P.value)return[P];for(const D of P.children){const F=Xs(M,D);if(F.length)return F.unshift(P),F}return[]}class Qr{constructor(P,D){this.value=P,this.children=D}toString(){return`TreeNode(${this.value})`}}function Yi(M){const P={};return M&&M.children.forEach(D=>P[D.value.outlet]=D),P}class Li extends bo{constructor(P,D){super(P),this.snapshot=D,xs(this,P)}toString(){return this.snapshot.toString()}}function er(M,P){const D=function Ws(M,P){const Ie=new ss([],{},{},"",{},Nt,P,null,{});return new Rs("",new Qr(Ie,[]))}(0,P),F=new he.X([new Rn("",{})]),ee=new he.X({}),Te=new he.X({}),Ie=new he.X({}),gt=new he.X(""),Wt=new Js(F,ee,Ie,gt,Te,Nt,P,D.root);return Wt.snapshot=D.root,new Li(new Qr(Wt,[]),D)}class Js{constructor(P,D,F,ee,Te,Ie,gt,Wt){var Bn,Er;this.urlSubject=P,this.paramsSubject=D,this.queryParamsSubject=F,this.fragmentSubject=ee,this.dataSubject=Te,this.outlet=Ie,this.component=gt,this._futureSnapshot=Wt,this.title=null!==(Bn=null===(Er=this.dataSubject)||void 0===Er?void 0:Er.pipe((0,ce.U)(Vn=>Vn[In])))&&void 0!==Bn?Bn:(0,Re.of)(void 0),this.url=P,this.params=D,this.queryParams=F,this.fragment=ee,this.data=Te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ce.U)(P=>or(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ce.U)(P=>or(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $r(M,P="emptyOnly"){const D=M.pathFromRoot;let F=0;if("always"!==P)for(F=D.length-1;F>=1;){const ee=D[F],Te=D[F-1];if(ee.routeConfig&&""===ee.routeConfig.path)F--;else{if(Te.component)break;F--}}return function Ii(M){return M.reduce((P,D)=>{var F;return{params:{...P.params,...D.params},data:{...P.data,...D.data},resolve:{...D.data,...P.resolve,...null===(F=D.routeConfig)||void 0===F?void 0:F.data,...D._resolvedData}}},{params:{},data:{},resolve:{}})}(D.slice(F))}class ss{get title(){var P;return null===(P=this.data)||void 0===P?void 0:P[In]}constructor(P,D,F,ee,Te,Ie,gt,Wt,Bn){this.url=P,this.params=D,this.queryParams=F,this.fragment=ee,this.data=Te,this.outlet=Ie,this.component=gt,this.routeConfig=Wt,this._resolve=Bn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=or(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rs extends bo{constructor(P,D){super(D),this.url=P,xs(this,D)}toString(){return fo(this._root)}}function xs(M,P){P.value._routerState=M,P.children.forEach(D=>xs(M,D))}function fo(M){const P=M.children.length>0?` { ${M.children.map(fo).join(", ")} } `:"";return`${M.value}${P}`}function po(M){if(M.snapshot){const P=M.snapshot,D=M._futureSnapshot;M.snapshot=D,tn(P.queryParams,D.queryParams)||M.queryParamsSubject.next(D.queryParams),P.fragment!==D.fragment&&M.fragmentSubject.next(D.fragment),tn(P.params,D.params)||M.paramsSubject.next(D.params),function yr(M,P){if(M.length!==P.length)return!1;for(let D=0;D<M.length;++D)if(!tn(M[D],P[D]))return!1;return!0}(P.url,D.url)||M.urlSubject.next(D.url),tn(P.data,D.data)||M.dataSubject.next(D.data)}else M.snapshot=M._futureSnapshot,M.dataSubject.next(M._futureSnapshot.data)}function $s(M,P){const D=tn(M.params,P.params)&&function ci(M,P){return Un(M,P)&&M.every((D,F)=>tn(D.parameters,P[F].parameters))}(M.url,P.url);return D&&!(!M.parent!=!P.parent)&&(!M.parent||$s(M.parent,P.parent))}let Ks=(()=>{class M{constructor(){this.activated=null,this._activatedRoute=null,this.name=Nt,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Hi),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(xi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(D){if(D.name){const{firstChange:F,previousValue:ee}=D.name;if(F)return;this.isTrackedInParentContexts(ee)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(ee)),this.initializeOutletWithName()}}ngOnDestroy(){var D;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(D=this.inputBinder)||void 0===D||D.unsubscribeFromRouteData(this)}isTrackedInParentContexts(D){var F;return(null===(F=this.parentContexts.getContext(D))||void 0===F?void 0:F.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);null!=D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,F){var ee;this.activated=D,this._activatedRoute=F,this.location.insert(D.hostView),null===(ee=this.inputBinder)||void 0===ee||ee.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,F){var ee;if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=D;const Te=this.location,gt=D.snapshot.component,Wt=this.parentContexts.getOrCreateContext(this.name).children,Bn=new ta(D,Wt,Te.injector);this.activated=Te.createComponent(gt,{index:Te.length,injector:Bn,environmentInjector:null!=F?F:this.environmentInjector}),this.changeDetector.markForCheck(),null===(ee=this.inputBinder)||void 0===ee||ee.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275dir=y.lG2({type:M,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),M})();class ta{constructor(P,D,F){this.route=P,this.childContexts=D,this.parent=F}get(P,D){return P===Js?this.route:P===Hi?this.childContexts:this.parent.get(P,D)}}const xi=new y.OlP("");let Cr=(()=>{class M{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(D){this.unsubscribeFromRouteData(D),this.subscribeToRouteData(D)}unsubscribeFromRouteData(D){var F;null===(F=this.outletDataSubscriptions.get(D))||void 0===F||F.unsubscribe(),this.outletDataSubscriptions.delete(D)}subscribeToRouteData(D){const{activatedRoute:F}=D,ee=qe([F.queryParams,F.params,F.data]).pipe((0,xe.w)(([Te,Ie,gt],Wt)=>(gt={...Te,...Ie,...gt},0===Wt?(0,Re.of)(gt):Promise.resolve(gt)))).subscribe(Te=>{if(!D.isActivated||!D.activatedComponentRef||D.activatedRoute!==F||null===F.component)return void this.unsubscribeFromRouteData(D);const Ie=(0,y.qFp)(F.component);if(Ie)for(const{templateName:gt}of Ie.inputs)D.activatedComponentRef.setInput(gt,Te[gt]);else this.unsubscribeFromRouteData(D)});this.outletDataSubscriptions.set(D,ee)}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac}),M})();function eo(M,P,D){if(D&&M.shouldReuseRoute(P.value,D.value.snapshot)){const F=D.value;F._futureSnapshot=P.value;const ee=function ga(M,P,D){return P.children.map(F=>{for(const ee of D.children)if(M.shouldReuseRoute(F.value,ee.value.snapshot))return eo(M,F,ee);return eo(M,F)})}(M,P,D);return new Qr(F,ee)}{if(M.shouldAttach(P.value)){const Te=M.retrieve(P.value);if(null!==Te){const Ie=Te.route;return Ie.value._futureSnapshot=P.value,Ie.children=P.children.map(gt=>eo(M,gt)),Ie}}const F=function Zi(M){return new Js(new he.X(M.url),new he.X(M.params),new he.X(M.queryParams),new he.X(M.fragment),new he.X(M.data),M.outlet,M.component,M)}(P.value),ee=P.children.map(Te=>eo(M,Te));return new Qr(F,ee)}}const yi="ngNavigationCancelingError";function qs(M,P){const{redirectTo:D,navigationBehaviorOptions:F}=zt(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,ee=Ps(!1,0,P);return ee.url=D,ee.navigationBehaviorOptions=F,ee}function Ps(M,P,D){const F=new Error("NavigationCancelingError: "+(M||""));return F[yi]=!0,F.cancellationCode=P,D&&(F.url=D),F}function Ti(M){return Ta(M)&&zt(M.url)}function Ta(M){return M&&M[yi]}let os=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275cmp=y.Xpm({type:M,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(D,F){1&D&&y._UZ(0,"router-outlet")},dependencies:[Ks],encapsulation:2}),M})();function bs(M){const P=M.children&&M.children.map(bs),D=P?{...M,children:P}:{...M};return!D.component&&!D.loadComponent&&(P||D.loadChildren)&&D.outlet&&D.outlet!==Nt&&(D.component=os),D}function Bi(M){return M.outlet||Nt}function Es(M){var P;if(!M)return null;if(null!==(P=M.routeConfig)&&void 0!==P&&P._injector)return M.routeConfig._injector;for(let D=M.parent;D;D=D.parent){const F=D.routeConfig;if(null!=F&&F._loadedInjector)return F._loadedInjector;if(null!=F&&F._injector)return F._injector}return null}class S{constructor(P,D,F,ee,Te){this.routeReuseStrategy=P,this.futureState=D,this.currState=F,this.forwardEvent=ee,this.inputBindingEnabled=Te}activate(P){const D=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,F,P),po(this.futureState.root),this.activateChildRoutes(D,F,P)}deactivateChildRoutes(P,D,F){const ee=Yi(D);P.children.forEach(Te=>{const Ie=Te.value.outlet;this.deactivateRoutes(Te,ee[Ie],F),delete ee[Ie]}),Object.values(ee).forEach(Te=>{this.deactivateRouteAndItsChildren(Te,F)})}deactivateRoutes(P,D,F){const ee=P.value,Te=D?D.value:null;if(ee===Te)if(ee.component){const Ie=F.getContext(ee.outlet);Ie&&this.deactivateChildRoutes(P,D,Ie.children)}else this.deactivateChildRoutes(P,D,F);else Te&&this.deactivateRouteAndItsChildren(D,F)}deactivateRouteAndItsChildren(P,D){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,D):this.deactivateRouteAndOutlet(P,D)}detachAndStoreRouteSubtree(P,D){const F=D.getContext(P.value.outlet),ee=F&&P.value.component?F.children:D,Te=Yi(P);for(const Ie of Object.keys(Te))this.deactivateRouteAndItsChildren(Te[Ie],ee);if(F&&F.outlet){const Ie=F.outlet.detach(),gt=F.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:Ie,route:P,contexts:gt})}}deactivateRouteAndOutlet(P,D){const F=D.getContext(P.value.outlet),ee=F&&P.value.component?F.children:D,Te=Yi(P);for(const Ie of Object.keys(Te))this.deactivateRouteAndItsChildren(Te[Ie],ee);F&&(F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated()),F.attachRef=null,F.route=null)}activateChildRoutes(P,D,F){const ee=Yi(D);P.children.forEach(Te=>{this.activateRoutes(Te,ee[Te.value.outlet],F),this.forwardEvent(new Gr(Te.value.snapshot))}),P.children.length&&this.forwardEvent(new Fi(P.value.snapshot))}activateRoutes(P,D,F){const ee=P.value,Te=D?D.value:null;if(po(ee),ee===Te)if(ee.component){const Ie=F.getOrCreateContext(ee.outlet);this.activateChildRoutes(P,D,Ie.children)}else this.activateChildRoutes(P,D,F);else if(ee.component){const Ie=F.getOrCreateContext(ee.outlet);if(this.routeReuseStrategy.shouldAttach(ee.snapshot)){const gt=this.routeReuseStrategy.retrieve(ee.snapshot);this.routeReuseStrategy.store(ee.snapshot,null),Ie.children.onOutletReAttached(gt.contexts),Ie.attachRef=gt.componentRef,Ie.route=gt.route.value,Ie.outlet&&Ie.outlet.attach(gt.componentRef,gt.route.value),po(gt.route.value),this.activateChildRoutes(P,null,Ie.children)}else{const gt=Es(ee.snapshot);Ie.attachRef=null,Ie.route=ee,Ie.injector=gt,Ie.outlet&&Ie.outlet.activateWith(ee,Ie.injector),this.activateChildRoutes(P,null,Ie.children)}}else this.activateChildRoutes(P,null,F)}}class J{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class T{constructor(P,D){this.component=P,this.route=D}}function Q(M,P,D){const F=M._root;return Ln(F,P?P._root:null,D,[F.value])}function Kt(M,P){const D=Symbol(),F=P.get(M,D);return F===D?"function"!=typeof M||(0,y.Z0I)(M)?P.get(M):M:F}function Ln(M,P,D,F,ee={canDeactivateChecks:[],canActivateChecks:[]}){const Te=Yi(P);return M.children.forEach(Ie=>{(function Yn(M,P,D,F,ee={canDeactivateChecks:[],canActivateChecks:[]}){const Te=M.value,Ie=P?P.value:null,gt=D?D.getContext(M.value.outlet):null;if(Ie&&Te.routeConfig===Ie.routeConfig){const Wt=function kr(M,P,D){if("function"==typeof D)return D(M,P);switch(D){case"pathParamsChange":return!Un(M.url,P.url);case"pathParamsOrQueryParamsChange":return!Un(M.url,P.url)||!tn(M.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$s(M,P)||!tn(M.queryParams,P.queryParams);default:return!$s(M,P)}}(Ie,Te,Te.routeConfig.runGuardsAndResolvers);Wt?ee.canActivateChecks.push(new J(F)):(Te.data=Ie.data,Te._resolvedData=Ie._resolvedData),Ln(M,P,Te.component?gt?gt.children:null:D,F,ee),Wt&&gt&&gt.outlet&&gt.outlet.isActivated&&ee.canDeactivateChecks.push(new T(gt.outlet.component,Ie))}else Ie&&br(P,gt,ee),ee.canActivateChecks.push(new J(F)),Ln(M,null,Te.component?gt?gt.children:null:D,F,ee)})(Ie,Te[Ie.value.outlet],D,F.concat([Ie.value]),ee),delete Te[Ie.value.outlet]}),Object.entries(Te).forEach(([Ie,gt])=>br(gt,D.getContext(Ie),ee)),ee}function br(M,P,D){const F=Yi(M),ee=M.value;Object.entries(F).forEach(([Te,Ie])=>{br(Ie,ee.component?P?P.children.getContext(Te):null:P,D)}),D.canDeactivateChecks.push(new T(ee.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,ee))}function Ki(M){return"function"==typeof M}function N(M){return M instanceof Ce.K||"EmptyError"===(null==M?void 0:M.name)}const fe=Symbol("INITIAL_VALUE");function rt(){return(0,xe.w)(M=>qe(M.map(P=>P.pipe((0,Ve.q)(1),(0,We.O)(fe)))).pipe((0,ce.U)(P=>{for(const D of P)if(!0!==D){if(D===fe)return fe;if(!1===D||D instanceof Mr)return D}return!0}),(0,Ne.h)(P=>P!==fe),(0,Ve.q)(1)))}function $o(M){return(0,et.z)((0,lt.b)(P=>{if(zt(P))throw qs(0,P)}),(0,ce.U)(P=>!0===P))}class Us{constructor(P){this.segmentGroup=P||null}}class ro{constructor(P){this.urlTree=P}}function as(M){return ft(new Us(M))}function Ys(M){return ft(new ro(M))}class js{constructor(P,D){this.urlSerializer=P,this.urlTree=D}noMatchError(P){return new y.vHH(4002,!1)}lineralizeSegments(P,D){let F=[],ee=D.root;for(;;){if(F=F.concat(ee.segments),0===ee.numberOfChildren)return(0,Re.of)(F);if(ee.numberOfChildren>1||!ee.children[Nt])return ft(new y.vHH(4e3,!1));ee=ee.children[Nt]}}applyRedirectCommands(P,D,F){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),P,F)}applyRedirectCreateUrlTree(P,D,F,ee){const Te=this.createSegmentGroup(P,D.root,F,ee);return new Mr(Te,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(P,D){const F={};return Object.entries(P).forEach(([ee,Te])=>{if("string"==typeof Te&&Te.startsWith(":")){const gt=Te.substring(1);F[ee]=D[gt]}else F[ee]=Te}),F}createSegmentGroup(P,D,F,ee){const Te=this.createSegments(P,D.segments,F,ee);let Ie={};return Object.entries(D.children).forEach(([gt,Wt])=>{Ie[gt]=this.createSegmentGroup(P,Wt,F,ee)}),new Gn(Te,Ie)}createSegments(P,D,F,ee){return D.map(Te=>Te.path.startsWith(":")?this.findPosParam(P,Te,ee):this.findOrReturn(Te,F))}findPosParam(P,D,F){const ee=F[D.path.substring(1)];if(!ee)throw new y.vHH(4001,!1);return ee}findOrReturn(P,D){let F=0;for(const ee of D){if(ee.path===P.path)return D.splice(F),ee;F++}return P}}const ya={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fl(M,P,D,F,ee){const Te=hu(M,P,D);return Te.matched?(F=function Gi(M,P){var D;return M.providers&&!M._injector&&(M._injector=(0,y.MMx)(M.providers,P,`Route: ${M.path}`)),null!==(D=M._injector)&&void 0!==D?D:P}(P,F),function Xi(M,P,D,F){const ee=P.canMatch;if(!ee||0===ee.length)return(0,Re.of)(!0);const Te=ee.map(Ie=>{const gt=Kt(Ie,M);return rr(function Z(M){return M&&Ki(M.canMatch)}(gt)?gt.canMatch(P,D):M.runInContext(()=>gt(P,D)))});return(0,Re.of)(Te).pipe(rt(),$o())}(F,P,D).pipe((0,ce.U)(Ie=>!0===Ie?Te:{...ya}))):(0,Re.of)(Te)}function hu(M,P,D){var F,ee;if(""===P.path)return"full"===P.pathMatch&&(M.hasChildren()||D.length>0)?{...ya}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const Ie=(P.matcher||sr)(D,M,P);if(!Ie)return{...ya};const gt={};Object.entries(null!==(F=Ie.posParams)&&void 0!==F?F:{}).forEach(([Bn,Er])=>{gt[Bn]=Er.path});const Wt=Ie.consumed.length>0?{...gt,...Ie.consumed[Ie.consumed.length-1].parameters}:gt;return{matched:!0,consumedSegments:Ie.consumed,remainingSegments:D.slice(Ie.consumed.length),parameters:Wt,positionalParamSegments:null!==(ee=Ie.posParams)&&void 0!==ee?ee:{}}}function Vo(M,P,D,F){return D.length>0&&function Ec(M,P,D){return D.some(F=>Ss(M,P,F)&&Bi(F)!==Nt)}(M,D,F)?{segmentGroup:new Gn(P,Vi(F,new Gn(D,M.children))),slicedSegments:[]}:0===D.length&&function fu(M,P,D){return D.some(F=>Ss(M,P,F))}(M,D,F)?{segmentGroup:new Gn(M.segments,Ll(M,0,D,F,M.children)),slicedSegments:D}:{segmentGroup:new Gn(M.segments,M.children),slicedSegments:D}}function Ll(M,P,D,F,ee){const Te={};for(const Ie of F)if(Ss(M,D,Ie)&&!ee[Bi(Ie)]){const gt=new Gn([],{});Te[Bi(Ie)]=gt}return{...ee,...Te}}function Vi(M,P){const D={};D[Nt]=P;for(const F of M)if(""===F.path&&Bi(F)!==Nt){const ee=new Gn([],{});D[Bi(F)]=ee}return D}function Ss(M,P,D){return(!(M.hasChildren()||P.length>0)||"full"!==D.pathMatch)&&""===D.path}class Uo{constructor(P,D,F,ee,Te,Ie,gt){this.injector=P,this.configLoader=D,this.rootComponentType=F,this.config=ee,this.urlTree=Te,this.paramsInheritanceStrategy=Ie,this.urlSerializer=gt,this.allowRedirects=!0,this.applyRedirects=new js(this.urlSerializer,this.urlTree)}noMatchError(P){return new y.vHH(4002,!1)}recognize(){const P=Vo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,P,Nt).pipe(Mt(D=>{if(D instanceof ro)return this.allowRedirects=!1,this.urlTree=D.urlTree,this.match(D.urlTree);throw D instanceof Us?this.noMatchError(D):D}),(0,ce.U)(D=>{const F=new ss([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,{}),ee=new Qr(F,D),Te=new Rs("",ee),Ie=function _n(M,P,D=null,F=null){return Xn(Nn(M),P,D,F)}(F,[],this.urlTree.queryParams,this.urlTree.fragment);return Ie.queryParams=this.urlTree.queryParams,Te.url=this.urlSerializer.serialize(Ie),this.inheritParamsAndData(Te._root),{state:Te,tree:Ie}}))}match(P){return this.processSegmentGroup(this.injector,this.config,P.root,Nt).pipe(Mt(F=>{throw F instanceof Us?this.noMatchError(F):F}))}inheritParamsAndData(P){const D=P.value,F=$r(D,this.paramsInheritanceStrategy);D.params=Object.freeze(F.params),D.data=Object.freeze(F.data),P.children.forEach(ee=>this.inheritParamsAndData(ee))}processSegmentGroup(P,D,F,ee){return 0===F.segments.length&&F.hasChildren()?this.processChildren(P,D,F):this.processSegment(P,D,F,F.segments,ee,!0)}processChildren(P,D,F){const ee=[];for(const Te of Object.keys(F.children))"primary"===Te?ee.unshift(Te):ee.push(Te);return(0,De.D)(ee).pipe(mt(Te=>{const Ie=F.children[Te],gt=function To(M,P){const D=M.filter(F=>Bi(F)===P);return D.push(...M.filter(F=>Bi(F)!==P)),D}(D,Te);return this.processSegmentGroup(P,gt,Ie,Te)}),(0,Pt.R)((Te,Ie)=>(Te.push(...Ie),Te)),(0,un.d)(null),function Ot(M,P){const D=arguments.length>=2;return F=>F.pipe(M?(0,Ne.h)((ee,Te)=>M(ee,Te,F)):Be.y,Tt(1),D?(0,un.d)(P):(0,Je.T)(()=>new Ce.K))}(),(0,Fe.z)(Te=>{if(null===Te)return as(F);const Ie=ti(Te);return function Ka(M){M.sort((P,D)=>P.value.outlet===Nt?-1:D.value.outlet===Nt?1:P.value.outlet.localeCompare(D.value.outlet))}(Ie),(0,Re.of)(Ie)}))}processSegment(P,D,F,ee,Te,Ie){return(0,De.D)(D).pipe(mt(gt=>{var Wt;return this.processSegmentAgainstRoute(null!==(Wt=gt._injector)&&void 0!==Wt?Wt:P,D,gt,F,ee,Te,Ie).pipe(Mt(Bn=>{if(Bn instanceof Us)return(0,Re.of)(null);throw Bn}))}),(0,He.P)(gt=>!!gt),Mt(gt=>{if(N(gt))return function oa(M,P,D){return 0===P.length&&!M.children[D]}(F,ee,Te)?(0,Re.of)([]):as(F);throw gt}))}processSegmentAgainstRoute(P,D,F,ee,Te,Ie,gt){return function ld(M,P,D,F){return!!(Bi(M)===F||F!==Nt&&Ss(P,D,M))&&("**"===M.path||hu(P,M,D).matched)}(F,ee,Te,Ie)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(P,ee,F,Te,Ie,gt):gt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,ee,D,F,Te,Ie):as(ee):as(ee)}expandSegmentAgainstRouteUsingRedirect(P,D,F,ee,Te,Ie){return"**"===ee.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,F,ee,Ie):this.expandRegularSegmentAgainstRouteUsingRedirect(P,D,F,ee,Te,Ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,D,F,ee){const Te=this.applyRedirects.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Ys(Te):this.applyRedirects.lineralizeSegments(F,Te).pipe((0,Fe.z)(Ie=>{const gt=new Gn(Ie,{});return this.processSegment(P,D,gt,Ie,ee,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,D,F,ee,Te,Ie){const{matched:gt,consumedSegments:Wt,remainingSegments:Bn,positionalParamSegments:Er}=hu(D,ee,Te);if(!gt)return as(D);const Vn=this.applyRedirects.applyRedirectCommands(Wt,ee.redirectTo,Er);return ee.redirectTo.startsWith("/")?Ys(Vn):this.applyRedirects.lineralizeSegments(ee,Vn).pipe((0,Fe.z)(ir=>this.processSegment(P,F,D,ir.concat(Bn),Ie,!1)))}matchSegmentAgainstRoute(P,D,F,ee,Te,Ie){let gt;if("**"===F.path){var Wt,Bn;const Er=ee.length>0?dr(ee).parameters:{},Vn=new ss(ee,Er,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Aa(F),Bi(F),null!==(Wt=null!==(Bn=F.component)&&void 0!==Bn?Bn:F._loadedComponent)&&void 0!==Wt?Wt:null,F,ls(F));gt=(0,Re.of)({snapshot:Vn,consumedSegments:[],remainingSegments:[]}),D.children={}}else gt=Fl(D,F,ee,P).pipe((0,ce.U)(({matched:Er,consumedSegments:Vn,remainingSegments:ir,parameters:Os})=>{var xo,va;return Er?{snapshot:new ss(Vn,Os,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Aa(F),Bi(F),null!==(xo=null!==(va=F.component)&&void 0!==va?va:F._loadedComponent)&&void 0!==xo?xo:null,F,ls(F)),consumedSegments:Vn,remainingSegments:ir}:null}));return gt.pipe((0,xe.w)(Er=>{var Vn;return null===Er?as(D):(P=null!==(Vn=F._injector)&&void 0!==Vn?Vn:P,this.getChildConfig(P,F,ee).pipe((0,xe.w)(({routes:ir})=>{var Os;const xo=null!==(Os=F._loadedInjector)&&void 0!==Os?Os:P,{snapshot:va,consumedSegments:qo,remainingSegments:_a}=Er,{segmentGroup:na,slicedSegments:la}=Vo(D,qo,_a,ir);if(0===la.length&&na.hasChildren())return this.processChildren(xo,ir,na).pipe((0,ce.U)(Vl=>null===Vl?null:[new Qr(va,Vl)]));if(0===ir.length&&0===la.length)return(0,Re.of)([new Qr(va,[])]);const io=Bi(F)===Te;return this.processSegment(xo,ir,na,la,io?Nt:Te,!0).pipe((0,ce.U)(Vl=>[new Qr(va,Vl)]))})))}))}getChildConfig(P,D,F){return D.children?(0,Re.of)({routes:D.children,injector:P}):D.loadChildren?void 0!==D._loadedRoutes?(0,Re.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function go(M,P,D,F){const ee=P.canLoad;if(void 0===ee||0===ee.length)return(0,Re.of)(!0);const Te=ee.map(Ie=>{const gt=Kt(Ie,M);return rr(function gs(M){return M&&Ki(M.canLoad)}(gt)?gt.canLoad(P,D):M.runInContext(()=>gt(P,D)))});return(0,Re.of)(Te).pipe(rt(),$o())}(P,D,F).pipe((0,Fe.z)(ee=>ee?this.configLoader.loadChildren(P,D).pipe((0,lt.b)(Te=>{D._loadedRoutes=Te.routes,D._loadedInjector=Te.injector})):function Ko(M){return ft(Ps(!1,3))}())):(0,Re.of)({routes:[],injector:P})}}function jo(M){const P=M.value.routeConfig;return P&&""===P.path}function ti(M){const P=[],D=new Set;for(const F of M){if(!jo(F)){P.push(F);continue}const ee=P.find(Te=>F.value.routeConfig===Te.value.routeConfig);void 0!==ee?(ee.children.push(...F.children),D.add(ee)):P.push(F)}for(const F of D){const ee=ti(F.children);P.push(new Qr(F.value,ee))}return P.filter(F=>!D.has(F))}function Aa(M){return M.data||{}}function ls(M){return M.resolve||{}}function V(M){return"string"==typeof M.title||null===M.title}function re(M){return(0,xe.w)(P=>{const D=M(P);return D?(0,De.D)(D).pipe((0,ce.U)(()=>P)):(0,Re.of)(P)})}const H=new y.OlP("ROUTES");let ye=(()=>{class M{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,Re.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const F=rr(D.loadComponent()).pipe((0,ce.U)(Bt),(0,lt.b)(Te=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=Te}),yn(()=>{this.componentLoaders.delete(D)})),ee=new nt(F,()=>new pt.x).pipe(_t());return this.componentLoaders.set(D,ee),ee}loadChildren(D,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,Re.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const Te=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,ce.U)(gt=>{this.onLoadEndListener&&this.onLoadEndListener(F);let Wt,Bn;return Array.isArray(gt)?Bn=gt:(Wt=gt.create(D).injector,Bn=Wt.get(H,[],y.XFs.Self|y.XFs.Optional).flat()),{routes:Bn.map(bs),injector:Wt}}),yn(()=>{this.childrenLoaders.delete(F)})),Ie=new nt(Te,()=>new pt.x).pipe(_t());return this.childrenLoaders.set(F,Ie),Ie}loadModuleFactoryOrRoutes(D){return rr(D()).pipe((0,ce.U)(Bt),(0,Fe.z)(F=>F instanceof y.YKP||Array.isArray(F)?(0,Re.of)(F):(0,De.D)(this.compiler.compileModuleAsync(F))))}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function Bt(M){return function Ke(M){return M&&"object"==typeof M&&"default"in M}(M)?M.default:M}let Yt=(()=>{class M{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pt.x,this.configLoader=(0,y.f3M)(ye),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(me),this.rootContexts=(0,y.f3M)(Hi),this.inputBindingEnabled=null!==(0,y.f3M)(xi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Re.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=ee=>this.events.next(new ur(ee)),this.configLoader.onLoadStartListener=ee=>this.events.next(new zn(ee))}complete(){var D;null===(D=this.transitions)||void 0===D||D.complete()}handleNavigationRequest(D){var F;const ee=++this.navigationId;null===(F=this.transitions)||void 0===F||F.next({...this.transitions.value,...D,id:ee})}setupNavigations(D){return this.transitions=new he.X({id:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:W,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ne.h)(F=>0!==F.id),(0,ce.U)(F=>({...F,extractedUrl:D.urlHandlingStrategy.extract(F.rawUrl)})),(0,xe.w)(F=>{let ee=!1,Te=!1;return(0,Re.of)(F).pipe((0,lt.b)(Ie=>{this.currentNavigation={id:Ie.id,initialUrl:Ie.rawUrl,extractedUrl:Ie.extractedUrl,trigger:Ie.source,extras:Ie.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,xe.w)(Ie=>{var gt;const Wt=D.browserUrlTree.toString(),Bn=!D.navigated||Ie.extractedUrl.toString()!==Wt||Wt!==D.currentUrlTree.toString(),Er=null!==(gt=Ie.extras.onSameUrlNavigation)&&void 0!==gt?gt:D.onSameUrlNavigation;if(!Bn&&"reload"!==Er){const Vn="";return this.events.next(new ie(Ie.id,D.serializeUrl(F.rawUrl),Vn,0)),D.rawUrlTree=Ie.rawUrl,Ie.resolve(null),vt.E}if(D.urlHandlingStrategy.shouldProcessUrl(Ie.rawUrl))return tr(Ie.source)&&(D.browserUrlTree=Ie.extractedUrl),(0,Re.of)(Ie).pipe((0,xe.w)(Vn=>{var ir,Os;const xo=null===(ir=this.transitions)||void 0===ir?void 0:ir.getValue();return this.events.next(new Ee(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),Vn.source,Vn.restoredState)),xo!==(null===(Os=this.transitions)||void 0===Os?void 0:Os.getValue())?vt.E:Promise.resolve(Vn)}),function vl(M,P,D,F,ee,Te){return(0,Fe.z)(Ie=>function yl(M,P,D,F,ee,Te,Ie="emptyOnly"){return new Uo(M,P,D,F,ee,Ie,Te).recognize()}(M,P,D,F,Ie.extractedUrl,ee,Te).pipe((0,ce.U)(({state:gt,tree:Wt})=>({...Ie,targetSnapshot:gt,urlAfterRedirects:Wt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,lt.b)(Vn=>{if(F.targetSnapshot=Vn.targetSnapshot,F.urlAfterRedirects=Vn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Vn.urlAfterRedirects},"eager"===D.urlUpdateStrategy){if(!Vn.extras.skipLocationChange){const Os=D.urlHandlingStrategy.merge(Vn.urlAfterRedirects,Vn.rawUrl);D.setBrowserUrl(Os,Vn)}D.browserUrlTree=Vn.urlAfterRedirects}const ir=new Xe(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),this.urlSerializer.serialize(Vn.urlAfterRedirects),Vn.targetSnapshot);this.events.next(ir)}));if(Bn&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:Vn,extractedUrl:ir,source:Os,restoredState:xo,extras:va}=Ie,qo=new Ee(Vn,this.urlSerializer.serialize(ir),Os,xo);this.events.next(qo);const _a=er(0,this.rootComponentType).snapshot;return F={...Ie,targetSnapshot:_a,urlAfterRedirects:ir,extras:{...va,skipLocationChange:!1,replaceUrl:!1}},(0,Re.of)(F)}{const Vn="";return this.events.next(new ie(Ie.id,D.serializeUrl(F.extractedUrl),Vn,1)),D.rawUrlTree=Ie.rawUrl,Ie.resolve(null),vt.E}}),(0,lt.b)(Ie=>{const gt=new ut(Ie.id,this.urlSerializer.serialize(Ie.extractedUrl),this.urlSerializer.serialize(Ie.urlAfterRedirects),Ie.targetSnapshot);this.events.next(gt)}),(0,ce.U)(Ie=>F={...Ie,guards:Q(Ie.targetSnapshot,Ie.currentSnapshot,this.rootContexts)}),function Lt(M,P){return(0,Fe.z)(D=>{const{targetSnapshot:F,currentSnapshot:ee,guards:{canActivateChecks:Te,canDeactivateChecks:Ie}}=D;return 0===Ie.length&&0===Te.length?(0,Re.of)({...D,guardsResult:!0}):function nn(M,P,D,F){return(0,De.D)(M).pipe((0,Fe.z)(ee=>function Fr(M,P,D,F,ee){const Te=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!Te||0===Te.length)return(0,Re.of)(!0);const Ie=Te.map(gt=>{var Wt;const Bn=null!==(Wt=Es(P))&&void 0!==Wt?Wt:ee,Er=Kt(gt,Bn);return rr(function Ds(M){return M&&Ki(M.canDeactivate)}(Er)?Er.canDeactivate(M,P,D,F):Bn.runInContext(()=>Er(M,P,D,F))).pipe((0,He.P)())});return(0,Re.of)(Ie).pipe(rt())}(ee.component,ee.route,D,P,F)),(0,He.P)(ee=>!0!==ee,!0))}(Ie,F,ee,M).pipe((0,Fe.z)(gt=>gt&&function $i(M){return"boolean"==typeof M}(gt)?function an(M,P,D,F){return(0,De.D)(P).pipe(mt(ee=>(0,ct.z)(function qr(M,P){return null!==M&&P&&P(new Ri(M)),(0,Re.of)(!0)}(ee.route.parent,F),function jr(M,P){return null!==M&&P&&P(new is(M)),(0,Re.of)(!0)}(ee.route,F),function wr(M,P,D){const F=P[P.length-1],Te=P.slice(0,P.length-1).reverse().map(Ie=>function Me(M){const P=M.routeConfig?M.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:M,guards:P}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>ze(()=>{const gt=Ie.guards.map(Wt=>{var Bn;const Er=null!==(Bn=Es(Ie.node))&&void 0!==Bn?Bn:D,Vn=Kt(Wt,Er);return rr(function Mo(M){return M&&Ki(M.canActivateChild)}(Vn)?Vn.canActivateChild(F,M):Er.runInContext(()=>Vn(F,M))).pipe((0,He.P)())});return(0,Re.of)(gt).pipe(rt())}));return(0,Re.of)(Te).pipe(rt())}(M,ee.path,D),function Vr(M,P,D){const F=P.routeConfig?P.routeConfig.canActivate:null;if(!F||0===F.length)return(0,Re.of)(!0);const ee=F.map(Te=>ze(()=>{var Ie;const gt=null!==(Ie=Es(P))&&void 0!==Ie?Ie:D,Wt=Kt(Te,gt);return rr(function Vs(M){return M&&Ki(M.canActivate)}(Wt)?Wt.canActivate(P,M):gt.runInContext(()=>Wt(P,M))).pipe((0,He.P)())}));return(0,Re.of)(ee).pipe(rt())}(M,ee.route,D))),(0,He.P)(ee=>!0!==ee,!0))}(F,Te,M,P):(0,Re.of)(gt)),(0,ce.U)(gt=>({...D,guardsResult:gt})))})}(this.environmentInjector,Ie=>this.events.next(Ie)),(0,lt.b)(Ie=>{if(F.guardsResult=Ie.guardsResult,zt(Ie.guardsResult))throw qs(0,Ie.guardsResult);const gt=new Rt(Ie.id,this.urlSerializer.serialize(Ie.extractedUrl),this.urlSerializer.serialize(Ie.urlAfterRedirects),Ie.targetSnapshot,!!Ie.guardsResult);this.events.next(gt)}),(0,Ne.h)(Ie=>!!Ie.guardsResult||(D.restoreHistory(Ie),this.cancelNavigationTransition(Ie,"",3),!1)),re(Ie=>{if(Ie.guards.canActivateChecks.length)return(0,Re.of)(Ie).pipe((0,lt.b)(gt=>{const Wt=new cn(gt.id,this.urlSerializer.serialize(gt.extractedUrl),this.urlSerializer.serialize(gt.urlAfterRedirects),gt.targetSnapshot);this.events.next(Wt)}),(0,xe.w)(gt=>{let Wt=!1;return(0,Re.of)(gt).pipe(function Bl(M,P){return(0,Fe.z)(D=>{const{targetSnapshot:F,guards:{canActivateChecks:ee}}=D;if(!ee.length)return(0,Re.of)(D);let Te=0;return(0,De.D)(ee).pipe(mt(Ie=>function qa(M,P,D,F){const ee=M.routeConfig,Te=M._resolve;return void 0!==(null==ee?void 0:ee.title)&&!V(ee)&&(Te[In]=ee.title),function Ts(M,P,D,F){const ee=function ud(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}(M);if(0===ee.length)return(0,Re.of)({});const Te={};return(0,De.D)(ee).pipe((0,Fe.z)(Ie=>function pu(M,P,D,F){var ee;const Te=null!==(ee=Es(P))&&void 0!==ee?ee:F,Ie=Kt(M,Te);return rr(Ie.resolve?Ie.resolve(P,D):Te.runInContext(()=>Ie(P,D)))}(M[Ie],P,D,F).pipe((0,He.P)(),(0,lt.b)(gt=>{Te[Ie]=gt}))),Tt(1),function Qt(M){return(0,ce.U)(()=>M)}(Te),Mt(Ie=>N(Ie)?vt.E:ft(Ie)))}(Te,M,P,F).pipe((0,ce.U)(Ie=>(M._resolvedData=Ie,M.data=$r(M,D).resolve,ee&&V(ee)&&(M.data[In]=ee.title),null)))}(Ie.route,F,M,P)),(0,lt.b)(()=>Te++),Tt(1),(0,Fe.z)(Ie=>Te===ee.length?(0,Re.of)(D):vt.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,lt.b)({next:()=>Wt=!0,complete:()=>{Wt||(D.restoreHistory(gt),this.cancelNavigationTransition(gt,"",2))}}))}),(0,lt.b)(gt=>{const Wt=new gn(gt.id,this.urlSerializer.serialize(gt.extractedUrl),this.urlSerializer.serialize(gt.urlAfterRedirects),gt.targetSnapshot);this.events.next(Wt)}))}),re(Ie=>{const gt=Wt=>{var Bn;const Er=[];null!==(Bn=Wt.routeConfig)&&void 0!==Bn&&Bn.loadComponent&&!Wt.routeConfig._loadedComponent&&Er.push(this.configLoader.loadComponent(Wt.routeConfig).pipe((0,lt.b)(Vn=>{Wt.component=Vn}),(0,ce.U)(()=>{})));for(const Vn of Wt.children)Er.push(...gt(Vn));return Er};return qe(gt(Ie.targetSnapshot.root)).pipe((0,un.d)(),(0,Ve.q)(1))}),re(()=>this.afterPreactivation()),(0,ce.U)(Ie=>{const gt=function Wa(M,P,D){const F=eo(M,P._root,D?D._root:void 0);return new Li(F,P)}(D.routeReuseStrategy,Ie.targetSnapshot,Ie.currentRouterState);return F={...Ie,targetRouterState:gt}}),(0,lt.b)(Ie=>{D.currentUrlTree=Ie.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(Ie.urlAfterRedirects,Ie.rawUrl),D.routerState=Ie.targetRouterState,"deferred"===D.urlUpdateStrategy&&(Ie.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,Ie),D.browserUrlTree=Ie.urlAfterRedirects)}),((M,P,D,F)=>(0,ce.U)(ee=>(new S(P,ee.targetRouterState,ee.currentRouterState,D,F).activate(M),ee)))(this.rootContexts,D.routeReuseStrategy,Ie=>this.events.next(Ie),this.inputBindingEnabled),(0,Ve.q)(1),(0,lt.b)({next:Ie=>{var gt;ee=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new oe(Ie.id,this.urlSerializer.serialize(Ie.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),null===(gt=D.titleStrategy)||void 0===gt||gt.updateTitle(Ie.targetRouterState.snapshot),Ie.resolve(!0)},complete:()=>{ee=!0}}),yn(()=>{var Ie;ee||Te||this.cancelNavigationTransition(F,"",1),(null===(Ie=this.currentNavigation)||void 0===Ie?void 0:Ie.id)===F.id&&(this.currentNavigation=null)}),Mt(Ie=>{if(Te=!0,Ta(Ie)){Ti(Ie)||(D.navigated=!0,D.restoreHistory(F,!0));const Wt=new G(F.id,this.urlSerializer.serialize(F.extractedUrl),Ie.message,Ie.cancellationCode);if(this.events.next(Wt),Ti(Ie)){const Bn=D.urlHandlingStrategy.merge(Ie.url,D.rawUrlTree),Er={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||tr(F.source)};D.scheduleNavigation(Bn,W,null,Er,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{var gt;D.restoreHistory(F,!0);const Wt=new $e(F.id,this.urlSerializer.serialize(F.extractedUrl),Ie,null!==(gt=F.targetSnapshot)&&void 0!==gt?gt:void 0);this.events.next(Wt);try{F.resolve(D.errorHandler(Ie))}catch(Bn){F.reject(Bn)}}return vt.E}))}))}cancelNavigationTransition(D,F,ee){const Te=new G(D.id,this.urlSerializer.serialize(D.extractedUrl),F,ee);this.events.next(Te),D.resolve(!1)}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function tr(M){return M!==W}let An=(()=>{class M{buildTitle(D){let F,ee=D.root;for(;void 0!==ee;){var Te;F=null!==(Te=this.getResolvedTitleForRoute(ee))&&void 0!==Te?Te:F,ee=ee.children.find(Ie=>Ie.outlet===Nt)}return F}getResolvedTitleForRoute(D){return D.data[In]}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:function(){return(0,y.f3M)(li)},providedIn:"root"}),M})(),li=(()=>{class M extends An{constructor(D){super(),this.title=D}updateTitle(D){const F=this.buildTitle(D);void 0!==F&&this.title.setTitle(F)}}return M.\u0275fac=function(D){return new(D||M)(y.LFG(Dn.Dx))},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),fr=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:function(){return(0,y.f3M)(Ai)},providedIn:"root"}),M})();class Ar{shouldDetach(P){return!1}store(P,D){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,D){return P.routeConfig===D.routeConfig}}let Ai=(()=>{class M extends Ar{}return M.\u0275fac=function(){let P;return function(F){return(P||(P=y.n5z(M)))(F||M)}}(),M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const Ci=new y.OlP("",{providedIn:"root",factory:()=>({})});let As=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:function(){return(0,y.f3M)(dn)},providedIn:"root"}),M})(),dn=(()=>{class M{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,F){return D}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();var Yr=(()=>((Yr=Yr||{})[Yr.COMPLETE=0]="COMPLETE",Yr[Yr.FAILED=1]="FAILED",Yr[Yr.REDIRECTING=2]="REDIRECTING",Yr))();function zs(M,P){M.events.pipe((0,Ne.h)(D=>D instanceof oe||D instanceof G||D instanceof $e||D instanceof ie),(0,ce.U)(D=>D instanceof oe||D instanceof ie?Yr.COMPLETE:D instanceof G&&(0===D.code||1===D.code)?Yr.REDIRECTING:Yr.FAILED),(0,Ne.h)(D=>D!==Yr.REDIRECTING),(0,Ve.q)(1)).subscribe(()=>{P()})}function mo(M){throw M}function Pn(M,P,D){return P.parse("/")}const Zn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let en=(()=>{class M{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var D;if("computed"===this.canceledNavigationResolution)return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var D,F;this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(Ci,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||mo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Pn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(As),this.routeReuseStrategy=(0,y.f3M)(fr),this.titleStrategy=(0,y.f3M)(An),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=null!==(D=null===(F=(0,y.f3M)(H,{optional:!0}))||void 0===F?void 0:F.flat())&&void 0!==D?D:[],this.navigationTransitions=(0,y.f3M)(Yt),this.urlSerializer=(0,y.f3M)(me),this.location=(0,y.f3M)(Et.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(xi,{optional:!0}),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=er(0,null),this.navigationTransitions.setupNavigations(this).subscribe(ee=>{var Te;this.lastSuccessfulId=ee.id,this.currentPageId=null!==(Te=this.browserPageId)&&void 0!==Te?Te:0},ee=>{this.console.warn(`Unhandled Navigation Error: ${ee}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),W,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const F="popstate"===D.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,F,D.state)},0)}))}navigateToSyncWithBrowser(D,F,ee){const Te={replaceUrl:!0},Ie=null!=ee&&ee.navigationId?ee:null;if(ee){const Wt={...ee};delete Wt.navigationId,delete Wt.\u0275routerPageId,0!==Object.keys(Wt).length&&(Te.state=Wt)}const gt=this.parseUrl(D);this.scheduleNavigation(gt,F,Ie,Te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(D){this.config=D.map(bs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,F={}){const{relativeTo:ee,queryParams:Te,fragment:Ie,queryParamsHandling:gt,preserveFragment:Wt}=F,Bn=Wt?this.currentUrlTree.fragment:Ie;let Vn,Er=null;switch(gt){case"merge":Er={...this.currentUrlTree.queryParams,...Te};break;case"preserve":Er=this.currentUrlTree.queryParams;break;default:Er=Te||null}null!==Er&&(Er=this.removeEmptyProps(Er));try{Vn=Nn(ee?ee.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof D[0]||!D[0].startsWith("/"))&&(D=[]),Vn=this.currentUrlTree.root}return Xn(Vn,D,Er,null!=Bn?Bn:null)}navigateByUrl(D,F={skipLocationChange:!1}){const ee=zt(D)?D:this.parseUrl(D),Te=this.urlHandlingStrategy.merge(ee,this.rawUrlTree);return this.scheduleNavigation(Te,W,null,F)}navigate(D,F={skipLocationChange:!1}){return function Vt(M){for(let P=0;P<M.length;P++)if(null==M[P])throw new y.vHH(4008,!1)}(D),this.navigateByUrl(this.createUrlTree(D,F),F)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let F;try{F=this.urlSerializer.parse(D)}catch(ee){F=this.malformedUriErrorHandler(ee,this.urlSerializer,D)}return F}isActive(D,F){let ee;if(ee=!0===F?{...Zn}:!1===F?{...rn}:F,zt(D))return Sn(this.currentUrlTree,D,ee);const Te=this.parseUrl(D);return Sn(this.currentUrlTree,Te,ee)}removeEmptyProps(D){return Object.keys(D).reduce((F,ee)=>{const Te=D[ee];return null!=Te&&(F[ee]=Te),F},{})}scheduleNavigation(D,F,ee,Te,Ie){if(this.disposed)return Promise.resolve(!1);let gt,Wt,Bn;Ie?(gt=Ie.resolve,Wt=Ie.reject,Bn=Ie.promise):Bn=new Promise((Vn,ir)=>{gt=Vn,Wt=ir});const Er=this.pendingTasks.add();return zs(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(Er))}),this.navigationTransitions.handleNavigationRequest({source:F,restoredState:ee,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:Te,resolve:gt,reject:Wt,promise:Bn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bn.catch(Vn=>Promise.reject(Vn))}setBrowserUrl(D,F){const ee=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(ee)||F.extras.replaceUrl){const gt={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId)};this.location.replaceState(ee,"",gt)}else{var Te;const Ie={...F.extras.state,...this.generateNgRouterState(F.id,(null!==(Te=this.browserPageId)&&void 0!==Te?Te:0)+1)};this.location.go(ee,"",Ie)}}restoreHistory(D,F=!1){if("computed"===this.canceledNavigationResolution){var ee,Te;const Ie=null!==(ee=this.browserPageId)&&void 0!==ee?ee:this.currentPageId,gt=this.currentPageId-Ie;0!==gt?this.location.historyGo(gt):this.currentUrlTree===(null===(Te=this.getCurrentNavigation())||void 0===Te?void 0:Te.finalUrl)&&0===gt&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,F){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:F}:{navigationId:D}}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),hn=(()=>{class M{constructor(D,F,ee,Te,Ie,gt){var Wt;this.router=D,this.route=F,this.tabIndexAttribute=ee,this.renderer=Te,this.el=Ie,this.locationStrategy=gt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pt.x;const Bn=null===(Wt=Ie.nativeElement.tagName)||void 0===Wt?void 0:Wt.toLowerCase();this.isAnchorElement="a"===Bn||"area"===Bn,this.isAnchorElement?this.subscription=D.events.subscribe(Er=>{Er instanceof oe&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,y.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,y.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,y.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,F,ee,Te,Ie){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||F||ee||Te||Ie||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var D;null===(D=this.subscription)||void 0===D||D.unsubscribe()}updateHref(){var D;this.href=null!==this.urlTree&&this.locationStrategy?null===(D=this.locationStrategy)||void 0===D?void 0:D.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const F=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",F)}applyAttributeValue(D,F){const ee=this.renderer,Te=this.el.nativeElement;null!==F?ee.setAttribute(Te,D,F):ee.removeAttribute(Te,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(D){return new(D||M)(y.Y36(en),y.Y36(Js),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Et.S$))},M.\u0275dir=y.lG2({type:M,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,F){1&D&&y.NdJ("click",function(Te){return F.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&D&&y.uIk("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),M})();class Za{}let Qa=(()=>{class M{preload(D,F){return F().pipe(Mt(()=>(0,Re.of)(null)))}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),gu=(()=>{class M{constructor(D,F,ee,Te,Ie){this.router=D,this.injector=ee,this.preloadingStrategy=Te,this.loader=Ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ne.h)(D=>D instanceof oe),mt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,F){const ee=[];for(const Wt of F){var Te,Ie;Wt.providers&&!Wt._injector&&(Wt._injector=(0,y.MMx)(Wt.providers,D,`Route: ${Wt.path}`));const Bn=null!==(Te=Wt._injector)&&void 0!==Te?Te:D,Er=null!==(Ie=Wt._loadedInjector)&&void 0!==Ie?Ie:Bn;var gt;(Wt.loadChildren&&!Wt._loadedRoutes&&void 0===Wt.canLoad||Wt.loadComponent&&!Wt._loadedComponent)&&ee.push(this.preloadConfig(Bn,Wt)),(Wt.children||Wt._loadedRoutes)&&ee.push(this.processRoutes(Er,null!==(gt=Wt.children)&&void 0!==gt?gt:Wt._loadedRoutes))}return(0,De.D)(ee).pipe((0,Tn.J)())}preloadConfig(D,F){return this.preloadingStrategy.preload(F,()=>{let ee;ee=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(D,F):(0,Re.of)(null);const Te=ee.pipe((0,Fe.z)(Ie=>{var gt;return null===Ie?(0,Re.of)(void 0):(F._loadedRoutes=Ie.routes,F._loadedInjector=Ie.injector,this.processRoutes(null!==(gt=Ie.injector)&&void 0!==gt?gt:D,Ie.routes))}));if(F.loadComponent&&!F._loadedComponent){const Ie=this.loader.loadComponent(F);return(0,De.D)([Te,Ie]).pipe((0,Tn.J)())}return Te})}}return M.\u0275fac=function(D){return new(D||M)(y.LFG(en),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Za),y.LFG(ye))},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const _l=new y.OlP("");let $l=(()=>{class M{constructor(D,F,ee,Te,Ie={}){this.urlSerializer=D,this.transitions=F,this.viewportScroller=ee,this.zone=Te,this.options=Ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ie.scrollPositionRestoration=Ie.scrollPositionRestoration||"disabled",Ie.anchorScrolling=Ie.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof Ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof oe?(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment)):D instanceof ie&&0===D.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof En&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,F){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new En(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))})},0)})}ngOnDestroy(){var D,F;null===(D=this.routerEventsSubscription)||void 0===D||D.unsubscribe(),null===(F=this.scrollEventsSubscription)||void 0===F||F.unsubscribe()}}return M.\u0275fac=function(D){y.$Z()},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac}),M})();function yo(M,P){return{\u0275kind:M,\u0275providers:P}}function Ji(){const M=(0,y.f3M)(y.zs3);return P=>{var D,F;const ee=M.get(y.z2F);if(P!==ee.components[0])return;const Te=M.get(en),Ie=M.get(cr);1===M.get(El)&&Te.initialNavigation(),null===(D=M.get(Mn,null,y.XFs.Optional))||void 0===D||D.setUpPreloading(),null===(F=M.get(_l,null,y.XFs.Optional))||void 0===F||F.init(),Te.resetRootComponentType(ee.componentTypes[0]),Ie.closed||(Ie.next(),Ie.complete(),Ie.unsubscribe())}}const cr=new y.OlP("",{factory:()=>new pt.x}),El=new y.OlP("",{providedIn:"root",factory:()=>1}),Mn=new y.OlP("");function Ku(M){return yo(0,[{provide:Mn,useExisting:gu},{provide:Za,useExisting:M}])}const hi=new y.OlP("ROUTER_FORROOT_GUARD"),_i=[Et.Ye,{provide:me,useClass:Ge},en,Hi,{provide:Js,useFactory:function bi(M){return M.routerState.root},deps:[en]},ye,[]];function ri(){return new y.PXZ("Router",en)}let Zs=(()=>{class M{constructor(D){}static forRoot(D,F){return{ngModule:M,providers:[_i,[],{provide:H,multi:!0,useValue:D},{provide:hi,useFactory:aa,deps:[[en,new y.FiY,new y.tp0]]},{provide:Ci,useValue:F||{}},null!=F&&F.useHash?{provide:Et.S$,useClass:Et.Do}:{provide:Et.S$,useClass:Et.b0},{provide:_l,useFactory:()=>{const M=(0,y.f3M)(Et.EM),P=(0,y.f3M)(y.R0b),D=(0,y.f3M)(Ci),F=(0,y.f3M)(Yt),ee=(0,y.f3M)(me);return D.scrollOffset&&M.setOffset(D.scrollOffset),new $l(ee,F,M,P,D)}},null!=F&&F.preloadingStrategy?Ku(F.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:ri},null!=F&&F.initialNavigation?Cc(F):[],null!=F&&F.bindToComponentInputs?yo(8,[Cr,{provide:xi,useExisting:Cr}]).\u0275providers:[],[{provide:St,useFactory:Ji},{provide:y.tb,multi:!0,useExisting:St}]]}}static forChild(D){return{ngModule:M,providers:[{provide:H,multi:!0,useValue:D}]}}}return M.\u0275fac=function(D){return new(D||M)(y.LFG(hi,8))},M.\u0275mod=y.oAB({type:M}),M.\u0275inj=y.cJS({}),M})();function aa(M){return"guarded"}function Cc(M){return["disabled"===M.initialNavigation?yo(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const P=(0,y.f3M)(en);return()=>{P.setUpLocationChangeListener()}}},{provide:El,useValue:2}]).\u0275providers:[],"enabledBlocking"===M.initialNavigation?yo(2,[{provide:El,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:P=>{const D=P.get(Et.V_,Promise.resolve());return()=>D.then(()=>new Promise(F=>{const ee=P.get(en),Te=P.get(cr);zs(ee,()=>{F(!0)}),P.get(Yt).afterPreactivation=()=>(F(!0),Te.closed?(0,Re.of)(void 0):Te),ee.initialNavigation()}))}}]).\u0275providers:[]]}const St=new y.OlP("")},579:(pn,dt,L)=>{"use strict";L.d(dt,{EI:()=>Qe,Gb:()=>Ge,Iv:()=>On,Kz:()=>K,Xd:()=>Rn,lT:()=>Xt,xP:()=>_r});var y=L(5861),m=L(6881),le=L(1877),ve=L(2090),De=L(4859);L(4727);const he="analytics",_e="firebase_id",Be="origin",U=6e4,we="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",je="https://www.googletagmanager.com/gtag/js",ge=new le.Yd("@firebase/analytics"),qe=new ve.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function It(ke){if(!ke.startsWith(je)){const ht=qe.create("invalid-gtag-resource",{gtagURL:ke});return ge.warn(ht.message),""}return ke}function Ae(ke){return Promise.all(ke.map(ht=>ht.catch(Ct=>Ct)))}function et(){return(et=(0,y.Z)(function*(ke,ht,Ct,jt,Ut,on){const fn=jt[Ut];try{if(fn)yield ht[fn];else{const kn=(yield Ae(Ct)).find(Dt=>Dt.measurementId===Ut);kn&&(yield ht[kn.appId])}}catch(Wn){ge.error(Wn)}ke("config",Ut,on)})).apply(this,arguments)}function vt(){return(vt=(0,y.Z)(function*(ke,ht,Ct,jt,Ut){try{let on=[];if(Ut&&Ut.send_to){let fn=Ut.send_to;Array.isArray(fn)||(fn=[fn]);const Wn=yield Ae(Ct);for(const kn of fn){const Dt=Wn.find(zt=>zt.measurementId===kn),wt=Dt&&ht[Dt.appId];if(!wt){on=[];break}on.push(wt)}}0===on.length&&(on=Object.values(ht)),yield Promise.all(on),ke("event",jt,Ut||{})}catch(on){ge.error(on)}})).apply(this,arguments)}const nt=30,ce=new class Et{constructor(ht={},Ct=1e3){this.throttleMetadata=ht,this.intervalMillis=Ct}getThrottleMetadata(ht){return this.throttleMetadata[ht]}setThrottleMetadata(ht,Ct){this.throttleMetadata[ht]=Ct}deleteThrottleMetadata(ht){delete this.throttleMetadata[ht]}};function xe(ke){return new Headers({Accept:"application/json","x-goog-api-key":ke})}function We(){return(We=(0,y.Z)(function*(ke){var ht;const{appId:Ct,apiKey:jt}=ke,Ut={method:"GET",headers:xe(jt)},on=we.replace("{app-id}",Ct),fn=yield fetch(on,Ut);if(200!==fn.status&&304!==fn.status){let Wn="";try{const kn=yield fn.json();null!==(ht=kn.error)&&void 0!==ht&&ht.message&&(Wn=kn.error.message)}catch{}throw qe.create("config-fetch-failed",{httpStatus:fn.status,responseMessage:Wn})}return fn.json()})).apply(this,arguments)}function Fe(){return(Fe=(0,y.Z)(function*(ke,ht=ce,Ct){const{appId:jt,apiKey:Ut,measurementId:on}=ke.options;if(!jt)throw qe.create("no-app-id");if(!Ut){if(on)return{measurementId:on,appId:jt};throw qe.create("no-api-key")}const fn=ht.getThrottleMetadata(jt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Wn=new Pt;return setTimeout((0,y.Z)(function*(){Wn.abort()}),void 0!==Ct?Ct:U),He({appId:jt,apiKey:Ut,measurementId:on},fn,Wn,ht)})).apply(this,arguments)}function He(ke,ht,Ct){return mt.apply(this,arguments)}function mt(){return mt=(0,y.Z)(function*(ke,{throttleEndTimeMillis:ht,backoffCount:Ct},jt,Ut=ce){var on;const{appId:fn,measurementId:Wn}=ke;try{yield function lt(ke,ht){return new Promise((Ct,jt)=>{const Ut=Math.max(ht-Date.now(),0),on=setTimeout(Ct,Ut);ke.addEventListener(()=>{clearTimeout(on),jt(qe.create("fetch-throttle",{throttleEndTimeMillis:ht}))})})}(jt,ht)}catch(kn){if(Wn)return ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wn} provided in the "measurementId" field in the local Firebase config. [${null==kn?void 0:kn.message}]`),{appId:fn,measurementId:Wn};throw kn}try{const kn=yield function Ve(ke){return We.apply(this,arguments)}(ke);return Ut.deleteThrottleMetadata(fn),kn}catch(kn){const Dt=kn;if(!function Mt(ke){if(!(ke instanceof ve.ZR&&ke.customData))return!1;const ht=Number(ke.customData.httpStatus);return 429===ht||500===ht||503===ht||504===ht}(Dt)){if(Ut.deleteThrottleMetadata(fn),Wn)return ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wn} provided in the "measurementId" field in the local Firebase config. [${null==Dt?void 0:Dt.message}]`),{appId:fn,measurementId:Wn};throw kn}const wt=503===Number(null===(on=null==Dt?void 0:Dt.customData)||void 0===on?void 0:on.httpStatus)?(0,ve.$s)(Ct,Ut.intervalMillis,nt):(0,ve.$s)(Ct,Ut.intervalMillis),zt={throttleEndTimeMillis:Date.now()+wt,backoffCount:Ct+1};return Ut.setThrottleMetadata(fn,zt),ge.debug(`Calling attemptFetch again in ${wt} millis`),He(ke,zt,jt,Ut)}}),mt.apply(this,arguments)}class Pt{constructor(){this.listeners=[]}addEventListener(ht){this.listeners.push(ht)}abort(){this.listeners.forEach(ht=>ht())}}let un,yr;function Je(){return(Je=(0,y.Z)(function*(ke,ht,Ct,jt,Ut){if(Ut&&Ut.global)ke("event",Ct,jt);else{const on=yield ht;ke("event",Ct,Object.assign(Object.assign({},jt),{send_to:on}))}})).apply(this,arguments)}function Qt(){return(Qt=(0,y.Z)(function*(ke,ht,Ct,jt){if(jt&&jt.global)return ke("set",{screen_name:Ct}),Promise.resolve();ke("config",yield ht,{update:!0,screen_name:Ct})})).apply(this,arguments)}function Tn(){return(Tn=(0,y.Z)(function*(ke,ht,Ct,jt){if(jt&&jt.global)return ke("set",{user_id:Ct}),Promise.resolve();ke("config",yield ht,{update:!0,user_id:Ct})})).apply(this,arguments)}function Nt(){return(Nt=(0,y.Z)(function*(ke,ht,Ct,jt){if(jt&&jt.global){const Ut={};for(const on of Object.keys(Ct))Ut[`user_properties.${on}`]=Ct[on];return ke("set",Ut),Promise.resolve()}ke("config",yield ht,{update:!0,user_properties:Ct})})).apply(this,arguments)}function sr(){return(sr=(0,y.Z)(function*(ke,ht){const Ct=yield ke;window[`ga-disable-${Ct}`]=!ht})).apply(this,arguments)}function rr(){return(rr=(0,y.Z)(function*(){if(!(0,ve.hl)())return ge.warn(qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ve.eu)()}catch(ke){return ge.warn(qe.create("indexeddb-unavailable",{errorInfo:null==ke?void 0:ke.toString()}).message),!1}return!0})).apply(this,arguments)}function Nr(){return Nr=(0,y.Z)(function*(ke,ht,Ct,jt,Ut,on,fn){var Wn;const kn=function Ne(ke){return Fe.apply(this,arguments)}(ke);kn.then(Nn=>{Ct[Nn.measurementId]=Nn.appId,ke.options.measurementId&&Nn.measurementId!==ke.options.measurementId&&ge.warn(`The measurement ID in the local Firebase config (${ke.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>ge.error(Nn)),ht.push(kn);const Dt=function dr(){return rr.apply(this,arguments)}().then(Nn=>{if(Nn)return jt.getId()}),[wt,zt]=yield Promise.all([kn,Dt]);(function _t(ke){const ht=window.document.getElementsByTagName("script");for(const Ct of Object.values(ht))if(Ct.src&&Ct.src.includes(je)&&Ct.src.includes(ke))return Ct;return null})(on)||function ct(ke,ht){const Ct=function Ce(ke,ht){let Ct;return window.trustedTypes&&(Ct=window.trustedTypes.createPolicy(ke,ht)),Ct}("firebase-js-sdk-policy",{createScriptURL:It}),jt=document.createElement("script"),Ut=`${je}?l=${ke}&id=${ht}`;jt.src=Ct?null==Ct?void 0:Ct.createScriptURL(Ut):Ut,jt.async=!0,document.head.appendChild(jt)}(on,wt.measurementId),yr&&(Ut("consent","default",yr),function tn(ke){yr=ke}(void 0)),Ut("js",new Date);const _n=null!==(Wn=null==fn?void 0:fn.config)&&void 0!==Wn?Wn:{};return _n[Be]="firebase",_n.update=!0,null!=zt&&(_n[_e]=zt),Ut("config",wt.measurementId,_n),un&&(Ut("set",un),function xr(ke){un=ke}(void 0)),wt.measurementId}),Nr.apply(this,arguments)}class Sn{constructor(ht){this.app=ht}_delete(){return delete vn[this.app.options.appId],Promise.resolve()}}let vn={},$n=[];const Ir={};let Lr,Mr,vr="dataLayer",ar="gtag",Gn=!1;function Rn(ke){if(Gn)throw qe.create("already-initialized");ke.dataLayerName&&(vr=ke.dataLayerName),ke.gtagName&&(ar=ke.gtagName)}function Un(ke,ht,Ct){!function ci(){const ke=[];if((0,ve.ru)()&&ke.push("This is a browser extension environment."),(0,ve.zI)()||ke.push("Cookies are not available."),ke.length>0){const ht=ke.map((jt,Ut)=>`(${Ut+1}) ${jt}`).join(" "),Ct=qe.create("invalid-analytics-context",{errorInfo:ht});ge.warn(Ct.message)}}();const jt=ke.options.appId;if(!jt)throw qe.create("no-app-id");if(!ke.options.apiKey){if(!ke.options.measurementId)throw qe.create("no-api-key");ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${ke.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vn[jt])throw qe.create("already-exists",{id:jt});if(!Gn){!function at(ke){let ht=[];Array.isArray(window[ke])?ht=window[ke]:window[ke]=ht}(vr);const{wrappedGtag:on,gtagCore:fn}=function Le(ke,ht,Ct,jt,Ut){let on=function(...fn){window[jt].push(arguments)};return window[Ut]&&"function"==typeof window[Ut]&&(on=window[Ut]),window[Ut]=function Ye(ke,ht,Ct,jt){function on(){return on=(0,y.Z)(function*(fn,...Wn){try{if("event"===fn){const[kn,Dt]=Wn;yield function ft(ke,ht,Ct,jt,Ut){return vt.apply(this,arguments)}(ke,ht,Ct,kn,Dt)}else if("config"===fn){const[kn,Dt]=Wn;yield function ze(ke,ht,Ct,jt,Ut,on){return et.apply(this,arguments)}(ke,ht,Ct,jt,kn,Dt)}else if("consent"===fn){const[kn]=Wn;ke("consent","update",kn)}else if("get"===fn){const[kn,Dt,wt]=Wn;ke("get",kn,Dt,wt)}else if("set"===fn){const[kn]=Wn;ke("set",kn)}else ke(fn,...Wn)}catch(kn){ge.error(kn)}}),on.apply(this,arguments)}return function Ut(fn){return on.apply(this,arguments)}}(on,ke,ht,Ct),{gtagCore:on,wrappedGtag:window[Ut]}}(vn,$n,Ir,vr,ar);Mr=on,Lr=fn,Gn=!0}return vn[jt]=function Or(ke,ht,Ct,jt,Ut,on,fn){return Nr.apply(this,arguments)}(ke,$n,Ir,ht,Lr,vr,Ct),new Sn(ke)}function Ge(){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(){if((0,ve.ru)()||!(0,ve.zI)()||!(0,ve.hl)())return!1;try{return yield(0,ve.eu)()}catch{return!1}})).apply(this,arguments)}function Xt(ke,ht,Ct){ke=(0,ve.m9)(ke),function Ot(ke,ht,Ct,jt){return Qt.apply(this,arguments)}(Mr,vn[ke.app.options.appId],ht,Ct).catch(jt=>ge.error(jt))}function On(ke,ht,Ct){ke=(0,ve.m9)(ke),function yn(ke,ht,Ct,jt){return Tn.apply(this,arguments)}(Mr,vn[ke.app.options.appId],ht,Ct).catch(jt=>ge.error(jt))}function _r(ke,ht,Ct){ke=(0,ve.m9)(ke),function Dn(ke,ht,Ct,jt){return Nt.apply(this,arguments)}(Mr,vn[ke.app.options.appId],ht,Ct).catch(jt=>ge.error(jt))}function Qe(ke,ht){ke=(0,ve.m9)(ke),function or(ke,ht){return sr.apply(this,arguments)}(vn[ke.app.options.appId],ht).catch(Ct=>ge.error(Ct))}function K(ke,ht,Ct,jt){ke=(0,ve.m9)(ke),function Tt(ke,ht,Ct,jt,Ut){return Je.apply(this,arguments)}(Mr,vn[ke.app.options.appId],ht,Ct,jt).catch(Ut=>ge.error(Ut))}const q="@firebase/analytics";!function it(){(0,m._registerComponent)(new De.wA(he,(ht,{options:Ct})=>Un(ht.getProvider("app").getImmediate(),ht.getProvider("installations-internal").getImmediate(),Ct),"PUBLIC")),(0,m._registerComponent)(new De.wA("analytics-internal",function ke(ht){try{const Ct=ht.getProvider(he).getImmediate();return{logEvent:(jt,Ut,on)=>K(Ct,jt,Ut,on)}}catch(Ct){throw qe.create("interop-component-reg-failed",{reason:Ct})}},"PRIVATE")),(0,m.registerVersion)(q,"0.10.0"),(0,m.registerVersion)(q,"0.10.0","esm2017")}()},3942:(pn,dt,L)=>{"use strict";L.d(dt,{Z:()=>qe});var y=L(2090),m=L(4859),le=L(6881),ve=L(1877);class De{constructor(Ae,Ce){this._delegate=Ae,this.firebase=Ce,(0,le._addComponent)(Ae,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,le.deleteApp)(this._delegate)))}_getService(Ae,Ce=le._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(Ae);return!at.isInitialized()&&"EXPLICIT"===(null===(ct=at.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&at.initialize(),at.getImmediate({identifier:Ce})}_removeServiceInstance(Ae,Ce=le._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(Ce)}_addComponent(Ae){(0,le._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,le._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function Be(){const It=function _e(It){const Ae={},Ce={__esModule:!0,initializeApp:function ze(Ye,Le={}){const _t=le.initializeApp(Ye,Le);if((0,y.r3)(Ae,_t.name))return Ae[_t.name];const nt=new It(_t,Ce);return Ae[_t.name]=nt,nt},app:at,registerVersion:le.registerVersion,setLogLevel:le.setLogLevel,onLog:le.onLog,apps:null,SDK_VERSION:le.SDK_VERSION,INTERNAL:{registerComponent:function ft(Ye){const Le=Ye.name,_t=Le.replace("-compat","");if(le._registerComponent(Ye)&&"PUBLIC"===Ye.type){const nt=(pt=at())=>{if("function"!=typeof pt[_t])throw he.create("invalid-app-argument",{appName:Le});return pt[_t]()};void 0!==Ye.serviceProps&&(0,y.ZB)(nt,Ye.serviceProps),Ce[_t]=nt,It.prototype[_t]=function(...pt){return this._getService.bind(this,Le).apply(this,Ye.multipleInstances?pt:[])}}return"PUBLIC"===Ye.type?Ce[_t]:null},removeApp:function ct(Ye){delete Ae[Ye]},useAsService:function vt(Ye,Le){return"serverAuth"===Le?null:Le},modularAPIs:le}};function at(Ye){if(!(0,y.r3)(Ae,Ye=Ye||le._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Ye});return Ae[Ye]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function et(){return Object.keys(Ae).map(Ye=>Ae[Ye])}}),at.App=It,Ce}(De);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function Ae(Ce){(0,y.ZB)(It,Ce)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),It}(),we=new ve.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=U;!function Ue(It){(0,le.registerVersion)("@firebase/app-compat","0.2.10",It)}()},6881:(pn,dt,L)=>{"use strict";L.r(dt),L.d(dt,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>rr,_addComponent:()=>vn,_addOrOverwriteComponent:()=>$n,_apps:()=>Nr,_clearComponents:()=>Lr,_components:()=>Sn,_getProvider:()=>vr,_registerComponent:()=>Ir,_removeServiceInstance:()=>ar,deleteApp:()=>Ge,getApp:()=>qt,getApps:()=>me,initializeApp:()=>Un,onLog:()=>sn,registerVersion:()=>Xt,setLogLevel:()=>lr});var y=L(5861),m=L(4859),le=L(1877),ve=L(2090);const De=(Dt,wt)=>wt.some(zt=>Dt instanceof zt);let Re,he;const U=new WeakMap,we=new WeakMap,je=new WeakMap,ge=new WeakMap,Ue=new WeakMap;let Ae={get(Dt,wt,zt){if(Dt instanceof IDBTransaction){if("done"===wt)return we.get(Dt);if("objectStoreNames"===wt)return Dt.objectStoreNames||je.get(Dt);if("store"===wt)return zt.objectStoreNames[1]?void 0:zt.objectStore(zt.objectStoreNames[0])}return ze(Dt[wt])},set:(Dt,wt,zt)=>(Dt[wt]=zt,!0),has:(Dt,wt)=>Dt instanceof IDBTransaction&&("done"===wt||"store"===wt)||wt in Dt};function at(Dt){return"function"==typeof Dt?function ct(Dt){return Dt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Dt)?function(...wt){return Dt.apply(et(this),wt),ze(U.get(this))}:function(...wt){return ze(Dt.apply(et(this),wt))}:function(wt,...zt){const _n=Dt.call(et(this),wt,...zt);return je.set(_n,wt.sort?wt.sort():[wt]),ze(_n)}}(Dt):(Dt instanceof IDBTransaction&&function It(Dt){if(we.has(Dt))return;const wt=new Promise((zt,_n)=>{const Nn=()=>{Dt.removeEventListener("complete",Xn),Dt.removeEventListener("error",nr),Dt.removeEventListener("abort",nr)},Xn=()=>{zt(),Nn()},nr=()=>{_n(Dt.error||new DOMException("AbortError","AbortError")),Nn()};Dt.addEventListener("complete",Xn),Dt.addEventListener("error",nr),Dt.addEventListener("abort",nr)});we.set(Dt,wt)}(Dt),De(Dt,function _e(){return Re||(Re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Dt,Ae):Dt)}function ze(Dt){if(Dt instanceof IDBRequest)return function qe(Dt){const wt=new Promise((zt,_n)=>{const Nn=()=>{Dt.removeEventListener("success",Xn),Dt.removeEventListener("error",nr)},Xn=()=>{zt(ze(Dt.result)),Nn()},nr=()=>{_n(Dt.error),Nn()};Dt.addEventListener("success",Xn),Dt.addEventListener("error",nr)});return wt.then(zt=>{zt instanceof IDBCursor&&U.set(zt,Dt)}).catch(()=>{}),Ue.set(wt,Dt),wt}(Dt);if(ge.has(Dt))return ge.get(Dt);const wt=at(Dt);return wt!==Dt&&(ge.set(Dt,wt),Ue.set(wt,Dt)),wt}const et=Dt=>Ue.get(Dt),Ye=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],_t=new Map;function nt(Dt,wt){if(!(Dt instanceof IDBDatabase)||wt in Dt||"string"!=typeof wt)return;if(_t.get(wt))return _t.get(wt);const zt=wt.replace(/FromIndex$/,""),_n=wt!==zt,Nn=Le.includes(zt);if(!(zt in(_n?IDBIndex:IDBObjectStore).prototype)||!Nn&&!Ye.includes(zt))return;const Xn=function(){var nr=(0,y.Z)(function*(Jr,...Tr){const Qn=this.transaction(Jr,Nn?"readwrite":"readonly");let Jn=Qn.store;return _n&&(Jn=Jn.index(Tr.shift())),(yield Promise.all([Jn[zt](...Tr),Nn&&Qn.done]))[0]});return function(Tr){return nr.apply(this,arguments)}}();return _t.set(wt,Xn),Xn}!function Ce(Dt){Ae=Dt(Ae)}(Dt=>({...Dt,get:(wt,zt,_n)=>nt(wt,zt)||Dt.get(wt,zt,_n),has:(wt,zt)=>!!nt(wt,zt)||Dt.has(wt,zt)}));class pt{constructor(wt){this.container=wt}getPlatformInfoString(){return this.container.getProviders().map(zt=>{if(function Et(Dt){const wt=Dt.getComponent();return"VERSION"===(null==wt?void 0:wt.type)}(zt)){const _n=zt.getImmediate();return`${_n.library}/${_n.version}`}return null}).filter(zt=>zt).join(" ")}}const ce="@firebase/app",Ve=new le.Yd("@firebase/app"),rr="[DEFAULT]",Or={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nr=new Map,Sn=new Map;function vn(Dt,wt){try{Dt.container.addComponent(wt)}catch(zt){Ve.debug(`Component ${wt.name} failed to register with FirebaseApp ${Dt.name}`,zt)}}function $n(Dt,wt){Dt.container.addOrOverwriteComponent(wt)}function Ir(Dt){const wt=Dt.name;if(Sn.has(wt))return Ve.debug(`There were multiple attempts to register component ${wt}.`),!1;Sn.set(wt,Dt);for(const zt of Nr.values())vn(zt,Dt);return!0}function vr(Dt,wt){const zt=Dt.container.getProvider("heartbeat").getImmediate({optional:!0});return zt&&zt.triggerHeartbeat(),Dt.container.getProvider(wt)}function ar(Dt,wt,zt=rr){vr(Dt,wt).clearInstance(zt)}function Lr(){Sn.clear()}const Gn=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rn{constructor(wt,zt,_n){this._isDeleted=!1,this._options=Object.assign({},wt),this._config=Object.assign({},zt),this._name=zt.name,this._automaticDataCollectionEnabled=zt.automaticDataCollectionEnabled,this._container=_n,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(wt){this.checkDestroyed(),this._automaticDataCollectionEnabled=wt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(wt){this._isDeleted=wt}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const ci="9.22.0";function Un(Dt,wt={}){let zt=Dt;"object"!=typeof wt&&(wt={name:wt});const _n=Object.assign({name:rr,automaticDataCollectionEnabled:!1},wt),Nn=_n.name;if("string"!=typeof Nn||!Nn)throw Gn.create("bad-app-name",{appName:String(Nn)});if(zt||(zt=(0,ve.aH)()),!zt)throw Gn.create("no-options");const Xn=Nr.get(Nn);if(Xn){if((0,ve.vZ)(zt,Xn.options)&&(0,ve.vZ)(_n,Xn.config))return Xn;throw Gn.create("duplicate-app",{appName:Nn})}const nr=new m.H0(Nn);for(const Tr of Sn.values())nr.addComponent(Tr);const Jr=new Rn(zt,_n,nr);return Nr.set(Nn,Jr),Jr}function qt(Dt=rr){const wt=Nr.get(Dt);if(!wt&&Dt===rr&&(0,ve.aH)())return Un();if(!wt)throw Gn.create("no-app",{appName:Dt});return wt}function me(){return Array.from(Nr.values())}function Ge(Dt){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(Dt){const wt=Dt.name;Nr.has(wt)&&(Nr.delete(wt),yield Promise.all(Dt.container.getProviders().map(zt=>zt.delete())),Dt.isDeleted=!0)})).apply(this,arguments)}function Xt(Dt,wt,zt){var _n;let Nn=null!==(_n=Or[Dt])&&void 0!==_n?_n:Dt;zt&&(Nn+=`-${zt}`);const Xn=Nn.match(/\s|\//),nr=wt.match(/\s|\//);if(Xn||nr){const Jr=[`Unable to register library "${Nn}" with version "${wt}":`];return Xn&&Jr.push(`library name "${Nn}" contains illegal characters (whitespace or "/")`),Xn&&nr&&Jr.push("and"),nr&&Jr.push(`version name "${wt}" contains illegal characters (whitespace or "/")`),void Ve.warn(Jr.join(" "))}Ir(new m.wA(`${Nn}-version`,()=>({library:Nn,version:wt}),"VERSION"))}function sn(Dt,wt){if(null!==Dt&&"function"!=typeof Dt)throw Gn.create("invalid-log-argument");(0,le.Am)(Dt,wt)}function lr(Dt){(0,le.Ub)(Dt)}const On="firebase-heartbeat-database",_r=1,Qe="firebase-heartbeat-store";let de=null;function K(){return de||(de=function ft(Dt,wt,{blocked:zt,upgrade:_n,blocking:Nn,terminated:Xn}={}){const nr=indexedDB.open(Dt,wt),Jr=ze(nr);return _n&&nr.addEventListener("upgradeneeded",Tr=>{_n(ze(nr.result),Tr.oldVersion,Tr.newVersion,ze(nr.transaction),Tr)}),zt&&nr.addEventListener("blocked",Tr=>zt(Tr.oldVersion,Tr.newVersion,Tr)),Jr.then(Tr=>{Xn&&Tr.addEventListener("close",()=>Xn()),Nn&&Tr.addEventListener("versionchange",Qn=>Nn(Qn.oldVersion,Qn.newVersion,Qn))}).catch(()=>{}),Jr}(On,_r,{upgrade:(Dt,wt)=>{0===wt&&Dt.createObjectStore(Qe)}}).catch(Dt=>{throw Gn.create("idb-open",{originalErrorMessage:Dt.message})})),de}function q(){return(q=(0,y.Z)(function*(Dt){try{return yield(yield K()).transaction(Qe).objectStore(Qe).get(ke(Dt))}catch(wt){if(wt instanceof ve.ZR)Ve.warn(wt.message);else{const zt=Gn.create("idb-get",{originalErrorMessage:null==wt?void 0:wt.message});Ve.warn(zt.message)}}})).apply(this,arguments)}function Pe(Dt,wt){return it.apply(this,arguments)}function it(){return(it=(0,y.Z)(function*(Dt,wt){try{const _n=(yield K()).transaction(Qe,"readwrite");yield _n.objectStore(Qe).put(wt,ke(Dt)),yield _n.done}catch(zt){if(zt instanceof ve.ZR)Ve.warn(zt.message);else{const _n=Gn.create("idb-set",{originalErrorMessage:null==zt?void 0:zt.message});Ve.warn(_n.message)}}})).apply(this,arguments)}function ke(Dt){return`${Dt.name}!${Dt.options.appId}`}class jt{constructor(wt){this.container=wt,this._heartbeatsCache=null;const zt=this.container.getProvider("app").getImmediate();this._storage=new fn(zt),this._heartbeatsCachePromise=this._storage.read().then(_n=>(this._heartbeatsCache=_n,_n))}triggerHeartbeat(){var wt=this;return(0,y.Z)(function*(){const _n=wt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nn=Ut();if(null===wt._heartbeatsCache&&(wt._heartbeatsCache=yield wt._heartbeatsCachePromise),wt._heartbeatsCache.lastSentHeartbeatDate!==Nn&&!wt._heartbeatsCache.heartbeats.some(Xn=>Xn.date===Nn))return wt._heartbeatsCache.heartbeats.push({date:Nn,agent:_n}),wt._heartbeatsCache.heartbeats=wt._heartbeatsCache.heartbeats.filter(Xn=>{const nr=new Date(Xn.date).valueOf();return Date.now()-nr<=2592e6}),wt._storage.overwrite(wt._heartbeatsCache)})()}getHeartbeatsHeader(){var wt=this;return(0,y.Z)(function*(){if(null===wt._heartbeatsCache&&(yield wt._heartbeatsCachePromise),null===wt._heartbeatsCache||0===wt._heartbeatsCache.heartbeats.length)return"";const zt=Ut(),{heartbeatsToSend:_n,unsentEntries:Nn}=function on(Dt,wt=1024){const zt=[];let _n=Dt.slice();for(const Nn of Dt){const Xn=zt.find(nr=>nr.agent===Nn.agent);if(Xn){if(Xn.dates.push(Nn.date),Wn(zt)>wt){Xn.dates.pop();break}}else if(zt.push({agent:Nn.agent,dates:[Nn.date]}),Wn(zt)>wt){zt.pop();break}_n=_n.slice(1)}return{heartbeatsToSend:zt,unsentEntries:_n}}(wt._heartbeatsCache.heartbeats),Xn=(0,ve.L)(JSON.stringify({version:2,heartbeats:_n}));return wt._heartbeatsCache.lastSentHeartbeatDate=zt,Nn.length>0?(wt._heartbeatsCache.heartbeats=Nn,yield wt._storage.overwrite(wt._heartbeatsCache)):(wt._heartbeatsCache.heartbeats=[],wt._storage.overwrite(wt._heartbeatsCache)),Xn})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class fn{constructor(wt){this.app=wt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var wt=this;return(0,y.Z)(function*(){return(yield wt._canUseIndexedDBPromise)&&(yield function z(Dt){return q.apply(this,arguments)}(wt.app))||{heartbeats:[]}})()}overwrite(wt){var zt=this;return(0,y.Z)(function*(){var _n;if(yield zt._canUseIndexedDBPromise){const Xn=yield zt.read();return Pe(zt.app,{lastSentHeartbeatDate:null!==(_n=wt.lastSentHeartbeatDate)&&void 0!==_n?_n:Xn.lastSentHeartbeatDate,heartbeats:wt.heartbeats})}})()}add(wt){var zt=this;return(0,y.Z)(function*(){var _n;if(yield zt._canUseIndexedDBPromise){const Xn=yield zt.read();return Pe(zt.app,{lastSentHeartbeatDate:null!==(_n=wt.lastSentHeartbeatDate)&&void 0!==_n?_n:Xn.lastSentHeartbeatDate,heartbeats:[...Xn.heartbeats,...wt.heartbeats]})}})()}}function Wn(Dt){return(0,ve.L)(JSON.stringify({version:2,heartbeats:Dt})).length}!function kn(Dt){Ir(new m.wA("platform-logger",wt=>new pt(wt),"PRIVATE")),Ir(new m.wA("heartbeat",wt=>new jt(wt),"PRIVATE")),Xt(ce,"0.9.10",Dt),Xt(ce,"0.9.10","esm2017"),Xt("fire-js","")}("")},4859:(pn,dt,L)=>{"use strict";L.d(dt,{H0:()=>_e,wA:()=>le,zt:()=>De});var y=L(5861),m=L(2090);class le{constructor(U,we,je){this.name=U,this.instanceFactory=we,this.type=je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ve="[DEFAULT]";class De{constructor(U,we){this.name=U,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const we=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(we)){const je=new m.BH;if(this.instancesDeferred.set(we,je),this.isInitialized(we)||this.shouldAutoInitialize())try{const ge=this.getOrInitializeService({instanceIdentifier:we});ge&&je.resolve(ge)}catch{}}return this.instancesDeferred.get(we).promise}getImmediate(U){var we;const je=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),ge=null!==(we=null==U?void 0:U.optional)&&void 0!==we&&we;if(!this.isInitialized(je)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:je})}catch(Ue){if(ge)return null;throw Ue}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function he(Be){return"EAGER"===Be.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[we,je]of this.instancesDeferred.entries()){const ge=this.normalizeInstanceIdentifier(we);try{const Ue=this.getOrInitializeService({instanceIdentifier:ge});je.resolve(Ue)}catch{}}}}clearInstance(U=ve){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,y.Z)(function*(){const we=Array.from(U.instances.values());yield Promise.all([...we.filter(je=>"INTERNAL"in je).map(je=>je.INTERNAL.delete()),...we.filter(je=>"_delete"in je).map(je=>je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ve){return this.instances.has(U)}getOptions(U=ve){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:we={}}=U,je=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(je))throw Error(`${this.name}(${je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ge=this.getOrInitializeService({instanceIdentifier:je,options:we});for(const[Ue,qe]of this.instancesDeferred.entries())je===this.normalizeInstanceIdentifier(Ue)&&qe.resolve(ge);return ge}onInit(U,we){var je;const ge=this.normalizeInstanceIdentifier(we),Ue=null!==(je=this.onInitCallbacks.get(ge))&&void 0!==je?je:new Set;Ue.add(U),this.onInitCallbacks.set(ge,Ue);const qe=this.instances.get(ge);return qe&&U(qe,ge),()=>{Ue.delete(U)}}invokeOnInitCallbacks(U,we){const je=this.onInitCallbacks.get(we);if(je)for(const ge of je)try{ge(U,we)}catch{}}getOrInitializeService({instanceIdentifier:U,options:we={}}){let je=this.instances.get(U);if(!je&&this.component&&(je=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=U,Be===ve?void 0:Be),options:we}),this.instances.set(U,je),this.instancesOptions.set(U,we),this.invokeOnInitCallbacks(je,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,je)}catch{}var Be;return je||null}normalizeInstanceIdentifier(U=ve){return this.component?this.component.multipleInstances?U:ve:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const we=this.getProvider(U.name);if(we.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);we.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const we=new De(U,this);return this.providers.set(U,we),we}getProviders(){return Array.from(this.providers.values())}}},4727:(pn,dt,L)=>{"use strict";var y=L(5861),m=L(6881),le=L(4859),ve=L(2090);const De=(G,ie)=>ie.some($e=>G instanceof $e);let Re,he;const U=new WeakMap,we=new WeakMap,je=new WeakMap,ge=new WeakMap,Ue=new WeakMap;let Ae={get(G,ie,$e){if(G instanceof IDBTransaction){if("done"===ie)return we.get(G);if("objectStoreNames"===ie)return G.objectStoreNames||je.get(G);if("store"===ie)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return ze(G[ie])},set:(G,ie,$e)=>(G[ie]=$e,!0),has:(G,ie)=>G instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in G};function at(G){return"function"==typeof G?function ct(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...ie){return G.apply(et(this),ie),ze(U.get(this))}:function(...ie){return ze(G.apply(et(this),ie))}:function(ie,...$e){const Xe=G.call(et(this),ie,...$e);return je.set(Xe,ie.sort?ie.sort():[ie]),ze(Xe)}}(G):(G instanceof IDBTransaction&&function It(G){if(we.has(G))return;const ie=new Promise(($e,Xe)=>{const ut=()=>{G.removeEventListener("complete",Rt),G.removeEventListener("error",cn),G.removeEventListener("abort",cn)},Rt=()=>{$e(),ut()},cn=()=>{Xe(G.error||new DOMException("AbortError","AbortError")),ut()};G.addEventListener("complete",Rt),G.addEventListener("error",cn),G.addEventListener("abort",cn)});we.set(G,ie)}(G),De(G,function _e(){return Re||(Re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Ae):G)}function ze(G){if(G instanceof IDBRequest)return function qe(G){const ie=new Promise(($e,Xe)=>{const ut=()=>{G.removeEventListener("success",Rt),G.removeEventListener("error",cn)},Rt=()=>{$e(ze(G.result)),ut()},cn=()=>{Xe(G.error),ut()};G.addEventListener("success",Rt),G.addEventListener("error",cn)});return ie.then($e=>{$e instanceof IDBCursor&&U.set($e,G)}).catch(()=>{}),Ue.set(ie,G),ie}(G);if(ge.has(G))return ge.get(G);const ie=at(G);return ie!==G&&(ge.set(G,ie),Ue.set(ie,G)),ie}const et=G=>Ue.get(G),Ye=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],_t=new Map;function nt(G,ie){if(!(G instanceof IDBDatabase)||ie in G||"string"!=typeof ie)return;if(_t.get(ie))return _t.get(ie);const $e=ie.replace(/FromIndex$/,""),Xe=ie!==$e,ut=Le.includes($e);if(!($e in(Xe?IDBIndex:IDBObjectStore).prototype)||!ut&&!Ye.includes($e))return;const Rt=function(){var cn=(0,y.Z)(function*(gn,...zn){const ur=this.transaction(gn,ut?"readwrite":"readonly");let Ri=ur.store;return Xe&&(Ri=Ri.index(zn.shift())),(yield Promise.all([Ri[$e](...zn),ut&&ur.done]))[0]});return function(zn){return cn.apply(this,arguments)}}();return _t.set(ie,Rt),Rt}!function Ce(G){Ae=G(Ae)}(G=>({...G,get:(ie,$e,Xe)=>nt(ie,$e)||G.get(ie,$e,Xe),has:(ie,$e)=>!!nt(ie,$e)||G.has(ie,$e)}));const pt="@firebase/installations",Et="0.6.4",ce=1e4,xe=`w:${Et}`,Ve="FIS_v2",We="https://firebaseinstallations.googleapis.com/v1",Ne=36e5,lt=new ve.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mt(G){return G instanceof ve.ZR&&G.code.includes("request-failed")}function Pt({projectId:G}){return`${We}/projects/${G}/installations`}function un(G){return{token:G.token,requestStatus:2,expiresIn:Dn(G.expiresIn),creationTime:Date.now()}}function Tt(G,ie){return Je.apply(this,arguments)}function Je(){return(Je=(0,y.Z)(function*(G,ie){const Xe=(yield ie.json()).error;return lt.create("request-failed",{requestName:G,serverCode:Xe.code,serverMessage:Xe.message,serverStatus:Xe.status})})).apply(this,arguments)}function Ot({apiKey:G}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":G})}function yn(G){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,y.Z)(function*(G){const ie=yield G();return ie.status>=500&&ie.status<600?G():ie})).apply(this,arguments)}function Dn(G){return Number(G.replace("s","000"))}function Ft(){return(Ft=(0,y.Z)(function*({appConfig:G,heartbeatServiceProvider:ie},{fid:$e}){const Xe=Pt(G),ut=Ot(G),Rt=ie.getImmediate({optional:!0});if(Rt){const ur=yield Rt.getHeartbeatsHeader();ur&&ut.append("x-firebase-client",ur)}const gn={method:"POST",headers:ut,body:JSON.stringify({fid:$e,authVersion:Ve,appId:G.appId,sdkVersion:xe})},zn=yield yn(()=>fetch(Xe,gn));if(zn.ok){const ur=yield zn.json();return{fid:ur.fid||$e,registrationStatus:2,refreshToken:ur.refreshToken,authToken:un(ur.authToken)}}throw yield Tt("Create Installation",zn)})).apply(this,arguments)}function or(G){return new Promise(ie=>{setTimeout(ie,G)})}const yr=/^[cdef][\w-]{21}$/,tn="";function xr(){try{const G=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(G),G[0]=112+G[0]%16;const $e=function dr(G){return function sr(G){return btoa(String.fromCharCode(...G)).replace(/\+/g,"-").replace(/\//g,"_")}(G).substr(0,22)}(G);return yr.test($e)?$e:tn}catch{return tn}}function rr(G){return`${G.appName}!${G.appId}`}const Or=new Map;function Nr(G,ie){const $e=rr(G);$n($e,ie),function Ir(G,ie){const $e=function ar(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=G=>{$n(G.data.key,G.data.fid)}),vr}();$e&&$e.postMessage({key:G,fid:ie}),function Lr(){0===Or.size&&vr&&(vr.close(),vr=null)}()}($e,ie)}function $n(G,ie){const $e=Or.get(G);if($e)for(const Xe of $e)Xe(ie)}let vr=null;const Mr="firebase-installations-database",Gn=1,Rn="firebase-installations-store";let ci=null;function Un(){return ci||(ci=function ft(G,ie,{blocked:$e,upgrade:Xe,blocking:ut,terminated:Rt}={}){const cn=indexedDB.open(G,ie),gn=ze(cn);return Xe&&cn.addEventListener("upgradeneeded",zn=>{Xe(ze(cn.result),zn.oldVersion,zn.newVersion,ze(cn.transaction))}),$e&&cn.addEventListener("blocked",()=>$e()),gn.then(zn=>{Rt&&zn.addEventListener("close",()=>Rt()),ut&&zn.addEventListener("versionchange",()=>ut())}).catch(()=>{}),gn}(Mr,Gn,{upgrade:(G,ie)=>{0===ie&&G.createObjectStore(Rn)}})),ci}function qt(G,ie){return me.apply(this,arguments)}function me(){return(me=(0,y.Z)(function*(G,ie){const $e=rr(G),ut=(yield Un()).transaction(Rn,"readwrite"),Rt=ut.objectStore(Rn),cn=yield Rt.get($e);return yield Rt.put(ie,$e),yield ut.done,(!cn||cn.fid!==ie.fid)&&Nr(G,ie.fid),ie})).apply(this,arguments)}function Ge(G){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(G){const ie=rr(G),Xe=(yield Un()).transaction(Rn,"readwrite");yield Xe.objectStore(Rn).delete(ie),yield Xe.done})).apply(this,arguments)}function Xt(G,ie){return sn.apply(this,arguments)}function sn(){return(sn=(0,y.Z)(function*(G,ie){const $e=rr(G),ut=(yield Un()).transaction(Rn,"readwrite"),Rt=ut.objectStore(Rn),cn=yield Rt.get($e),gn=ie(cn);return void 0===gn?yield Rt.delete($e):yield Rt.put(gn,$e),yield ut.done,gn&&(!cn||cn.fid!==gn.fid)&&Nr(G,gn.fid),gn})).apply(this,arguments)}function lr(G){return On.apply(this,arguments)}function On(){return On=(0,y.Z)(function*(G){let ie;const $e=yield Xt(G.appConfig,Xe=>{const ut=function _r(G){return it(G||{fid:xr(),registrationStatus:0})}(Xe),Rt=function Qe(G,ie){if(0===ie.registrationStatus){if(!navigator.onLine)return{installationEntry:ie,registrationPromise:Promise.reject(lt.create("app-offline"))};const $e={fid:ie.fid,registrationStatus:1,registrationTime:Date.now()},Xe=function de(G,ie){return K.apply(this,arguments)}(G,$e);return{installationEntry:$e,registrationPromise:Xe}}return 1===ie.registrationStatus?{installationEntry:ie,registrationPromise:z(G)}:{installationEntry:ie}}(G,ut);return ie=Rt.registrationPromise,Rt.installationEntry});return $e.fid===tn?{installationEntry:yield ie}:{installationEntry:$e,registrationPromise:ie}}),On.apply(this,arguments)}function K(){return K=(0,y.Z)(function*(G,ie){try{const $e=yield function In(G,ie){return Ft.apply(this,arguments)}(G,ie);return qt(G.appConfig,$e)}catch($e){throw Mt($e)&&409===$e.customData.serverCode?yield Ge(G.appConfig):yield qt(G.appConfig,{fid:ie.fid,registrationStatus:0}),$e}}),K.apply(this,arguments)}function z(G){return q.apply(this,arguments)}function q(){return(q=(0,y.Z)(function*(G){let ie=yield Pe(G.appConfig);for(;1===ie.registrationStatus;)yield or(100),ie=yield Pe(G.appConfig);if(0===ie.registrationStatus){const{installationEntry:$e,registrationPromise:Xe}=yield lr(G);return Xe||$e}return ie})).apply(this,arguments)}function Pe(G){return Xt(G,ie=>{if(!ie)throw lt.create("installation-not-found");return it(ie)})}function it(G){return function ke(G){return 1===G.registrationStatus&&G.registrationTime+ce<Date.now()}(G)?{fid:G.fid,registrationStatus:0}:G}function Ct(){return(Ct=(0,y.Z)(function*({appConfig:G,heartbeatServiceProvider:ie},$e){const Xe=function jt(G,{fid:ie}){return`${Pt(G)}/${ie}/authTokens:generate`}(G,$e),ut=function Qt(G,{refreshToken:ie}){const $e=Ot(G);return $e.append("Authorization",function Nt(G){return`${Ve} ${G}`}(ie)),$e}(G,$e),Rt=ie.getImmediate({optional:!0});if(Rt){const ur=yield Rt.getHeartbeatsHeader();ur&&ut.append("x-firebase-client",ur)}const gn={method:"POST",headers:ut,body:JSON.stringify({installation:{sdkVersion:xe,appId:G.appId}})},zn=yield yn(()=>fetch(Xe,gn));if(zn.ok)return un(yield zn.json());throw yield Tt("Generate Auth Token",zn)})).apply(this,arguments)}function Ut(G){return on.apply(this,arguments)}function on(){return on=(0,y.Z)(function*(G,ie=!1){let $e;const Xe=yield Xt(G.appConfig,Rt=>{if(!zt(Rt))throw lt.create("not-registered");const cn=Rt.authToken;if(!ie&&function _n(G){return 2===G.requestStatus&&!function Nn(G){const ie=Date.now();return ie<G.creationTime||G.creationTime+G.expiresIn<ie+Ne}(G)}(cn))return Rt;if(1===cn.requestStatus)return $e=function fn(G,ie){return Wn.apply(this,arguments)}(G,ie),Rt;{if(!navigator.onLine)throw lt.create("app-offline");const gn=function Xn(G){const ie={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},G),{authToken:ie})}(Rt);return $e=function Dt(G,ie){return wt.apply(this,arguments)}(G,gn),gn}});return $e?yield $e:Xe.authToken}),on.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(G,ie){let $e=yield kn(G.appConfig);for(;1===$e.authToken.requestStatus;)yield or(100),$e=yield kn(G.appConfig);const Xe=$e.authToken;return 0===Xe.requestStatus?Ut(G,ie):Xe})).apply(this,arguments)}function kn(G){return Xt(G,ie=>{if(!zt(ie))throw lt.create("not-registered");return function nr(G){return 1===G.requestStatus&&G.requestTime+ce<Date.now()}(ie.authToken)?Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}}):ie})}function wt(){return wt=(0,y.Z)(function*(G,ie){try{const $e=yield function ht(G,ie){return Ct.apply(this,arguments)}(G,ie),Xe=Object.assign(Object.assign({},ie),{authToken:$e});return yield qt(G.appConfig,Xe),$e}catch($e){if(!Mt($e)||401!==$e.customData.serverCode&&404!==$e.customData.serverCode){const Xe=Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}});yield qt(G.appConfig,Xe)}else yield Ge(G.appConfig);throw $e}}),wt.apply(this,arguments)}function zt(G){return void 0!==G&&2===G.registrationStatus}function Tr(){return(Tr=(0,y.Z)(function*(G){const ie=G,{installationEntry:$e,registrationPromise:Xe}=yield lr(ie);return Xe?Xe.catch(console.error):Ut(ie).catch(console.error),$e.fid})).apply(this,arguments)}function Jn(){return Jn=(0,y.Z)(function*(G,ie=!1){const $e=G;return yield function fi(G){return Ls.apply(this,arguments)}($e),(yield Ut($e,ie)).token}),Jn.apply(this,arguments)}function Ls(){return(Ls=(0,y.Z)(function*(G){const{registrationPromise:ie}=yield lr(G);ie&&(yield ie)})).apply(this,arguments)}function _s(G){return lt.create("missing-app-config-values",{valueName:G})}const Qs="installations",ne=G=>{const ie=G.getProvider("app").getImmediate(),$e=function ps(G){if(!G||!G.options)throw _s("App Configuration");if(!G.name)throw _s("App Name");const ie=["projectId","apiKey","appId"];for(const $e of ie)if(!G.options[$e])throw _s($e);return{appName:G.name,projectId:G.options.projectId,apiKey:G.options.apiKey,appId:G.options.appId}}(ie);return{app:ie,appConfig:$e,heartbeatServiceProvider:(0,m._getProvider)(ie,"heartbeat"),_delete:()=>Promise.resolve()}},Ee=G=>{const ie=G.getProvider("app").getImmediate(),$e=(0,m._getProvider)(ie,Qs).getImmediate();return{getId:()=>function Jr(G){return Tr.apply(this,arguments)}($e),getToken:ut=>function Qn(G){return Jn.apply(this,arguments)}($e,ut)}};(function oe(){(0,m._registerComponent)(new le.wA(Qs,ne,"PUBLIC")),(0,m._registerComponent)(new le.wA("installations-internal",Ee,"PRIVATE"))})(),(0,m.registerVersion)(pt,Et),(0,m.registerVersion)(pt,Et,"esm2017")},1877:(pn,dt,L)=>{"use strict";L.d(dt,{Am:()=>Be,Ub:()=>_e,Yd:()=>he,in:()=>m});const y=[];var m=(()=>((m=m||{})[m.DEBUG=0]="DEBUG",m[m.VERBOSE=1]="VERBOSE",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.SILENT=5]="SILENT",m))();const le={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},ve=m.INFO,De={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Re=(U,we,...je)=>{if(we<U.logLevel)return;const ge=(new Date).toISOString(),Ue=De[we];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${we})`);console[Ue](`[${ge}]  ${U.name}:`,...je)};class he{constructor(we){this.name=we,this._logLevel=ve,this._logHandler=Re,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(we){if(!(we in m))throw new TypeError(`Invalid value "${we}" assigned to \`logLevel\``);this._logLevel=we}setLogLevel(we){this._logLevel="string"==typeof we?le[we]:we}get logHandler(){return this._logHandler}set logHandler(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we}get userLogHandler(){return this._userLogHandler}set userLogHandler(we){this._userLogHandler=we}debug(...we){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...we),this._logHandler(this,m.DEBUG,...we)}log(...we){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...we),this._logHandler(this,m.VERBOSE,...we)}info(...we){this._userLogHandler&&this._userLogHandler(this,m.INFO,...we),this._logHandler(this,m.INFO,...we)}warn(...we){this._userLogHandler&&this._userLogHandler(this,m.WARN,...we),this._logHandler(this,m.WARN,...we)}error(...we){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...we),this._logHandler(this,m.ERROR,...we)}}function _e(U){y.forEach(we=>{we.setLogLevel(U)})}function Be(U,we){for(const je of y){let ge=null;we&&we.level&&(ge=le[we.level]),je.userLogHandler=null===U?null:(Ue,qe,...It)=>{const Ae=It.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");qe>=(null!=ge?ge:Ue.logLevel)&&U({level:m[qe].toLowerCase(),message:Ae,args:It,type:Ue.name})}}}},9972:(pn,dt,L)=>{"use strict";L.d(dt,{Br:()=>os,dr:()=>xr,YG:()=>$n,Sm:()=>Ir,PM:()=>vr,FN:()=>ar,wI:()=>Un,W2:()=>qt,IJ:()=>At,W4:()=>Xt,zq:()=>sn,Gu:()=>_r,gu:()=>Qe,pK:()=>q,Ie:()=>Pe,Q$:()=>Ut,q_:()=>on,fG:()=>Dt,jP:()=>xi,Nd:()=>pi,yW:()=>oe,wd:()=>$e,sr:()=>Rt,Pc:()=>Ao,r4:()=>Bi,SH:()=>is,X1:()=>Kr,t4:()=>ur,j9:()=>yn});var y=L(5861),m=L(2223),le=L(5030),ve=L(655),De=L(4968),Re=L(7579),he=L(1135),_e=L(96),ge=(L(9613),L(3551),L(1138),L(1898),L(5273)),Ue=L(3577),qe=L(3982),It=L(9866),Ce=(L(8126),L(2583)),ze=(L(3457),L(4349),L(4083)),ft=L(9300),vt=L(3900),Ye=L(1884),Le=L(4755);const nt=ge.i,ce=["*"],He=S=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(S):"function"==typeof requestAnimationFrame?requestAnimationFrame(S):setTimeout(S);let mt=(()=>{class S{constructor(T,Q){this.injector=T,this.el=Q,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=T,lt(this.el)}handleValueChange(T,Q){T===this.el.nativeElement&&(Q!==this.lastValue&&(this.lastValue=Q,this.onChange(Q)),lt(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),lt(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(le.a5)}catch{}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>lt(this.el)));const Q=T.control;Q&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Kt=>{if(typeof Q[Kt]<"u"){const Ln=Q[Kt].bind(Q);Q[Kt]=(...Yn)=>{Ln(...Yn),lt(this.el)}}})}}return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.zs3),m.Y36(m.SBq))},S.\u0275dir=m.lG2({type:S,hostBindings:function(T,Q){1&T&&m.NdJ("ionBlur",function(Kt){return Q._handleBlurEvent(Kt.target)})}}),S})();const lt=S=>{He(()=>{const J=S.nativeElement,T=null!=J.value&&J.value.toString().length>0,Q=Mt(J);Pt(J,Q);const Me=J.closest("ion-item");Me&&Pt(Me,T?[...Q,"item-has-value"]:Q)})},Mt=S=>{const J=S.classList,T=[];for(let Q=0;Q<J.length;Q++){const Me=J.item(Q);null!==Me&&un(Me,"ng-")&&T.push(`ion-${Me.substring(3)}`)}return T},Pt=(S,J)=>{const T=S.classList;T.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),T.add(...J)},un=(S,J)=>S.substring(0,J.length)===J;let yn=(()=>{class S extends mt{constructor(T,Q){super(T,Q)}_handleInputEvent(T){this.handleValueChange(T,T.value)}}return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.zs3),m.Y36(m.SBq))},S.\u0275dir=m.lG2({type:S,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(T,Q){1&T&&m.NdJ("ionInput",function(Kt){return Q._handleInputEvent(Kt.target)})},features:[m._Bn([{provide:le.JU,useExisting:S,multi:!0}]),m.qOj]}),S})();const Tn=(S,J)=>{const T=S.prototype;J.forEach(Q=>{Object.defineProperty(T,Q,{get(){return this.el[Q]},set(Me){this.z.runOutsideAngular(()=>this.el[Q]=Me)}})})},Dn=(S,J)=>{const T=S.prototype;J.forEach(Q=>{T[Q]=function(){const Me=arguments;return this.z.runOutsideAngular(()=>this.el[Q].apply(this.el,Me))}})},Nt=(S,J,T)=>{T.forEach(Q=>S[Q]=(0,De.R)(J,Q))};function Ft(S){return function(T){const{defineCustomElementFn:Q,inputs:Me,methods:Kt}=S;return void 0!==Q&&Q(),Me&&Tn(T,Me),Kt&&Dn(T,Kt),T}}let xr=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-app"]],ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({})],S),S})(),$n=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement,Nt(this,this.el,["ionFocus","ionBlur"])}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],S),S})(),Ir=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["collapse"]})],S),S})(),vr=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],S),S})(),ar=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["mode"]})],S),S})(),Un=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],S),S})(),qt=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement,Nt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],S),S})(),At=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],S),S})(),Xt=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement,Nt(this,this.el,["ionFocus","ionBlur"])}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],S),S})(),sn=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["activated","side"]})],S),S})(),_r=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["collapse","mode","translucent"]})],S),S})(),Qe=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],S),S})(),q=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement,Nt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],S),S})(),Pe=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],S),S})(),Ut=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","mode","position"]})],S),S})(),on=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],S),S})(),Dt=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["autoHide","color","disabled","menu","mode","type"]})],S),S})(),pi=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-row"]],ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({})],S),S})(),oe=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","mode"]})],S),S})(),$e=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","size"]})],S),S})(),Rt=(()=>{let S=class{constructor(T,Q,Me){this.z=Me,T.detach(),this.el=Q.nativeElement}};return S.\u0275fac=function(T){return new(T||S)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},S.\u0275cmp=m.Xpm({type:S,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ce,decls:1,vars:0,template:function(T,Q){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ve.gn)([Ft({inputs:["color","mode"]})],S),S})(),cn=(()=>{class S{get(T,Q){const Me=zn();return Me?Me.get(T,Q):null}getBoolean(T,Q){const Me=zn();return!!Me&&Me.getBoolean(T,Q)}getNumber(T,Q){const Me=zn();return Me?Me.getNumber(T,Q):0}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const gn=new m.OlP("USERCONFIG"),zn=()=>{if(typeof window<"u"){const S=window.Ionic;if(null!=S&&S.config)return S.config}return null};let ur=(()=>{class S{constructor(T,Q){this.doc=T,this.backButton=new Re.x,this.keyboardDidShow=new Re.x,this.keyboardDidHide=new Re.x,this.pause=new Re.x,this.resume=new Re.x,this.resize=new Re.x,Q.run(()=>{var Me;let Kt;this.win=T.defaultView,this.backButton.subscribeWithPriority=function(Ln,Yn){return this.subscribe(kr=>kr.register(Ln,br=>Q.run(()=>Yn(br))))},Fi(this.pause,T,"pause"),Fi(this.resume,T,"resume"),Fi(this.backButton,T,"ionBackButton"),Fi(this.resize,this.win,"resize"),Fi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Fi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Ln=>{Kt=Ln}),null!==(Me=this.win)&&void 0!==Me&&Me.cordova?T.addEventListener("deviceready",()=>{Kt("cordova")},{once:!0}):Kt("dom")})}is(T){return(0,ge.a)(this.win,T)}platforms(){return(0,ge.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(T){return Ri(this.win.location.href,T)}isLandscape(){return!this.isPortrait()}isPortrait(){var T,Q;return null===(T=(Q=this.win).matchMedia)||void 0===T?void 0:T.call(Q,"(orientation: portrait)").matches}testUserAgent(T){const Q=this.win.navigator;return!!(null!=Q&&Q.userAgent&&Q.userAgent.indexOf(T)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return S.\u0275fac=function(T){return new(T||S)(m.LFG(Le.K0),m.LFG(m.R0b))},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ri=(S,J)=>{J=J.replace(/[[\]\\]/g,"\\$&");const Q=new RegExp("[\\?&]"+J+"=([^&#]*)").exec(S);return Q?decodeURIComponent(Q[1].replace(/\+/g," ")):null},Fi=(S,J,T)=>{J&&J.addEventListener(T,Q=>{S.next(null!=Q?Q.detail:void 0)})};let is=(()=>{class S{constructor(T,Q,Me,Kt){this.location=Q,this.serializer=Me,this.router=Kt,this.direction=En,this.animated=hr,this.guessDirection="forward",this.lastNavId=-1,Kt&&Kt.events.subscribe(Ln=>{if(Ln instanceof _e.OD){const Yn=Ln.restoredState?Ln.restoredState.navigationId:Ln.id;this.guessDirection=Yn<this.lastNavId?"back":"forward",this.guessAnimation=Ln.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Ln.id:Yn}}),T.backButton.subscribeWithPriority(0,Ln=>{this.pop(),Ln()})}navigateForward(T,Q={}){return this.setDirection("forward",Q.animated,Q.animationDirection,Q.animation),this.navigate(T,Q)}navigateBack(T,Q={}){return this.setDirection("back",Q.animated,Q.animationDirection,Q.animation),this.navigate(T,Q)}navigateRoot(T,Q={}){return this.setDirection("root",Q.animated,Q.animationDirection,Q.animation),this.navigate(T,Q)}back(T={animated:!0,animationDirection:"back"}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.location.back()}pop(){var T=this;return(0,y.Z)(function*(){let Q=T.topOutlet;for(;Q&&!(yield Q.pop());)Q=Q.parentOutlet})()}setDirection(T,Q,Me,Kt){this.direction=T,this.animated=Gr(T,Q,Me),this.animationBuilder=Kt}setTopOutlet(T){this.topOutlet=T}consumeTransition(){let Q,T="root";const Me=this.animationBuilder;return"auto"===this.direction?(T=this.guessDirection,Q=this.guessAnimation):(Q=this.animated,T=this.direction),this.direction=En,this.animated=hr,this.animationBuilder=void 0,{direction:T,animation:Q,animationBuilder:Me}}navigate(T,Q){if(Array.isArray(T))return this.router.navigate(T,Q);{const Me=this.serializer.parse(T.toString());return void 0!==Q.queryParams&&(Me.queryParams={...Q.queryParams}),void 0!==Q.fragment&&(Me.fragment=Q.fragment),this.router.navigateByUrl(Me,Q)}}}return S.\u0275fac=function(T){return new(T||S)(m.LFG(ur),m.LFG(Le.Ye),m.LFG(_e.Hx),m.LFG(_e.F0,8))},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Gr=(S,J,T)=>{if(!1!==J){if(void 0!==T)return T;if("forward"===S||"back"===S)return S;if("root"===S&&!0===J)return"forward"}},En="auto",hr=void 0;class Kr{constructor(J={}){this.data=J}get(J){return this.data[J]}}let Hi=(()=>{class S{constructor(){this.zone=(0,m.f3M)(m.R0b),this.applicationRef=(0,m.f3M)(m.z2F)}create(T,Q,Me){return new bo(T,Q,this.applicationRef,this.zone,Me)}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac}),S})();class bo{constructor(J,T,Q,Me,Kt){this.environmentInjector=J,this.injector=T,this.applicationRef=Q,this.zone=Me,this.elementReferenceKey=Kt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(J,T,Q,Me){return this.zone.run(()=>new Promise(Kt=>{const Ln={...Q};void 0!==this.elementReferenceKey&&(Ln[this.elementReferenceKey]=J),Kt(zi(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,J,T,Ln,Me))}))}removeViewFromDom(J,T){return this.zone.run(()=>new Promise(Q=>{const Me=this.elRefMap.get(T);if(Me){Me.destroy(),this.elRefMap.delete(T);const Kt=this.elEventsMap.get(T);Kt&&(Kt(),this.elEventsMap.delete(T))}Q()}))}}const zi=(S,J,T,Q,Me,Kt,Ln,Yn,kr,br)=>{const Ki=m.zs3.create({providers:Li(kr),parent:T}),$i=(0,m.LMc)(Yn,{environmentInjector:J,elementInjector:Ki}),gs=$i.instance,Vs=$i.location.nativeElement;if(kr&&Object.assign(gs,kr),br)for(const Ds of br)Vs.classList.add(Ds);const Mo=Qr(S,gs,Vs);return Ln.appendChild(Vs),Q.attachView($i.hostView),Me.set(Vs,$i),Kt.set(Vs,Mo),Vs},Xs=[It.L,It.a,It.b,It.c,It.d],Qr=(S,J,T)=>S.run(()=>{const Q=Xs.filter(Me=>"function"==typeof J[Me]).map(Me=>{const Kt=Ln=>J[Me](Ln.detail);return T.addEventListener(Me,Kt),()=>T.removeEventListener(Me,Kt)});return()=>Q.forEach(Me=>Me())}),Yi=new m.OlP("NavParamsToken"),Li=S=>[{provide:Yi,useValue:S},{provide:Kr,useFactory:er,deps:[Yi]}],er=S=>new Kr(S),Js=(S,J)=>((S=S.filter(T=>T.stackId!==J.stackId)).push(J),S),ss=(S,J)=>{const T=S.createUrlTree(["."],{relativeTo:J});return S.serializeUrl(T)},xs=(S,J)=>{if(!S)return;const T=fo(J);for(let Q=0;Q<T.length;Q++){if(Q>=S.length)return T[Q];if(T[Q]!==S[Q])return}},fo=S=>S.split("/").map(J=>J.trim()).filter(J=>""!==J),po=S=>{S&&(S.ref.destroy(),S.unlistenEvents())};class $s{constructor(J,T,Q,Me,Kt,Ln){this.containerEl=T,this.router=Q,this.navCtrl=Me,this.zone=Kt,this.location=Ln,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==J?fo(J):void 0}createView(J,T){var Q;const Me=ss(this.router,T),Kt=null==J||null===(Q=J.location)||void 0===Q?void 0:Q.nativeElement,Ln=Qr(this.zone,J.instance,Kt);return{id:this.nextId++,stackId:xs(this.tabsPrefix,Me),unlistenEvents:Ln,element:Kt,ref:J,url:Me}}getExistingView(J){const T=ss(this.router,J),Q=this.views.find(Me=>Me.url===T);return Q&&Q.ref.changeDetectorRef.reattach(),Q}setActive(J){var T,Q,Me;const Kt=this.navCtrl.consumeTransition();let{direction:Ln,animation:Yn,animationBuilder:kr}=Kt;const br=this.activeView,Ki=((S,J)=>!J||S.stackId!==J.stackId)(J,br);Ki&&(Ln="back",Yn=void 0);const $i=this.views.slice();let gs;const Vs=this.router;Vs.getCurrentNavigation?gs=Vs.getCurrentNavigation():null!==(T=Vs.navigations)&&void 0!==T&&T.value&&(gs=Vs.navigations.value),null!==(Q=gs)&&void 0!==Q&&null!==(Me=Q.extras)&&void 0!==Me&&Me.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Mo=this.views.includes(J),Ds=this.insertView(J,Ln);Mo||J.ref.changeDetectorRef.detectChanges();const Z=J.animationBuilder;return void 0===kr&&"back"===Ln&&!Ki&&void 0!==Z&&(kr=Z),br&&(br.animationBuilder=kr),this.zone.runOutsideAngular(()=>this.wait(()=>(br&&br.ref.changeDetectorRef.detach(),J.ref.changeDetectorRef.reattach(),this.transition(J,br,Yn,this.canGoBack(1),!1,kr).then(()=>Ks(J,Ds,$i,this.location,this.zone)).then(()=>({enteringView:J,direction:Ln,animation:Yn,tabSwitch:Ki})))))}canGoBack(J,T=this.getActiveStackId()){return this.getStack(T).length>J}pop(J,T=this.getActiveStackId()){return this.zone.run(()=>{const Q=this.getStack(T);if(Q.length<=J)return Promise.resolve(!1);const Me=Q[Q.length-J-1];let Kt=Me.url;const Ln=Me.savedData;if(Ln){var Yn,kr;const Ki=Ln.get("primary");null!=Ki&&null!==(Yn=Ki.route)&&void 0!==Yn&&null!==(kr=Yn._routerState)&&void 0!==kr&&kr.snapshot.url&&(Kt=Ki.route._routerState.snapshot.url)}const{animationBuilder:br}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Kt,{...Me.savedExtras,animation:br}).then(()=>!0)})}startBackTransition(){const J=this.activeView;if(J){const T=this.getStack(J.stackId),Q=T[T.length-2],Me=Q.animationBuilder;return this.wait(()=>this.transition(Q,J,"back",this.canGoBack(2),!0,Me))}return Promise.resolve()}endBackTransition(J){J?(this.skipTransition=!0,this.pop(1)):this.activeView&&ta(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(J){const T=this.getStack(J);return T.length>0?T[T.length-1]:void 0}getRootUrl(J){const T=this.getStack(J);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(po),this.activeView=void 0,this.views=[]}getStack(J){return this.views.filter(T=>T.stackId===J)}insertView(J,T){return this.activeView=J,this.views=((S,J,T)=>"root"===T?Js(S,J):"forward"===T?((S,J)=>(S.indexOf(J)>=0?S=S.filter(Q=>Q.stackId!==J.stackId||Q.id<=J.id):S.push(J),S))(S,J):((S,J)=>S.indexOf(J)>=0?S.filter(Q=>Q.stackId!==J.stackId||Q.id<=J.id):Js(S,J))(S,J))(this.views,J,T),this.views.slice()}transition(J,T,Q,Me,Kt,Ln){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===J)return Promise.resolve(!1);const Yn=J?J.element:void 0,kr=T?T.element:void 0,br=this.containerEl;return Yn&&Yn!==kr&&(Yn.classList.add("ion-page"),Yn.classList.add("ion-page-invisible"),Yn.parentElement!==br&&br.appendChild(Yn),br.commit)?br.commit(Yn,kr,{duration:void 0===Q?0:void 0,direction:Q,showGoBack:Me,progressAnimation:Kt,animationBuilder:Ln}):Promise.resolve(!1)}wait(J){var T=this;return(0,y.Z)(function*(){void 0!==T.runningTask&&(yield T.runningTask,T.runningTask=void 0);const Q=T.runningTask=J();return Q.finally(()=>T.runningTask=void 0),Q})()}}const Ks=(S,J,T,Q,Me)=>"function"==typeof requestAnimationFrame?new Promise(Kt=>{requestAnimationFrame(()=>{ta(S,J,T,Q,Me),Kt()})}):Promise.resolve(),ta=(S,J,T,Q,Me)=>{Me.run(()=>T.filter(Kt=>!J.includes(Kt)).forEach(po)),J.forEach(Kt=>{const Yn=Q.path().split("?")[0].split("#")[0];if(Kt!==S&&Kt.url!==Yn){const kr=Kt.element;kr.setAttribute("aria-hidden","true"),kr.classList.add("ion-page-hidden"),Kt.ref.changeDetectorRef.detach()}})};let xi=(()=>{class S{constructor(T,Q,Me,Kt,Ln,Yn,kr,br){this.parentOutlet=br,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new he.X(null),this.stackEvents=new m.vpe,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.parentContexts=(0,m.f3M)(_e.y6),this.location=(0,m.f3M)(m.s_b),this.environmentInjector=(0,m.f3M)(m.lqb),this.config=(0,m.f3M)(cn),this.navCtrl=(0,m.f3M)(is),this.nativeEl=Kt.nativeElement,this.name=T||_e.eC,this.tabsPrefix="true"===Q?ss(Ln,kr):void 0,this.stackCtrl=new $s(this.tabsPrefix,this.nativeEl,Ln,this.navCtrl,Yn,Me),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Q=>this.stackCtrl.endBackTransition(Q)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const T=this.getContext();null!=T&&T.route&&this.activateWith(T.route,T.injector)}new Promise(T=>(0,Ue.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,Q){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Q=this.getContext();this.activatedView.savedData=new Map(Q.children.contexts);const Me=this.activatedView.savedData.get("primary");if(Me&&Q.route&&(Me.route={...Q.route}),this.activatedView.savedExtras={},Q.route){const Kt=Q.route.snapshot;this.activatedView.savedExtras.queryParams=Kt.queryParams,this.activatedView.savedExtras.fragment=Kt.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,Q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let Me,Kt=this.stackCtrl.getExistingView(T);if(Kt){Me=this.activated=Kt.ref;const Yn=Kt.savedData;Yn&&(this.getContext().children.contexts=Yn),this.updateActivatedRouteProxy(Me.instance,T)}else{var Ln;const Yn=T._futureSnapshot,kr=this.parentContexts.getOrCreateContext(this.name).children,br=new he.X(null),Ki=this.createActivatedRouteProxy(br,T),$i=new Cr(Ki,kr,this.location.injector),gs=null!==(Ln=Yn.routeConfig.component)&&void 0!==Ln?Ln:Yn.component;Me=this.activated=this.location.createComponent(gs,{index:this.location.length,injector:$i,environmentInjector:null!=Q?Q:this.environmentInjector}),br.next(Me.instance),Kt=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(Me.instance,Ki),this.currentActivatedRoute$.next({component:Me.instance,activatedRoute:T})}this.activatedView=Kt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Kt).then(Yn=>{this.activateEvents.emit(Me.instance),this.stackEvents.emit(Yn)})}canGoBack(T=1,Q){return this.stackCtrl.canGoBack(T,Q)}pop(T=1,Q){return this.stackCtrl.pop(T,Q)}getLastUrl(T){const Q=this.stackCtrl.getLastUrl(T);return Q?Q.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,Q){const Me=new _e.gz;return Me._futureSnapshot=Q._futureSnapshot,Me._routerState=Q._routerState,Me.snapshot=Q.snapshot,Me.outlet=Q.outlet,Me.component=Q.component,Me._paramMap=this.proxyObservable(T,"paramMap"),Me._queryParamMap=this.proxyObservable(T,"queryParamMap"),Me.url=this.proxyObservable(T,"url"),Me.params=this.proxyObservable(T,"params"),Me.queryParams=this.proxyObservable(T,"queryParams"),Me.fragment=this.proxyObservable(T,"fragment"),Me.data=this.proxyObservable(T,"data"),Me}proxyObservable(T,Q){return T.pipe((0,ft.h)(Me=>!!Me),(0,vt.w)(Me=>this.currentActivatedRoute$.pipe((0,ft.h)(Kt=>null!==Kt&&Kt.component===Me),(0,vt.w)(Kt=>Kt&&Kt.activatedRoute[Q]),(0,Ye.x)())))}updateActivatedRouteProxy(T,Q){const Me=this.proxyMap.get(T);if(!Me)throw new Error("Could not find activated route proxy for view");Me._futureSnapshot=Q._futureSnapshot,Me._routerState=Q._routerState,Me.snapshot=Q.snapshot,Me.outlet=Q.outlet,Me.component=Q.component,this.currentActivatedRoute$.next({component:T,activatedRoute:Q})}}return S.\u0275fac=function(T){return new(T||S)(m.$8M("name"),m.$8M("tabs"),m.Y36(Le.Ye),m.Y36(m.SBq),m.Y36(_e.F0),m.Y36(m.R0b),m.Y36(_e.gz),m.Y36(S,12))},S.\u0275dir=m.lG2({type:S,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),S})();class Cr{constructor(J,T,Q){this.route=J,this.childContexts=T,this.parent=Q}get(J,T){return J===_e.gz?this.route:J===_e.y6?this.childContexts:this.parent.get(J,T)}}class Ti{constructor(J){this.ctrl=J}create(J){return this.ctrl.create(J||{})}dismiss(J,T,Q){return this.ctrl.dismiss(J,T,Q)}getTop(){return this.ctrl.getTop()}}let os=(()=>{class S extends Ti{constructor(){super(Ce.a)}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Qi=(()=>{class S extends Ti{constructor(){super(Ce.m),this.angularDelegate=(0,m.f3M)(Hi),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac}),S})(),Wi=(()=>{class S extends Ti{constructor(){super(Ce.c),this.angularDelegate=(0,m.f3M)(Hi),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac}),S})();class Bi{shouldDetach(J){return!1}shouldAttach(J){return!1}store(J,T){}retrieve(J){return null}shouldReuseRoute(J,T){if(J.routeConfig!==T.routeConfig)return!1;const Q=J.params,Me=T.params,Kt=Object.keys(Q),Ln=Object.keys(Me);if(Kt.length!==Ln.length)return!1;for(const Yn of Kt)if(Me[Yn]!==Q[Yn])return!1;return!0}}const To=(S,J,T)=>()=>{if(J.defaultView&&typeof window<"u"){(0,qe.s)({...S,_zoneGate:Kt=>T.run(Kt)});const Me="__zone_symbol__addEventListener"in J.body?"__zone_symbol__addEventListener":"addEventListener";return function _t(){var S=[];if(typeof window<"u"){var J=window;(!J.customElements||J.Element&&(!J.Element.prototype.closest||!J.Element.prototype.matches||!J.Element.prototype.remove||!J.Element.prototype.getRootNode))&&S.push(L.e(6748).then(L.t.bind(L,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||J.NodeList&&!J.NodeList.prototype.forEach||!J.fetch||!function(){try{var Q=new URL("b","http://a");return Q.pathname="c%20d","http://a/c%20d"===Q.href&&Q.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&S.push(L.e(2214).then(L.t.bind(L,4144,23)))}return Promise.all(S)}().then(()=>((S,J)=>typeof window>"u"?Promise.resolve():(0,ze.p)().then(()=>(nt(),(0,ze.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),J))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:He,jmp:Kt=>T.runOutsideAngular(Kt),ael(Kt,Ln,Yn,kr){Kt[Me](Ln,Yn,kr)},rel(Kt,Ln,Yn,kr){Kt.removeEventListener(Ln,Yn,kr)}}))}};let Ao=(()=>{class S{static forRoot(T){return{ngModule:S,providers:[{provide:gn,useValue:T},{provide:m.ip1,useFactory:To,multi:!0,deps:[gn,Le.K0,m.R0b]}]}}}return S.\u0275fac=function(T){return new(T||S)},S.\u0275mod=m.oAB({type:S}),S.\u0275inj=m.cJS({providers:[Hi,Qi,Wi],imports:[Le.ez]}),S})()},5132:(pn,dt,L)=>{"use strict";L.d(dt,{Gb:()=>y.Gb});var y=L(579)},259:(pn,dt,L)=>{"use strict";L.d(dt,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=L(6881);(0,y.registerVersion)("firebase","9.22.0","app")},9260:(pn,dt,L)=>{"use strict";L.d(dt,{Z:()=>y.Z});var y=L(3942);y.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(pn,dt,L)=>{"use strict";L.r(dt);var y=L(5861),m=L(3942),le=L(1389),ve=L(2090),he=(L(6881),L(1877),L(4859));function _e(){return window}function we(){return we=(0,y.Z)(function*(K,z,q){var Pe;const{BuildInfo:it}=_e();(0,le.as)(z.sessionId,"AuthEvent did not contain a session ID");const ke=yield function Ce(K){return ct.apply(this,arguments)}(z.sessionId),ht={};return(0,le.at)()?ht.ibi=it.packageName:(0,le.au)()?ht.apn=it.packageName:(0,le.av)(K,"operation-not-supported-in-this-environment"),it.displayName&&(ht.appDisplayName=it.displayName),ht.sessionId=ke,(0,le.aw)(K,q,z.type,void 0,null!==(Pe=z.eventId)&&void 0!==Pe?Pe:void 0,ht)}),we.apply(this,arguments)}function ge(){return(ge=(0,y.Z)(function*(K){const{BuildInfo:z}=_e(),q={};(0,le.at)()?q.iosBundleId=z.packageName:(0,le.au)()?q.androidPackageName=z.packageName:(0,le.av)(K,"operation-not-supported-in-this-environment"),yield(0,le.ax)(K,q)})).apply(this,arguments)}function It(){return(It=(0,y.Z)(function*(K,z,q){const{cordova:Pe}=_e();let it=()=>{};try{yield new Promise((ke,ht)=>{let Ct=null;function jt(){var fn;ke();const Wn=null===(fn=Pe.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof Wn&&Wn(),"function"==typeof(null==q?void 0:q.close)&&q.close()}function Ut(){Ct||(Ct=window.setTimeout(()=>{ht((0,le.az)(K,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===(null==document?void 0:document.visibilityState)&&Ut()}z.addPassiveListener(jt),document.addEventListener("resume",Ut,!1),(0,le.au)()&&document.addEventListener("visibilitychange",on,!1),it=()=>{z.removePassiveListener(jt),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",on,!1),Ct&&window.clearTimeout(Ct)}})}finally{it()}})).apply(this,arguments)}function ct(){return(ct=(0,y.Z)(function*(K){const z=function at(K){if((0,le.as)(/[0-9a-zA-Z]+/.test(K),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(K);const z=new ArrayBuffer(K.length),q=new Uint8Array(z);for(let Pe=0;Pe<K.length;Pe++)q[Pe]=K.charCodeAt(Pe);return q}(K),q=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(q)).map(it=>it.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class et extends le.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(z)),super.onEvent(z)}initialized(){var z=this;return(0,y.Z)(function*(){yield z.initPromise})()}}function Ye(K){return Le.apply(this,arguments)}function Le(){return(Le=(0,y.Z)(function*(K){const z=yield pt()._get(Et(K));return z&&(yield pt()._remove(Et(K))),z})).apply(this,arguments)}function nt(){const K=[];for(let q=0;q<20;q++){const Pe=Math.floor(62*Math.random());K.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Pe))}return K.join("")}function pt(){return(0,le.aC)(le.b)}function Et(K){return(0,le.aD)("authEvent",K.config.apiKey,K.name)}function Ve(K){if(null==K||!K.includes("?"))return{};const[z,...q]=K.split("?");return(0,ve.zd)(q.join("?"))}const Fe=class Ne{constructor(){this._redirectPersistence=le.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=le.aE,this._overrideRedirectResult=le.aF}_initialize(z){var q=this;return(0,y.Z)(function*(){const Pe=z._key();let it=q.eventManagers.get(Pe);return it||(it=new et(z),q.eventManagers.set(Pe,it),q.attachCallbackListeners(z,it)),it})()}_openPopup(z){(0,le.av)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,q,Pe,it){var ke=this;return(0,y.Z)(function*(){!function Ae(K){var z,q,Pe,it,ke,ht,Ct,jt,Ut,on;const fn=_e();(0,le.aA)("function"==typeof(null===(z=null==fn?void 0:fn.universalLinks)||void 0===z?void 0:z.subscribe),K,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,le.aA)(typeof(null===(q=null==fn?void 0:fn.BuildInfo)||void 0===q?void 0:q.packageName)<"u",K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,le.aA)("function"==typeof(null===(ke=null===(it=null===(Pe=null==fn?void 0:fn.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===it?void 0:it.browsertab)||void 0===ke?void 0:ke.openUrl),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,le.aA)("function"==typeof(null===(jt=null===(Ct=null===(ht=null==fn?void 0:fn.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Ct?void 0:Ct.browsertab)||void 0===jt?void 0:jt.isAvailable),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,le.aA)("function"==typeof(null===(on=null===(Ut=null==fn?void 0:fn.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===on?void 0:on.open),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const ht=yield ke._initialize(z);yield ht.initialized(),ht.resetRedirect(),(0,le.aG)(),yield ke._originValidation(z);const Ct=function ft(K,z,q=null){return{type:z,eventId:q,urlResponse:null,sessionId:nt(),postBody:null,tenantId:K.tenantId,error:(0,le.az)(K,"no-auth-event")}}(z,Pe,it);yield function vt(K,z){return pt()._set(Et(K),z)}(z,Ct);const jt=yield function U(K,z,q){return we.apply(this,arguments)}(z,Ct,q),Ut=yield function Ue(K){const{cordova:z}=_e();return new Promise(q=>{z.plugins.browsertab.isAvailable(Pe=>{let it=null;Pe?z.plugins.browsertab.openUrl(K):it=z.InAppBrowser.open(K,(0,le.ay)()?"_blank":"_system","location=yes"),q(it)})})}(jt);return function qe(K,z,q){return It.apply(this,arguments)}(z,ht,Ut)})()}_isIframeWebStorageSupported(z,q){throw new Error("Method not implemented.")}_originValidation(z){const q=z._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function je(K){return ge.apply(this,arguments)}(z)),this.originValidationPromises[q]}attachCallbackListeners(z,q){const{universalLinks:Pe,handleOpenURL:it,BuildInfo:ke}=_e(),ht=setTimeout((0,y.Z)(function*(){yield Ye(z),q.onEvent(He())}),500),Ct=function(){var on=(0,y.Z)(function*(fn){clearTimeout(ht);const Wn=yield Ye(z);let kn=null;Wn&&null!=fn&&fn.url&&(kn=function _t(K,z){var q,Pe;const it=function xe(K){const z=Ve(K),q=z.link?decodeURIComponent(z.link):void 0,Pe=Ve(q).link,it=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return Ve(it).link||it||Pe||q||K}(z);if(it.includes("/__/auth/callback")){const ke=Ve(it),ht=ke.firebaseError?function ce(K){try{return JSON.parse(K)}catch{return null}}(decodeURIComponent(ke.firebaseError)):null,Ct=null===(Pe=null===(q=null==ht?void 0:ht.code)||void 0===q?void 0:q.split("auth/"))||void 0===Pe?void 0:Pe[1],jt=Ct?(0,le.az)(Ct):null;return jt?{type:K.type,eventId:K.eventId,tenantId:K.tenantId,error:jt,urlResponse:null,sessionId:null,postBody:null}:{type:K.type,eventId:K.eventId,tenantId:K.tenantId,sessionId:K.sessionId,urlResponse:it,postBody:null}}return null}(Wn,fn.url)),q.onEvent(kn||He())});return function(Wn){return on.apply(this,arguments)}}();typeof Pe<"u"&&"function"==typeof Pe.subscribe&&Pe.subscribe(null,Ct);const jt=it,Ut=`${ke.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var on=(0,y.Z)(function*(fn){if(fn.toLowerCase().startsWith(Ut)&&Ct({url:fn}),"function"==typeof jt)try{jt(fn)}catch(Wn){console.error(Wn)}});return function(fn){return on.apply(this,arguments)}}()}};function He(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,le.az)("no-auth-event")}}function un(){var K;return(null===(K=null==self?void 0:self.location)||void 0===K?void 0:K.protocol)||null}function Je(K=(0,ve.z$)()){return!("file:"!==un()&&"ionic:"!==un()&&"capacitor:"!==un()||!K.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const K=self.localStorage,z=le.aL();if(K)return K.setItem(z,"1"),K.removeItem(z),!function Tn(K=(0,ve.z$)()){return function Qt(){return(0,ve.w1)()&&11===(null==document?void 0:document.documentMode)}()||function yn(K=(0,ve.z$)()){return/Edge\/\d+/.test(K)}(K)}()||(0,ve.hl)()}catch{return Nt()&&(0,ve.hl)()}return!1}function Nt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function In(){return(function Tt(){return"http:"===un()||"https:"===un()}()||(0,ve.ru)()||Je())&&!function Ot(){return(0,ve.b$)()||(0,ve.UG)()}()&&Dn()&&!Nt()}function Ft(){return Je()&&typeof document<"u"}function sr(){return(sr=(0,y.Z)(function*(){return!!Ft()&&new Promise(K=>{const z=setTimeout(()=>{K(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),K(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},xr=le.aA,dr="persistence";function Or(K){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(K){yield K._initializationPromise;const z=vn(),q=le.aD(dr,K.config.apiKey,K.name);z&&z.setItem(q,K._getPersistence())})).apply(this,arguments)}function vn(){var K;try{return(null===(K=function yr(){return typeof window<"u"?window:null}())||void 0===K?void 0:K.sessionStorage)||null}catch{return null}}const $n=le.aA;class Ir{constructor(){this.browserResolver=le.aC(le.k),this.cordovaResolver=le.aC(Fe),this.underlyingResolver=null,this._redirectPersistence=le.a,this._completeRedirectFn=le.aE,this._overrideRedirectResult=le.aF}_initialize(z){var q=this;return(0,y.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,q,Pe,it){var ke=this;return(0,y.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openPopup(z,q,Pe,it)})()}_openRedirect(z,q,Pe,it){var ke=this;return(0,y.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openRedirect(z,q,Pe,it)})()}_isIframeWebStorageSupported(z,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,q)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return Ft()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $n(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,y.Z)(function*(){if(z.underlyingResolver)return;const q=yield function or(){return sr.apply(this,arguments)}();z.underlyingResolver=q?z.cordovaResolver:z.browserResolver})()}}function vr(K){return K.unwrap()}function Lr(K){return Gn(K)}function Gn(K){const{_tokenResponse:z}=K instanceof ve.ZR?K.customData:K;if(!z)return null;if(!(K instanceof ve.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return le.P.credentialFromResult(K);const q=z.providerId;if(!q||q===le.p.PASSWORD)return null;let Pe;switch(q){case le.p.GOOGLE:Pe=le.V;break;case le.p.FACEBOOK:Pe=le.U;break;case le.p.GITHUB:Pe=le.W;break;case le.p.TWITTER:Pe=le.Z;break;default:const{oauthIdToken:it,oauthAccessToken:ke,oauthTokenSecret:ht,pendingToken:Ct,nonce:jt}=z;return ke||ht||it||Ct?Ct?q.startsWith("saml.")?le.aO._create(q,Ct):le.L._fromParams({providerId:q,signInMethod:q,pendingToken:Ct,idToken:it,accessToken:ke}):new le.X(q).credential({idToken:it,accessToken:ke,rawNonce:jt}):null}return K instanceof ve.ZR?Pe.credentialFromError(K):Pe.credentialFromResult(K)}function Rn(K,z){return z.catch(q=>{throw q instanceof ve.ZR&&function Mr(K,z){var q;const Pe=null===(q=z.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===(null==z?void 0:z.code))z.resolver=new qt(K,le.aq(K,z));else if(Pe){const it=Gn(z),ke=z;it&&(ke.credential=it,ke.tenantId=Pe.tenantId||void 0,ke.email=Pe.email||void 0,ke.phoneNumber=Pe.phoneNumber||void 0)}}(K,q),q}).then(q=>{const it=q.user;return{operationType:q.operationType,credential:Lr(q),additionalUserInfo:le.ao(q),user:me.getOrCreate(it)}})}function ci(K,z){return Un.apply(this,arguments)}function Un(){return(Un=(0,y.Z)(function*(K,z){const q=yield z;return{verificationId:q.verificationId,confirm:Pe=>Rn(K,q.confirm(Pe))}})).apply(this,arguments)}class qt{constructor(z,q){this.resolver=q,this.auth=function ar(K){return K.wrapped()}(z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return Rn(vr(this.auth),this.resolver.resolveSignIn(z))}}class me{constructor(z){this._delegate=z,this.multiFactor=le.ar(z)}static getOrCreate(z){return me.USER_MAP.has(z)||me.USER_MAP.set(z,new me(z)),me.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var q=this;return(0,y.Z)(function*(){return Rn(q.auth,le.a0(q._delegate,z))})()}linkWithPhoneNumber(z,q){var Pe=this;return(0,y.Z)(function*(){return ci(Pe.auth,le.l(Pe._delegate,z,q))})()}linkWithPopup(z){var q=this;return(0,y.Z)(function*(){return Rn(q.auth,le.d(q._delegate,z,Ir))})()}linkWithRedirect(z){var q=this;return(0,y.Z)(function*(){return yield Or(le.aH(q.auth)),le.g(q._delegate,z,Ir)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var q=this;return(0,y.Z)(function*(){return Rn(q.auth,le.a1(q._delegate,z))})()}reauthenticateWithPhoneNumber(z,q){return ci(this.auth,le.r(this._delegate,z,q))}reauthenticateWithPopup(z){return Rn(this.auth,le.e(this._delegate,z,Ir))}reauthenticateWithRedirect(z){var q=this;return(0,y.Z)(function*(){return yield Or(le.aH(q.auth)),le.h(q._delegate,z,Ir)})()}sendEmailVerification(z){return le.ae(this._delegate,z)}unlink(z){var q=this;return(0,y.Z)(function*(){return yield le.an(q._delegate,z),q})()}updateEmail(z){return le.aj(this._delegate,z)}updatePassword(z){return le.ak(this._delegate,z)}updatePhoneNumber(z){return le.u(this._delegate,z)}updateProfile(z){return le.ai(this._delegate,z)}verifyBeforeUpdateEmail(z,q){return le.af(this._delegate,z,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}me.USER_MAP=new WeakMap;const Ge=le.aA;let At=(()=>{class K{constructor(q,Pe){if(this.app=q,Pe.isInitialized())return this._delegate=Pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:it}=q.options;Ge(it,"invalid-api-key",{appName:q.name}),Ge(it,"invalid-api-key",{appName:q.name});const ke=typeof window<"u"?Ir:void 0;this._delegate=Pe.initialize({options:{persistence:sn(it,q.name),popupRedirectResolver:ke}}),this._delegate._updateErrorMap(le.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?me.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Pe){le.I(this._delegate,q,Pe)}applyActionCode(q){return le.a5(this._delegate,q)}checkActionCode(q){return le.a6(this._delegate,q)}confirmPasswordReset(q,Pe){return le.a4(this._delegate,q,Pe)}createUserWithEmailAndPassword(q,Pe){var it=this;return(0,y.Z)(function*(){return Rn(it._delegate,le.a8(it._delegate,q,Pe))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return le.ad(this._delegate,q)}isSignInWithEmailLink(q){return le.ab(this._delegate,q)}getRedirectResult(){var q=this;return(0,y.Z)(function*(){Ge(In(),q._delegate,"operation-not-supported-in-this-environment");const Pe=yield le.j(q._delegate,Ir);return Pe?Rn(q._delegate,Promise.resolve(Pe)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function mt(K,z){(0,le.aH)(K)._logFramework(z)}(this._delegate,q)}onAuthStateChanged(q,Pe,it){const{next:ke,error:ht,complete:Ct}=Xt(q,Pe,it);return this._delegate.onAuthStateChanged(ke,ht,Ct)}onIdTokenChanged(q,Pe,it){const{next:ke,error:ht,complete:Ct}=Xt(q,Pe,it);return this._delegate.onIdTokenChanged(ke,ht,Ct)}sendSignInLinkToEmail(q,Pe){return le.aa(this._delegate,q,Pe)}sendPasswordResetEmail(q,Pe){return le.a3(this._delegate,q,Pe||void 0)}setPersistence(q){var Pe=this;return(0,y.Z)(function*(){let it;switch(function rr(K,z){xr(Object.values(tn).includes(z),K,"invalid-persistence-type"),(0,ve.b$)()?xr(z!==tn.SESSION,K,"unsupported-persistence-type"):(0,ve.UG)()?xr(z===tn.NONE,K,"unsupported-persistence-type"):Nt()?xr(z===tn.NONE||z===tn.LOCAL&&(0,ve.hl)(),K,"unsupported-persistence-type"):xr(z===tn.NONE||Dn(),K,"unsupported-persistence-type")}(Pe._delegate,q),q){case tn.SESSION:it=le.a;break;case tn.LOCAL:it=(yield le.aC(le.i)._isAvailable())?le.i:le.b;break;case tn.NONE:it=le.N;break;default:return le.av("argument-error",{appName:Pe._delegate.name})}return Pe._delegate.setPersistence(it)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return Rn(this._delegate,le._(this._delegate))}signInWithCredential(q){return Rn(this._delegate,le.$(this._delegate,q))}signInWithCustomToken(q){return Rn(this._delegate,le.a2(this._delegate,q))}signInWithEmailAndPassword(q,Pe){return Rn(this._delegate,le.a9(this._delegate,q,Pe))}signInWithEmailLink(q,Pe){return Rn(this._delegate,le.ac(this._delegate,q,Pe))}signInWithPhoneNumber(q,Pe){return ci(this._delegate,le.s(this._delegate,q,Pe))}signInWithPopup(q){var Pe=this;return(0,y.Z)(function*(){return Ge(In(),Pe._delegate,"operation-not-supported-in-this-environment"),Rn(Pe._delegate,le.c(Pe._delegate,q,Ir))})()}signInWithRedirect(q){var Pe=this;return(0,y.Z)(function*(){return Ge(In(),Pe._delegate,"operation-not-supported-in-this-environment"),yield Or(Pe._delegate),le.f(Pe._delegate,q,Ir)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return le.a7(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return K.Persistence=tn,K})();function Xt(K,z,q){let Pe=K;"function"!=typeof K&&({next:Pe,error:z,complete:q}=K);const it=Pe;return{next:ht=>it(ht&&me.getOrCreate(ht)),error:z,complete:q}}function sn(K,z){const q=function Sn(K,z){const q=vn();if(!q)return[];const Pe=le.aD(dr,K,z);switch(q.getItem(Pe)){case tn.NONE:return[le.N];case tn.LOCAL:return[le.i,le.a];case tn.SESSION:return[le.a];default:return[]}}(K,z);if(typeof self<"u"&&!q.includes(le.i)&&q.push(le.i),typeof window<"u")for(const Pe of[le.b,le.a])q.includes(Pe)||q.push(Pe);return q.includes(le.N)||q.push(le.N),q}class lr{constructor(){this.providerId="phone",this._delegate=new le.P(vr(m.Z.auth()))}static credential(z,q){return le.P.credential(z,q)}verifyPhoneNumber(z,q){return this._delegate.verifyPhoneNumber(z,q)}unwrap(){return this._delegate}}lr.PHONE_SIGN_IN_METHOD=le.P.PHONE_SIGN_IN_METHOD,lr.PROVIDER_ID=le.P.PROVIDER_ID;const On=le.aA;class _r{constructor(z,q,Pe=m.Z.app()){var it;On(null===(it=Pe.options)||void 0===it?void 0:it.apiKey,"invalid-api-key",{appName:Pe.name}),this._delegate=new le.R(z,q,Pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function de(K){K.INTERNAL.registerComponent(new he.wA("auth-compat",z=>{const q=z.getProvider("app-compat").getImmediate(),Pe=z.getProvider("auth");return new At(q,Pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:le.A.EMAIL_SIGNIN,PASSWORD_RESET:le.A.PASSWORD_RESET,RECOVER_EMAIL:le.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:le.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:le.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:le.A.VERIFY_EMAIL}},EmailAuthProvider:le.Q,FacebookAuthProvider:le.U,GithubAuthProvider:le.W,GoogleAuthProvider:le.V,OAuthProvider:le.X,SAMLAuthProvider:le.Y,PhoneAuthProvider:lr,PhoneMultiFactorGenerator:le.m,RecaptchaVerifier:_r,TwitterAuthProvider:le.Z,Auth:At,AuthCredential:le.J,Error:ve.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.4.2")}(m.Z)},5861:(pn,dt,L)=>{"use strict";function y(le,ve,De,Re,he,_e,Be){try{var U=le[_e](Be),we=U.value}catch(je){return void De(je)}U.done?ve(we):Promise.resolve(we).then(Re,he)}function m(le){return function(){var ve=this,De=arguments;return new Promise(function(Re,he){var _e=le.apply(ve,De);function Be(we){y(_e,Re,he,Be,U,"next",we)}function U(we){y(_e,Re,he,Be,U,"throw",we)}Be(void 0)})}}L.d(dt,{Z:()=>m})}},pn=>{pn(pn.s=3813)}]);