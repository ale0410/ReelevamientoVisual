"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[311],{311:(I,P,a)=>{a.r(P),a.d(P,{LindasPageModule:()=>U});var n,d=a(4755),R=a(5030),c=a(9972),g=a(96),l=a(5861),f=a(9260),D=a(7662),e=a(2223),T=a(8261),m=(n=function(o,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])})(o,t)},function(o,t){function r(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),O=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return m(o,n),o.prototype.getPicture=function(t){return(0,T.DM)(this,"getPicture",{callbackOrder:"reverse"},arguments)},o.prototype.cleanup=function(){return(0,T.DM)(this,"cleanup",{platforms:["iOS"]},arguments)},o.pluginName="Camera",o.plugin="cordova-plugin-camera",o.pluginRef="navigator.camera",o.repo="https://github.com/apache/cordova-plugin-camera",o.platforms=["Android","Browser","iOS","Windows"],o}(T.KY),v=new O,h=a(2110);function L(n,o){if(1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-content"),e._UZ(2,"img",5),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.s9C("src",t,e.LSH)}}function _(n,o){if(1&n&&(e.TgZ(0,"ion-list"),e.YNc(1,L,3,1,"ion-card",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.captureDataUrl)}}const E=[{path:"",component:(()=>{class n{constructor(t,r,i,s,p,u){this.navCtrl=t,this.navParams=r,this.router=i,this.camera=s,this.imgProvider=p,this.alertCtrl=u,this.clasificacionFoto=0,this.slideOpts={initialSlide:1,speed:400},this.usuario=JSON.parse(sessionStorage.getItem("usuario")),this.TraerFoto(),this.captureDataUrl=new Array}SacarFoto(){var t=this;return(0,l.Z)(function*(){const r={quality:50,destinationType:t.camera.DestinationType.DATA_URL,encodingType:t.camera.EncodingType.JPEG,mediaType:t.camera.MediaType.PICTURE,correctOrientation:!0};yield t.camera.getPicture(r).then(i=>{t.captureDataUrl.push("data:image/jpeg;base64,"+i),t.hayFotos=!0},i=>{t.alertCtrl.create({buttons:["Ok"]})})})()}GuardarFotos(){var t=this;return(0,l.Z)(function*(){let r=new D.b;yield t.captureDataUrl.forEach(function(){var s=(0,l.Z)(function*(p){let u="lindas/"+Date.now();yield f.Z.storage().ref(u).putString(p,"data_url"),yield f.Z.storage().ref().child(u).getDownloadURL().then(function(){var A=(0,l.Z)(function*(y){r.path=y,r.nombre=u,r.usuario=t.usuario,r.votos=new Array,yield t.imgProvider.GuardarData(r,"lindas"),console.log(y),t.captureDataUrl.splice(0)});return function(y){return A.apply(this,arguments)}}()).catch(A=>{console.log(A)})});return function(p){return s.apply(this,arguments)}}())})()}IrAListalindas(){this.router.navigateByUrl("lista-lindas")}TraerFoto(){this.imgProvider.TraerFotosLindas().subscribe(t=>{this.fotos=t.map(function(r,i){return r})}),console.log(this.fotos)}MisFotos(){this.router.navigateByUrl("mis-fotos")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.SH),e.Y36(c.X1),e.Y36(g.F0),e.Y36(v),e.Y36(h.O),e.Y36(c.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lindas"]],decls:16,vars:2,consts:[["padding","",1,"fondo"],["ion-button","","color","light","outline","",3,"click"],["ion-button","","color","light","outline","",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header")(1,"ion-title"),e._uU(2,"Lindas"),e.qZA()(),e.TgZ(3,"ion-content",0)(4,"button",1),e.NdJ("click",function(){return r.SacarFoto()}),e._uU(5,"Tomar foto"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"button",2),e.NdJ("click",function(){return r.GuardarFotos()}),e._uU(8," Guardar fotos"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"button",1),e.NdJ("click",function(){return r.IrAListalindas()}),e._uU(11," Ver cosas lindas "),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"button",1),e.NdJ("click",function(){return r.MisFotos()}),e._uU(14," Mis fotos"),e.qZA(),e.YNc(15,_,2,1,"ion-list",3),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",!r.hayFotos),e.xp6(8),e.Q6J("ngIf",r.hayFotos))},dependencies:[d.sg,d.O5,c.PM,c.FN,c.W2,c.Gu,c.q_,c.wd],styles:["page-lindas[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center;justify-content:center}page-lindas[_ngcontent-%COMP%]   .fondo[_ngcontent-%COMP%]{background-color:#289bf9}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(E),g.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,R.u5,c.Pc,M]}),n})()}}]);