"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[420],{7904:(S,y,n)=>{n.d(y,{E:()=>_});var u=n(5861),c=n(89),i=n(2223),f=n(7622),T=n(5197),P=n(1085);let _=(()=>{class e{constructor(r,l,d,h){this.firestore=r,this.authService=l,this.db=d,this.angFirestore=h;const g=(0,c.hJ)(this.firestore,"relevamiento");this.items$=(0,c.BS)(g)}savePhoto(r,l){const d=this.angFirestore.collection("fotos").doc(r);d.get().subscribe(h=>{h.exists?console.log("La foto ya existe en la base de datos"):(d.set({url:l,votos:0}),console.log("La foto se ha guardado en la base de datos"))})}getUsers(){var r=this;return(0,u.Z)(function*(){return r.db.list("users").valueChanges()})()}addItem(r){var l=this;return(0,u.Z)(function*(){const d=l.angFirestore.createId();return r.id=d,l.angFirestore.collection("relevamiento").doc(r.id).set(r)})()}getAllItems(){var r=this;return(0,u.Z)(function*(){const l=(0,c.hJ)(r.firestore,"relevamiento"),d=yield(0,c.PL)((0,c.IO)(l,(0,c.Xo)("fecha","desc"))),h=[];return d.forEach(g=>{const m=g.data();h.push(m)}),h})()}getAllItemsType(r){var l=this;return(0,u.Z)(function*(){const d=(0,c.hJ)(l.firestore,"relevamiento"),h=yield(0,c.PL)((0,c.IO)(d,(0,c.ar)("tipo","==",r)));console.log(h);const g=[];return h.forEach(m=>{const O=m.data();g.push(O)}),g})()}updateItem(r){var l=this;return(0,u.Z)(function*(){const d=(0,c.JU)(l.firestore,"relevamiento",r.id);yield(0,c.pl)(d,r)})()}voteForPhoto(r){var l=this;return(0,u.Z)(function*(){l.firestore.toJSON.call("relevamiento")})()}}return e.\u0275fac=function(r){return new(r||e)(i.LFG(c.gg),i.LFG(f.e),i.LFG(T.KQ),i.LFG(P.ST))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},420:(S,y,n)=>{n.r(y),n.d(y,{Tab3PageModule:()=>A});var u=n(4755),c=n(5030),i=n(9972),f=n(5559),T=n(5861),P=n(3192),_=n(4208),e=n(2223),M=n(7622),r=n(7904);function l(s,p){1&s&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Feas"),e.qZA()())}function d(s,p){1&s&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Lindas"),e.qZA()())}const g=[{path:"",component:(()=>{class s{constructor(t,a,o,v){this.router=t,this.loginService=a,this.loadingCtrl=o,this.firestoresService=v,this.chartType="bar",this.cosasLindas=[],this.cosasFeas=[],this.uploading=!1,this.pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}}},this.pieChartData={labels:[["Download","Sales"],["In","Store","Sales"],"Mail Sales"],datasets:[{data:[300,500,100]}]},this.pieChartType="pie",this.barChartOptions={responsive:!0,scales:{x:{},y:{min:10}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartData={labels:["2006","2007","2008","2009","2010","2011","2012"],datasets:[{data:[65,59,80,81,56,55,40],label:"Series A"},{data:[28,48,40,19,86,27,90],label:"Series B"}]}}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}chartClicked({event:t,active:a}){console.log(t,a)}chartHovered({event:t,active:a}){console.log(t,a)}randomize(){var t;this.barChartData.datasets[0].data=[Math.round(100*Math.random()),59,80,Math.round(100*Math.random()),56,Math.round(100*Math.random()),40],null===(t=this.chart)||void 0===t||t.update()}changeLabels(){var t;const a=["hen","variable","embryo","instal","pleasant","physical","bomber","army","add","film","conductor","comfortable","flourish","establish","circumstance","chimney","crack","hall","energy","treat","window","shareholder","division","disk","temptation","chord","left","hospital","beef","patrol","satisfied","academy","acceptance","ivory","aquarium","building","store","replace","language","redeem","honest","intention","silk","opera","sleep","innocent","ignore","suite","applaud","funny"];this.pieChartData.labels=new Array(3).map(v=>a[Math.trunc(Math.random()*a.length)]),null===(t=this.chart)||void 0===t||t.update()}addSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.push(["Line 1","Line 2","Line 3"]),this.pieChartData.datasets[0].data.push(400),null===(t=this.chart)||void 0===t||t.update()}removeSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.pop(),this.pieChartData.datasets[0].data.pop(),null===(t=this.chart)||void 0===t||t.update()}changeLegendPosition(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.position="left"===this.pieChartOptions.plugins.legend.position?"top":"left"),null===(o=this.chart)||void 0===o||o.render()}toggleLegend(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.display=!this.pieChartOptions.plugins.legend.display),null===(o=this.chart)||void 0===o||o.render()}getAllData(){var t=this;return(0,T.Z)(function*(){t.uploading=!0;const a=yield t.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield a.present();try{t.cosasLindas=yield t.firestoresService.getAllItemsType("Cosas Lindas"),t.cosasFeas=yield t.firestoresService.getAllItemsType("Cosas Feas"),t.createPieChart(),t.createBarra()}catch(o){console.log("Error al obtener datos:",o)}finally{t.uploading=!1,yield a.dismiss()}})()}createBarra(){const t=document.getElementById("myChart"),a=this.cosasFeas.map(C=>C.id),o=this.cosasFeas.map(C=>{var b;return null===(b=C.votos)||void 0===b?void 0:b.length}),D=this.generateBackgroundColors(a.length);this.chart=new P.kL(t,{type:"bar",data:{labels:a,datasets:[{label:"Cantidad",data:o,backgroundColor:D}]},options:{responsive:!0,scales:{xAxes:{ticks:{backdropColor:"red",backdropPadding:100,z:0}},yAxes:{grid:{display:!1}}},plugins:{legend:{display:!1}}}}),this.chart.update()}createPieChart(){const t=document.getElementById("pieChart"),a=this.cosasLindas.map(E=>E.id),o=this.cosasLindas.map(E=>{var L;return null===(L=E.votos)||void 0===L?void 0:L.length}),D=this.generateBackgroundColors(a.length);new P.kL(t,{type:"pie",data:{labels:a,datasets:[{data:o,backgroundColor:D,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}generateBackgroundColors(t){const a=[];for(let o=0;o<t;o++){const v=this.generateRandomColor();a.push(v)}return a}generateRandomColor(){let a="#";for(let o=0;o<6;o++)a+="0123456789ABCDEF"[Math.floor(16*Math.random())];return a}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(f.F0),e.Y36(M.e),e.Y36(i.HT),e.Y36(r.E))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-tab3"]],viewQuery:function(t,a){if(1&t&&e.Gf(_.jh,5),2&t){let o;e.iGM(o=e.CRH())&&(a.chartC=o.first)}},decls:16,vars:4,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],[4,"ngIf"],["baseChart","","id","myChart","width","400","data","barChartData","options","barChartOptions","type","barChartType",1,"chart"],["baseChart","","id","pieChart","width","400","data","pieChartData","type","pieChartType","options","pieChartOptions",1,"chart"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return a.logout()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Gr\xe1ficos "),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-card"),e.YNc(9,l,3,0,"ion-card-header",5),e.TgZ(10,"ion-card-content"),e._UZ(11,"canvas",6),e.qZA()(),e.TgZ(12,"ion-card"),e.YNc(13,d,3,0,"ion-card-header",5),e.TgZ(14,"ion-card-content"),e._UZ(15,"canvas",7),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",!a.uploading),e.xp6(4),e.Q6J("ngIf",!a.uploading))},dependencies:[u.O5,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.Dq,i.W2,i.Gu,i.gu,i.wd,i.sr],styles:["ion-card-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-title[_ngcontent-%COMP%]{color:#f0f8ff}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}ion-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-content[_ngcontent-%COMP%]{--background: url(floor.08978e6a924b6e32.jpg)}ion-card[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-header[_ngcontent-%COMP%]{background-color:#04395b}ion-card-content[_ngcontent-%COMP%]{background-image:url(floor.08978e6a924b6e32.jpg)}"]}),s})()}];let m=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.Bz.forChild(g),f.Bz]}),s})();var O=n(581);let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.ez,c.u5,i.Pc,O.e,m]}),s})()}}]);