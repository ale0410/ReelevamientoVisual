"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[420],{7904:(D,y,r)=>{r.d(y,{E:()=>T});var h=r(5861),i=r(89),s=r(2223),f=r(7622),P=r(5197);let T=(()=>{class g{constructor(l,c,d){this.firestore=l,this.authService=c,this.db=d;const u=(0,i.hJ)(this.firestore,"relevamiento");this.items$=(0,i.BS)(u)}getUsers(){var l=this;return(0,h.Z)(function*(){return l.db.list("users").valueChanges()})()}addItem(l){var c=this;return(0,h.Z)(function*(){const d=(0,i.hJ)(c.firestore,"relevamiento");return(0,i.ET)(d,l)})()}getAllItems(){var l=this;return(0,h.Z)(function*(){const c=(0,i.hJ)(l.firestore,"relevamiento"),d=yield(0,i.PL)((0,i.IO)(c,(0,i.Xo)("fecha","desc"))),u=[];return d.forEach(v=>{const C=v.data();u.push(C)}),u})()}getAllItemsType(l){var c=this;return(0,h.Z)(function*(){const d=(0,i.hJ)(c.firestore,"relevamiento"),u=yield(0,i.PL)((0,i.IO)(d,(0,i.ar)("tipo","==",l)));console.log(u);const v=[];return u.forEach(C=>{const M=C.data();v.push(M)}),v})()}updateItem(l){var c=this;return(0,h.Z)(function*(){const d=(0,i.JU)(c.firestore,"relevamiento",l.id);yield(0,i.pl)(d,l,{merge:!0})})()}voteForPhoto(l){var c=this;return(0,h.Z)(function*(){c.firestore.toJSON.call("relevamiento")})()}}return g.\u0275fac=function(l){return new(l||g)(s.LFG(i.gg),s.LFG(f.e),s.LFG(P.KQ))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},420:(D,y,r)=>{r.r(y),r.d(y,{Tab3PageModule:()=>E});var h=r(4755),i=r(5030),s=r(9972),f=r(5559),P=r(5861),T=r(3192),g=r(4208),e=r(2223),l=r(7622),c=r(7904);function d(n,p){1&n&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Feas"),e.qZA()())}function u(n,p){1&n&&(e.TgZ(0,"ion-card-header")(1,"ion-card-title"),e._uU(2,"Cosas Lindas"),e.qZA()())}const C=[{path:"",component:(()=>{class n{constructor(t,a,o,m){this.router=t,this.loginService=a,this.loadingCtrl=o,this.firestoresService=m,this.chartType="bar",this.cosasLindas=[],this.cosasFeas=[],this.uploading=!1,this.pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}}},this.pieChartData={labels:[["Download","Sales"],["In","Store","Sales"],"Mail Sales"],datasets:[{data:[300,500,100]}]},this.pieChartType="pie",this.barChartOptions={responsive:!0,scales:{x:{},y:{min:10}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartData={labels:["2006","2007","2008","2009","2010","2011","2012"],datasets:[{data:[65,59,80,81,56,55,40],label:"Series A"},{data:[28,48,40,19,86,27,90],label:"Series B"}]}}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}chartClicked({event:t,active:a}){console.log(t,a)}chartHovered({event:t,active:a}){console.log(t,a)}randomize(){var t;this.barChartData.datasets[0].data=[Math.round(100*Math.random()),59,80,Math.round(100*Math.random()),56,Math.round(100*Math.random()),40],null===(t=this.chart)||void 0===t||t.update()}changeLabels(){var t;const a=["hen","variable","embryo","instal","pleasant","physical","bomber","army","add","film","conductor","comfortable","flourish","establish","circumstance","chimney","crack","hall","energy","treat","window","shareholder","division","disk","temptation","chord","left","hospital","beef","patrol","satisfied","academy","acceptance","ivory","aquarium","building","store","replace","language","redeem","honest","intention","silk","opera","sleep","innocent","ignore","suite","applaud","funny"];this.pieChartData.labels=new Array(3).map(m=>a[Math.trunc(Math.random()*a.length)]),null===(t=this.chart)||void 0===t||t.update()}addSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.push(["Line 1","Line 2","Line 3"]),this.pieChartData.datasets[0].data.push(400),null===(t=this.chart)||void 0===t||t.update()}removeSlice(){var t;this.pieChartData.labels&&this.pieChartData.labels.pop(),this.pieChartData.datasets[0].data.pop(),null===(t=this.chart)||void 0===t||t.update()}changeLegendPosition(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.position="left"===this.pieChartOptions.plugins.legend.position?"top":"left"),null===(o=this.chart)||void 0===o||o.render()}toggleLegend(){var t,a,o;null!==(t=this.pieChartOptions)&&void 0!==t&&null!==(a=t.plugins)&&void 0!==a&&a.legend&&(this.pieChartOptions.plugins.legend.display=!this.pieChartOptions.plugins.legend.display),null===(o=this.chart)||void 0===o||o.render()}getAllData(){var t=this;return(0,P.Z)(function*(){t.uploading=!0;const a=yield t.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield a.present();try{t.cosasLindas=yield t.firestoresService.getAllItemsType("Cosas Lindas"),t.cosasFeas=yield t.firestoresService.getAllItemsType("Cosas Feas"),t.createPieChart(),t.createBarra()}catch(o){console.log("Error al obtener datos:",o)}finally{t.uploading=!1,yield a.dismiss()}})()}createBarra(){const t=document.getElementById("myChart"),a=this.cosasFeas.map(b=>b.name),o=this.cosasFeas.map(b=>b.votos),_=this.generateBackgroundColors(a.length);this.chart=new T.kL(t,{type:"bar",data:{labels:a,datasets:[{label:"Cantidad",data:o,backgroundColor:_}]},options:{responsive:!0,scales:{xAxes:{ticks:{backdropColor:"red",backdropPadding:100,z:0}},yAxes:{grid:{display:!1}}},plugins:{legend:{display:!1}}}}),this.chart.update()}createPieChart(){const t=document.getElementById("pieChart"),a=this.cosasLindas.map(O=>O.name),o=this.cosasLindas.map(O=>O.votos),_=this.generateBackgroundColors(a.length);new T.kL(t,{type:"pie",data:{labels:a,datasets:[{data:o,backgroundColor:_,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}generateBackgroundColors(t){const a=[];for(let o=0;o<t;o++){const m=this.generateRandomColor();a.push(m)}return a}generateRandomColor(){let a="#";for(let o=0;o<6;o++)a+="0123456789ABCDEF"[Math.floor(16*Math.random())];return a}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F0),e.Y36(l.e),e.Y36(s.HT),e.Y36(c.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tab3"]],viewQuery:function(t,a){if(1&t&&e.Gf(g.jh,5),2&t){let o;e.iGM(o=e.CRH())&&(a.chartC=o.first)}},decls:16,vars:4,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],[4,"ngIf"],["baseChart","","id","myChart","width","400","data","barChartData","options","barChartOptions","type","barChartType",1,"chart"],["baseChart","","id","pieChart","width","400","data","pieChartData","type","pieChartType","options","pieChartOptions",1,"chart"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return a.logout()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Gr\xe1ficos "),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-card"),e.YNc(9,d,3,0,"ion-card-header",5),e.TgZ(10,"ion-card-content"),e._UZ(11,"canvas",6),e.qZA()(),e.TgZ(12,"ion-card"),e.YNc(13,u,3,0,"ion-card-header",5),e.TgZ(14,"ion-card-content"),e._UZ(15,"canvas",7),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",!a.uploading),e.xp6(4),e.Q6J("ngIf",!a.uploading))},dependencies:[h.O5,s.YG,s.Sm,s.PM,s.FN,s.Zi,s.Dq,s.W2,s.Gu,s.gu,s.wd,s.sr],styles:["ion-card-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-title[_ngcontent-%COMP%]{color:#f0f8ff}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}ion-header[_ngcontent-%COMP%]{background-color:#585454a9}ion-content[_ngcontent-%COMP%]{--background: url(floor.08978e6a924b6e32.jpg)}ion-card[_ngcontent-%COMP%]{background-color:#585454a9}ion-card-header[_ngcontent-%COMP%]{background-color:#04395b}ion-card-content[_ngcontent-%COMP%]{background-image:url(floor.08978e6a924b6e32.jpg)}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(C),f.Bz]}),n})();var S=r(581);let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.ez,i.u5,s.Pc,S.e,M]}),n})()}}]);