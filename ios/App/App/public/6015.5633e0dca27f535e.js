"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6015],{6015:(L,P,a)=>{a.r(P),a.d(P,{FeasPageModule:()=>I});var o,g=a(4755),R=a(5030),c=a(9972),d=a(5559),p=a(5861),f=a(9260),D=a(7662),e=a(2223),T=a(8261),m=(o=function(r,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])})(r,t)},function(r,t){function n(){this.constructor=r}o(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(o){function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return m(r,o),r.prototype.getPicture=function(t){return(0,T.DM)(this,"getPicture",{callbackOrder:"reverse"},arguments)},r.prototype.cleanup=function(){return(0,T.DM)(this,"cleanup",{platforms:["iOS"]},arguments)},r.pluginName="Camera",r.plugin="cordova-plugin-camera",r.pluginRef="navigator.camera",r.repo="https://github.com/apache/cordova-plugin-camera",r.platforms=["Android","Browser","iOS","Windows"],r}(T.KY),v=new O,F=a(2110);function h(o,r){if(1&o&&(e.TgZ(0,"ion-card")(1,"ion-card-content"),e._UZ(2,"img",5),e.qZA()()),2&o){const t=r.$implicit;e.xp6(2),e.s9C("src",t,e.LSH)}}function _(o,r){if(1&o&&(e.TgZ(0,"ion-list"),e.YNc(1,h,3,1,"ion-card",4),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.captureDataUrl)}}const E=[{path:"",component:(()=>{class o{constructor(t,n,i,s,l,u){this.navCtrl=t,this.navParams=n,this.router=i,this.camera=s,this.imgProvider=l,this.alertCtrl=u,this.clasificacionFoto=0,this.slideOpts={initialSlide:1,speed:400},this.usuario=JSON.parse(sessionStorage.getItem("usuario")),this.TraerFoto(),this.captureDataUrl=new Array}SacarFoto(){var t=this;return(0,p.Z)(function*(){const n={quality:50,destinationType:t.camera.DestinationType.DATA_URL,encodingType:t.camera.EncodingType.JPEG,mediaType:t.camera.MediaType.PICTURE,correctOrientation:!0};yield t.camera.getPicture(n).then(i=>{t.captureDataUrl.push("data:image/jpeg;base64,"+i),t.hayFotos=!0},i=>{t.alertCtrl.create({buttons:["Ok"]})})})()}GuardarFotos(){var t=this;return(0,p.Z)(function*(){let n=new D.b;yield t.captureDataUrl.forEach(function(){var s=(0,p.Z)(function*(l){let u="feas/"+Date.now();yield f.Z.storage().ref(u).putString(l,"data_url"),yield f.Z.storage().ref().child(u).getDownloadURL().then(function(){var A=(0,p.Z)(function*(y){n.path=y,n.nombre=u,n.usuario=t.usuario,yield t.imgProvider.GuardarData(n,"feas"),console.log(y),t.captureDataUrl.splice(0)});return function(y){return A.apply(this,arguments)}}()).catch(A=>{console.log(A)})});return function(l){return s.apply(this,arguments)}}())})()}TraerFoto(){this.imgProvider.TraerFotosFeas().subscribe(t=>{this.fotos=t.map(function(n,i){return n})}),console.log(this.fotos)}IrAListaFeas(){this.router.navigateByUrl("lista-feas")}MisFotos(){this.router.navigateByUrl("mis-fotos")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.SH),e.Y36(c.X1),e.Y36(d.F0),e.Y36(v),e.Y36(F.O),e.Y36(c.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-feas"]],decls:16,vars:2,consts:[["padding","",1,"fondo"],["ion-button","","color","light","outline","",3,"click"],["ion-button","","color","light","outline","",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-title"),e._uU(2,"Feas"),e.qZA()(),e.TgZ(3,"ion-content",0)(4,"button",1),e.NdJ("click",function(){return n.SacarFoto()}),e._uU(5,"Tomar foto"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"button",2),e.NdJ("click",function(){return n.GuardarFotos()}),e._uU(8," Guardar fotos"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"button",1),e.NdJ("click",function(){return n.IrAListaFeas()}),e._uU(11," Ver cosas feas "),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"button",1),e.NdJ("click",function(){return n.MisFotos()}),e._uU(14," Mis fotos"),e.qZA(),e.YNc(15,_,2,1,"ion-list",3),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",!n.hayFotos),e.xp6(8),e.Q6J("ngIf",n.hayFotos))},dependencies:[g.sg,g.O5,c.PM,c.FN,c.W2,c.Gu,c.q_,c.wd],styles:["page-feas[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center;justify-content:center}page-feas[_ngcontent-%COMP%]   .fondo[_ngcontent-%COMP%]{background-color:#548bae}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(E),d.Bz]}),o})();var U=a(8490);let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[U.V1],imports:[g.ez,R.u5,c.Pc,M]}),o})()}}]);