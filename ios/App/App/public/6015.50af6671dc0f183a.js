"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6015],{6015:(I,y,i)=>{i.r(y),i.d(y,{FeasPageModule:()=>U});var p=i(4755),R=i(5030),a=i(9972),T=i(96),u=i(5861),f=i(9260),D=i(7662),e=i(2223),m=i(655),g=i(8261),F=function(o){function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return(0,m.ZT)(r,o),r.prototype.getPicture=function(t){return(0,g.DM)(this,"getPicture",{callbackOrder:"reverse"},arguments)},r.prototype.cleanup=function(){return(0,g.DM)(this,"cleanup",{platforms:["iOS"]},arguments)},r.pluginName="Camera",r.plugin="cordova-plugin-camera",r.pluginRef="navigator.camera",r.repo="https://github.com/apache/cordova-plugin-camera",r.platforms=["Android","Browser","iOS","Windows"],r.decorators=[{type:e.GSi}],r}(g.KY),v=i(2110);function O(o,r){if(1&o&&(e.TgZ(0,"ion-card")(1,"ion-card-content"),e._UZ(2,"img",5),e.qZA()()),2&o){const t=r.$implicit;e.xp6(2),e.s9C("src",t,e.LSH)}}function h(o,r){if(1&o&&(e.TgZ(0,"ion-list"),e.YNc(1,O,3,1,"ion-card",4),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.captureDataUrl)}}const E=[{path:"",component:(()=>{class o{constructor(t,n,c,d,l,s){this.navCtrl=t,this.navParams=n,this.router=c,this.camera=d,this.imgProvider=l,this.alertCtrl=s,this.clasificacionFoto=0,this.slideOpts={initialSlide:1,speed:400},this.usuario=JSON.parse(sessionStorage.getItem("usuario")),this.TraerFoto(),this.captureDataUrl=new Array}SacarFoto(){var t=this;return(0,u.Z)(function*(){const n={quality:50,destinationType:t.camera.DestinationType.DATA_URL,encodingType:t.camera.EncodingType.JPEG,mediaType:t.camera.MediaType.PICTURE,correctOrientation:!0};yield t.camera.getPicture(n).then(c=>{t.captureDataUrl.push("data:image/jpeg;base64,"+c),t.hayFotos=!0},c=>{t.alertCtrl.create({buttons:["Ok"]})})})()}GuardarFotos(){var t=this;return(0,u.Z)(function*(){let n=new D.b;yield t.captureDataUrl.forEach(function(){var d=(0,u.Z)(function*(l){let s="feas/"+Date.now();yield f.Z.storage().ref(s).putString(l,"data_url"),yield f.Z.storage().ref().child(s).getDownloadURL().then(function(){var A=(0,u.Z)(function*(P){n.path=P,n.nombre=s,n.usuario=t.usuario,yield t.imgProvider.GuardarData(n,"feas"),console.log(P),t.captureDataUrl.splice(0)});return function(P){return A.apply(this,arguments)}}()).catch(A=>{console.log(A)})});return function(l){return d.apply(this,arguments)}}())})()}TraerFoto(){this.imgProvider.TraerFotosFeas().subscribe(t=>{this.fotos=t.map(function(n,c){return n})}),console.log(this.fotos)}IrAListaFeas(){this.router.navigateByUrl("lista-feas")}MisFotos(){this.router.navigateByUrl("mis-fotos")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.SH),e.Y36(a.X1),e.Y36(T.F0),e.Y36(F),e.Y36(v.O),e.Y36(a.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-feas"]],decls:16,vars:2,consts:[["padding","",1,"fondo"],["ion-button","","color","light","outline","",3,"click"],["ion-button","","color","light","outline","",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-title"),e._uU(2,"Feas"),e.qZA()(),e.TgZ(3,"ion-content",0)(4,"button",1),e.NdJ("click",function(){return n.SacarFoto()}),e._uU(5,"Tomar foto"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"button",2),e.NdJ("click",function(){return n.GuardarFotos()}),e._uU(8," Guardar fotos"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"button",1),e.NdJ("click",function(){return n.IrAListaFeas()}),e._uU(11," Ver cosas feas "),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"button",1),e.NdJ("click",function(){return n.MisFotos()}),e._uU(14," Mis fotos"),e.qZA(),e.YNc(15,h,2,1,"ion-list",3),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",!n.hayFotos),e.xp6(8),e.Q6J("ngIf",n.hayFotos))},dependencies:[p.sg,p.O5,a.PM,a.FN,a.W2,a.Gu,a.q_,a.wd],styles:["page-feas[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center;justify-content:center}page-feas[_ngcontent-%COMP%]   .fondo[_ngcontent-%COMP%]{background-color:#548bae}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild(E),T.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,R.u5,a.Pc,M]}),o})()}}]);