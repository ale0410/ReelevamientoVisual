"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{7904:(S,v,n)=>{n.d(v,{E:()=>f});var u=n(5861),s=n(89),r=n(2223);let f=(()=>{class a{constructor(i){this.firestore=i}addItem(i){const l=(0,s.hJ)(this.firestore,"relevamiento");return(0,s.ET)(l,i)}getAllItems(){var i=this;return(0,u.Z)(function*(){const l=(0,s.hJ)(i.firestore,"relevamiento"),d=yield(0,s.PL)((0,s.IO)(l,(0,s.Xo)("fecha","desc"))),m=[];return d.forEach(_=>{const h=_.data();m.push(h)}),m})()}getAllItemsType(i){var l=this;return(0,u.Z)(function*(){const d=(0,s.hJ)(l.firestore,"relevamiento"),m=yield(0,s.PL)((0,s.IO)(d,(0,s.ar)("tipo","==",i)));console.log(m);const _=[];return m.forEach(h=>{const T=h.data();_.push(T)}),_})()}updateItem(i){var l=this;return(0,u.Z)(function*(){const d=(0,s.JU)(l.firestore,"relevamiento",i.id);yield(0,s.pl)(d,i,{merge:!0})})()}}return a.\u0275fac=function(i){return new(i||a)(r.LFG(s.gg))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},1618:(S,v,n)=>{n.d(v,{L:()=>f});var u=n(5861),s=n(2223),r=n(9972);let f=(()=>{class a{constructor(i){this.toastController=i}presentToast(i,l){var d=this;return(0,u.Z)(function*(){yield(yield d.toastController.create({message:i,duration:2e3,color:l})).present()})()}}return a.\u0275fac=function(i){return new(i||a)(s.LFG(r.yF))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},9196:(S,v,n)=>{n.r(v),n.d(v,{Tab2PageModule:()=>M});var u=n(4755),s=n(5030),r=n(9972),f=n(5559),a=n(5861),t=n(2223),i=n(7622),l=n(7904),d=n(1618);function m(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-card",8),t._UZ(1,"img",9),t.TgZ(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4),t.TgZ(5,"ion-card-subtitle",11),t._uU(6),t.qZA()(),t.TgZ(7,"ion-card-subtitle",11),t._uU(8),t.qZA()(),t.TgZ(9,"ion-chip",12),t.NdJ("click",function(){const P=t.CHM(e).$implicit,y=t.oxw(2);return t.KtG(y.votar(P))}),t._uU(10,"Votar"),t.qZA()()}if(2&o){const e=g.$implicit;t.xp6(1),t.s9C("src",e.image,t.LSH),t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.fecha),t.xp6(2),t.hij("Tipo: ",e.tipo,"")}}function _(o,g){if(1&o&&(t.TgZ(0,"ion-list",6),t.YNc(1,m,11,4,"ion-card",7),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.items)}}const T=[{path:"",component:(()=>{class o{constructor(e,c,p,P,y){this.router=e,this.loginService=c,this.firestoresService=p,this.loadingCtrl=P,this.toastServiceService=y,this.items=[],this.uploading=!1,this.votedItems=[]}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}getAllData(){var e=this;return(0,a.Z)(function*(){e.uploading=!0;const c=yield e.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield c.present();try{e.items=yield e.firestoresService.getAllItems()}catch(p){console.log("Error al obtener datos:",p)}finally{e.uploading=!1,yield c.dismiss()}})()}votar(e){var c=this;return(0,a.Z)(function*(){try{if(c.votedItems.includes(e.id))return void c.toastServiceService.presentToast("Su voto ya ha sido cargado","danger");e.votos++,yield c.firestoresService.updateItem(e),c.votedItems.push(e.id)}catch(p){console.log("Error al votar:",p)}})()}formatFecha(e){return e.toLocaleDateString()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(i.e),t.Y36(l.E),t.Y36(r.HT),t.Y36(d.L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tab2"]],decls:9,vars:3,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],["style","background-color: #022c45;",4,"ngIf"],[2,"background-color","#022c45"],["class","custom-card",4,"ngFor","ngForOf"],[1,"custom-card"],["alt","Silhouette of mountains",3,"src"],[2,"color","#EFF3F5","display","flex","justify-content","space-between"],[2,"color","#C8CDD0"],["color","success",1,"custom-chip",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return c.logout()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6," Cosas Lindas / Cosas Feas "),t.qZA()()(),t.TgZ(7,"ion-content",4),t.YNc(8,_,2,1,"ion-list",5),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",!c.uploading))},dependencies:[u.sg,u.O5,r.YG,r.Sm,r.PM,r.Zi,r.tO,r.Dq,r.hM,r.W2,r.Gu,r.gu,r.q_,r.wd,r.sr],styles:['@charset "UTF-8";.title[_ngcontent-%COMP%]{font-size:24px;font-family:Arial,sans-serif}.custom-card[_ngcontent-%COMP%]{margin-bottom:10px;background-color:#192229;border-radius:10px;box-shadow:9px 14px 13px -8px #3d3c3c}.card-item[_ngcontent-%COMP%]{align-items:center}.custom-chip[_ngcontent-%COMP%]{font-size:20px;padding:1.3rem}ion-content[_ngcontent-%COMP%]{--background:#548bae}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}']}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.Bz.forChild(T),f.Bz]}),o})();var E=n(581);let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,s.u5,r.Pc,E.e,C]}),o})()}}]);