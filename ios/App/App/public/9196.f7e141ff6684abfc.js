"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{7904:(F,h,a)=>{a.d(h,{E:()=>e});var d=a(5861),i=a(89),s=a(2223),v=a(7622),u=a(5197);let e=(()=>{class c{constructor(r,l,g){this.firestore=r,this.authService=l,this.db=g;const p=(0,i.hJ)(this.firestore,"relevamiento");this.items$=(0,i.BS)(p)}getUsers(){var r=this;return(0,d.Z)(function*(){return r.db.list("users").valueChanges()})()}addItem(r){var l=this;return(0,d.Z)(function*(){const g=(0,i.hJ)(l.firestore,"relevamiento");return(0,i.ET)(g,r)})()}getAllItems(){var r=this;return(0,d.Z)(function*(){const l=(0,i.hJ)(r.firestore,"relevamiento"),g=yield(0,i.PL)((0,i.IO)(l,(0,i.Xo)("fecha","desc"))),p=[];return g.forEach(b=>{const T=b.data();p.push(T)}),p})()}getAllItemsType(r){var l=this;return(0,d.Z)(function*(){const g=(0,i.hJ)(l.firestore,"relevamiento"),p=yield(0,i.PL)((0,i.IO)(g,(0,i.ar)("tipo","==",r)));console.log(p);const b=[];return p.forEach(T=>{const P=T.data();b.push(P)}),b})()}updateItem(r){var l=this;return(0,d.Z)(function*(){const g=(0,i.JU)(l.firestore,"relevamiento",r.id);yield(0,i.pl)(g,r,{merge:!0})})()}voteForPhoto(r){var l=this;return(0,d.Z)(function*(){l.firestore.toJSON.call("relevamiento")})()}}return c.\u0275fac=function(r){return new(r||c)(s.LFG(i.gg),s.LFG(v.e),s.LFG(u.KQ))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},1618:(F,h,a)=>{a.d(h,{L:()=>v});var d=a(5861),i=a(2223),s=a(9972);let v=(()=>{class u{constructor(c){this.toastController=c}presentToast(c,_){var r=this;return(0,d.Z)(function*(){yield(yield r.toastController.create({message:c,duration:2e3,color:_})).present()})()}}return u.\u0275fac=function(c){return new(c||u)(i.LFG(s.yF))},u.\u0275prov=i.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},9196:(F,h,a)=>{a.r(h),a.d(h,{Tab2PageModule:()=>C});var d=a(4755),i=a(5030),s=a(9972),v=a(5559),u=a(5861),e=a(2223),c=a(7622),_=a(7904),r=a(1618);function l(o,m){if(1&o&&(e.TgZ(0,"ion-item"),e._uU(1),e.qZA()),2&o){const t=m.$implicit;e.xp6(1),e.AsE(" ",t.name," - ",t.email," ")}}function g(o,m){if(1&o){const t=e.EpF();e.TgZ(0,"ion-card",8),e._UZ(1,"img",9),e.TgZ(2,"ion-card-header")(3,"ion-card-title",10),e._uU(4),e.TgZ(5,"ion-card-subtitle",11),e._uU(6),e.qZA()(),e.TgZ(7,"ion-card-subtitle",11),e._uU(8),e.qZA()(),e.TgZ(9,"ion-card-content")(10,"p"),e._uU(11),e.qZA()(),e.YNc(12,l,2,2,"ion-item",12),e.TgZ(13,"ion-chip",13),e.NdJ("click",function(){const y=e.CHM(t).$implicit,S=e.oxw(2);return e.KtG(S.votar(y))}),e._uU(14,"Votar"),e.qZA()()}if(2&o){const t=m.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.fecha),e.xp6(2),e.hij("Tipo: ",t.tipo,""),e.xp6(3),e.hij("Votos: ",t.votos,""),e.xp6(1),e.Q6J("ngForOf",n.users),e.xp6(1),e.ekj("voted",t.votos)}}function p(o,m){if(1&o&&(e.TgZ(0,"ion-list",6),e.YNc(1,g,15,8,"ion-card",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.items)}}const T=[{path:"",component:(()=>{class o{constructor(t,n,f,y,S){this.router=t,this.loginService=n,this.firestoresService=f,this.loadingCtrl=y,this.toastServiceService=S,this.items=[],this.uploading=!1,this.votedItems=[],this.photos=[{id:1,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747767040.jpg?alt=media&token=7ea66556-9af1-4b51-8f93-54d92d86acdf",votes:0,hasVoted:!1},{id:2,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694745581372.jpg?alt=media&token=d76132d7-7a4f-40e3-961d-52d7eed47621",votes:0,hasVoted:!1},{id:3,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747955885.jpg?alt=media&token=7b850040-a60b-45aa-9ddd-41740b6da6ab",votes:0,hasVoted:!1},{id:4,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747962018.jpg?alt=media&token=b971b8cf-2e1d-4cd1-b987-ed8a6801ec5e",votes:0,hasVoted:!1},{id:5,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694811266805.jpg?alt=media&token=c11321eb-cf44-4ba7-ab60-5c01d38fea7c",votes:0,hasVoted:!1},{id:6,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747958757.jpg?alt=media&token=58c6ea76-14da-41bb-b28b-64d5116a512f",votes:0,hasVoted:!1},{id:7,imageUrl:"uhttps://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747957319.jpg?alt=media&token=a3198cf6-6c0c-45ff-9e34-8d9d7528ed62",votes:0,hasVoted:!1},{id:8,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747763936.jpg?alt=media&token=a9ec911a-f6a2-4241-a656-33ac1364dbc3",votes:0,hasVoted:!1},{id:9,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694747960091.jpg?alt=media&token=aa325b21-14f8-4d08-ad1d-3aa1e68fb8f4",votes:0,hasVoted:!1},{id:10,imageUrl:"https://firebasestorage.googleapis.com/v0/b/reelevamientovisual2023.appspot.com/o/Galeria%2F1694750818770.jpg?alt=media&token=fedd361c-864e-400c-8be3-5b50789702c9",votes:0,hasVoted:!1}]}ngOnInit(){var t=this;return(0,u.Z)(function*(){(yield t.firestoresService.getUsers()).subscribe(n=>{t.users=n})})()}ionViewWillEnter(){this.getAllData()}logout(){this.loginService.signOut().then(()=>{this.router.navigate(["/login"])})}getAllData(){var t=this;return(0,u.Z)(function*(){t.uploading=!0;const n=yield t.loadingCtrl.create({spinner:"lines",cssClass:"custom-loading"});yield n.present();try{t.items=yield t.firestoresService.getAllItems()}catch(f){console.log("Error al obtener datos:",f)}finally{t.uploading=!1,yield n.dismiss()}})()}votar(t){var n=this;return(0,u.Z)(function*(){try{return 0==t.votos||null==t.votos?(t.votos=1,n.toastServiceService.presentToast("Su voto ya ha sido cargado","danger"),yield n.firestoresService.updateItem(t),void n.votedItems.push(t.id)):(t.votos=0,n.toastServiceService.presentToast("Su voto ya ha sido quitado","danger"),void(yield n.firestoresService.updateItem(t)))}catch(f){console.log("Error al votar:",f)}})()}votePhoto(t){t.hasVoted?(t.votes--,t.hasVoted=!1):(t.votes++,t.hasVoted=!0)}formatFecha(t){return t.toLocaleDateString()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.F0),e.Y36(c.e),e.Y36(_.E),e.Y36(s.HT),e.Y36(r.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tab2"]],decls:9,vars:3,consts:[[3,"translucent"],["slot","primary"],[3,"click"],["slot","icon-only","name","exit"],[3,"fullscreen"],["style","background-image: url('../../assets/images/floor.jpg');",4,"ngIf"],[2,"background-image","url('../../assets/images/floor.jpg')"],["class","custom-card",4,"ngFor","ngForOf"],[1,"custom-card"],["alt","Silhouette of mountains",3,"src"],[2,"color","#EFF3F5","display","flex","justify-content","space-between"],[2,"color","#C8CDD0"],[4,"ngFor","ngForOf"],[1,"custom-chip",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return n.logout()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Cosas Lindas / Cosas Feas "),e.qZA()()(),e.TgZ(7,"ion-content",4),e.YNc(8,p,2,1,"ion-list",5),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",!n.uploading))},dependencies:[d.sg,d.O5,s.YG,s.Sm,s.PM,s.FN,s.Zi,s.tO,s.Dq,s.hM,s.W2,s.Gu,s.gu,s.Ie,s.q_,s.wd,s.sr],styles:['@charset "UTF-8";.title[_ngcontent-%COMP%]{font-size:24px;font-family:Arial,sans-serif}.custom-card[_ngcontent-%COMP%]{margin-bottom:10px;background-color:#192229;border-radius:10px;box-shadow:9px 14px 13px -8px #3d3c3c}.card-item[_ngcontent-%COMP%]{align-items:center}.custom-chip[_ngcontent-%COMP%]{font-size:20px;padding:1.3rem;background-color:#20bd20}.voted[_ngcontent-%COMP%]{background-color:#0f0}.voted[_ngcontent-%COMP%]   .photo.hasVoted[_ngcontent-%COMP%]{background-color:#add8e6}ion-content[_ngcontent-%COMP%]{--background: url(floor.08978e6a924b6e32.jpg)}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(88, 84, 84, .663);color:#f0f8ff}']}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(T),v.Bz]}),o})();var O=a(581);let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,i.u5,s.Pc,O.e,P]}),o})()}}]);